(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function t(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerpolicy&&(s.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?s.credentials="include":r.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=t(r);fetch(r.href,s)}})();function cc(n,e){const t=Object.create(null),i=n.split(",");for(let r=0;r<i.length;r++)t[i[r]]=!0;return e?r=>!!t[r.toLowerCase()]:r=>!!t[r]}function cs(n){if(Ce(n)){const e={};for(let t=0;t<n.length;t++){const i=n[t],r=dt(i)?Fm(i):cs(i);if(r)for(const s in r)e[s]=r[s]}return e}else{if(dt(n))return n;if(Je(n))return n}}const Pm=/;(?![^(]*\))/g,Dm=/:([^]+)/,Bm=/\/\*.*?\*\//gs;function Fm(n){const e={};return n.replace(Bm,"").split(Pm).forEach(t=>{if(t){const i=t.split(Dm);i.length>1&&(e[i[0].trim()]=i[1].trim())}}),e}function us(n){let e="";if(dt(n))e=n;else if(Ce(n))for(let t=0;t<n.length;t++){const i=us(n[t]);i&&(e+=i+" ")}else if(Je(n))for(const t in n)n[t]&&(e+=t+" ");return e.trim()}const Nm="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Om=cc(Nm);function Xf(n){return!!n||n===""}function Um(n,e){if(n.length!==e.length)return!1;let t=!0;for(let i=0;t&&i<n.length;i++)t=$o(n[i],e[i]);return t}function $o(n,e){if(n===e)return!0;let t=pu(n),i=pu(e);if(t||i)return t&&i?n.getTime()===e.getTime():!1;if(t=hs(n),i=hs(e),t||i)return n===e;if(t=Ce(n),i=Ce(e),t||i)return t&&i?Um(n,e):!1;if(t=Je(n),i=Je(e),t||i){if(!t||!i)return!1;const r=Object.keys(n).length,s=Object.keys(e).length;if(r!==s)return!1;for(const o in n){const a=n.hasOwnProperty(o),l=e.hasOwnProperty(o);if(a&&!l||!a&&l||!$o(n[o],e[o]))return!1}}return String(n)===String(e)}function Vm(n,e){return n.findIndex(t=>$o(t,e))}const at=n=>dt(n)?n:n==null?"":Ce(n)||Je(n)&&(n.toString===ed||!Be(n.toString))?JSON.stringify(n,jf,2):String(n),jf=(n,e)=>e&&e.__v_isRef?jf(n,e.value):cr(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((t,[i,r])=>(t[`${i} =>`]=r,t),{})}:ta(e)?{[`Set(${e.size})`]:[...e.values()]}:Je(e)&&!Ce(e)&&!td(e)?String(e):e,je={},lr=[],an=()=>{},km=()=>!1,zm=/^on[^a-z]/,ea=n=>zm.test(n),uc=n=>n.startsWith("onUpdate:"),_t=Object.assign,hc=(n,e)=>{const t=n.indexOf(e);t>-1&&n.splice(t,1)},Hm=Object.prototype.hasOwnProperty,ke=(n,e)=>Hm.call(n,e),Ce=Array.isArray,cr=n=>Cs(n)==="[object Map]",ta=n=>Cs(n)==="[object Set]",pu=n=>Cs(n)==="[object Date]",Be=n=>typeof n=="function",dt=n=>typeof n=="string",hs=n=>typeof n=="symbol",Je=n=>n!==null&&typeof n=="object",$f=n=>Je(n)&&Be(n.then)&&Be(n.catch),ed=Object.prototype.toString,Cs=n=>ed.call(n),Gm=n=>Cs(n).slice(8,-1),td=n=>Cs(n)==="[object Object]",fc=n=>dt(n)&&n!=="NaN"&&n[0]!=="-"&&""+parseInt(n,10)===n,Co=cc(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),na=n=>{const e=Object.create(null);return t=>e[t]||(e[t]=n(t))},Wm=/-(\w)/g,xn=na(n=>n.replace(Wm,(e,t)=>t?t.toUpperCase():"")),qm=/\B([A-Z])/g,Er=na(n=>n.replace(qm,"-$1").toLowerCase()),ia=na(n=>n.charAt(0).toUpperCase()+n.slice(1)),Pa=na(n=>n?`on${ia(n)}`:""),fs=(n,e)=>!Object.is(n,e),Io=(n,e)=>{for(let t=0;t<n.length;t++)n[t](e)},Fo=(n,e,t)=>{Object.defineProperty(n,e,{configurable:!0,enumerable:!1,value:t})},nd=n=>{const e=parseFloat(n);return isNaN(e)?n:e},Qm=n=>{const e=dt(n)?Number(n):NaN;return isNaN(e)?n:e};let mu;const Km=()=>mu||(mu=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});let rn;class Ym{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this.parent=rn,!e&&rn&&(this.index=(rn.scopes||(rn.scopes=[])).push(this)-1)}get active(){return this._active}run(e){if(this._active){const t=rn;try{return rn=this,e()}finally{rn=t}}}on(){rn=this}off(){rn=this.parent}stop(e){if(this._active){let t,i;for(t=0,i=this.effects.length;t<i;t++)this.effects[t].stop();for(t=0,i=this.cleanups.length;t<i;t++)this.cleanups[t]();if(this.scopes)for(t=0,i=this.scopes.length;t<i;t++)this.scopes[t].stop(!0);if(!this.detached&&this.parent&&!e){const r=this.parent.scopes.pop();r&&r!==this&&(this.parent.scopes[this.index]=r,r.index=this.index)}this.parent=void 0,this._active=!1}}}function Zm(n,e=rn){e&&e.active&&e.effects.push(n)}function Jm(){return rn}const dc=n=>{const e=new Set(n);return e.w=0,e.n=0,e},id=n=>(n.w&li)>0,rd=n=>(n.n&li)>0,Xm=({deps:n})=>{if(n.length)for(let e=0;e<n.length;e++)n[e].w|=li},jm=n=>{const{deps:e}=n;if(e.length){let t=0;for(let i=0;i<e.length;i++){const r=e[i];id(r)&&!rd(r)?r.delete(n):e[t++]=r,r.w&=~li,r.n&=~li}e.length=t}},Nl=new WeakMap;let Jr=0,li=1;const Ol=30;let sn;const Ii=Symbol(""),Ul=Symbol("");class pc{constructor(e,t=null,i){this.fn=e,this.scheduler=t,this.active=!0,this.deps=[],this.parent=void 0,Zm(this,i)}run(){if(!this.active)return this.fn();let e=sn,t=ni;for(;e;){if(e===this)return;e=e.parent}try{return this.parent=sn,sn=this,ni=!0,li=1<<++Jr,Jr<=Ol?Xm(this):gu(this),this.fn()}finally{Jr<=Ol&&jm(this),li=1<<--Jr,sn=this.parent,ni=t,this.parent=void 0,this.deferStop&&this.stop()}}stop(){sn===this?this.deferStop=!0:this.active&&(gu(this),this.onStop&&this.onStop(),this.active=!1)}}function gu(n){const{deps:e}=n;if(e.length){for(let t=0;t<e.length;t++)e[t].delete(n);e.length=0}}let ni=!0;const sd=[];function Tr(){sd.push(ni),ni=!1}function Cr(){const n=sd.pop();ni=n===void 0?!0:n}function Ut(n,e,t){if(ni&&sn){let i=Nl.get(n);i||Nl.set(n,i=new Map);let r=i.get(t);r||i.set(t,r=dc()),od(r)}}function od(n,e){let t=!1;Jr<=Ol?rd(n)||(n.n|=li,t=!id(n)):t=!n.has(sn),t&&(n.add(sn),sn.deps.push(n))}function Un(n,e,t,i,r,s){const o=Nl.get(n);if(!o)return;let a=[];if(e==="clear")a=[...o.values()];else if(t==="length"&&Ce(n)){const l=Number(i);o.forEach((c,u)=>{(u==="length"||u>=l)&&a.push(c)})}else switch(t!==void 0&&a.push(o.get(t)),e){case"add":Ce(n)?fc(t)&&a.push(o.get("length")):(a.push(o.get(Ii)),cr(n)&&a.push(o.get(Ul)));break;case"delete":Ce(n)||(a.push(o.get(Ii)),cr(n)&&a.push(o.get(Ul)));break;case"set":cr(n)&&a.push(o.get(Ii));break}if(a.length===1)a[0]&&Vl(a[0]);else{const l=[];for(const c of a)c&&l.push(...c);Vl(dc(l))}}function Vl(n,e){const t=Ce(n)?n:[...n];for(const i of t)i.computed&&Au(i);for(const i of t)i.computed||Au(i)}function Au(n,e){(n!==sn||n.allowRecurse)&&(n.scheduler?n.scheduler():n.run())}const $m=cc("__proto__,__v_isRef,__isVue"),ad=new Set(Object.getOwnPropertyNames(Symbol).filter(n=>n!=="arguments"&&n!=="caller").map(n=>Symbol[n]).filter(hs)),eg=mc(),tg=mc(!1,!0),ng=mc(!0),vu=ig();function ig(){const n={};return["includes","indexOf","lastIndexOf"].forEach(e=>{n[e]=function(...t){const i=ze(this);for(let s=0,o=this.length;s<o;s++)Ut(i,"get",s+"");const r=i[e](...t);return r===-1||r===!1?i[e](...t.map(ze)):r}}),["push","pop","shift","unshift","splice"].forEach(e=>{n[e]=function(...t){Tr();const i=ze(this)[e].apply(this,t);return Cr(),i}}),n}function rg(n){const e=ze(this);return Ut(e,"has",n),e.hasOwnProperty(n)}function mc(n=!1,e=!1){return function(i,r,s){if(r==="__v_isReactive")return!n;if(r==="__v_isReadonly")return n;if(r==="__v_isShallow")return e;if(r==="__v_raw"&&s===(n?e?xg:fd:e?hd:ud).get(i))return i;const o=Ce(i);if(!n){if(o&&ke(vu,r))return Reflect.get(vu,r,s);if(r==="hasOwnProperty")return rg}const a=Reflect.get(i,r,s);return(hs(r)?ad.has(r):$m(r))||(n||Ut(i,"get",r),e)?a:It(a)?o&&fc(r)?a:a.value:Je(a)?n?dd(a):Is(a):a}}const sg=ld(),og=ld(!0);function ld(n=!1){return function(t,i,r,s){let o=t[i];if(Ar(o)&&It(o)&&!It(r))return!1;if(!n&&(!No(r)&&!Ar(r)&&(o=ze(o),r=ze(r)),!Ce(t)&&It(o)&&!It(r)))return o.value=r,!0;const a=Ce(t)&&fc(i)?Number(i)<t.length:ke(t,i),l=Reflect.set(t,i,r,s);return t===ze(s)&&(a?fs(r,o)&&Un(t,"set",i,r):Un(t,"add",i,r)),l}}function ag(n,e){const t=ke(n,e);n[e];const i=Reflect.deleteProperty(n,e);return i&&t&&Un(n,"delete",e,void 0),i}function lg(n,e){const t=Reflect.has(n,e);return(!hs(e)||!ad.has(e))&&Ut(n,"has",e),t}function cg(n){return Ut(n,"iterate",Ce(n)?"length":Ii),Reflect.ownKeys(n)}const cd={get:eg,set:sg,deleteProperty:ag,has:lg,ownKeys:cg},ug={get:ng,set(n,e){return!0},deleteProperty(n,e){return!0}},hg=_t({},cd,{get:tg,set:og}),gc=n=>n,ra=n=>Reflect.getPrototypeOf(n);function Os(n,e,t=!1,i=!1){n=n.__v_raw;const r=ze(n),s=ze(e);t||(e!==s&&Ut(r,"get",e),Ut(r,"get",s));const{has:o}=ra(r),a=i?gc:t?yc:ds;if(o.call(r,e))return a(n.get(e));if(o.call(r,s))return a(n.get(s));n!==r&&n.get(e)}function Us(n,e=!1){const t=this.__v_raw,i=ze(t),r=ze(n);return e||(n!==r&&Ut(i,"has",n),Ut(i,"has",r)),n===r?t.has(n):t.has(n)||t.has(r)}function Vs(n,e=!1){return n=n.__v_raw,!e&&Ut(ze(n),"iterate",Ii),Reflect.get(n,"size",n)}function yu(n){n=ze(n);const e=ze(this);return ra(e).has.call(e,n)||(e.add(n),Un(e,"add",n,n)),this}function xu(n,e){e=ze(e);const t=ze(this),{has:i,get:r}=ra(t);let s=i.call(t,n);s||(n=ze(n),s=i.call(t,n));const o=r.call(t,n);return t.set(n,e),s?fs(e,o)&&Un(t,"set",n,e):Un(t,"add",n,e),this}function _u(n){const e=ze(this),{has:t,get:i}=ra(e);let r=t.call(e,n);r||(n=ze(n),r=t.call(e,n)),i&&i.call(e,n);const s=e.delete(n);return r&&Un(e,"delete",n,void 0),s}function wu(){const n=ze(this),e=n.size!==0,t=n.clear();return e&&Un(n,"clear",void 0,void 0),t}function ks(n,e){return function(i,r){const s=this,o=s.__v_raw,a=ze(o),l=e?gc:n?yc:ds;return!n&&Ut(a,"iterate",Ii),o.forEach((c,u)=>i.call(r,l(c),l(u),s))}}function zs(n,e,t){return function(...i){const r=this.__v_raw,s=ze(r),o=cr(s),a=n==="entries"||n===Symbol.iterator&&o,l=n==="keys"&&o,c=r[n](...i),u=t?gc:e?yc:ds;return!e&&Ut(s,"iterate",l?Ul:Ii),{next(){const{value:h,done:f}=c.next();return f?{value:h,done:f}:{value:a?[u(h[0]),u(h[1])]:u(h),done:f}},[Symbol.iterator](){return this}}}}function Hn(n){return function(...e){return n==="delete"?!1:this}}function fg(){const n={get(s){return Os(this,s)},get size(){return Vs(this)},has:Us,add:yu,set:xu,delete:_u,clear:wu,forEach:ks(!1,!1)},e={get(s){return Os(this,s,!1,!0)},get size(){return Vs(this)},has:Us,add:yu,set:xu,delete:_u,clear:wu,forEach:ks(!1,!0)},t={get(s){return Os(this,s,!0)},get size(){return Vs(this,!0)},has(s){return Us.call(this,s,!0)},add:Hn("add"),set:Hn("set"),delete:Hn("delete"),clear:Hn("clear"),forEach:ks(!0,!1)},i={get(s){return Os(this,s,!0,!0)},get size(){return Vs(this,!0)},has(s){return Us.call(this,s,!0)},add:Hn("add"),set:Hn("set"),delete:Hn("delete"),clear:Hn("clear"),forEach:ks(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(s=>{n[s]=zs(s,!1,!1),t[s]=zs(s,!0,!1),e[s]=zs(s,!1,!0),i[s]=zs(s,!0,!0)}),[n,t,e,i]}const[dg,pg,mg,gg]=fg();function Ac(n,e){const t=e?n?gg:mg:n?pg:dg;return(i,r,s)=>r==="__v_isReactive"?!n:r==="__v_isReadonly"?n:r==="__v_raw"?i:Reflect.get(ke(t,r)&&r in i?t:i,r,s)}const Ag={get:Ac(!1,!1)},vg={get:Ac(!1,!0)},yg={get:Ac(!0,!1)},ud=new WeakMap,hd=new WeakMap,fd=new WeakMap,xg=new WeakMap;function _g(n){switch(n){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function wg(n){return n.__v_skip||!Object.isExtensible(n)?0:_g(Gm(n))}function Is(n){return Ar(n)?n:vc(n,!1,cd,Ag,ud)}function bg(n){return vc(n,!1,hg,vg,hd)}function dd(n){return vc(n,!0,ug,yg,fd)}function vc(n,e,t,i,r){if(!Je(n)||n.__v_raw&&!(e&&n.__v_isReactive))return n;const s=r.get(n);if(s)return s;const o=wg(n);if(o===0)return n;const a=new Proxy(n,o===2?i:t);return r.set(n,a),a}function ur(n){return Ar(n)?ur(n.__v_raw):!!(n&&n.__v_isReactive)}function Ar(n){return!!(n&&n.__v_isReadonly)}function No(n){return!!(n&&n.__v_isShallow)}function pd(n){return ur(n)||Ar(n)}function ze(n){const e=n&&n.__v_raw;return e?ze(e):n}function md(n){return Fo(n,"__v_skip",!0),n}const ds=n=>Je(n)?Is(n):n,yc=n=>Je(n)?dd(n):n;function gd(n){ni&&sn&&(n=ze(n),od(n.dep||(n.dep=dc())))}function Ad(n,e){n=ze(n);const t=n.dep;t&&Vl(t)}function It(n){return!!(n&&n.__v_isRef===!0)}function Mg(n){return vd(n,!1)}function Sg(n){return vd(n,!0)}function vd(n,e){return It(n)?n:new Eg(n,e)}class Eg{constructor(e,t){this.__v_isShallow=t,this.dep=void 0,this.__v_isRef=!0,this._rawValue=t?e:ze(e),this._value=t?e:ds(e)}get value(){return gd(this),this._value}set value(e){const t=this.__v_isShallow||No(e)||Ar(e);e=t?e:ze(e),fs(e,this._rawValue)&&(this._rawValue=e,this._value=t?e:ds(e),Ad(this))}}function hr(n){return It(n)?n.value:n}const Tg={get:(n,e,t)=>hr(Reflect.get(n,e,t)),set:(n,e,t,i)=>{const r=n[e];return It(r)&&!It(t)?(r.value=t,!0):Reflect.set(n,e,t,i)}};function yd(n){return ur(n)?n:new Proxy(n,Tg)}var xd;class Cg{constructor(e,t,i,r){this._setter=t,this.dep=void 0,this.__v_isRef=!0,this[xd]=!1,this._dirty=!0,this.effect=new pc(e,()=>{this._dirty||(this._dirty=!0,Ad(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!r,this.__v_isReadonly=i}get value(){const e=ze(this);return gd(e),(e._dirty||!e._cacheable)&&(e._dirty=!1,e._value=e.effect.run()),e._value}set value(e){this._setter(e)}}xd="__v_isReadonly";function Ig(n,e,t=!1){let i,r;const s=Be(n);return s?(i=n,r=an):(i=n.get,r=n.set),new Cg(i,r,s||!r,t)}function ii(n,e,t,i){let r;try{r=i?n(...i):n()}catch(s){sa(s,e,t)}return r}function Zt(n,e,t,i){if(Be(n)){const s=ii(n,e,t,i);return s&&$f(s)&&s.catch(o=>{sa(o,e,t)}),s}const r=[];for(let s=0;s<n.length;s++)r.push(Zt(n[s],e,t,i));return r}function sa(n,e,t,i=!0){const r=e?e.vnode:null;if(e){let s=e.parent;const o=e.proxy,a=t;for(;s;){const c=s.ec;if(c){for(let u=0;u<c.length;u++)if(c[u](n,o,a)===!1)return}s=s.parent}const l=e.appContext.config.errorHandler;if(l){ii(l,null,10,[n,o,a]);return}}Lg(n,t,r,i)}function Lg(n,e,t,i=!0){console.error(n)}let ps=!1,kl=!1;const Ct=[];let gn=0;const fr=[];let Fn=null,Mi=0;const _d=Promise.resolve();let xc=null;function wd(n){const e=xc||_d;return n?e.then(this?n.bind(this):n):e}function Rg(n){let e=gn+1,t=Ct.length;for(;e<t;){const i=e+t>>>1;ms(Ct[i])<n?e=i+1:t=i}return e}function _c(n){(!Ct.length||!Ct.includes(n,ps&&n.allowRecurse?gn+1:gn))&&(n.id==null?Ct.push(n):Ct.splice(Rg(n.id),0,n),bd())}function bd(){!ps&&!kl&&(kl=!0,xc=_d.then(Sd))}function Pg(n){const e=Ct.indexOf(n);e>gn&&Ct.splice(e,1)}function Dg(n){Ce(n)?fr.push(...n):(!Fn||!Fn.includes(n,n.allowRecurse?Mi+1:Mi))&&fr.push(n),bd()}function bu(n,e=ps?gn+1:0){for(;e<Ct.length;e++){const t=Ct[e];t&&t.pre&&(Ct.splice(e,1),e--,t())}}function Md(n){if(fr.length){const e=[...new Set(fr)];if(fr.length=0,Fn){Fn.push(...e);return}for(Fn=e,Fn.sort((t,i)=>ms(t)-ms(i)),Mi=0;Mi<Fn.length;Mi++)Fn[Mi]();Fn=null,Mi=0}}const ms=n=>n.id==null?1/0:n.id,Bg=(n,e)=>{const t=ms(n)-ms(e);if(t===0){if(n.pre&&!e.pre)return-1;if(e.pre&&!n.pre)return 1}return t};function Sd(n){kl=!1,ps=!0,Ct.sort(Bg);const e=an;try{for(gn=0;gn<Ct.length;gn++){const t=Ct[gn];t&&t.active!==!1&&ii(t,null,14)}}finally{gn=0,Ct.length=0,Md(),ps=!1,xc=null,(Ct.length||fr.length)&&Sd()}}function Fg(n,e,...t){if(n.isUnmounted)return;const i=n.vnode.props||je;let r=t;const s=e.startsWith("update:"),o=s&&e.slice(7);if(o&&o in i){const u=`${o==="modelValue"?"model":o}Modifiers`,{number:h,trim:f}=i[u]||je;f&&(r=t.map(d=>dt(d)?d.trim():d)),h&&(r=t.map(nd))}let a,l=i[a=Pa(e)]||i[a=Pa(xn(e))];!l&&s&&(l=i[a=Pa(Er(e))]),l&&Zt(l,n,6,r);const c=i[a+"Once"];if(c){if(!n.emitted)n.emitted={};else if(n.emitted[a])return;n.emitted[a]=!0,Zt(c,n,6,r)}}function Ed(n,e,t=!1){const i=e.emitsCache,r=i.get(n);if(r!==void 0)return r;const s=n.emits;let o={},a=!1;if(!Be(n)){const l=c=>{const u=Ed(c,e,!0);u&&(a=!0,_t(o,u))};!t&&e.mixins.length&&e.mixins.forEach(l),n.extends&&l(n.extends),n.mixins&&n.mixins.forEach(l)}return!s&&!a?(Je(n)&&i.set(n,null),null):(Ce(s)?s.forEach(l=>o[l]=null):_t(o,s),Je(n)&&i.set(n,o),o)}function oa(n,e){return!n||!ea(e)?!1:(e=e.slice(2).replace(/Once$/,""),ke(n,e[0].toLowerCase()+e.slice(1))||ke(n,Er(e))||ke(n,e))}let Mt=null,aa=null;function Oo(n){const e=Mt;return Mt=n,aa=n&&n.type.__scopeId||null,e}function wc(n){aa=n}function bc(){aa=null}function la(n,e=Mt,t){if(!e||n._n)return n;const i=(...r)=>{i._d&&Bu(-1);const s=Oo(e);let o;try{o=n(...r)}finally{Oo(s),i._d&&Bu(1)}return o};return i._n=!0,i._c=!0,i._d=!0,i}function Da(n){const{type:e,vnode:t,proxy:i,withProxy:r,props:s,propsOptions:[o],slots:a,attrs:l,emit:c,render:u,renderCache:h,data:f,setupState:d,ctx:m,inheritAttrs:_}=n;let E,p;const A=Oo(n);try{if(t.shapeFlag&4){const M=r||i;E=pn(u.call(M,M,h,s,d,f,m)),p=l}else{const M=e;E=pn(M.length>1?M(s,{attrs:l,slots:a,emit:c}):M(s,null)),p=e.props?l:Ng(l)}}catch(M){ts.length=0,sa(M,n,1),E=xt(Jt)}let R=E;if(p&&_!==!1){const M=Object.keys(p),{shapeFlag:L}=R;M.length&&L&7&&(o&&M.some(uc)&&(p=Og(p,o)),R=ci(R,p))}return t.dirs&&(R=ci(R),R.dirs=R.dirs?R.dirs.concat(t.dirs):t.dirs),t.transition&&(R.transition=t.transition),E=R,Oo(A),E}const Ng=n=>{let e;for(const t in n)(t==="class"||t==="style"||ea(t))&&((e||(e={}))[t]=n[t]);return e},Og=(n,e)=>{const t={};for(const i in n)(!uc(i)||!(i.slice(9)in e))&&(t[i]=n[i]);return t};function Ug(n,e,t){const{props:i,children:r,component:s}=n,{props:o,children:a,patchFlag:l}=e,c=s.emitsOptions;if(e.dirs||e.transition)return!0;if(t&&l>=0){if(l&1024)return!0;if(l&16)return i?Mu(i,o,c):!!o;if(l&8){const u=e.dynamicProps;for(let h=0;h<u.length;h++){const f=u[h];if(o[f]!==i[f]&&!oa(c,f))return!0}}}else return(r||a)&&(!a||!a.$stable)?!0:i===o?!1:i?o?Mu(i,o,c):!0:!!o;return!1}function Mu(n,e,t){const i=Object.keys(e);if(i.length!==Object.keys(n).length)return!0;for(let r=0;r<i.length;r++){const s=i[r];if(e[s]!==n[s]&&!oa(t,s))return!0}return!1}function Vg({vnode:n,parent:e},t){for(;e&&e.subTree===n;)(n=e.vnode).el=t,e=e.parent}const kg=n=>n.__isSuspense;function zg(n,e){e&&e.pendingBranch?Ce(n)?e.effects.push(...n):e.effects.push(n):Dg(n)}function Lo(n,e){if(ft){let t=ft.provides;const i=ft.parent&&ft.parent.provides;i===t&&(t=ft.provides=Object.create(i)),t[n]=e}}function On(n,e,t=!1){const i=ft||Mt;if(i){const r=i.parent==null?i.vnode.appContext&&i.vnode.appContext.provides:i.parent.provides;if(r&&n in r)return r[n];if(arguments.length>1)return t&&Be(e)?e.call(i.proxy):e}}const Hs={};function Ro(n,e,t){return Td(n,e,t)}function Td(n,e,{immediate:t,deep:i,flush:r,onTrack:s,onTrigger:o}=je){const a=Jm()===(ft==null?void 0:ft.scope)?ft:null;let l,c=!1,u=!1;if(It(n)?(l=()=>n.value,c=No(n)):ur(n)?(l=()=>n,i=!0):Ce(n)?(u=!0,c=n.some(R=>ur(R)||No(R)),l=()=>n.map(R=>{if(It(R))return R.value;if(ur(R))return Ci(R);if(Be(R))return ii(R,a,2)})):Be(n)?e?l=()=>ii(n,a,2):l=()=>{if(!(a&&a.isUnmounted))return h&&h(),Zt(n,a,3,[f])}:l=an,e&&i){const R=l;l=()=>Ci(R())}let h,f=R=>{h=p.onStop=()=>{ii(R,a,4)}},d;if(ys)if(f=an,e?t&&Zt(e,a,3,[l(),u?[]:void 0,f]):l(),r==="sync"){const R=DA();d=R.__watcherHandles||(R.__watcherHandles=[])}else return an;let m=u?new Array(n.length).fill(Hs):Hs;const _=()=>{if(!!p.active)if(e){const R=p.run();(i||c||(u?R.some((M,L)=>fs(M,m[L])):fs(R,m)))&&(h&&h(),Zt(e,a,3,[R,m===Hs?void 0:u&&m[0]===Hs?[]:m,f]),m=R)}else p.run()};_.allowRecurse=!!e;let E;r==="sync"?E=_:r==="post"?E=()=>Nt(_,a&&a.suspense):(_.pre=!0,a&&(_.id=a.uid),E=()=>_c(_));const p=new pc(l,E);e?t?_():m=p.run():r==="post"?Nt(p.run.bind(p),a&&a.suspense):p.run();const A=()=>{p.stop(),a&&a.scope&&hc(a.scope.effects,p)};return d&&d.push(A),A}function Hg(n,e,t){const i=this.proxy,r=dt(n)?n.includes(".")?Cd(i,n):()=>i[n]:n.bind(i,i);let s;Be(e)?s=e:(s=e.handler,t=e);const o=ft;vr(this);const a=Td(r,s.bind(i),t);return o?vr(o):Li(),a}function Cd(n,e){const t=e.split(".");return()=>{let i=n;for(let r=0;r<t.length&&i;r++)i=i[t[r]];return i}}function Ci(n,e){if(!Je(n)||n.__v_skip||(e=e||new Set,e.has(n)))return n;if(e.add(n),It(n))Ci(n.value,e);else if(Ce(n))for(let t=0;t<n.length;t++)Ci(n[t],e);else if(ta(n)||cr(n))n.forEach(t=>{Ci(t,e)});else if(td(n))for(const t in n)Ci(n[t],e);return n}function Id(){const n={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Pd(()=>{n.isMounted=!0}),Bd(()=>{n.isUnmounting=!0}),n}const qt=[Function,Array],Gg={name:"BaseTransition",props:{mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:qt,onEnter:qt,onAfterEnter:qt,onEnterCancelled:qt,onBeforeLeave:qt,onLeave:qt,onAfterLeave:qt,onLeaveCancelled:qt,onBeforeAppear:qt,onAppear:qt,onAfterAppear:qt,onAppearCancelled:qt},setup(n,{slots:e}){const t=Zd(),i=Id();let r;return()=>{const s=e.default&&Mc(e.default(),!0);if(!s||!s.length)return;let o=s[0];if(s.length>1){for(const _ of s)if(_.type!==Jt){o=_;break}}const a=ze(n),{mode:l}=a;if(i.isLeaving)return Ba(o);const c=Su(o);if(!c)return Ba(o);const u=gs(c,a,i,t);As(c,u);const h=t.subTree,f=h&&Su(h);let d=!1;const{getTransitionKey:m}=c.type;if(m){const _=m();r===void 0?r=_:_!==r&&(r=_,d=!0)}if(f&&f.type!==Jt&&(!Si(c,f)||d)){const _=gs(f,a,i,t);if(As(f,_),l==="out-in")return i.isLeaving=!0,_.afterLeave=()=>{i.isLeaving=!1,t.update.active!==!1&&t.update()},Ba(o);l==="in-out"&&c.type!==Jt&&(_.delayLeave=(E,p,A)=>{const R=Ld(i,f);R[String(f.key)]=f,E._leaveCb=()=>{p(),E._leaveCb=void 0,delete u.delayedLeave},u.delayedLeave=A})}return o}}},Wg=Gg;function Ld(n,e){const{leavingVNodes:t}=n;let i=t.get(e.type);return i||(i=Object.create(null),t.set(e.type,i)),i}function gs(n,e,t,i){const{appear:r,mode:s,persisted:o=!1,onBeforeEnter:a,onEnter:l,onAfterEnter:c,onEnterCancelled:u,onBeforeLeave:h,onLeave:f,onAfterLeave:d,onLeaveCancelled:m,onBeforeAppear:_,onAppear:E,onAfterAppear:p,onAppearCancelled:A}=e,R=String(n.key),M=Ld(t,n),L=(k,U)=>{k&&Zt(k,i,9,U)},D=(k,U)=>{const F=U[1];L(k,U),Ce(k)?k.every(S=>S.length<=1)&&F():k.length<=1&&F()},C={mode:s,persisted:o,beforeEnter(k){let U=a;if(!t.isMounted)if(r)U=_||a;else return;k._leaveCb&&k._leaveCb(!0);const F=M[R];F&&Si(n,F)&&F.el._leaveCb&&F.el._leaveCb(),L(U,[k])},enter(k){let U=l,F=c,S=u;if(!t.isMounted)if(r)U=E||l,F=p||c,S=A||u;else return;let G=!1;const b=k._enterCb=T=>{G||(G=!0,T?L(S,[k]):L(F,[k]),C.delayedLeave&&C.delayedLeave(),k._enterCb=void 0)};U?D(U,[k,b]):b()},leave(k,U){const F=String(n.key);if(k._enterCb&&k._enterCb(!0),t.isUnmounting)return U();L(h,[k]);let S=!1;const G=k._leaveCb=b=>{S||(S=!0,U(),b?L(m,[k]):L(d,[k]),k._leaveCb=void 0,M[F]===n&&delete M[F])};M[F]=n,f?D(f,[k,G]):G()},clone(k){return gs(k,e,t,i)}};return C}function Ba(n){if(ca(n))return n=ci(n),n.children=null,n}function Su(n){return ca(n)?n.children?n.children[0]:void 0:n}function As(n,e){n.shapeFlag&6&&n.component?As(n.component.subTree,e):n.shapeFlag&128?(n.ssContent.transition=e.clone(n.ssContent),n.ssFallback.transition=e.clone(n.ssFallback)):n.transition=e}function Mc(n,e=!1,t){let i=[],r=0;for(let s=0;s<n.length;s++){let o=n[s];const a=t==null?o.key:String(t)+String(o.key!=null?o.key:s);o.type===Ue?(o.patchFlag&128&&r++,i=i.concat(Mc(o.children,e,a))):(e||o.type!==Jt)&&i.push(a!=null?ci(o,{key:a}):o)}if(r>1)for(let s=0;s<i.length;s++)i[s].patchFlag=-2;return i}function Ls(n){return Be(n)?{setup:n,name:n.name}:n}const $r=n=>!!n.type.__asyncLoader,ca=n=>n.type.__isKeepAlive;function qg(n,e){Rd(n,"a",e)}function Qg(n,e){Rd(n,"da",e)}function Rd(n,e,t=ft){const i=n.__wdc||(n.__wdc=()=>{let r=t;for(;r;){if(r.isDeactivated)return;r=r.parent}return n()});if(ua(e,i,t),t){let r=t.parent;for(;r&&r.parent;)ca(r.parent.vnode)&&Kg(i,e,t,r),r=r.parent}}function Kg(n,e,t,i){const r=ua(e,n,i,!0);Fd(()=>{hc(i[e],r)},t)}function ua(n,e,t=ft,i=!1){if(t){const r=t[n]||(t[n]=[]),s=e.__weh||(e.__weh=(...o)=>{if(t.isUnmounted)return;Tr(),vr(t);const a=Zt(e,t,n,o);return Li(),Cr(),a});return i?r.unshift(s):r.push(s),s}}const Vn=n=>(e,t=ft)=>(!ys||n==="sp")&&ua(n,(...i)=>e(...i),t),Yg=Vn("bm"),Pd=Vn("m"),Zg=Vn("bu"),Dd=Vn("u"),Bd=Vn("bum"),Fd=Vn("um"),Jg=Vn("sp"),Xg=Vn("rtg"),jg=Vn("rtc");function $g(n,e=ft){ua("ec",n,e)}function lt(n,e){const t=Mt;if(t===null)return n;const i=da(t)||t.proxy,r=n.dirs||(n.dirs=[]);for(let s=0;s<e.length;s++){let[o,a,l,c=je]=e[s];o&&(Be(o)&&(o={mounted:o,updated:o}),o.deep&&Ci(a),r.push({dir:o,instance:i,value:a,oldValue:void 0,arg:l,modifiers:c}))}return n}function gi(n,e,t,i){const r=n.dirs,s=e&&e.dirs;for(let o=0;o<r.length;o++){const a=r[o];s&&(a.oldValue=s[o].value);let l=a.dir[i];l&&(Tr(),Zt(l,t,8,[n.el,a,n,e]),Cr())}}const Sc="components";function Eu(n,e){return Od(Sc,n,!0,e)||n}const Nd=Symbol();function eA(n){return dt(n)?Od(Sc,n,!1)||n:n||Nd}function Od(n,e,t=!0,i=!1){const r=Mt||ft;if(r){const s=r.type;if(n===Sc){const a=LA(s,!1);if(a&&(a===e||a===xn(e)||a===ia(xn(e))))return s}const o=Tu(r[n]||s[n],e)||Tu(r.appContext[n],e);return!o&&i?s:o}}function Tu(n,e){return n&&(n[e]||n[xn(e)]||n[ia(xn(e))])}function tt(n,e,t,i){let r;const s=t&&t[i];if(Ce(n)||dt(n)){r=new Array(n.length);for(let o=0,a=n.length;o<a;o++)r[o]=e(n[o],o,void 0,s&&s[o])}else if(typeof n=="number"){r=new Array(n);for(let o=0;o<n;o++)r[o]=e(o+1,o,void 0,s&&s[o])}else if(Je(n))if(n[Symbol.iterator])r=Array.from(n,(o,a)=>e(o,a,void 0,s&&s[a]));else{const o=Object.keys(n);r=new Array(o.length);for(let a=0,l=o.length;a<l;a++){const c=o[a];r[a]=e(n[c],c,a,s&&s[a])}}else r=[];return t&&(t[i]=r),r}function Ec(n,e,t={},i,r){if(Mt.isCE||Mt.parent&&$r(Mt.parent)&&Mt.parent.isCE)return e!=="default"&&(t.name=e),xt("slot",t,i&&i());let s=n[e];s&&s._c&&(s._d=!1),Me();const o=s&&Ud(s(t)),a=Rs(Ue,{key:t.key||o&&o.key||`_${e}`},o||(i?i():[]),o&&n._===1?64:-2);return!r&&a.scopeId&&(a.slotScopeIds=[a.scopeId+"-s"]),s&&s._c&&(s._d=!0),a}function Ud(n){return n.some(e=>Vo(e)?!(e.type===Jt||e.type===Ue&&!Ud(e.children)):!0)?n:null}const zl=n=>n?Jd(n)?da(n)||n.proxy:zl(n.parent):null,es=_t(Object.create(null),{$:n=>n,$el:n=>n.vnode.el,$data:n=>n.data,$props:n=>n.props,$attrs:n=>n.attrs,$slots:n=>n.slots,$refs:n=>n.refs,$parent:n=>zl(n.parent),$root:n=>zl(n.root),$emit:n=>n.emit,$options:n=>Tc(n),$forceUpdate:n=>n.f||(n.f=()=>_c(n.update)),$nextTick:n=>n.n||(n.n=wd.bind(n.proxy)),$watch:n=>Hg.bind(n)}),Fa=(n,e)=>n!==je&&!n.__isScriptSetup&&ke(n,e),tA={get({_:n},e){const{ctx:t,setupState:i,data:r,props:s,accessCache:o,type:a,appContext:l}=n;let c;if(e[0]!=="$"){const d=o[e];if(d!==void 0)switch(d){case 1:return i[e];case 2:return r[e];case 4:return t[e];case 3:return s[e]}else{if(Fa(i,e))return o[e]=1,i[e];if(r!==je&&ke(r,e))return o[e]=2,r[e];if((c=n.propsOptions[0])&&ke(c,e))return o[e]=3,s[e];if(t!==je&&ke(t,e))return o[e]=4,t[e];Hl&&(o[e]=0)}}const u=es[e];let h,f;if(u)return e==="$attrs"&&Ut(n,"get",e),u(n);if((h=a.__cssModules)&&(h=h[e]))return h;if(t!==je&&ke(t,e))return o[e]=4,t[e];if(f=l.config.globalProperties,ke(f,e))return f[e]},set({_:n},e,t){const{data:i,setupState:r,ctx:s}=n;return Fa(r,e)?(r[e]=t,!0):i!==je&&ke(i,e)?(i[e]=t,!0):ke(n.props,e)||e[0]==="$"&&e.slice(1)in n?!1:(s[e]=t,!0)},has({_:{data:n,setupState:e,accessCache:t,ctx:i,appContext:r,propsOptions:s}},o){let a;return!!t[o]||n!==je&&ke(n,o)||Fa(e,o)||(a=s[0])&&ke(a,o)||ke(i,o)||ke(es,o)||ke(r.config.globalProperties,o)},defineProperty(n,e,t){return t.get!=null?n._.accessCache[e]=0:ke(t,"value")&&this.set(n,e,t.value,null),Reflect.defineProperty(n,e,t)}};let Hl=!0;function nA(n){const e=Tc(n),t=n.proxy,i=n.ctx;Hl=!1,e.beforeCreate&&Cu(e.beforeCreate,n,"bc");const{data:r,computed:s,methods:o,watch:a,provide:l,inject:c,created:u,beforeMount:h,mounted:f,beforeUpdate:d,updated:m,activated:_,deactivated:E,beforeDestroy:p,beforeUnmount:A,destroyed:R,unmounted:M,render:L,renderTracked:D,renderTriggered:C,errorCaptured:k,serverPrefetch:U,expose:F,inheritAttrs:S,components:G,directives:b,filters:T}=e;if(c&&iA(c,i,null,n.appContext.config.unwrapInjectedRef),o)for(const w in o){const g=o[w];Be(g)&&(i[w]=g.bind(t))}if(r){const w=r.call(t,t);Je(w)&&(n.data=Is(w))}if(Hl=!0,s)for(const w in s){const g=s[w],N=Be(g)?g.bind(t,t):Be(g.get)?g.get.bind(t,t):an,z=!Be(g)&&Be(g.set)?g.set.bind(t):an,Z=Kt({get:N,set:z});Object.defineProperty(i,w,{enumerable:!0,configurable:!0,get:()=>Z.value,set:ee=>Z.value=ee})}if(a)for(const w in a)Vd(a[w],i,t,w);if(l){const w=Be(l)?l.call(t):l;Reflect.ownKeys(w).forEach(g=>{Lo(g,w[g])})}u&&Cu(u,n,"c");function v(w,g){Ce(g)?g.forEach(N=>w(N.bind(t))):g&&w(g.bind(t))}if(v(Yg,h),v(Pd,f),v(Zg,d),v(Dd,m),v(qg,_),v(Qg,E),v($g,k),v(jg,D),v(Xg,C),v(Bd,A),v(Fd,M),v(Jg,U),Ce(F))if(F.length){const w=n.exposed||(n.exposed={});F.forEach(g=>{Object.defineProperty(w,g,{get:()=>t[g],set:N=>t[g]=N})})}else n.exposed||(n.exposed={});L&&n.render===an&&(n.render=L),S!=null&&(n.inheritAttrs=S),G&&(n.components=G),b&&(n.directives=b)}function iA(n,e,t=an,i=!1){Ce(n)&&(n=Gl(n));for(const r in n){const s=n[r];let o;Je(s)?"default"in s?o=On(s.from||r,s.default,!0):o=On(s.from||r):o=On(s),It(o)&&i?Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>o.value,set:a=>o.value=a}):e[r]=o}}function Cu(n,e,t){Zt(Ce(n)?n.map(i=>i.bind(e.proxy)):n.bind(e.proxy),e,t)}function Vd(n,e,t,i){const r=i.includes(".")?Cd(t,i):()=>t[i];if(dt(n)){const s=e[n];Be(s)&&Ro(r,s)}else if(Be(n))Ro(r,n.bind(t));else if(Je(n))if(Ce(n))n.forEach(s=>Vd(s,e,t,i));else{const s=Be(n.handler)?n.handler.bind(t):e[n.handler];Be(s)&&Ro(r,s,n)}}function Tc(n){const e=n.type,{mixins:t,extends:i}=e,{mixins:r,optionsCache:s,config:{optionMergeStrategies:o}}=n.appContext,a=s.get(e);let l;return a?l=a:!r.length&&!t&&!i?l=e:(l={},r.length&&r.forEach(c=>Uo(l,c,o,!0)),Uo(l,e,o)),Je(e)&&s.set(e,l),l}function Uo(n,e,t,i=!1){const{mixins:r,extends:s}=e;s&&Uo(n,s,t,!0),r&&r.forEach(o=>Uo(n,o,t,!0));for(const o in e)if(!(i&&o==="expose")){const a=rA[o]||t&&t[o];n[o]=a?a(n[o],e[o]):e[o]}return n}const rA={data:Iu,props:_i,emits:_i,methods:_i,computed:_i,beforeCreate:Pt,created:Pt,beforeMount:Pt,mounted:Pt,beforeUpdate:Pt,updated:Pt,beforeDestroy:Pt,beforeUnmount:Pt,destroyed:Pt,unmounted:Pt,activated:Pt,deactivated:Pt,errorCaptured:Pt,serverPrefetch:Pt,components:_i,directives:_i,watch:oA,provide:Iu,inject:sA};function Iu(n,e){return e?n?function(){return _t(Be(n)?n.call(this,this):n,Be(e)?e.call(this,this):e)}:e:n}function sA(n,e){return _i(Gl(n),Gl(e))}function Gl(n){if(Ce(n)){const e={};for(let t=0;t<n.length;t++)e[n[t]]=n[t];return e}return n}function Pt(n,e){return n?[...new Set([].concat(n,e))]:e}function _i(n,e){return n?_t(_t(Object.create(null),n),e):e}function oA(n,e){if(!n)return e;if(!e)return n;const t=_t(Object.create(null),n);for(const i in e)t[i]=Pt(n[i],e[i]);return t}function aA(n,e,t,i=!1){const r={},s={};Fo(s,fa,1),n.propsDefaults=Object.create(null),kd(n,e,r,s);for(const o in n.propsOptions[0])o in r||(r[o]=void 0);t?n.props=i?r:bg(r):n.type.props?n.props=r:n.props=s,n.attrs=s}function lA(n,e,t,i){const{props:r,attrs:s,vnode:{patchFlag:o}}=n,a=ze(r),[l]=n.propsOptions;let c=!1;if((i||o>0)&&!(o&16)){if(o&8){const u=n.vnode.dynamicProps;for(let h=0;h<u.length;h++){let f=u[h];if(oa(n.emitsOptions,f))continue;const d=e[f];if(l)if(ke(s,f))d!==s[f]&&(s[f]=d,c=!0);else{const m=xn(f);r[m]=Wl(l,a,m,d,n,!1)}else d!==s[f]&&(s[f]=d,c=!0)}}}else{kd(n,e,r,s)&&(c=!0);let u;for(const h in a)(!e||!ke(e,h)&&((u=Er(h))===h||!ke(e,u)))&&(l?t&&(t[h]!==void 0||t[u]!==void 0)&&(r[h]=Wl(l,a,h,void 0,n,!0)):delete r[h]);if(s!==a)for(const h in s)(!e||!ke(e,h)&&!0)&&(delete s[h],c=!0)}c&&Un(n,"set","$attrs")}function kd(n,e,t,i){const[r,s]=n.propsOptions;let o=!1,a;if(e)for(let l in e){if(Co(l))continue;const c=e[l];let u;r&&ke(r,u=xn(l))?!s||!s.includes(u)?t[u]=c:(a||(a={}))[u]=c:oa(n.emitsOptions,l)||(!(l in i)||c!==i[l])&&(i[l]=c,o=!0)}if(s){const l=ze(t),c=a||je;for(let u=0;u<s.length;u++){const h=s[u];t[h]=Wl(r,l,h,c[h],n,!ke(c,h))}}return o}function Wl(n,e,t,i,r,s){const o=n[t];if(o!=null){const a=ke(o,"default");if(a&&i===void 0){const l=o.default;if(o.type!==Function&&Be(l)){const{propsDefaults:c}=r;t in c?i=c[t]:(vr(r),i=c[t]=l.call(null,e),Li())}else i=l}o[0]&&(s&&!a?i=!1:o[1]&&(i===""||i===Er(t))&&(i=!0))}return i}function zd(n,e,t=!1){const i=e.propsCache,r=i.get(n);if(r)return r;const s=n.props,o={},a=[];let l=!1;if(!Be(n)){const u=h=>{l=!0;const[f,d]=zd(h,e,!0);_t(o,f),d&&a.push(...d)};!t&&e.mixins.length&&e.mixins.forEach(u),n.extends&&u(n.extends),n.mixins&&n.mixins.forEach(u)}if(!s&&!l)return Je(n)&&i.set(n,lr),lr;if(Ce(s))for(let u=0;u<s.length;u++){const h=xn(s[u]);Lu(h)&&(o[h]=je)}else if(s)for(const u in s){const h=xn(u);if(Lu(h)){const f=s[u],d=o[h]=Ce(f)||Be(f)?{type:f}:Object.assign({},f);if(d){const m=Du(Boolean,d.type),_=Du(String,d.type);d[0]=m>-1,d[1]=_<0||m<_,(m>-1||ke(d,"default"))&&a.push(h)}}}const c=[o,a];return Je(n)&&i.set(n,c),c}function Lu(n){return n[0]!=="$"}function Ru(n){const e=n&&n.toString().match(/^\s*(function|class) (\w+)/);return e?e[2]:n===null?"null":""}function Pu(n,e){return Ru(n)===Ru(e)}function Du(n,e){return Ce(e)?e.findIndex(t=>Pu(t,n)):Be(e)&&Pu(e,n)?0:-1}const Hd=n=>n[0]==="_"||n==="$stable",Cc=n=>Ce(n)?n.map(pn):[pn(n)],cA=(n,e,t)=>{if(e._n)return e;const i=la((...r)=>Cc(e(...r)),t);return i._c=!1,i},Gd=(n,e,t)=>{const i=n._ctx;for(const r in n){if(Hd(r))continue;const s=n[r];if(Be(s))e[r]=cA(r,s,i);else if(s!=null){const o=Cc(s);e[r]=()=>o}}},Wd=(n,e)=>{const t=Cc(e);n.slots.default=()=>t},uA=(n,e)=>{if(n.vnode.shapeFlag&32){const t=e._;t?(n.slots=ze(e),Fo(e,"_",t)):Gd(e,n.slots={})}else n.slots={},e&&Wd(n,e);Fo(n.slots,fa,1)},hA=(n,e,t)=>{const{vnode:i,slots:r}=n;let s=!0,o=je;if(i.shapeFlag&32){const a=e._;a?t&&a===1?s=!1:(_t(r,e),!t&&a===1&&delete r._):(s=!e.$stable,Gd(e,r)),o=e}else e&&(Wd(n,e),o={default:1});if(s)for(const a in r)!Hd(a)&&!(a in o)&&delete r[a]};function qd(){return{app:null,config:{isNativeTag:km,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let fA=0;function dA(n,e){return function(i,r=null){Be(i)||(i=Object.assign({},i)),r!=null&&!Je(r)&&(r=null);const s=qd(),o=new Set;let a=!1;const l=s.app={_uid:fA++,_component:i,_props:r,_container:null,_context:s,_instance:null,version:BA,get config(){return s.config},set config(c){},use(c,...u){return o.has(c)||(c&&Be(c.install)?(o.add(c),c.install(l,...u)):Be(c)&&(o.add(c),c(l,...u))),l},mixin(c){return s.mixins.includes(c)||s.mixins.push(c),l},component(c,u){return u?(s.components[c]=u,l):s.components[c]},directive(c,u){return u?(s.directives[c]=u,l):s.directives[c]},mount(c,u,h){if(!a){const f=xt(i,r);return f.appContext=s,u&&e?e(f,c):n(f,c,h),a=!0,l._container=c,c.__vue_app__=l,da(f.component)||f.component.proxy}},unmount(){a&&(n(null,l._container),delete l._container.__vue_app__)},provide(c,u){return s.provides[c]=u,l}};return l}}function ql(n,e,t,i,r=!1){if(Ce(n)){n.forEach((f,d)=>ql(f,e&&(Ce(e)?e[d]:e),t,i,r));return}if($r(i)&&!r)return;const s=i.shapeFlag&4?da(i.component)||i.component.proxy:i.el,o=r?null:s,{i:a,r:l}=n,c=e&&e.r,u=a.refs===je?a.refs={}:a.refs,h=a.setupState;if(c!=null&&c!==l&&(dt(c)?(u[c]=null,ke(h,c)&&(h[c]=null)):It(c)&&(c.value=null)),Be(l))ii(l,a,12,[o,u]);else{const f=dt(l),d=It(l);if(f||d){const m=()=>{if(n.f){const _=f?ke(h,l)?h[l]:u[l]:l.value;r?Ce(_)&&hc(_,s):Ce(_)?_.includes(s)||_.push(s):f?(u[l]=[s],ke(h,l)&&(h[l]=u[l])):(l.value=[s],n.k&&(u[n.k]=l.value))}else f?(u[l]=o,ke(h,l)&&(h[l]=o)):d&&(l.value=o,n.k&&(u[n.k]=o))};o?(m.id=-1,Nt(m,t)):m()}}}const Nt=zg;function pA(n){return mA(n)}function mA(n,e){const t=Km();t.__VUE__=!0;const{insert:i,remove:r,patchProp:s,createElement:o,createText:a,createComment:l,setText:c,setElementText:u,parentNode:h,nextSibling:f,setScopeId:d=an,insertStaticContent:m}=n,_=(I,O,Q,J=null,X=null,B=null,P=!1,K=null,j=!!O.dynamicChildren)=>{if(I===O)return;I&&!Si(I,O)&&(J=ie(I),ee(I,X,B,!0),I=null),O.patchFlag===-2&&(j=!1,O.dynamicChildren=null);const{type:$,ref:oe,shapeFlag:ue}=O;switch($){case ha:E(I,O,Q,J);break;case Jt:p(I,O,Q,J);break;case Po:I==null&&A(O,Q,J,P);break;case Ue:G(I,O,Q,J,X,B,P,K,j);break;default:ue&1?L(I,O,Q,J,X,B,P,K,j):ue&6?b(I,O,Q,J,X,B,P,K,j):(ue&64||ue&128)&&$.process(I,O,Q,J,X,B,P,K,j,de)}oe!=null&&X&&ql(oe,I&&I.ref,B,O||I,!O)},E=(I,O,Q,J)=>{if(I==null)i(O.el=a(O.children),Q,J);else{const X=O.el=I.el;O.children!==I.children&&c(X,O.children)}},p=(I,O,Q,J)=>{I==null?i(O.el=l(O.children||""),Q,J):O.el=I.el},A=(I,O,Q,J)=>{[I.el,I.anchor]=m(I.children,O,Q,J,I.el,I.anchor)},R=({el:I,anchor:O},Q,J)=>{let X;for(;I&&I!==O;)X=f(I),i(I,Q,J),I=X;i(O,Q,J)},M=({el:I,anchor:O})=>{let Q;for(;I&&I!==O;)Q=f(I),r(I),I=Q;r(O)},L=(I,O,Q,J,X,B,P,K,j)=>{P=P||O.type==="svg",I==null?D(O,Q,J,X,B,P,K,j):U(I,O,X,B,P,K,j)},D=(I,O,Q,J,X,B,P,K)=>{let j,$;const{type:oe,props:ue,shapeFlag:ce,transition:Ae,dirs:ge}=I;if(j=I.el=o(I.type,B,ue&&ue.is,ue),ce&8?u(j,I.children):ce&16&&k(I.children,j,null,J,X,B&&oe!=="foreignObject",P,K),ge&&gi(I,null,J,"created"),C(j,I,I.scopeId,P,J),ue){for(const pe in ue)pe!=="value"&&!Co(pe)&&s(j,pe,null,ue[pe],B,I.children,J,X,W);"value"in ue&&s(j,"value",null,ue.value),($=ue.onVnodeBeforeMount)&&fn($,J,I)}ge&&gi(I,null,J,"beforeMount");const Y=(!X||X&&!X.pendingBranch)&&Ae&&!Ae.persisted;Y&&Ae.beforeEnter(j),i(j,O,Q),(($=ue&&ue.onVnodeMounted)||Y||ge)&&Nt(()=>{$&&fn($,J,I),Y&&Ae.enter(j),ge&&gi(I,null,J,"mounted")},X)},C=(I,O,Q,J,X)=>{if(Q&&d(I,Q),J)for(let B=0;B<J.length;B++)d(I,J[B]);if(X){let B=X.subTree;if(O===B){const P=X.vnode;C(I,P,P.scopeId,P.slotScopeIds,X.parent)}}},k=(I,O,Q,J,X,B,P,K,j=0)=>{for(let $=j;$<I.length;$++){const oe=I[$]=K?ei(I[$]):pn(I[$]);_(null,oe,O,Q,J,X,B,P,K)}},U=(I,O,Q,J,X,B,P)=>{const K=O.el=I.el;let{patchFlag:j,dynamicChildren:$,dirs:oe}=O;j|=I.patchFlag&16;const ue=I.props||je,ce=O.props||je;let Ae;Q&&Ai(Q,!1),(Ae=ce.onVnodeBeforeUpdate)&&fn(Ae,Q,O,I),oe&&gi(O,I,Q,"beforeUpdate"),Q&&Ai(Q,!0);const ge=X&&O.type!=="foreignObject";if($?F(I.dynamicChildren,$,K,Q,J,ge,B):P||g(I,O,K,null,Q,J,ge,B,!1),j>0){if(j&16)S(K,O,ue,ce,Q,J,X);else if(j&2&&ue.class!==ce.class&&s(K,"class",null,ce.class,X),j&4&&s(K,"style",ue.style,ce.style,X),j&8){const Y=O.dynamicProps;for(let pe=0;pe<Y.length;pe++){const le=Y[pe],_e=ue[le],be=ce[le];(be!==_e||le==="value")&&s(K,le,_e,be,X,I.children,Q,J,W)}}j&1&&I.children!==O.children&&u(K,O.children)}else!P&&$==null&&S(K,O,ue,ce,Q,J,X);((Ae=ce.onVnodeUpdated)||oe)&&Nt(()=>{Ae&&fn(Ae,Q,O,I),oe&&gi(O,I,Q,"updated")},J)},F=(I,O,Q,J,X,B,P)=>{for(let K=0;K<O.length;K++){const j=I[K],$=O[K],oe=j.el&&(j.type===Ue||!Si(j,$)||j.shapeFlag&70)?h(j.el):Q;_(j,$,oe,null,J,X,B,P,!0)}},S=(I,O,Q,J,X,B,P)=>{if(Q!==J){if(Q!==je)for(const K in Q)!Co(K)&&!(K in J)&&s(I,K,Q[K],null,P,O.children,X,B,W);for(const K in J){if(Co(K))continue;const j=J[K],$=Q[K];j!==$&&K!=="value"&&s(I,K,$,j,P,O.children,X,B,W)}"value"in J&&s(I,"value",Q.value,J.value)}},G=(I,O,Q,J,X,B,P,K,j)=>{const $=O.el=I?I.el:a(""),oe=O.anchor=I?I.anchor:a("");let{patchFlag:ue,dynamicChildren:ce,slotScopeIds:Ae}=O;Ae&&(K=K?K.concat(Ae):Ae),I==null?(i($,Q,J),i(oe,Q,J),k(O.children,Q,oe,X,B,P,K,j)):ue>0&&ue&64&&ce&&I.dynamicChildren?(F(I.dynamicChildren,ce,Q,X,B,P,K),(O.key!=null||X&&O===X.subTree)&&Qd(I,O,!0)):g(I,O,Q,oe,X,B,P,K,j)},b=(I,O,Q,J,X,B,P,K,j)=>{O.slotScopeIds=K,I==null?O.shapeFlag&512?X.ctx.activate(O,Q,J,P,j):T(O,Q,J,X,B,P,j):y(I,O,j)},T=(I,O,Q,J,X,B,P)=>{const K=I.component=SA(I,J,X);if(ca(I)&&(K.ctx.renderer=de),EA(K),K.asyncDep){if(X&&X.registerDep(K,v),!I.el){const j=K.subTree=xt(Jt);p(null,j,O,Q)}return}v(K,I,O,Q,X,B,P)},y=(I,O,Q)=>{const J=O.component=I.component;if(Ug(I,O,Q))if(J.asyncDep&&!J.asyncResolved){w(J,O,Q);return}else J.next=O,Pg(J.update),J.update();else O.el=I.el,J.vnode=O},v=(I,O,Q,J,X,B,P)=>{const K=()=>{if(I.isMounted){let{next:oe,bu:ue,u:ce,parent:Ae,vnode:ge}=I,Y=oe,pe;Ai(I,!1),oe?(oe.el=ge.el,w(I,oe,P)):oe=ge,ue&&Io(ue),(pe=oe.props&&oe.props.onVnodeBeforeUpdate)&&fn(pe,Ae,oe,ge),Ai(I,!0);const le=Da(I),_e=I.subTree;I.subTree=le,_(_e,le,h(_e.el),ie(_e),I,X,B),oe.el=le.el,Y===null&&Vg(I,le.el),ce&&Nt(ce,X),(pe=oe.props&&oe.props.onVnodeUpdated)&&Nt(()=>fn(pe,Ae,oe,ge),X)}else{let oe;const{el:ue,props:ce}=O,{bm:Ae,m:ge,parent:Y}=I,pe=$r(O);if(Ai(I,!1),Ae&&Io(Ae),!pe&&(oe=ce&&ce.onVnodeBeforeMount)&&fn(oe,Y,O),Ai(I,!0),ue&&ye){const le=()=>{I.subTree=Da(I),ye(ue,I.subTree,I,X,null)};pe?O.type.__asyncLoader().then(()=>!I.isUnmounted&&le()):le()}else{const le=I.subTree=Da(I);_(null,le,Q,J,I,X,B),O.el=le.el}if(ge&&Nt(ge,X),!pe&&(oe=ce&&ce.onVnodeMounted)){const le=O;Nt(()=>fn(oe,Y,le),X)}(O.shapeFlag&256||Y&&$r(Y.vnode)&&Y.vnode.shapeFlag&256)&&I.a&&Nt(I.a,X),I.isMounted=!0,O=Q=J=null}},j=I.effect=new pc(K,()=>_c($),I.scope),$=I.update=()=>j.run();$.id=I.uid,Ai(I,!0),$()},w=(I,O,Q)=>{O.component=I;const J=I.vnode.props;I.vnode=O,I.next=null,lA(I,O.props,J,Q),hA(I,O.children,Q),Tr(),bu(),Cr()},g=(I,O,Q,J,X,B,P,K,j=!1)=>{const $=I&&I.children,oe=I?I.shapeFlag:0,ue=O.children,{patchFlag:ce,shapeFlag:Ae}=O;if(ce>0){if(ce&128){z($,ue,Q,J,X,B,P,K,j);return}else if(ce&256){N($,ue,Q,J,X,B,P,K,j);return}}Ae&8?(oe&16&&W($,X,B),ue!==$&&u(Q,ue)):oe&16?Ae&16?z($,ue,Q,J,X,B,P,K,j):W($,X,B,!0):(oe&8&&u(Q,""),Ae&16&&k(ue,Q,J,X,B,P,K,j))},N=(I,O,Q,J,X,B,P,K,j)=>{I=I||lr,O=O||lr;const $=I.length,oe=O.length,ue=Math.min($,oe);let ce;for(ce=0;ce<ue;ce++){const Ae=O[ce]=j?ei(O[ce]):pn(O[ce]);_(I[ce],Ae,Q,null,X,B,P,K,j)}$>oe?W(I,X,B,!0,!1,ue):k(O,Q,J,X,B,P,K,j,ue)},z=(I,O,Q,J,X,B,P,K,j)=>{let $=0;const oe=O.length;let ue=I.length-1,ce=oe-1;for(;$<=ue&&$<=ce;){const Ae=I[$],ge=O[$]=j?ei(O[$]):pn(O[$]);if(Si(Ae,ge))_(Ae,ge,Q,null,X,B,P,K,j);else break;$++}for(;$<=ue&&$<=ce;){const Ae=I[ue],ge=O[ce]=j?ei(O[ce]):pn(O[ce]);if(Si(Ae,ge))_(Ae,ge,Q,null,X,B,P,K,j);else break;ue--,ce--}if($>ue){if($<=ce){const Ae=ce+1,ge=Ae<oe?O[Ae].el:J;for(;$<=ce;)_(null,O[$]=j?ei(O[$]):pn(O[$]),Q,ge,X,B,P,K,j),$++}}else if($>ce)for(;$<=ue;)ee(I[$],X,B,!0),$++;else{const Ae=$,ge=$,Y=new Map;for($=ge;$<=ce;$++){const st=O[$]=j?ei(O[$]):pn(O[$]);st.key!=null&&Y.set(st.key,$)}let pe,le=0;const _e=ce-ge+1;let be=!1,Ne=0;const rt=new Array(_e);for($=0;$<_e;$++)rt[$]=0;for($=Ae;$<=ue;$++){const st=I[$];if(le>=_e){ee(st,X,B,!0);continue}let He;if(st.key!=null)He=Y.get(st.key);else for(pe=ge;pe<=ce;pe++)if(rt[pe-ge]===0&&Si(st,O[pe])){He=pe;break}He===void 0?ee(st,X,B,!0):(rt[He-ge]=$+1,He>=Ne?Ne=He:be=!0,_(st,O[He],Q,null,X,B,P,K,j),le++)}const mt=be?gA(rt):lr;for(pe=mt.length-1,$=_e-1;$>=0;$--){const st=ge+$,He=O[st],Wt=st+1<oe?O[st+1].el:J;rt[$]===0?_(null,He,Q,Wt,X,B,P,K,j):be&&(pe<0||$!==mt[pe]?Z(He,Q,Wt,2):pe--)}}},Z=(I,O,Q,J,X=null)=>{const{el:B,type:P,transition:K,children:j,shapeFlag:$}=I;if($&6){Z(I.component.subTree,O,Q,J);return}if($&128){I.suspense.move(O,Q,J);return}if($&64){P.move(I,O,Q,de);return}if(P===Ue){i(B,O,Q);for(let ue=0;ue<j.length;ue++)Z(j[ue],O,Q,J);i(I.anchor,O,Q);return}if(P===Po){R(I,O,Q);return}if(J!==2&&$&1&&K)if(J===0)K.beforeEnter(B),i(B,O,Q),Nt(()=>K.enter(B),X);else{const{leave:ue,delayLeave:ce,afterLeave:Ae}=K,ge=()=>i(B,O,Q),Y=()=>{ue(B,()=>{ge(),Ae&&Ae()})};ce?ce(B,ge,Y):Y()}else i(B,O,Q)},ee=(I,O,Q,J=!1,X=!1)=>{const{type:B,props:P,ref:K,children:j,dynamicChildren:$,shapeFlag:oe,patchFlag:ue,dirs:ce}=I;if(K!=null&&ql(K,null,Q,I,!0),oe&256){O.ctx.deactivate(I);return}const Ae=oe&1&&ce,ge=!$r(I);let Y;if(ge&&(Y=P&&P.onVnodeBeforeUnmount)&&fn(Y,O,I),oe&6)H(I.component,Q,J);else{if(oe&128){I.suspense.unmount(Q,J);return}Ae&&gi(I,null,O,"beforeUnmount"),oe&64?I.type.remove(I,O,Q,X,de,J):$&&(B!==Ue||ue>0&&ue&64)?W($,O,Q,!1,!0):(B===Ue&&ue&384||!X&&oe&16)&&W(j,O,Q),J&&te(I)}(ge&&(Y=P&&P.onVnodeUnmounted)||Ae)&&Nt(()=>{Y&&fn(Y,O,I),Ae&&gi(I,null,O,"unmounted")},Q)},te=I=>{const{type:O,el:Q,anchor:J,transition:X}=I;if(O===Ue){se(Q,J);return}if(O===Po){M(I);return}const B=()=>{r(Q),X&&!X.persisted&&X.afterLeave&&X.afterLeave()};if(I.shapeFlag&1&&X&&!X.persisted){const{leave:P,delayLeave:K}=X,j=()=>P(Q,B);K?K(I.el,B,j):j()}else B()},se=(I,O)=>{let Q;for(;I!==O;)Q=f(I),r(I),I=Q;r(O)},H=(I,O,Q)=>{const{bum:J,scope:X,update:B,subTree:P,um:K}=I;J&&Io(J),X.stop(),B&&(B.active=!1,ee(P,I,O,Q)),K&&Nt(K,O),Nt(()=>{I.isUnmounted=!0},O),O&&O.pendingBranch&&!O.isUnmounted&&I.asyncDep&&!I.asyncResolved&&I.suspenseId===O.pendingId&&(O.deps--,O.deps===0&&O.resolve())},W=(I,O,Q,J=!1,X=!1,B=0)=>{for(let P=B;P<I.length;P++)ee(I[P],O,Q,J,X)},ie=I=>I.shapeFlag&6?ie(I.component.subTree):I.shapeFlag&128?I.suspense.next():f(I.anchor||I.el),fe=(I,O,Q)=>{I==null?O._vnode&&ee(O._vnode,null,null,!0):_(O._vnode||null,I,O,null,null,null,Q),bu(),Md(),O._vnode=I},de={p:_,um:ee,m:Z,r:te,mt:T,mc:k,pc:g,pbc:F,n:ie,o:n};let me,ye;return e&&([me,ye]=e(de)),{render:fe,hydrate:me,createApp:dA(fe,me)}}function Ai({effect:n,update:e},t){n.allowRecurse=e.allowRecurse=t}function Qd(n,e,t=!1){const i=n.children,r=e.children;if(Ce(i)&&Ce(r))for(let s=0;s<i.length;s++){const o=i[s];let a=r[s];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=r[s]=ei(r[s]),a.el=o.el),t||Qd(o,a)),a.type===ha&&(a.el=o.el)}}function gA(n){const e=n.slice(),t=[0];let i,r,s,o,a;const l=n.length;for(i=0;i<l;i++){const c=n[i];if(c!==0){if(r=t[t.length-1],n[r]<c){e[i]=r,t.push(i);continue}for(s=0,o=t.length-1;s<o;)a=s+o>>1,n[t[a]]<c?s=a+1:o=a;c<n[t[s]]&&(s>0&&(e[i]=t[s-1]),t[s]=i)}}for(s=t.length,o=t[s-1];s-- >0;)t[s]=o,o=e[o];return t}const AA=n=>n.__isTeleport,Ue=Symbol(void 0),ha=Symbol(void 0),Jt=Symbol(void 0),Po=Symbol(void 0),ts=[];let on=null;function Me(n=!1){ts.push(on=n?null:[])}function vA(){ts.pop(),on=ts[ts.length-1]||null}let vs=1;function Bu(n){vs+=n}function Kd(n){return n.dynamicChildren=vs>0?on||lr:null,vA(),vs>0&&on&&on.push(n),n}function Ee(n,e,t,i,r,s){return Kd(he(n,e,t,i,r,s,!0))}function Rs(n,e,t,i,r){return Kd(xt(n,e,t,i,r,!0))}function Vo(n){return n?n.__v_isVNode===!0:!1}function Si(n,e){return n.type===e.type&&n.key===e.key}const fa="__vInternal",Yd=({key:n})=>n!=null?n:null,Do=({ref:n,ref_key:e,ref_for:t})=>n!=null?dt(n)||It(n)||Be(n)?{i:Mt,r:n,k:e,f:!!t}:n:null;function he(n,e=null,t=null,i=0,r=null,s=n===Ue?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:n,props:e,key:e&&Yd(e),ref:e&&Do(e),scopeId:aa,slotScopeIds:null,children:t,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:i,dynamicProps:r,dynamicChildren:null,appContext:null,ctx:Mt};return a?(Lc(l,t),s&128&&n.normalize(l)):t&&(l.shapeFlag|=dt(t)?8:16),vs>0&&!o&&on&&(l.patchFlag>0||s&6)&&l.patchFlag!==32&&on.push(l),l}const xt=yA;function yA(n,e=null,t=null,i=0,r=null,s=!1){if((!n||n===Nd)&&(n=Jt),Vo(n)){const a=ci(n,e,!0);return t&&Lc(a,t),vs>0&&!s&&on&&(a.shapeFlag&6?on[on.indexOf(n)]=a:on.push(a)),a.patchFlag|=-2,a}if(RA(n)&&(n=n.__vccOpts),e){e=xA(e);let{class:a,style:l}=e;a&&!dt(a)&&(e.class=us(a)),Je(l)&&(pd(l)&&!Ce(l)&&(l=_t({},l)),e.style=cs(l))}const o=dt(n)?1:kg(n)?128:AA(n)?64:Je(n)?4:Be(n)?2:0;return he(n,e,t,i,r,o,s,!0)}function xA(n){return n?pd(n)||fa in n?_t({},n):n:null}function ci(n,e,t=!1){const{props:i,ref:r,patchFlag:s,children:o}=n,a=e?wA(i||{},e):i;return{__v_isVNode:!0,__v_skip:!0,type:n.type,props:a,key:a&&Yd(a),ref:e&&e.ref?t&&r?Ce(r)?r.concat(Do(e)):[r,Do(e)]:Do(e):r,scopeId:n.scopeId,slotScopeIds:n.slotScopeIds,children:o,target:n.target,targetAnchor:n.targetAnchor,staticCount:n.staticCount,shapeFlag:n.shapeFlag,patchFlag:e&&n.type!==Ue?s===-1?16:s|16:s,dynamicProps:n.dynamicProps,dynamicChildren:n.dynamicChildren,appContext:n.appContext,dirs:n.dirs,transition:n.transition,component:n.component,suspense:n.suspense,ssContent:n.ssContent&&ci(n.ssContent),ssFallback:n.ssFallback&&ci(n.ssFallback),el:n.el,anchor:n.anchor,ctx:n.ctx,ce:n.ce}}function _A(n=" ",e=0){return xt(ha,null,n,e)}function Ic(n,e){const t=xt(Po,null,n);return t.staticCount=e,t}function Ql(n="",e=!1){return e?(Me(),Rs(Jt,null,n)):xt(Jt,null,n)}function pn(n){return n==null||typeof n=="boolean"?xt(Jt):Ce(n)?xt(Ue,null,n.slice()):typeof n=="object"?ei(n):xt(ha,null,String(n))}function ei(n){return n.el===null&&n.patchFlag!==-1||n.memo?n:ci(n)}function Lc(n,e){let t=0;const{shapeFlag:i}=n;if(e==null)e=null;else if(Ce(e))t=16;else if(typeof e=="object")if(i&65){const r=e.default;r&&(r._c&&(r._d=!1),Lc(n,r()),r._c&&(r._d=!0));return}else{t=32;const r=e._;!r&&!(fa in e)?e._ctx=Mt:r===3&&Mt&&(Mt.slots._===1?e._=1:(e._=2,n.patchFlag|=1024))}else Be(e)?(e={default:e,_ctx:Mt},t=32):(e=String(e),i&64?(t=16,e=[_A(e)]):t=8);n.children=e,n.shapeFlag|=t}function wA(...n){const e={};for(let t=0;t<n.length;t++){const i=n[t];for(const r in i)if(r==="class")e.class!==i.class&&(e.class=us([e.class,i.class]));else if(r==="style")e.style=cs([e.style,i.style]);else if(ea(r)){const s=e[r],o=i[r];o&&s!==o&&!(Ce(s)&&s.includes(o))&&(e[r]=s?[].concat(s,o):o)}else r!==""&&(e[r]=i[r])}return e}function fn(n,e,t,i=null){Zt(n,e,7,[t,i])}const bA=qd();let MA=0;function SA(n,e,t){const i=n.type,r=(e?e.appContext:n.appContext)||bA,s={uid:MA++,vnode:n,type:i,parent:e,appContext:r,root:null,next:null,subTree:null,effect:null,update:null,scope:new Ym(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(r.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:zd(i,r),emitsOptions:Ed(i,r),emit:null,emitted:null,propsDefaults:je,inheritAttrs:i.inheritAttrs,ctx:je,data:je,props:je,attrs:je,slots:je,refs:je,setupState:je,setupContext:null,suspense:t,suspenseId:t?t.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return s.ctx={_:s},s.root=e?e.root:s,s.emit=Fg.bind(null,s),n.ce&&n.ce(s),s}let ft=null;const Zd=()=>ft||Mt,vr=n=>{ft=n,n.scope.on()},Li=()=>{ft&&ft.scope.off(),ft=null};function Jd(n){return n.vnode.shapeFlag&4}let ys=!1;function EA(n,e=!1){ys=e;const{props:t,children:i}=n.vnode,r=Jd(n);aA(n,t,r,e),uA(n,i);const s=r?TA(n,e):void 0;return ys=!1,s}function TA(n,e){const t=n.type;n.accessCache=Object.create(null),n.proxy=md(new Proxy(n.ctx,tA));const{setup:i}=t;if(i){const r=n.setupContext=i.length>1?IA(n):null;vr(n),Tr();const s=ii(i,n,0,[n.props,r]);if(Cr(),Li(),$f(s)){if(s.then(Li,Li),e)return s.then(o=>{Fu(n,o,e)}).catch(o=>{sa(o,n,0)});n.asyncDep=s}else Fu(n,s,e)}else Xd(n,e)}function Fu(n,e,t){Be(e)?n.type.__ssrInlineRender?n.ssrRender=e:n.render=e:Je(e)&&(n.setupState=yd(e)),Xd(n,t)}let Nu;function Xd(n,e,t){const i=n.type;if(!n.render){if(!e&&Nu&&!i.render){const r=i.template||Tc(n).template;if(r){const{isCustomElement:s,compilerOptions:o}=n.appContext.config,{delimiters:a,compilerOptions:l}=i,c=_t(_t({isCustomElement:s,delimiters:a},o),l);i.render=Nu(r,c)}}n.render=i.render||an}vr(n),Tr(),nA(n),Cr(),Li()}function CA(n){return new Proxy(n.attrs,{get(e,t){return Ut(n,"get","$attrs"),e[t]}})}function IA(n){const e=i=>{n.exposed=i||{}};let t;return{get attrs(){return t||(t=CA(n))},slots:n.slots,emit:n.emit,expose:e}}function da(n){if(n.exposed)return n.exposeProxy||(n.exposeProxy=new Proxy(yd(md(n.exposed)),{get(e,t){if(t in e)return e[t];if(t in es)return es[t](n)},has(e,t){return t in e||t in es}}))}function LA(n,e=!0){return Be(n)?n.displayName||n.name:n.name||e&&n.__name}function RA(n){return Be(n)&&"__vccOpts"in n}const Kt=(n,e)=>Ig(n,e,ys);function jd(n,e,t){const i=arguments.length;return i===2?Je(e)&&!Ce(e)?Vo(e)?xt(n,null,[e]):xt(n,e):xt(n,null,e):(i>3?t=Array.prototype.slice.call(arguments,2):i===3&&Vo(t)&&(t=[t]),xt(n,e,t))}const PA=Symbol(""),DA=()=>On(PA),BA="3.2.47",FA="http://www.w3.org/2000/svg",Ei=typeof document<"u"?document:null,Ou=Ei&&Ei.createElement("template"),NA={insert:(n,e,t)=>{e.insertBefore(n,t||null)},remove:n=>{const e=n.parentNode;e&&e.removeChild(n)},createElement:(n,e,t,i)=>{const r=e?Ei.createElementNS(FA,n):Ei.createElement(n,t?{is:t}:void 0);return n==="select"&&i&&i.multiple!=null&&r.setAttribute("multiple",i.multiple),r},createText:n=>Ei.createTextNode(n),createComment:n=>Ei.createComment(n),setText:(n,e)=>{n.nodeValue=e},setElementText:(n,e)=>{n.textContent=e},parentNode:n=>n.parentNode,nextSibling:n=>n.nextSibling,querySelector:n=>Ei.querySelector(n),setScopeId(n,e){n.setAttribute(e,"")},insertStaticContent(n,e,t,i,r,s){const o=t?t.previousSibling:e.lastChild;if(r&&(r===s||r.nextSibling))for(;e.insertBefore(r.cloneNode(!0),t),!(r===s||!(r=r.nextSibling)););else{Ou.innerHTML=i?`<svg>${n}</svg>`:n;const a=Ou.content;if(i){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}e.insertBefore(a,t)}return[o?o.nextSibling:e.firstChild,t?t.previousSibling:e.lastChild]}};function OA(n,e,t){const i=n._vtc;i&&(e=(e?[e,...i]:[...i]).join(" ")),e==null?n.removeAttribute("class"):t?n.setAttribute("class",e):n.className=e}function UA(n,e,t){const i=n.style,r=dt(t);if(t&&!r){if(e&&!dt(e))for(const s in e)t[s]==null&&Kl(i,s,"");for(const s in t)Kl(i,s,t[s])}else{const s=i.display;r?e!==t&&(i.cssText=t):e&&n.removeAttribute("style"),"_vod"in n&&(i.display=s)}}const Uu=/\s*!important$/;function Kl(n,e,t){if(Ce(t))t.forEach(i=>Kl(n,e,i));else if(t==null&&(t=""),e.startsWith("--"))n.setProperty(e,t);else{const i=VA(n,e);Uu.test(t)?n.setProperty(Er(i),t.replace(Uu,""),"important"):n[i]=t}}const Vu=["Webkit","Moz","ms"],Na={};function VA(n,e){const t=Na[e];if(t)return t;let i=xn(e);if(i!=="filter"&&i in n)return Na[e]=i;i=ia(i);for(let r=0;r<Vu.length;r++){const s=Vu[r]+i;if(s in n)return Na[e]=s}return e}const ku="http://www.w3.org/1999/xlink";function kA(n,e,t,i,r){if(i&&e.startsWith("xlink:"))t==null?n.removeAttributeNS(ku,e.slice(6,e.length)):n.setAttributeNS(ku,e,t);else{const s=Om(e);t==null||s&&!Xf(t)?n.removeAttribute(e):n.setAttribute(e,s?"":t)}}function zA(n,e,t,i,r,s,o){if(e==="innerHTML"||e==="textContent"){i&&o(i,r,s),n[e]=t==null?"":t;return}if(e==="value"&&n.tagName!=="PROGRESS"&&!n.tagName.includes("-")){n._value=t;const l=t==null?"":t;(n.value!==l||n.tagName==="OPTION")&&(n.value=l),t==null&&n.removeAttribute(e);return}let a=!1;if(t===""||t==null){const l=typeof n[e];l==="boolean"?t=Xf(t):t==null&&l==="string"?(t="",a=!0):l==="number"&&(t=0,a=!0)}try{n[e]=t}catch{}a&&n.removeAttribute(e)}function $d(n,e,t,i){n.addEventListener(e,t,i)}function HA(n,e,t,i){n.removeEventListener(e,t,i)}function GA(n,e,t,i,r=null){const s=n._vei||(n._vei={}),o=s[e];if(i&&o)o.value=i;else{const[a,l]=WA(e);if(i){const c=s[e]=KA(i,r);$d(n,a,c,l)}else o&&(HA(n,a,o,l),s[e]=void 0)}}const zu=/(?:Once|Passive|Capture)$/;function WA(n){let e;if(zu.test(n)){e={};let i;for(;i=n.match(zu);)n=n.slice(0,n.length-i[0].length),e[i[0].toLowerCase()]=!0}return[n[2]===":"?n.slice(3):Er(n.slice(2)),e]}let Oa=0;const qA=Promise.resolve(),QA=()=>Oa||(qA.then(()=>Oa=0),Oa=Date.now());function KA(n,e){const t=i=>{if(!i._vts)i._vts=Date.now();else if(i._vts<=t.attached)return;Zt(YA(i,t.value),e,5,[i])};return t.value=n,t.attached=QA(),t}function YA(n,e){if(Ce(e)){const t=n.stopImmediatePropagation;return n.stopImmediatePropagation=()=>{t.call(n),n._stopped=!0},e.map(i=>r=>!r._stopped&&i&&i(r))}else return e}const Hu=/^on[a-z]/,ZA=(n,e,t,i,r=!1,s,o,a,l)=>{e==="class"?OA(n,i,r):e==="style"?UA(n,t,i):ea(e)?uc(e)||GA(n,e,t,i,o):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):JA(n,e,i,r))?zA(n,e,i,s,o,a,l):(e==="true-value"?n._trueValue=i:e==="false-value"&&(n._falseValue=i),kA(n,e,i,r))};function JA(n,e,t,i){return i?!!(e==="innerHTML"||e==="textContent"||e in n&&Hu.test(e)&&Be(t)):e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&n.tagName==="INPUT"||e==="type"&&n.tagName==="TEXTAREA"||Hu.test(e)&&dt(t)?!1:e in n}const Gn="transition",Ur="animation",ep={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},XA=_t({},Wg.props,ep),vi=(n,e=[])=>{Ce(n)?n.forEach(t=>t(...e)):n&&n(...e)},Gu=n=>n?Ce(n)?n.some(e=>e.length>1):n.length>1:!1;function jA(n){const e={};for(const G in n)G in ep||(e[G]=n[G]);if(n.css===!1)return e;const{name:t="v",type:i,duration:r,enterFromClass:s=`${t}-enter-from`,enterActiveClass:o=`${t}-enter-active`,enterToClass:a=`${t}-enter-to`,appearFromClass:l=s,appearActiveClass:c=o,appearToClass:u=a,leaveFromClass:h=`${t}-leave-from`,leaveActiveClass:f=`${t}-leave-active`,leaveToClass:d=`${t}-leave-to`}=n,m=$A(r),_=m&&m[0],E=m&&m[1],{onBeforeEnter:p,onEnter:A,onEnterCancelled:R,onLeave:M,onLeaveCancelled:L,onBeforeAppear:D=p,onAppear:C=A,onAppearCancelled:k=R}=e,U=(G,b,T)=>{$n(G,b?u:a),$n(G,b?c:o),T&&T()},F=(G,b)=>{G._isLeaving=!1,$n(G,h),$n(G,d),$n(G,f),b&&b()},S=G=>(b,T)=>{const y=G?C:A,v=()=>U(b,G,T);vi(y,[b,v]),Wu(()=>{$n(b,G?l:s),Bn(b,G?u:a),Gu(y)||qu(b,i,_,v)})};return _t(e,{onBeforeEnter(G){vi(p,[G]),Bn(G,s),Bn(G,o)},onBeforeAppear(G){vi(D,[G]),Bn(G,l),Bn(G,c)},onEnter:S(!1),onAppear:S(!0),onLeave(G,b){G._isLeaving=!0;const T=()=>F(G,b);Bn(G,h),np(),Bn(G,f),Wu(()=>{!G._isLeaving||($n(G,h),Bn(G,d),Gu(M)||qu(G,i,E,T))}),vi(M,[G,T])},onEnterCancelled(G){U(G,!1),vi(R,[G])},onAppearCancelled(G){U(G,!0),vi(k,[G])},onLeaveCancelled(G){F(G),vi(L,[G])}})}function $A(n){if(n==null)return null;if(Je(n))return[Ua(n.enter),Ua(n.leave)];{const e=Ua(n);return[e,e]}}function Ua(n){return Qm(n)}function Bn(n,e){e.split(/\s+/).forEach(t=>t&&n.classList.add(t)),(n._vtc||(n._vtc=new Set)).add(e)}function $n(n,e){e.split(/\s+/).forEach(i=>i&&n.classList.remove(i));const{_vtc:t}=n;t&&(t.delete(e),t.size||(n._vtc=void 0))}function Wu(n){requestAnimationFrame(()=>{requestAnimationFrame(n)})}let e0=0;function qu(n,e,t,i){const r=n._endId=++e0,s=()=>{r===n._endId&&i()};if(t)return setTimeout(s,t);const{type:o,timeout:a,propCount:l}=tp(n,e);if(!o)return i();const c=o+"end";let u=0;const h=()=>{n.removeEventListener(c,f),s()},f=d=>{d.target===n&&++u>=l&&h()};setTimeout(()=>{u<l&&h()},a+1),n.addEventListener(c,f)}function tp(n,e){const t=window.getComputedStyle(n),i=m=>(t[m]||"").split(", "),r=i(`${Gn}Delay`),s=i(`${Gn}Duration`),o=Qu(r,s),a=i(`${Ur}Delay`),l=i(`${Ur}Duration`),c=Qu(a,l);let u=null,h=0,f=0;e===Gn?o>0&&(u=Gn,h=o,f=s.length):e===Ur?c>0&&(u=Ur,h=c,f=l.length):(h=Math.max(o,c),u=h>0?o>c?Gn:Ur:null,f=u?u===Gn?s.length:l.length:0);const d=u===Gn&&/\b(transform|all)(,|$)/.test(i(`${Gn}Property`).toString());return{type:u,timeout:h,propCount:f,hasTransform:d}}function Qu(n,e){for(;n.length<e.length;)n=n.concat(n);return Math.max(...e.map((t,i)=>Ku(t)+Ku(n[i])))}function Ku(n){return Number(n.slice(0,-1).replace(",","."))*1e3}function np(){return document.body.offsetHeight}const ip=new WeakMap,rp=new WeakMap,sp={name:"TransitionGroup",props:_t({},XA,{tag:String,moveClass:String}),setup(n,{slots:e}){const t=Zd(),i=Id();let r,s;return Dd(()=>{if(!r.length)return;const o=n.moveClass||`${n.name||"v"}-move`;if(!s0(r[0].el,t.vnode.el,o))return;r.forEach(n0),r.forEach(i0);const a=r.filter(r0);np(),a.forEach(l=>{const c=l.el,u=c.style;Bn(c,o),u.transform=u.webkitTransform=u.transitionDuration="";const h=c._moveCb=f=>{f&&f.target!==c||(!f||/transform$/.test(f.propertyName))&&(c.removeEventListener("transitionend",h),c._moveCb=null,$n(c,o))};c.addEventListener("transitionend",h)})}),()=>{const o=ze(n),a=jA(o);let l=o.tag||Ue;r=s,s=e.default?Mc(e.default()):[];for(let c=0;c<s.length;c++){const u=s[c];u.key!=null&&As(u,gs(u,a,i,t))}if(r)for(let c=0;c<r.length;c++){const u=r[c];As(u,gs(u,a,i,t)),ip.set(u,u.el.getBoundingClientRect())}return xt(l,null,s)}}},t0=n=>delete n.mode;sp.props;const op=sp;function n0(n){const e=n.el;e._moveCb&&e._moveCb(),e._enterCb&&e._enterCb()}function i0(n){rp.set(n,n.el.getBoundingClientRect())}function r0(n){const e=ip.get(n),t=rp.get(n),i=e.left-t.left,r=e.top-t.top;if(i||r){const s=n.el.style;return s.transform=s.webkitTransform=`translate(${i}px,${r}px)`,s.transitionDuration="0s",n}}function s0(n,e,t){const i=n.cloneNode();n._vtc&&n._vtc.forEach(o=>{o.split(/\s+/).forEach(a=>a&&i.classList.remove(a))}),t.split(/\s+/).forEach(o=>o&&i.classList.add(o)),i.style.display="none";const r=e.nodeType===1?e:e.parentNode;r.appendChild(i);const{hasTransform:s}=tp(i);return r.removeChild(i),s}const Yu=n=>{const e=n.props["onUpdate:modelValue"]||!1;return Ce(e)?t=>Io(e,t):e},ct={deep:!0,created(n,{value:e,modifiers:{number:t}},i){const r=ta(e);$d(n,"change",()=>{const s=Array.prototype.filter.call(n.options,o=>o.selected).map(o=>t?nd(ko(o)):ko(o));n._assign(n.multiple?r?new Set(s):s:s[0])}),n._assign=Yu(i)},mounted(n,{value:e}){Zu(n,e)},beforeUpdate(n,e,t){n._assign=Yu(t)},updated(n,{value:e}){Zu(n,e)}};function Zu(n,e){const t=n.multiple;if(!(t&&!Ce(e)&&!ta(e))){for(let i=0,r=n.options.length;i<r;i++){const s=n.options[i],o=ko(s);if(t)Ce(e)?s.selected=Vm(e,o)>-1:s.selected=e.has(o);else if($o(ko(s),e)){n.selectedIndex!==i&&(n.selectedIndex=i);return}}!t&&n.selectedIndex!==-1&&(n.selectedIndex=-1)}}function ko(n){return"_value"in n?n._value:n.value}const o0=_t({patchProp:ZA},NA);let Ju;function a0(){return Ju||(Ju=pA(o0))}const l0=(...n)=>{const e=a0().createApp(...n),{mount:t}=e;return e.mount=i=>{const r=c0(i);if(!r)return;const s=e._component;!Be(s)&&!s.render&&!s.template&&(s.template=r.innerHTML),r.innerHTML="";const o=t(r,!1,r instanceof SVGElement);return r instanceof Element&&(r.removeAttribute("v-cloak"),r.setAttribute("data-v-app","")),o},e};function c0(n){return dt(n)?document.querySelector(n):n}/*!
  * vue-router v4.1.6
  * (c) 2022 Eduardo San Martin Morote
  * @license MIT
  */const nr=typeof window<"u";function u0(n){return n.__esModule||n[Symbol.toStringTag]==="Module"}const qe=Object.assign;function Va(n,e){const t={};for(const i in e){const r=e[i];t[i]=cn(r)?r.map(n):n(r)}return t}const ns=()=>{},cn=Array.isArray,h0=/\/$/,f0=n=>n.replace(h0,"");function ka(n,e,t="/"){let i,r={},s="",o="";const a=e.indexOf("#");let l=e.indexOf("?");return a<l&&a>=0&&(l=-1),l>-1&&(i=e.slice(0,l),s=e.slice(l+1,a>-1?a:e.length),r=n(s)),a>-1&&(i=i||e.slice(0,a),o=e.slice(a,e.length)),i=g0(i!=null?i:e,t),{fullPath:i+(s&&"?")+s+o,path:i,query:r,hash:o}}function d0(n,e){const t=e.query?n(e.query):"";return e.path+(t&&"?")+t+(e.hash||"")}function Xu(n,e){return!e||!n.toLowerCase().startsWith(e.toLowerCase())?n:n.slice(e.length)||"/"}function p0(n,e,t){const i=e.matched.length-1,r=t.matched.length-1;return i>-1&&i===r&&yr(e.matched[i],t.matched[r])&&ap(e.params,t.params)&&n(e.query)===n(t.query)&&e.hash===t.hash}function yr(n,e){return(n.aliasOf||n)===(e.aliasOf||e)}function ap(n,e){if(Object.keys(n).length!==Object.keys(e).length)return!1;for(const t in n)if(!m0(n[t],e[t]))return!1;return!0}function m0(n,e){return cn(n)?ju(n,e):cn(e)?ju(e,n):n===e}function ju(n,e){return cn(e)?n.length===e.length&&n.every((t,i)=>t===e[i]):n.length===1&&n[0]===e}function g0(n,e){if(n.startsWith("/"))return n;if(!n)return e;const t=e.split("/"),i=n.split("/");let r=t.length-1,s,o;for(s=0;s<i.length;s++)if(o=i[s],o!==".")if(o==="..")r>1&&r--;else break;return t.slice(0,r).join("/")+"/"+i.slice(s-(s===i.length?1:0)).join("/")}var xs;(function(n){n.pop="pop",n.push="push"})(xs||(xs={}));var is;(function(n){n.back="back",n.forward="forward",n.unknown=""})(is||(is={}));function A0(n){if(!n)if(nr){const e=document.querySelector("base");n=e&&e.getAttribute("href")||"/",n=n.replace(/^\w+:\/\/[^\/]+/,"")}else n="/";return n[0]!=="/"&&n[0]!=="#"&&(n="/"+n),f0(n)}const v0=/^[^#]+#/;function y0(n,e){return n.replace(v0,"#")+e}function x0(n,e){const t=document.documentElement.getBoundingClientRect(),i=n.getBoundingClientRect();return{behavior:e.behavior,left:i.left-t.left-(e.left||0),top:i.top-t.top-(e.top||0)}}const pa=()=>({left:window.pageXOffset,top:window.pageYOffset});function _0(n){let e;if("el"in n){const t=n.el,i=typeof t=="string"&&t.startsWith("#"),r=typeof t=="string"?i?document.getElementById(t.slice(1)):document.querySelector(t):t;if(!r)return;e=x0(r,n)}else e=n;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.pageXOffset,e.top!=null?e.top:window.pageYOffset)}function $u(n,e){return(history.state?history.state.position-e:-1)+n}const Yl=new Map;function w0(n,e){Yl.set(n,e)}function b0(n){const e=Yl.get(n);return Yl.delete(n),e}let M0=()=>location.protocol+"//"+location.host;function lp(n,e){const{pathname:t,search:i,hash:r}=e,s=n.indexOf("#");if(s>-1){let a=r.includes(n.slice(s))?n.slice(s).length:1,l=r.slice(a);return l[0]!=="/"&&(l="/"+l),Xu(l,"")}return Xu(t,n)+i+r}function S0(n,e,t,i){let r=[],s=[],o=null;const a=({state:f})=>{const d=lp(n,location),m=t.value,_=e.value;let E=0;if(f){if(t.value=d,e.value=f,o&&o===m){o=null;return}E=_?f.position-_.position:0}else i(d);r.forEach(p=>{p(t.value,m,{delta:E,type:xs.pop,direction:E?E>0?is.forward:is.back:is.unknown})})};function l(){o=t.value}function c(f){r.push(f);const d=()=>{const m=r.indexOf(f);m>-1&&r.splice(m,1)};return s.push(d),d}function u(){const{history:f}=window;!f.state||f.replaceState(qe({},f.state,{scroll:pa()}),"")}function h(){for(const f of s)f();s=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",u)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",u),{pauseListeners:l,listen:c,destroy:h}}function eh(n,e,t,i=!1,r=!1){return{back:n,current:e,forward:t,replaced:i,position:window.history.length,scroll:r?pa():null}}function E0(n){const{history:e,location:t}=window,i={value:lp(n,t)},r={value:e.state};r.value||s(i.value,{back:null,current:i.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function s(l,c,u){const h=n.indexOf("#"),f=h>-1?(t.host&&document.querySelector("base")?n:n.slice(h))+l:M0()+n+l;try{e[u?"replaceState":"pushState"](c,"",f),r.value=c}catch(d){console.error(d),t[u?"replace":"assign"](f)}}function o(l,c){const u=qe({},e.state,eh(r.value.back,l,r.value.forward,!0),c,{position:r.value.position});s(l,u,!0),i.value=l}function a(l,c){const u=qe({},r.value,e.state,{forward:l,scroll:pa()});s(u.current,u,!0);const h=qe({},eh(i.value,l,null),{position:u.position+1},c);s(l,h,!1),i.value=l}return{location:i,state:r,push:a,replace:o}}function T0(n){n=A0(n);const e=E0(n),t=S0(n,e.state,e.location,e.replace);function i(s,o=!0){o||t.pauseListeners(),history.go(s)}const r=qe({location:"",base:n,go:i,createHref:y0.bind(null,n)},e,t);return Object.defineProperty(r,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(r,"state",{enumerable:!0,get:()=>e.state.value}),r}function C0(n){return typeof n=="string"||n&&typeof n=="object"}function cp(n){return typeof n=="string"||typeof n=="symbol"}const Wn={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},up=Symbol("");var th;(function(n){n[n.aborted=4]="aborted",n[n.cancelled=8]="cancelled",n[n.duplicated=16]="duplicated"})(th||(th={}));function xr(n,e){return qe(new Error,{type:n,[up]:!0},e)}function Sn(n,e){return n instanceof Error&&up in n&&(e==null||!!(n.type&e))}const nh="[^/]+?",I0={sensitive:!1,strict:!1,start:!0,end:!0},L0=/[.+*?^${}()[\]/\\]/g;function R0(n,e){const t=qe({},I0,e),i=[];let r=t.start?"^":"";const s=[];for(const c of n){const u=c.length?[]:[90];t.strict&&!c.length&&(r+="/");for(let h=0;h<c.length;h++){const f=c[h];let d=40+(t.sensitive?.25:0);if(f.type===0)h||(r+="/"),r+=f.value.replace(L0,"\\$&"),d+=40;else if(f.type===1){const{value:m,repeatable:_,optional:E,regexp:p}=f;s.push({name:m,repeatable:_,optional:E});const A=p||nh;if(A!==nh){d+=10;try{new RegExp(`(${A})`)}catch(M){throw new Error(`Invalid custom RegExp for param "${m}" (${A}): `+M.message)}}let R=_?`((?:${A})(?:/(?:${A}))*)`:`(${A})`;h||(R=E&&c.length<2?`(?:/${R})`:"/"+R),E&&(R+="?"),r+=R,d+=20,E&&(d+=-8),_&&(d+=-20),A===".*"&&(d+=-50)}u.push(d)}i.push(u)}if(t.strict&&t.end){const c=i.length-1;i[c][i[c].length-1]+=.7000000000000001}t.strict||(r+="/?"),t.end?r+="$":t.strict&&(r+="(?:/|$)");const o=new RegExp(r,t.sensitive?"":"i");function a(c){const u=c.match(o),h={};if(!u)return null;for(let f=1;f<u.length;f++){const d=u[f]||"",m=s[f-1];h[m.name]=d&&m.repeatable?d.split("/"):d}return h}function l(c){let u="",h=!1;for(const f of n){(!h||!u.endsWith("/"))&&(u+="/"),h=!1;for(const d of f)if(d.type===0)u+=d.value;else if(d.type===1){const{value:m,repeatable:_,optional:E}=d,p=m in c?c[m]:"";if(cn(p)&&!_)throw new Error(`Provided param "${m}" is an array but it is not repeatable (* or + modifiers)`);const A=cn(p)?p.join("/"):p;if(!A)if(E)f.length<2&&(u.endsWith("/")?u=u.slice(0,-1):h=!0);else throw new Error(`Missing required param "${m}"`);u+=A}}return u||"/"}return{re:o,score:i,keys:s,parse:a,stringify:l}}function P0(n,e){let t=0;for(;t<n.length&&t<e.length;){const i=e[t]-n[t];if(i)return i;t++}return n.length<e.length?n.length===1&&n[0]===40+40?-1:1:n.length>e.length?e.length===1&&e[0]===40+40?1:-1:0}function D0(n,e){let t=0;const i=n.score,r=e.score;for(;t<i.length&&t<r.length;){const s=P0(i[t],r[t]);if(s)return s;t++}if(Math.abs(r.length-i.length)===1){if(ih(i))return 1;if(ih(r))return-1}return r.length-i.length}function ih(n){const e=n[n.length-1];return n.length>0&&e[e.length-1]<0}const B0={type:0,value:""},F0=/[a-zA-Z0-9_]/;function N0(n){if(!n)return[[]];if(n==="/")return[[B0]];if(!n.startsWith("/"))throw new Error(`Invalid path "${n}"`);function e(d){throw new Error(`ERR (${t})/"${c}": ${d}`)}let t=0,i=t;const r=[];let s;function o(){s&&r.push(s),s=[]}let a=0,l,c="",u="";function h(){!c||(t===0?s.push({type:0,value:c}):t===1||t===2||t===3?(s.length>1&&(l==="*"||l==="+")&&e(`A repeatable param (${c}) must be alone in its segment. eg: '/:ids+.`),s.push({type:1,value:c,regexp:u,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):e("Invalid state to consume buffer"),c="")}function f(){c+=l}for(;a<n.length;){if(l=n[a++],l==="\\"&&t!==2){i=t,t=4;continue}switch(t){case 0:l==="/"?(c&&h(),o()):l===":"?(h(),t=1):f();break;case 4:f(),t=i;break;case 1:l==="("?t=2:F0.test(l)?f():(h(),t=0,l!=="*"&&l!=="?"&&l!=="+"&&a--);break;case 2:l===")"?u[u.length-1]=="\\"?u=u.slice(0,-1)+l:t=3:u+=l;break;case 3:h(),t=0,l!=="*"&&l!=="?"&&l!=="+"&&a--,u="";break;default:e("Unknown state");break}}return t===2&&e(`Unfinished custom RegExp for param "${c}"`),h(),o(),r}function O0(n,e,t){const i=R0(N0(n.path),t),r=qe(i,{record:n,parent:e,children:[],alias:[]});return e&&!r.record.aliasOf==!e.record.aliasOf&&e.children.push(r),r}function U0(n,e){const t=[],i=new Map;e=oh({strict:!1,end:!0,sensitive:!1},e);function r(u){return i.get(u)}function s(u,h,f){const d=!f,m=V0(u);m.aliasOf=f&&f.record;const _=oh(e,u),E=[m];if("alias"in u){const R=typeof u.alias=="string"?[u.alias]:u.alias;for(const M of R)E.push(qe({},m,{components:f?f.record.components:m.components,path:M,aliasOf:f?f.record:m}))}let p,A;for(const R of E){const{path:M}=R;if(h&&M[0]!=="/"){const L=h.record.path,D=L[L.length-1]==="/"?"":"/";R.path=h.record.path+(M&&D+M)}if(p=O0(R,h,_),f?f.alias.push(p):(A=A||p,A!==p&&A.alias.push(p),d&&u.name&&!sh(p)&&o(u.name)),m.children){const L=m.children;for(let D=0;D<L.length;D++)s(L[D],p,f&&f.children[D])}f=f||p,(p.record.components&&Object.keys(p.record.components).length||p.record.name||p.record.redirect)&&l(p)}return A?()=>{o(A)}:ns}function o(u){if(cp(u)){const h=i.get(u);h&&(i.delete(u),t.splice(t.indexOf(h),1),h.children.forEach(o),h.alias.forEach(o))}else{const h=t.indexOf(u);h>-1&&(t.splice(h,1),u.record.name&&i.delete(u.record.name),u.children.forEach(o),u.alias.forEach(o))}}function a(){return t}function l(u){let h=0;for(;h<t.length&&D0(u,t[h])>=0&&(u.record.path!==t[h].record.path||!hp(u,t[h]));)h++;t.splice(h,0,u),u.record.name&&!sh(u)&&i.set(u.record.name,u)}function c(u,h){let f,d={},m,_;if("name"in u&&u.name){if(f=i.get(u.name),!f)throw xr(1,{location:u});_=f.record.name,d=qe(rh(h.params,f.keys.filter(A=>!A.optional).map(A=>A.name)),u.params&&rh(u.params,f.keys.map(A=>A.name))),m=f.stringify(d)}else if("path"in u)m=u.path,f=t.find(A=>A.re.test(m)),f&&(d=f.parse(m),_=f.record.name);else{if(f=h.name?i.get(h.name):t.find(A=>A.re.test(h.path)),!f)throw xr(1,{location:u,currentLocation:h});_=f.record.name,d=qe({},h.params,u.params),m=f.stringify(d)}const E=[];let p=f;for(;p;)E.unshift(p.record),p=p.parent;return{name:_,path:m,params:d,matched:E,meta:z0(E)}}return n.forEach(u=>s(u)),{addRoute:s,resolve:c,removeRoute:o,getRoutes:a,getRecordMatcher:r}}function rh(n,e){const t={};for(const i of e)i in n&&(t[i]=n[i]);return t}function V0(n){return{path:n.path,redirect:n.redirect,name:n.name,meta:n.meta||{},aliasOf:void 0,beforeEnter:n.beforeEnter,props:k0(n),children:n.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in n?n.components||null:n.component&&{default:n.component}}}function k0(n){const e={},t=n.props||!1;if("component"in n)e.default=t;else for(const i in n.components)e[i]=typeof t=="boolean"?t:t[i];return e}function sh(n){for(;n;){if(n.record.aliasOf)return!0;n=n.parent}return!1}function z0(n){return n.reduce((e,t)=>qe(e,t.meta),{})}function oh(n,e){const t={};for(const i in n)t[i]=i in e?e[i]:n[i];return t}function hp(n,e){return e.children.some(t=>t===n||hp(n,t))}const fp=/#/g,H0=/&/g,G0=/\//g,W0=/=/g,q0=/\?/g,dp=/\+/g,Q0=/%5B/g,K0=/%5D/g,pp=/%5E/g,Y0=/%60/g,mp=/%7B/g,Z0=/%7C/g,gp=/%7D/g,J0=/%20/g;function Rc(n){return encodeURI(""+n).replace(Z0,"|").replace(Q0,"[").replace(K0,"]")}function X0(n){return Rc(n).replace(mp,"{").replace(gp,"}").replace(pp,"^")}function Zl(n){return Rc(n).replace(dp,"%2B").replace(J0,"+").replace(fp,"%23").replace(H0,"%26").replace(Y0,"`").replace(mp,"{").replace(gp,"}").replace(pp,"^")}function j0(n){return Zl(n).replace(W0,"%3D")}function $0(n){return Rc(n).replace(fp,"%23").replace(q0,"%3F")}function ev(n){return n==null?"":$0(n).replace(G0,"%2F")}function zo(n){try{return decodeURIComponent(""+n)}catch{}return""+n}function tv(n){const e={};if(n===""||n==="?")return e;const i=(n[0]==="?"?n.slice(1):n).split("&");for(let r=0;r<i.length;++r){const s=i[r].replace(dp," "),o=s.indexOf("="),a=zo(o<0?s:s.slice(0,o)),l=o<0?null:zo(s.slice(o+1));if(a in e){let c=e[a];cn(c)||(c=e[a]=[c]),c.push(l)}else e[a]=l}return e}function ah(n){let e="";for(let t in n){const i=n[t];if(t=j0(t),i==null){i!==void 0&&(e+=(e.length?"&":"")+t);continue}(cn(i)?i.map(s=>s&&Zl(s)):[i&&Zl(i)]).forEach(s=>{s!==void 0&&(e+=(e.length?"&":"")+t,s!=null&&(e+="="+s))})}return e}function nv(n){const e={};for(const t in n){const i=n[t];i!==void 0&&(e[t]=cn(i)?i.map(r=>r==null?null:""+r):i==null?i:""+i)}return e}const iv=Symbol(""),lh=Symbol(""),Pc=Symbol(""),Ap=Symbol(""),Jl=Symbol("");function Vr(){let n=[];function e(i){return n.push(i),()=>{const r=n.indexOf(i);r>-1&&n.splice(r,1)}}function t(){n=[]}return{add:e,list:()=>n,reset:t}}function ti(n,e,t,i,r){const s=i&&(i.enterCallbacks[r]=i.enterCallbacks[r]||[]);return()=>new Promise((o,a)=>{const l=h=>{h===!1?a(xr(4,{from:t,to:e})):h instanceof Error?a(h):C0(h)?a(xr(2,{from:e,to:h})):(s&&i.enterCallbacks[r]===s&&typeof h=="function"&&s.push(h),o())},c=n.call(i&&i.instances[r],e,t,l);let u=Promise.resolve(c);n.length<3&&(u=u.then(l)),u.catch(h=>a(h))})}function za(n,e,t,i){const r=[];for(const s of n)for(const o in s.components){let a=s.components[o];if(!(e!=="beforeRouteEnter"&&!s.instances[o]))if(rv(a)){const c=(a.__vccOpts||a)[e];c&&r.push(ti(c,t,i,s,o))}else{let l=a();r.push(()=>l.then(c=>{if(!c)return Promise.reject(new Error(`Couldn't resolve component "${o}" at "${s.path}"`));const u=u0(c)?c.default:c;s.components[o]=u;const f=(u.__vccOpts||u)[e];return f&&ti(f,t,i,s,o)()}))}}return r}function rv(n){return typeof n=="object"||"displayName"in n||"props"in n||"__vccOpts"in n}function ch(n){const e=On(Pc),t=On(Ap),i=Kt(()=>e.resolve(hr(n.to))),r=Kt(()=>{const{matched:l}=i.value,{length:c}=l,u=l[c-1],h=t.matched;if(!u||!h.length)return-1;const f=h.findIndex(yr.bind(null,u));if(f>-1)return f;const d=uh(l[c-2]);return c>1&&uh(u)===d&&h[h.length-1].path!==d?h.findIndex(yr.bind(null,l[c-2])):f}),s=Kt(()=>r.value>-1&&lv(t.params,i.value.params)),o=Kt(()=>r.value>-1&&r.value===t.matched.length-1&&ap(t.params,i.value.params));function a(l={}){return av(l)?e[hr(n.replace)?"replace":"push"](hr(n.to)).catch(ns):Promise.resolve()}return{route:i,href:Kt(()=>i.value.href),isActive:s,isExactActive:o,navigate:a}}const sv=Ls({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:ch,setup(n,{slots:e}){const t=Is(ch(n)),{options:i}=On(Pc),r=Kt(()=>({[hh(n.activeClass,i.linkActiveClass,"router-link-active")]:t.isActive,[hh(n.exactActiveClass,i.linkExactActiveClass,"router-link-exact-active")]:t.isExactActive}));return()=>{const s=e.default&&e.default(t);return n.custom?s:jd("a",{"aria-current":t.isExactActive?n.ariaCurrentValue:null,href:t.href,onClick:t.navigate,class:r.value},s)}}}),ov=sv;function av(n){if(!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)&&!n.defaultPrevented&&!(n.button!==void 0&&n.button!==0)){if(n.currentTarget&&n.currentTarget.getAttribute){const e=n.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return n.preventDefault&&n.preventDefault(),!0}}function lv(n,e){for(const t in e){const i=e[t],r=n[t];if(typeof i=="string"){if(i!==r)return!1}else if(!cn(r)||r.length!==i.length||i.some((s,o)=>s!==r[o]))return!1}return!0}function uh(n){return n?n.aliasOf?n.aliasOf.path:n.path:""}const hh=(n,e,t)=>n!=null?n:e!=null?e:t,cv=Ls({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(n,{attrs:e,slots:t}){const i=On(Jl),r=Kt(()=>n.route||i.value),s=On(lh,0),o=Kt(()=>{let c=hr(s);const{matched:u}=r.value;let h;for(;(h=u[c])&&!h.components;)c++;return c}),a=Kt(()=>r.value.matched[o.value]);Lo(lh,Kt(()=>o.value+1)),Lo(iv,a),Lo(Jl,r);const l=Mg();return Ro(()=>[l.value,a.value,n.name],([c,u,h],[f,d,m])=>{u&&(u.instances[h]=c,d&&d!==u&&c&&c===f&&(u.leaveGuards.size||(u.leaveGuards=d.leaveGuards),u.updateGuards.size||(u.updateGuards=d.updateGuards))),c&&u&&(!d||!yr(u,d)||!f)&&(u.enterCallbacks[h]||[]).forEach(_=>_(c))},{flush:"post"}),()=>{const c=r.value,u=n.name,h=a.value,f=h&&h.components[u];if(!f)return fh(t.default,{Component:f,route:c});const d=h.props[u],m=d?d===!0?c.params:typeof d=="function"?d(c):d:null,E=jd(f,qe({},m,e,{onVnodeUnmounted:p=>{p.component.isUnmounted&&(h.instances[u]=null)},ref:l}));return fh(t.default,{Component:E,route:c})||E}}});function fh(n,e){if(!n)return null;const t=n(e);return t.length===1?t[0]:t}const uv=cv;function hv(n){const e=U0(n.routes,n),t=n.parseQuery||tv,i=n.stringifyQuery||ah,r=n.history,s=Vr(),o=Vr(),a=Vr(),l=Sg(Wn);let c=Wn;nr&&n.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const u=Va.bind(null,H=>""+H),h=Va.bind(null,ev),f=Va.bind(null,zo);function d(H,W){let ie,fe;return cp(H)?(ie=e.getRecordMatcher(H),fe=W):fe=H,e.addRoute(fe,ie)}function m(H){const W=e.getRecordMatcher(H);W&&e.removeRoute(W)}function _(){return e.getRoutes().map(H=>H.record)}function E(H){return!!e.getRecordMatcher(H)}function p(H,W){if(W=qe({},W||l.value),typeof H=="string"){const I=ka(t,H,W.path),O=e.resolve({path:I.path},W),Q=r.createHref(I.fullPath);return qe(I,O,{params:f(O.params),hash:zo(I.hash),redirectedFrom:void 0,href:Q})}let ie;if("path"in H)ie=qe({},H,{path:ka(t,H.path,W.path).path});else{const I=qe({},H.params);for(const O in I)I[O]==null&&delete I[O];ie=qe({},H,{params:h(H.params)}),W.params=h(W.params)}const fe=e.resolve(ie,W),de=H.hash||"";fe.params=u(f(fe.params));const me=d0(i,qe({},H,{hash:X0(de),path:fe.path})),ye=r.createHref(me);return qe({fullPath:me,hash:de,query:i===ah?nv(H.query):H.query||{}},fe,{redirectedFrom:void 0,href:ye})}function A(H){return typeof H=="string"?ka(t,H,l.value.path):qe({},H)}function R(H,W){if(c!==H)return xr(8,{from:W,to:H})}function M(H){return C(H)}function L(H){return M(qe(A(H),{replace:!0}))}function D(H){const W=H.matched[H.matched.length-1];if(W&&W.redirect){const{redirect:ie}=W;let fe=typeof ie=="function"?ie(H):ie;return typeof fe=="string"&&(fe=fe.includes("?")||fe.includes("#")?fe=A(fe):{path:fe},fe.params={}),qe({query:H.query,hash:H.hash,params:"path"in fe?{}:H.params},fe)}}function C(H,W){const ie=c=p(H),fe=l.value,de=H.state,me=H.force,ye=H.replace===!0,I=D(ie);if(I)return C(qe(A(I),{state:typeof I=="object"?qe({},de,I.state):de,force:me,replace:ye}),W||ie);const O=ie;O.redirectedFrom=W;let Q;return!me&&p0(i,fe,ie)&&(Q=xr(16,{to:O,from:fe}),z(fe,fe,!0,!1)),(Q?Promise.resolve(Q):U(O,fe)).catch(J=>Sn(J)?Sn(J,2)?J:N(J):w(J,O,fe)).then(J=>{if(J){if(Sn(J,2))return C(qe({replace:ye},A(J.to),{state:typeof J.to=="object"?qe({},de,J.to.state):de,force:me}),W||O)}else J=S(O,fe,!0,ye,de);return F(O,fe,J),J})}function k(H,W){const ie=R(H,W);return ie?Promise.reject(ie):Promise.resolve()}function U(H,W){let ie;const[fe,de,me]=fv(H,W);ie=za(fe.reverse(),"beforeRouteLeave",H,W);for(const I of fe)I.leaveGuards.forEach(O=>{ie.push(ti(O,H,W))});const ye=k.bind(null,H,W);return ie.push(ye),Fi(ie).then(()=>{ie=[];for(const I of s.list())ie.push(ti(I,H,W));return ie.push(ye),Fi(ie)}).then(()=>{ie=za(de,"beforeRouteUpdate",H,W);for(const I of de)I.updateGuards.forEach(O=>{ie.push(ti(O,H,W))});return ie.push(ye),Fi(ie)}).then(()=>{ie=[];for(const I of H.matched)if(I.beforeEnter&&!W.matched.includes(I))if(cn(I.beforeEnter))for(const O of I.beforeEnter)ie.push(ti(O,H,W));else ie.push(ti(I.beforeEnter,H,W));return ie.push(ye),Fi(ie)}).then(()=>(H.matched.forEach(I=>I.enterCallbacks={}),ie=za(me,"beforeRouteEnter",H,W),ie.push(ye),Fi(ie))).then(()=>{ie=[];for(const I of o.list())ie.push(ti(I,H,W));return ie.push(ye),Fi(ie)}).catch(I=>Sn(I,8)?I:Promise.reject(I))}function F(H,W,ie){for(const fe of a.list())fe(H,W,ie)}function S(H,W,ie,fe,de){const me=R(H,W);if(me)return me;const ye=W===Wn,I=nr?history.state:{};ie&&(fe||ye?r.replace(H.fullPath,qe({scroll:ye&&I&&I.scroll},de)):r.push(H.fullPath,de)),l.value=H,z(H,W,ie,ye),N()}let G;function b(){G||(G=r.listen((H,W,ie)=>{if(!se.listening)return;const fe=p(H),de=D(fe);if(de){C(qe(de,{replace:!0}),fe).catch(ns);return}c=fe;const me=l.value;nr&&w0($u(me.fullPath,ie.delta),pa()),U(fe,me).catch(ye=>Sn(ye,12)?ye:Sn(ye,2)?(C(ye.to,fe).then(I=>{Sn(I,20)&&!ie.delta&&ie.type===xs.pop&&r.go(-1,!1)}).catch(ns),Promise.reject()):(ie.delta&&r.go(-ie.delta,!1),w(ye,fe,me))).then(ye=>{ye=ye||S(fe,me,!1),ye&&(ie.delta&&!Sn(ye,8)?r.go(-ie.delta,!1):ie.type===xs.pop&&Sn(ye,20)&&r.go(-1,!1)),F(fe,me,ye)}).catch(ns)}))}let T=Vr(),y=Vr(),v;function w(H,W,ie){N(H);const fe=y.list();return fe.length?fe.forEach(de=>de(H,W,ie)):console.error(H),Promise.reject(H)}function g(){return v&&l.value!==Wn?Promise.resolve():new Promise((H,W)=>{T.add([H,W])})}function N(H){return v||(v=!H,b(),T.list().forEach(([W,ie])=>H?ie(H):W()),T.reset()),H}function z(H,W,ie,fe){const{scrollBehavior:de}=n;if(!nr||!de)return Promise.resolve();const me=!ie&&b0($u(H.fullPath,0))||(fe||!ie)&&history.state&&history.state.scroll||null;return wd().then(()=>de(H,W,me)).then(ye=>ye&&_0(ye)).catch(ye=>w(ye,H,W))}const Z=H=>r.go(H);let ee;const te=new Set,se={currentRoute:l,listening:!0,addRoute:d,removeRoute:m,hasRoute:E,getRoutes:_,resolve:p,options:n,push:M,replace:L,go:Z,back:()=>Z(-1),forward:()=>Z(1),beforeEach:s.add,beforeResolve:o.add,afterEach:a.add,onError:y.add,isReady:g,install(H){const W=this;H.component("RouterLink",ov),H.component("RouterView",uv),H.config.globalProperties.$router=W,Object.defineProperty(H.config.globalProperties,"$route",{enumerable:!0,get:()=>hr(l)}),nr&&!ee&&l.value===Wn&&(ee=!0,M(r.location).catch(de=>{}));const ie={};for(const de in Wn)ie[de]=Kt(()=>l.value[de]);H.provide(Pc,W),H.provide(Ap,Is(ie)),H.provide(Jl,l);const fe=H.unmount;te.add(H),H.unmount=function(){te.delete(H),te.size<1&&(c=Wn,G&&G(),G=null,l.value=Wn,ee=!1,v=!1),fe()}}};return se}function Fi(n){return n.reduce((e,t)=>e.then(()=>t()),Promise.resolve())}function fv(n,e){const t=[],i=[],r=[],s=Math.max(e.matched.length,n.matched.length);for(let o=0;o<s;o++){const a=e.matched[o];a&&(n.matched.find(c=>yr(c,a))?i.push(a):t.push(a));const l=n.matched[o];l&&(e.matched.find(c=>yr(c,l))||r.push(l))}return[t,i,r]}function dv(n){return{all:n=n||new Map,on:function(e,t){var i=n.get(e);i?i.push(t):n.set(e,[t])},off:function(e,t){var i=n.get(e);i&&(t?i.splice(i.indexOf(t)>>>0,1):n.set(e,[]))},emit:function(e,t){var i=n.get(e);i&&i.slice().map(function(r){r(t)}),(i=n.get("*"))&&i.slice().map(function(r){r(e,t)})}}}const Ho=dv(),vp=new Map,dh={x:["left","center","right"],y:["top","bottom"]},pv=(n=>()=>n++)(0),mv=n=>typeof n!="string"?[]:n.split(/\s+/gi).filter(e=>e),gv=n=>{typeof n=="string"&&(n=mv(n));let e=null,t=null;return n.forEach(i=>{dh.y.indexOf(i)!==-1&&(t=i),dh.x.indexOf(i)!==-1&&(e=i)}),{x:e,y:t}};class Av{constructor(e,t,i){this.remaining=t,this.callback=e,this.notifyItem=i,this.resume()}pause(){clearTimeout(this.notifyItem.timer),this.remaining-=Date.now()-this.start}resume(){this.start=Date.now(),clearTimeout(this.notifyItem.timer),this.notifyItem.timer=setTimeout(this.callback,this.remaining)}}const Ha={position:["top","right"],cssAnimation:"vn-fade",velocityAnimation:{enter:n=>({height:[n.clientHeight,0],opacity:[1,0]}),leave:{height:0,opacity:[0,1]}}},vv=Ls({name:"velocity-group",emits:["after-leave","leave","enter"],methods:{enter(n,e){this.$emit("enter",n,e)},leave(n,e){this.$emit("leave",n,e)},afterLeave(){this.$emit("after-leave")}}}),Dc=(n,e)=>{const t=n.__vccOpts||n;for(const[i,r]of e)t[i]=r;return t};function yv(n,e,t,i,r,s){return Me(),Rs(op,{tag:"span",css:!1,onEnter:n.enter,onLeave:n.leave,onAfterLeave:n.afterLeave},{default:la(()=>[Ec(n.$slots,"default")]),_:3},8,["onEnter","onLeave","onAfterLeave"])}const xv=Dc(vv,[["render",yv]]),_v=Ls({name:"css-group",inheritAttrs:!1,props:{name:{type:String,required:!0}}});function wv(n,e,t,i,r,s){return Me(),Rs(op,{tag:"span",name:n.name},{default:la(()=>[Ec(n.$slots,"default")]),_:3},8,["name"])}const bv=Dc(_v,[["render",wv]]),Ga="[-+]?[0-9]*.?[0-9]+",ph=[{name:"px",regexp:new RegExp(`^${Ga}px$`)},{name:"%",regexp:new RegExp(`^${Ga}%$`)},{name:"px",regexp:new RegExp(`^${Ga}$`)}],Mv=n=>{if(n==="auto")return{type:n,value:0};for(let e=0;e<ph.length;e++){const t=ph[e];if(t.regexp.test(n))return{type:t.name,value:parseFloat(n)}}return{type:"",value:n}},Sv=n=>{switch(typeof n){case"number":return{type:"px",value:n};case"string":return Mv(n);default:return{type:"",value:n}}},Gs={IDLE:0,DESTROYED:2},Ev=Ls({name:"notifications",components:{VelocityGroup:xv,CssGroup:bv},props:{group:{type:String,default:""},width:{type:[Number,String],default:300},reverse:{type:Boolean,default:!1},position:{type:[String,Array],default:Ha.position},classes:{type:String,default:"vue-notification"},animationType:{type:String,default:"css"},animation:{type:Object,default:Ha.velocityAnimation},animationName:{type:String,default:Ha.cssAnimation},speed:{type:Number,default:300},cooldown:{type:Number,default:0},duration:{type:Number,default:3e3},delay:{type:Number,default:0},max:{type:Number,default:1/0},ignoreDuplicates:{type:Boolean,default:!1},closeOnClick:{type:Boolean,default:!0},pauseOnHover:{type:Boolean,default:!1}},emits:["click","destroy","start"],data(){return{list:[],velocity:vp.get("velocity"),timerControl:null}},computed:{actualWidth(){return Sv(this.width)},isVA(){return this.animationType==="velocity"},componentName(){return this.isVA?"velocity-group":"css-group"},styles(){const{x:n,y:e}=gv(this.position),t=this.actualWidth.value,i=this.actualWidth.type,r={width:t+i};return e&&(r[e]="0px"),n&&(n==="center"?r.left=`calc(50% - ${+t/2}${i})`:r[n]="0px"),r},active(){return this.list.filter(n=>n.state!==Gs.DESTROYED)},botToTop(){return this.styles.hasOwnProperty("bottom")}},mounted(){Ho.on("add",this.addItem),Ho.on("close",this.closeItem)},methods:{destroyIfNecessary(n){this.$emit("click",n),this.closeOnClick&&this.destroy(n)},pauseTimeout(){var n;this.pauseOnHover&&((n=this.timerControl)==null||n.pause())},resumeTimeout(){var n;this.pauseOnHover&&((n=this.timerControl)==null||n.resume())},addItem(n={}){if(n.group||(n.group=""),n.data||(n.data={}),this.group!==n.group)return;if(n.clean||n.clear){this.destroyAll();return}const e=typeof n.duration=="number"?n.duration:this.duration,t=typeof n.speed=="number"?n.speed:this.speed,i=typeof n.ignoreDuplicates=="boolean"?n.ignoreDuplicates:this.ignoreDuplicates,{title:r,text:s,type:o,data:a,id:l}=n,c={id:l||pv(),title:r,text:s,type:o,state:Gs.IDLE,speed:t,length:e+2*t,data:a};e>=0&&(this.timerControl=new Av(()=>this.destroy(c),c.length,c));const u=this.reverse?!this.botToTop:this.botToTop;let h=-1;const f=this.active.some(d=>d.title===n.title&&d.text===n.text);(!i||!f)&&(u?(this.list.push(c),this.$emit("start",c),this.active.length>this.max&&(h=0)):(this.list.unshift(c),this.$emit("start",c),this.active.length>this.max&&(h=this.active.length-1)),h!==-1&&this.destroy(this.active[h]))},closeItem(n){this.destroyById(n)},notifyClass(n){return["vue-notification-template",this.classes,n.type||""]},notifyWrapperStyle(n){return this.isVA?void 0:{transition:`all ${n.speed}ms`}},destroy(n){clearTimeout(n.timer),n.state=Gs.DESTROYED,this.clean(),this.$emit("destroy",n)},destroyById(n){const e=this.list.find(t=>t.id===n);e&&this.destroy(e)},destroyAll(){this.active.forEach(this.destroy)},getAnimation(n,e){var t;const i=(t=this.animation)==null?void 0:t[n];return typeof i=="function"?i.call(this,e):i},enter(n,e){if(!this.isVA)return;const t=this.getAnimation("enter",n);this.velocity(n,t,{duration:this.speed,complete:e})},leave(n,e){if(!this.isVA)return;const t=this.getAnimation("leave",n);this.velocity(n,t,{duration:this.speed,complete:e})},clean(){this.list=this.list.filter(n=>n.state!==Gs.DESTROYED)}}}),Tv=["data-id"],Cv=["onClick"],Iv=["innerHTML"],Lv=["innerHTML"];function Rv(n,e,t,i,r,s){return Me(),Ee("div",{class:"vue-notification-group",style:cs(n.styles)},[(Me(),Rs(eA(n.componentName),{name:n.animationName,onEnter:n.enter,onLeave:n.leave,onAfterLeave:n.clean},{default:la(()=>[(Me(!0),Ee(Ue,null,tt(n.active,o=>(Me(),Ee("div",{key:o.id,class:"vue-notification-wrapper",style:cs(n.notifyWrapperStyle(o)),"data-id":o.id,onMouseenter:e[0]||(e[0]=(...a)=>n.pauseTimeout&&n.pauseTimeout(...a)),onMouseleave:e[1]||(e[1]=(...a)=>n.resumeTimeout&&n.resumeTimeout(...a))},[Ec(n.$slots,"body",{class:us([n.classes,o.type]),item:o,close:()=>n.destroy(o)},()=>[he("div",{class:us(n.notifyClass(o)),onClick:a=>n.destroyIfNecessary(o)},[o.title?(Me(),Ee("div",{key:0,class:"notification-title",innerHTML:o.title},null,8,Iv)):Ql("",!0),he("div",{class:"notification-content",innerHTML:o.text},null,8,Lv)],10,Cv)])],44,Tv))),128))]),_:3},40,["name","onEnter","onLeave","onAfterLeave"]))],4)}const Pv=Dc(Ev,[["render",Rv]]),yp=n=>{typeof n=="string"&&(n={title:"",text:n}),typeof n=="object"&&Ho.emit("add",n)};yp.close=n=>{Ho.emit("close",n)};function Dv(n,e={}){Object.entries(e).forEach(i=>vp.set(...i));const t=e.name||"notify";n.config.globalProperties["$"+t]=yp,n.component(e.componentName||"Notifications",Pv)}const Bv={install:Dv};(function(){var n;try{if(typeof document<"u"){var e=document.createElement("style");e.nonce=(n=document.head.querySelector("meta[property=csp-nonce]"))==null?void 0:n.content,e.appendChild(document.createTextNode(".vue-notification-group{display:block;position:fixed;z-index:5000}.vue-notification-wrapper{display:block;overflow:hidden;width:100%;margin:0;padding:0}.notification-title{font-weight:600}.vue-notification-template{display:block;box-sizing:border-box;background:white;text-align:left}.vue-notification{display:block;box-sizing:border-box;text-align:left;font-size:12px;padding:10px;margin:0 5px 5px;color:#fff;background:#44A4FC;border-left:5px solid #187FE7}.vue-notification.warn{background:#ffb648;border-left-color:#f48a06}.vue-notification.error{background:#E54D42;border-left-color:#b82e24}.vue-notification.success{background:#68CD86;border-left-color:#42a85f}.vn-fade-enter-active,.vn-fade-leave-active,.vn-fade-move{transition:all .5s}.vn-fade-enter-from,.vn-fade-leave-to{opacity:0}")),document.head.appendChild(e)}}catch(t){console.error("vite-plugin-css-injected-by-js",t)}})();let Fv=["D4","A3","F#3","B3","C#4","C4","F#4","A4","B4","G4","E4","F4","C5","D5","E5","","freestyle"].sort(),xp={upAmplitude:"\u2191amplitude",downAmplitude:"\u2193amplitude",upAttack:"\u2191attack time of envelope",downAttack:"\u2193attack time of envelope",upRelease:"\u2191release time of envelope",downRelease:"\u2193release time of envelope",upFrequency:"\u2191frequency of vibrato",downFrequency:"\u2193frequency of vibrato",upDepth:"\u2191depth of vibrato",downDepth:"\u2193depth of vibrato",upMix:"\u2191Mix D/W of reverb",downMix:"\u2193Mix D/W time of reverb",upReverbTime:"\u2191time of reverb",downReverbTime:"\u2193time of reverb",upPreDelay:"\u2191pre-delay of reverb",downPreDelay:"\u2193pre-daly of reverb",amplitude:"amplitude",closeFreestyle:"Close freestyle sound "},Nv=Object.values(xp).concat([""]),_p={A:"A3",B:"F#3",X:"D4",Y:"B3",R:"E4",ZR:"F4",HomeButton:"G4",PlusButton:"B4",SRButton:"C5",slButton:"D5",Up:"\u2191amplitude",Down:"\u2193amplitude",Left:"\u2191Mix D/W of reverb",Right:"\u2193Mix D/W time of reverb",L:"\u2191amplitude",ZL:"\u2191amplitude",LeftTwist:"\u2191amplitude",LeftShake:"\u2191amplitude",LStickTop:"C#4",LStickDown:"F#4",LStickLeft:"A4",LStickRight:"C4",LVerticalMove:"amplitude",RVerticalMove:"freestyle"};const Bc="config";function wp(){return!!localStorage.getItem(Bc)}function bp(){let n=localStorage.getItem(Bc);return JSON.parse(n)}function Ov(n){localStorage.setItem(Bc,JSON.stringify(n))}function Go(){return wp()?bp():_p}const Uv=Object.freeze(Object.defineProperty({__proto__:null,readFromStorage:bp,save2Storage:Ov,isStorageExist:wp,readConfig:Go},Symbol.toStringTag,{value:"Module"}));function Mp(n,e){e=e||{};const t=1e3/n;let i=e.beta||.4,r=e.doInitialisation!==!0,s=1,o=0,a=0,l=0,c=1/t;function u(E,p,A,R,M,L){let D,C,k,U,F,S,G,b,T,y,v,w,g,N,z,Z,ee,te,se,H,W,ie;S=.5*(-o*E-a*p-l*A),G=.5*(s*E+a*A-l*p),b=.5*(s*p-o*A+l*E),T=.5*(s*A+o*p-a*E),R===0&&M===0&&L===0||(D=(R*R+M*M+L*L)**-.5,R*=D,M*=D,L*=D,y=2*s,v=2*o,w=2*a,g=2*l,N=4*s,z=4*o,Z=4*a,ee=8*o,te=8*a,se=s*s,H=o*o,W=a*a,ie=l*l,C=N*W+w*R+N*H-v*M,k=z*ie-g*R+4*se*o-y*M-z+ee*H+ee*W+z*L,U=4*se*a+y*R+Z*ie-g*M-Z+te*H+te*W+Z*L,F=4*H*l-v*R+4*W*l-w*M,D=(C*C+k*k+U*U+F*F)**-.5,C*=D,k*=D,U*=D,F*=D,S-=i*C,G-=i*k,b-=i*U,T-=i*F),s+=S*c,o+=G*c,a+=b*c,l+=T*c,D=(s*s+o*o+a*a+l*l)**-.5,s*=D,o*=D,a*=D,l*=D}function h(E,p,A,R,M,L){return{x:p*L-A*M,y:A*R-E*L,z:E*M-p*R}}function f(E,p,A,R,M,L){const D=-Math.atan2(E,Math.sqrt(p*p+A*A)),C=h(E,p,A,1,0,0),k=h(1,0,0,C.x,C.y,C.z),U=Math.atan2(k.y,k.z),F=Math.cos(U),S=Math.sin(D),G=Math.sin(U),b=M*F-L*G,T=R*Math.cos(D)+M*G*S+L*F*S;return{heading:-Math.atan2(b,T),pitch:D,roll:U}}function d(E){const p=Math.cos(E.heading*.5),A=Math.sin(E.heading*.5),R=Math.cos(E.pitch*.5),M=Math.sin(E.pitch*.5),L=Math.cos(E.roll*.5),D=Math.sin(E.roll*.5);return{w:L*R*p+D*M*A,x:D*R*p-L*M*A,y:L*M*p+D*R*A,z:L*R*A-D*M*p}}function m(E,p,A,R,M,L){const D=f(E,p,A,R,M,L),C=d(D),k=(C.w*C.w+C.x*C.x+C.y*C.y+C.z*C.z)**-.5;s=C.w*k,o=C.x*k,a=C.y*k,l=C.z*k,r=!0}function _(E,p,A,R,M,L,D,C,k,U){c=U||c,r||m(R,M,L,D,C,k);let F,S,G,b,T,y,v,w,g,N,z,Z,ee,te,se,H,W,ie,fe,de,me,ye,I,O,Q,J,X,B,P,K,j,$,oe,ue,ce;if(D===void 0||C===void 0||k===void 0||D===0&&C===0&&k===0){u(E,p,A,R,M,L);return}y=.5*(-o*E-a*p-l*A),v=.5*(s*E+a*A-l*p),w=.5*(s*p-o*A+l*E),g=.5*(s*A+o*p-a*E),R===0&&M===0&&L===0||(F=(R*R+M*M+L*L)**-.5,R*=F,M*=F,L*=F,F=(D*D+C*C+k*k)**-.5,D*=F,C*=F,k*=F,Z=2*s*D,ee=2*s*C,te=2*s*k,se=2*o*D,de=2*s,me=2*o,ye=2*a,I=2*l,O=2*s*a,Q=2*a*l,J=s*s,X=s*o,B=s*a,P=s*l,K=o*o,j=o*a,$=o*l,oe=a*a,ue=a*l,ce=l*l,N=D*J-ee*l+te*a+D*K+me*C*a+me*k*l-D*oe-D*ce,z=Z*l+C*J-te*o+se*a-C*K+C*oe+ye*k*l-C*ce,H=Math.sqrt(N*N+z*z),W=-Z*a+ee*o+k*J+se*l-k*K+ye*C*l-k*oe+k*ce,ie=2*H,fe=2*W,S=-ye*(2*$-O-R)+me*(2*X+Q-M)-W*a*(H*(.5-oe-ce)+W*($-B)-D)+(-H*l+W*o)*(H*(j-P)+W*(X+ue)-C)+H*a*(H*(B+$)+W*(.5-K-oe)-k),G=I*(2*$-O-R)+de*(2*X+Q-M)-4*o*(1-2*K-2*oe-L)+W*l*(H*(.5-oe-ce)+W*($-B)-D)+(H*a+W*s)*(H*(j-P)+W*(X+ue)-C)+(H*l-fe*o)*(H*(B+$)+W*(.5-K-oe)-k),b=-de*(2*$-O-R)+I*(2*X+Q-M)-4*a*(1-2*K-2*oe-L)+(-ie*a-W*s)*(H*(.5-oe-ce)+W*($-B)-D)+(H*o+W*l)*(H*(j-P)+W*(X+ue)-C)+(H*s-fe*a)*(H*(B+$)+W*(.5-K-oe)-k),T=me*(2*$-O-R)+ye*(2*X+Q-M)+(-ie*l+W*o)*(H*(.5-oe-ce)+W*($-B)-D)+(-H*s+W*a)*(H*(j-P)+W*(X+ue)-C)+H*o*(H*(B+$)+W*(.5-K-oe)-k),F=(S*S+G*G+b*b+T*T)**-.5,S*=F,G*=F,b*=F,T*=F,y-=i*S,v-=i*G,w-=i*b,g-=i*T),s+=y*c,o+=v*c,a+=w*c,l+=g*c,F=(s*s+o*o+a*a+l*l)**-.5,s*=F,o*=F,a*=F,l*=F}return{update:_,init:m,getQuaternion(){return{w:s,x:o,y:a,z:l}}}}const mh=new Mp(10),gh=new Mp(10),Wa=180/Math.PI;function Vv(n,e){let t;for(const i of n){const r=e(i);r!==void 0&&(t=t===void 0?r:t+r)}return t}function dr(n){return kv(n,e=>e)}function kv(n,e){const t=n==null?0:n.length;return t?Vv(n,e)/t:NaN}function zv(n){let e;switch(n[0]){case 8:e="full";break;case 4:e="medium";break;case 2:e="low";break;case 1:e="critical";break;case 0:e="empty";break;default:e="charging"}return e}const Hv={1:"Left Joy-Con",2:"Right Joy-Con",3:"Pro Controller"},Ws=.75,Gv=.0125,Ah=Math.PI/2;function Wv(n,e,t,i){const r=Date.now(),s=n.timestamp?(r-n.timestamp)/1e3:0;n.timestamp=r;const o=Math.sqrt(t.x**2+t.y**2+t.z**2);return n.alpha=(1-Gv)*(n.alpha+e.z*s),o!==0&&(n.beta=Ws*(n.beta+e.x*s)+(1-Ws)*(t.x*Ah/o),n.gamma=Ws*(n.gamma+e.y*s)+(1-Ws)*(t.y*-Ah/o)),{alpha:i===8198?(-1*(n.alpha*180)/Math.PI*430%90).toFixed(6):(n.alpha*180/Math.PI*430%360).toFixed(6),beta:(-1*(n.beta*180)/Math.PI).toFixed(6),gamma:i===8198?(-1*(n.gamma*180)/Math.PI).toFixed(6):(n.gamma*180/Math.PI).toFixed(6)}}function qv(n){const e=n.w*n.w,t=n.x*n.x,i=n.y*n.y,r=n.z*n.z;return{alpha:(Wa*Math.atan2(2*(n.x*n.y+n.z*n.w),t-i-r+e)).toFixed(6),beta:(Wa*-Math.asin(2*(n.x*n.z-n.y*n.w))).toFixed(6),gamma:(Wa*Math.atan2(2*(n.y*n.z+n.x*n.w),-t-i+r+e)).toFixed(6)}}function Qv(n,e,t){return t===8198?(mh.update(n.x,n.y,n.z,e.x,e.y,e.z),mh.getQuaternion()):(gh.update(n.x,n.y,n.z,e.x,e.y,e.z),gh.getQuaternion())}function En(n){const e=new DataView(n.buffer);return parseFloat((244e-6*e.getInt16(0,!0)).toFixed(6))}function Tn(n){const e=new DataView(n.buffer);return parseFloat((.06103*e.getInt16(0,!0)).toFixed(6))}function Cn(n){const e=new DataView(n.buffer);return parseFloat((1694e-7*e.getInt16(0,!0)).toFixed(6))}function Kv(n,e){const t=n.slice(15,26),i=t.slice(0,1)[0],r=t.slice(1,2)[0],s=t.slice(2,3),o=t.slice(4,10),a=[];o.forEach(u=>{a.push(u.toString(16))});const l=t.slice(11,12);return{_raw:t.slice(0,12),_hex:t.slice(0,12),firmwareVersion:{major:i,minor:r},type:Hv[s[0]],macAddress:a.join(":"),spiColorInUse:l[0]===1}}function Yv(n,e){return{_raw:n.slice(0,1),_hex:e.slice(0,1)}}function Zv(n,e){return{_raw:n.slice(1,2),_hex:e.slice(1,2)}}function Jv(n,e){return{_raw:n.slice(2,3),_hex:e.slice(2,3),level:zv(e.slice(2,3))}}function Xv(n,e){return{_raw:n.slice(2,3),_hex:e.slice(2,3)}}function jv(n,e){return{_raw:n.slice(1,3),_hex:e.slice(1,3)}}function $v(n,e){return{_raw:n.slice(3,6),_hex:e.slice(3,6),y:Boolean(1&n[3]),x:Boolean(2&n[3]),b:Boolean(4&n[3]),a:Boolean(8&n[3]),r:Boolean(64&n[3]),zr:Boolean(128&n[3]),down:Boolean(1&n[5]),up:Boolean(2&n[5]),right:Boolean(4&n[5]),left:Boolean(8&n[5]),l:Boolean(64&n[5]),zl:Boolean(128&n[5]),sr:Boolean(16&n[3])||Boolean(16&n[5]),sl:Boolean(32&n[3])||Boolean(32&n[5]),minus:Boolean(1&n[4]),plus:Boolean(2&n[4]),rightStick:Boolean(4&n[4]),leftStick:Boolean(8&n[4]),home:Boolean(16&n[4]),capture:Boolean(32&n[4]),chargingGrip:Boolean(128&n[4])}}function ey(n,e){return{_raw:n.slice(3,4),_hex:e.slice(3,4)}}function ty(n,e){let t=n[6]|(n[7]&15)<<8;t=((t/1995-1)*2).toFixed(1);let i=(n[7]>>4|n[8]<<4)*-1;return i=((i/2220+1)*2).toFixed(1),{_raw:n.slice(6,9),_hex:e.slice(6,9),horizontal:t,vertical:i}}function ny(n,e){let t=n[9]|(n[10]&15)<<8;t=((t/1995-1)*2).toFixed(1);let i=(n[10]>>4|n[11]<<4)*-1;return i=((i/2220+1)*2).toFixed(1),{_raw:n.slice(9,12),_hex:e.slice(9,12),horizontal:t,vertical:i}}function iy(n,e){return{_raw:n.slice(4),_hex:e.slice(4)}}function ry(n,e){return{_raw:n.slice(12,13),_hex:e.slice(12,13)}}function sy(n,e){return{_raw:n.slice(13,14),_hex:e.slice(13,14)}}function oy(n,e){return{_raw:n.slice(14,15),_hex:e.slice(14,15)}}function ay(n,e){return{_raw:n.slice(15),_hex:e.slice(15)}}function ly(n,e){return[{x:{_raw:n.slice(13,15),_hex:e.slice(13,15),acc:En(n.slice(13,15))},y:{_raw:n.slice(15,17),_hex:e.slice(15,17),acc:En(n.slice(15,17))},z:{_raw:n.slice(17,19),_hex:e.slice(17,19),acc:En(n.slice(17,19))}},{x:{_raw:n.slice(25,27),_hex:e.slice(25,27),acc:En(n.slice(25,27))},y:{_raw:n.slice(27,29),_hex:e.slice(27,29),acc:En(n.slice(27,29))},z:{_raw:n.slice(29,31),_hex:e.slice(29,31),acc:En(n.slice(29,31))}},{x:{_raw:n.slice(37,39),_hex:e.slice(37,39),acc:En(n.slice(37,39))},y:{_raw:n.slice(39,41),_hex:e.slice(39,41),acc:En(n.slice(39,41))},z:{_raw:n.slice(41,43),_hex:e.slice(41,43),acc:En(n.slice(41,43))}}]}function cy(n,e){return[[{_raw:n.slice(19,21),_hex:e.slice(19,21),dps:Tn(n.slice(19,21)),rps:Cn(n.slice(19,21))},{_raw:n.slice(21,23),_hex:e.slice(21,23),dps:Tn(n.slice(21,23)),rps:Cn(n.slice(21,23))},{_raw:n.slice(23,25),_hex:e.slice(23,25),dps:Tn(n.slice(23,25)),rps:Cn(n.slice(23,25))}],[{_raw:n.slice(31,33),_hex:e.slice(31,33),dps:Tn(n.slice(31,33)),rps:Cn(n.slice(31,33))},{_raw:n.slice(33,35),_hex:e.slice(33,35),dps:Tn(n.slice(33,35)),rps:Cn(n.slice(33,35))},{_raw:n.slice(35,37),_hex:e.slice(35,37),dps:Tn(n.slice(35,37)),rps:Cn(n.slice(35,37))}],[{_raw:n.slice(43,45),_hex:e.slice(43,45),dps:Tn(n.slice(43,45)),rps:Cn(n.slice(43,45))},{_raw:n.slice(45,47),_hex:e.slice(45,47),dps:Tn(n.slice(45,47)),rps:Cn(n.slice(45,47))},{_raw:n.slice(47,49),_hex:e.slice(47,49),dps:Tn(n.slice(47,49)),rps:Cn(n.slice(47,49))}]]}function uy(n){const e=.005*n.length;return{x:parseFloat((dr(n.map(i=>i[0]))*e).toFixed(6)),y:parseFloat((dr(n.map(i=>i[1]))*e).toFixed(6)),z:parseFloat((dr(n.map(i=>i[2]))*e).toFixed(6))}}function vh(n){const e=.005*n.length,t=[dr(n.map(i=>i[0])),dr(n.map(i=>i[1])),dr(n.map(i=>i[2]))].map(i=>parseFloat((i*e).toFixed(6)));return{x:t[0],y:t[1],z:t[2]}}function hy(n,e){return{_raw:n.slice(38,2),_hex:e.slice(38,2),strain:new DataView(n.buffer,39,2).getInt16(0,!0)}}const fy=async n=>{const e=({subcommand:a,expectedReport:l,timeoutErrorMessage:c="timeout."})=>u=>new Promise(async(h,f)=>{const d=setTimeout(()=>{u.removeEventListener("inputreport",m),f(new Error(c))},5e3),m=_=>{if(_.reportId!==33)return;const E=new Uint8Array(_.data.buffer);for(const[p,A]of Object.entries(l))if(E[p-1]!==A)return;u.removeEventListener("inputreport",m),clearTimeout(d),setTimeout(h,50)};u.addEventListener("inputreport",m),await u.sendReport(1,new Uint8Array([0,0,0,0,0,0,0,0,0,...a]))}),t=e({subcommand:[34,1],expectedReport:{13:128,14:34}}),i=e({subcommand:[33,33,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,243],expectedReport:{14:33}}),r=e({subcommand:[89],expectedReport:{14:89,16:32},timeoutErrorMessage:"ring-con not found."}),s=e({subcommand:[92,6,3,37,6,0,0,0,0,28,22,237,52,54,0,0,0,10,100,11,230,169,34,0,0,4,0,0,0,0,0,0,0,144,168,225,52,54],expectedReport:{14:92}}),o=e({subcommand:[90,4,1,1,2],expectedReport:{14:90}});await t(n),await i(n),await r(n),await s(n),await o(n)},dy=(n,e)=>{const t=new n.constructor(n.length+e.length);return t.set(n,0),t.set(e,n.length),t};class Fc extends EventTarget{constructor(e){super(),this.device=e,this.lastValues={timestamp:null,alpha:0,beta:0,gamma:0}}async open(){this.device.opened||await this.device.open(),this.device.addEventListener("inputreport",this._onInputReport.bind(this))}async getRequestDeviceInfo(){const i=[0,0,0,0,0,0,0,0,0,...[2]];return await this.device.sendReport(1,new Uint8Array(i)),new Promise(r=>{const s=({detail:o})=>{this.removeEventListener("deviceinfo",s),delete o._raw,delete o._hex,r(o)};this.addEventListener("deviceinfo",s)})}async getBatteryLevel(){const i=[0,0,0,0,0,0,0,0,0,...[80]];return await this.device.sendReport(1,new Uint8Array(i)),new Promise(r=>{const s=({detail:o})=>{this.removeEventListener("batterylevel",s),delete o._raw,delete o._hex,r(o)};this.addEventListener("batterylevel",s)})}async enableSimpleHIDMode(){const i=[0,0,0,0,0,0,0,0,0,...[3,63]];await this.device.sendReport(1,new Uint8Array(i))}async enableStandardFullMode(){const i=[0,0,0,0,0,0,0,0,0,...[3,48]];await this.device.sendReport(1,new Uint8Array(i))}async enableIMUMode(){const i=[0,0,0,0,0,0,0,0,0,...[64,1]];await this.device.sendReport(1,new Uint8Array(i))}async disableIMUMode(){const i=[0,0,0,0,0,0,0,0,0,...[64,0]];await this.device.sendReport(1,new Uint8Array(i))}async enableVibration(){const i=[0,0,1,64,64,0,1,64,64,...[72,1]];await this.device.sendReport(1,new Uint8Array(i))}async disableVibration(){const i=[0,0,1,64,64,0,1,64,64,...[72,0]];await this.device.sendReport(1,new Uint8Array(i))}async enableRingCon(){await fy(this.device)}async enableUSBHIDJoystickReport(){this.device.collections[0].outputReports.find(t=>t.reportId==128)!=null&&(await this.device.sendReport(128,new Uint8Array([1])),await this.device.sendReport(128,new Uint8Array([2])),await this.device.sendReport(1,new Uint8Array([3])),await this.device.sendReport(128,new Uint8Array([4])))}async rumble(e,t,i){const r=(d,m,_)=>Math.min(Math.max(d,m),_),o=new Uint8Array(9);o[0]=0;let a=r(e,40.875885,626.286133),l=r(t,81.75177,1252.572266);l=(Math.round(32*Math.log2(l*.1))-96)*4,a=Math.round(32*Math.log2(a*.1))-64;const c=r(i,0,1);let u;c==0?u=0:c<.117?u=(Math.log2(c*1e3)*32-96)/(5-Math.pow(c,2))-1:c<.23?u=Math.log2(c*1e3)*32-96-92:u=(Math.log2(c*1e3)*32-96)*2-246;let h=Math.round(u)*.5;const f=h%2;f>0&&--h,h=h>>1,h+=64,f>0&&(h|=32768),o[1]=l&255,o[2]=u+(l>>>8&255),o[3]=a+(h>>>8&255),o[4]+=h&255;for(let d=0;d<4;d++)o[5+d]=o[1+d];await this.device.sendReport(16,new Uint8Array(o))}async setLEDState(e){const t=[0,0,0,0,0,0,0,0],i=[48,e];await this.device.sendReport(1,new Uint8Array([...t,0,...i]))}async setLED(e){this.ledstate|=1<<e,await this.setLEDState(this.ledstate)}async resetLED(e){this.ledstate&=~(1<<e|1<<4+e),await this.setLEDState(this.ledstate)}async blinkLED(e){this.ledstate&=~(1<<e),this.ledstate|=1<<4+e,await this.setLEDState(this.ledstate)}_onInputReport(e){var a,l;let{data:t,reportId:i,device:r}=e;if(!t)return;t=dy(new Uint8Array([i]),new Uint8Array(t.buffer));const s=t.map(c=>c.toString(16));let o={inputReportID:Yv(t,s)};switch(i){case 63:{o={...o,buttonStatus:jv(t,s),analogStick:ey(t,s),filter:iy(t,s)};break}case 33:case 48:{if(o={...o,timer:Zv(t,s),batteryLevel:Jv(t,s),connectionInfo:Xv(t,s),buttonStatus:$v(t,s),analogStickLeft:ty(t,s),analogStickRight:ny(t,s),vibrator:ry(t,s)},i===33&&(o={...o,ack:sy(t,s),subcommandID:oy(t,s),subcommandReplyData:ay(t,s),deviceInfo:Kv(t)}),i===48){const c=ly(t,s),u=cy(t,s),h=vh(u.map(_=>_.map(E=>E.rps))),f=vh(u.map(_=>_.map(E=>E.dps))),d=uy(c.map(_=>[_.x.acc,_.y.acc,_.z.acc])),m=Qv(h,d,r.productId);o={...o,accelerometers:c,gyroscopes:u,actualAccelerometer:d,actualGyroscope:{dps:f,rps:h},actualOrientation:Wv(this.lastValues,h,d,r.productId),actualOrientationQuaternion:qv(m),quaternion:m,ringCon:hy(t,s)}}break}}(a=o.deviceInfo)!=null&&a.type&&this._receiveDeviceInfo(o.deviceInfo),(l=o.batteryLevel)!=null&&l.level&&this._receiveBatteryLevel(o.batteryLevel),this._receiveInputEvent(o)}_receiveDeviceInfo(e){this.dispatchEvent(new CustomEvent("deviceinfo",{detail:e}))}_receiveBatteryLevel(e){this.dispatchEvent(new CustomEvent("batterylevel",{detail:e}))}}class Wo extends Fc{constructor(e){super(e)}_receiveInputEvent(e){delete e.buttonStatus.x,delete e.buttonStatus.y,delete e.buttonStatus.b,delete e.buttonStatus.a,delete e.buttonStatus.plus,delete e.buttonStatus.r,delete e.buttonStatus.zr,delete e.buttonStatus.home,delete e.buttonStatus.rightStick,this.dispatchEvent(new CustomEvent("hidinput",{detail:e}))}}class py extends Fc{constructor(e){super(e)}_receiveInputEvent(e){delete e.buttonStatus.up,delete e.buttonStatus.down,delete e.buttonStatus.left,delete e.buttonStatus.right,delete e.buttonStatus.minus,delete e.buttonStatus.l,delete e.buttonStatus.zl,delete e.buttonStatus.capture,delete e.buttonStatus.leftStick,this.dispatchEvent(new CustomEvent("hidinput",{detail:e}))}}class my extends Fc{constructor(e){super(e)}_receiveInputEvent(e){this.dispatchEvent(new CustomEvent("hidinput",{detail:e}))}}const qo=new Map,qa=[],Sp=n=>{const e=qa.indexOf(n);return e>=0?e:(qa.push(n),qa.length-1)},Nc=async n=>{const e=Sp(n);console.log(`HID connected: ${e} ${n.productId.toString(16)} ${n.productName}`),qo.set(e,await vy(n))},gy=async n=>{const e=Sp(n);console.log(`HID disconnected: ${e} ${n.productId.toString(16)} ${n.productName}`),qo.delete(e)};navigator.hid.addEventListener("connect",async({device:n})=>{Nc(n)});navigator.hid.addEventListener("disconnect",({device:n})=>{gy(n)});document.addEventListener("DOMContentLoaded",async()=>{(await navigator.hid.getDevices()).forEach(async e=>{await Nc(e)})});const Ay=async()=>{const n=[{vendorId:1406}];try{const[e]=await navigator.hid.requestDevice({filters:n});if(!e)return;await Nc(e)}catch(e){console.error(e.name,e.message)}},vy=async n=>{let e=null;return n.productId===8198?e=new Wo(n):n.productId===8199&&n.productName==="Joy-Con (R)"&&(e=new py(n)),e||(e=new my(n)),await e.open(),await e.enableUSBHIDJoystickReport(),await e.enableStandardFullMode(),await e.enableIMUMode(),e},yy=[{name:"B",read_value:n=>n.buttonStatus.b},{name:"A",read_value:n=>n.buttonStatus.a},{name:"X",read_value:n=>n.buttonStatus.x},{name:"Y",read_value:n=>n.buttonStatus.y},{name:"R",read_value:n=>n.buttonStatus.r},{name:"ZR",read_value:n=>n.buttonStatus.zr},{name:"HomeButton",read_value:n=>n.buttonStatus.home},{name:"PlusButton",read_value:n=>n.buttonStatus.plus},{name:"SRButton",read_value:n=>n.buttonStatus.sr},{name:"slButton",read_value:n=>n.buttonStatus.sl},{name:"r-stick",read_value:n=>n.buttonStatus.rightStick},{name:"LStickTop",read_value:n=>n.analogStickRight.vertical<=-.2,threshold:.5},{name:"LStickDown",read_value:n=>n.analogStickRight.vertical>=1.4,threshold:.5},{name:"LStickLeft",read_value:n=>n.analogStickRight.horizontal<=-.9,threshold:.5},{name:"LStickRight",read_value:n=>n.analogStickRight.horizontal>=1.3,threshold:.5},{name:"RVerticalMove",read_value:n=>{let e=n.actualAccelerometer;return!e||!e.x?0:e.x},threshold:.001,computePercent(n){let e=-.009,t=.009;return n<=e?0:n>=t?1:((n-e)/(t-e)).toFixed(2)},computeFrequency(n,e){let i=this.computePercent(n)*200,r=Math.abs(Number(e.actualOrientation.gamma))*2,s=Math.abs(Number(e.actualOrientation.beta))*2,o=Math.abs(Number(e.actualOrientation.alpha))*2,a=e.actualGyroscope.dps,l=Math.abs(Number(a.x*10)),c=Math.abs(Number(a.y*15)),u=Math.abs(Number(a.z*10)),h=e.actualAccelerometer.y*1;return console.log(l),i+r+h+o+s+l+c+u}}],xy=[{name:"Down",read_value:n=>n.buttonStatus.down},{name:"Right",read_value:n=>n.buttonStatus.right},{name:"Up",read_value:n=>n.buttonStatus.up},{name:"Left",read_value:n=>n.buttonStatus.left},{name:"L",read_value:n=>n.buttonStatus.l},{name:"ZL",read_value:n=>n.buttonStatus.zl},{name:"LVerticalMove",read_value:n=>{let e=n.actualAccelerometer;return!e||!e.x?0:e.x},threshold:.002,computePercent(n){let e=-.009,t=.009;return n<=e?0:n>=t?1:((n-e)/(t-e)).toFixed(2)}},{name:"capture-button-as-note",read_value:n=>n.buttonStatus.capture},{name:"minus-button-as-note",read_value:n=>n.buttonStatus.minus},{name:"minus-button-as-cc",read_value:n=>n.buttonStatus.minus},{name:"capture-button-as-cc",read_value:n=>n.buttonStatus.capture},{name:"l-sl-button",read_value:n=>n.buttonStatus.sl},{name:"l-sr-button",read_value:n=>n.buttonStatus.sr},{name:"l-stick",read_value:n=>n.buttonStatus.leftStick},{name:"lOrientationBeta",read_value:n=>(Number(n.actualOrientation.beta)+90)/180,threshold:10/180},{name:"lOrientationGamma",read_value:n=>(Number(n.actualOrientation.gamma)+90)/180,threshold:10/180},{name:"lOrientationBetaAlpha",read_value:n=>(Number(n.actualOrientation.alpha)+90)/180,threshold:10/180}],_y="data:image/png;base64,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",wy="data:image/png;base64,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";const Ps=(n,e)=>{const t=n.__vccOpts||n;for(const[i,r]of e)t[i]=r;return t},by={name:"dino.vue",inject:["addInputDetailCBK","clearAllRegisterEvents"],data(){return{hotkeys:{},notes:[],obstacleCount:0}},watch:{obstacles(n){console.log("obstacles",n)}},created(){let n=this;n.hotkeys=Go(),n.notes=n.getNotes(n.hotkeys),console.log(n.notes)},unmounted(){this.clearAllRegisterEvents()},mounted(){let n=this;(function(){for(var b=0,T=["ms","moz","webkit","o"],y=0;y<T.length&&!window.requestAnimationFrame;++y)window.requestAnimationFrame=window[T[y]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[T[y]+"CancelAnimationFrame"]||window[T[y]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(v,w){var g=new Date().getTime(),N=Math.max(0,16-(g-b)),z=window.setTimeout(function(){v(g+N)},N);return b=g+N,z}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(v){clearTimeout(v)})})();var e=window.AudioContext||window.webkitAudioContext||!1;function t(b,T){if(t.instance_)return t.instance_;t.instance_=this,this.outerContainerEl=document.querySelector(b),this.containerEl=null,this.snackbarEl=null,this.config=T||t.config,this.dimensions=t.defaultDimensions,this.canvas=null,this.canvasCtx=null,this.tRex=null,this.distanceMeter=null,this.distanceRan=0,this.highestScore=0,this.time=0,this.runningTime=0,this.msPerFrame=1e3/r,this.currentSpeed=this.config.SPEED,this.obstacles=[],this.started=!1,this.activated=!1,this.crashed=!1,this.paused=!1,this.resizeTimerId_=null,this.playCount=0,this.audioBuffer=null,this.soundFx={},this.audioContext=null,this.images={},this.imagesLoaded=0,this.loadImages()}window.Runner=t;var i=600,r=60,s=window.devicePixelRatio>1,o=window.navigator.userAgent.indexOf("CriOS")>-1||window.navigator.userAgent=="UIWebViewForStaticFileContent",a=window.navigator.userAgent.indexOf("Mobi")>-1||o;t.config={ACCELERATION:.001,BG_CLOUD_SPEED:.2,BOTTOM_PAD:10,CLEAR_TIME:3e3,CLOUD_FREQUENCY:.5,GAMEOVER_CLEAR_TIME:750,GAP_COEFFICIENT:.6,GRAVITY:.6,INITIAL_JUMP_VELOCITY:12,MAX_CLOUDS:6,MAX_OBSTACLE_LENGTH:3,MAX_OBSTACLE_DUPLICATION:2,MAX_SPEED:13,MIN_JUMP_HEIGHT:35,MOBILE_SPEED_COEFFICIENT:1.2,RESOURCE_TEMPLATE_ID:"audio-resources",SPEED:4,SPEED_DROP_COEFFICIENT:1},t.defaultDimensions={WIDTH:i,HEIGHT:150},t.classes={CANVAS:"runner-canvas",CONTAINER:"runner-container",CRASHED:"crashed",ICON:"icon-offline",SNACKBAR:"snackbar",SNACKBAR_SHOW:"snackbar-show",TOUCH_CONTROLLER:"controller"},t.spriteDefinition={LDPI:{CACTUS_LARGE:{x:332,y:2},CACTUS_SMALL:{x:228,y:2},CLOUD:{x:86,y:2},HORIZON:{x:2,y:54},PTERODACTYL:{x:134,y:2},RESTART:{x:2,y:2},TEXT_SPRITE:{x:484,y:2},TREX:{x:677,y:2}},HDPI:{CACTUS_LARGE:{x:652,y:2},CACTUS_SMALL:{x:446,y:2},CLOUD:{x:166,y:2},HORIZON:{x:2,y:104},PTERODACTYL:{x:260,y:2},RESTART:{x:2,y:2},TEXT_SPRITE:{x:954,y:2},TREX:{x:1338,y:2}}},t.sounds={BUTTON_PRESS:"offline-sound-press",HIT:"offline-sound-hit",SCORE:"offline-sound-reached"},t.keycodes={JUMP:{38:1,32:1},DUCK:{40:1},RESTART:{13:1}},t.events={ANIM_END:"webkitAnimationEnd",CLICK:"click",KEYDOWN:"keydown",KEYUP:"keyup",MOUSEDOWN:"mousedown",MOUSEUP:"mouseup",RESIZE:"resize",TOUCHEND:"touchend",TOUCHSTART:"touchstart",VISIBILITY:"visibilitychange",BLUR:"blur",FOCUS:"focus",LOAD:"load"},t.prototype={isDisabled:function(){return loadTimeData&&loadTimeData.valueExists("disabledEasterEgg")},setupDisabledRunner:function(){this.containerEl=document.createElement("div"),this.containerEl.className=t.classes.SNACKBAR,this.containerEl.textContent=loadTimeData.getValue("disabledEasterEgg"),this.outerContainerEl.appendChild(this.containerEl),document.addEventListener(t.events.KEYDOWN,function(b){t.keycodes.JUMP[b.keyCode]&&(this.containerEl.classList.add(t.classes.SNACKBAR_SHOW),document.querySelector(".icon").classList.add("icon-disabled"))}.bind(this))},updateConfigSetting:function(b,T){if(b in this.config&&T!=null)switch(this.config[b]=T,b){case"GRAVITY":case"MIN_JUMP_HEIGHT":case"SPEED_DROP_COEFFICIENT":this.tRex.config[b]=T;break;case"INITIAL_JUMP_VELOCITY":this.tRex.setJumpVelocity(T);break;case"SPEED":this.setSpeed(T);break}},loadImages:function(){s?(t.imageSprite=document.getElementById("offline-resources-2x"),this.spriteDef=t.spriteDefinition.HDPI):(t.imageSprite=document.getElementById("offline-resources-1x"),this.spriteDef=t.spriteDefinition.LDPI),this.init()},loadSounds(){if(!o){this.audioContext=new e,document.getElementById(this.config.RESOURCE_TEMPLATE_ID).content;for(const b in t.sounds){let T=document.getElementById(t.sounds[b]).src;T=T.substr(T.indexOf(",")+1);const y=h(T);this.audioContext.decodeAudioData(y,function(v,w){this.soundFx[v]=w}.bind(this,b))}}},setSpeed:function(b){var T=b||this.currentSpeed;if(this.dimensions.WIDTH<i){var y=T*this.dimensions.WIDTH/i*this.config.MOBILE_SPEED_COEFFICIENT;this.currentSpeed=y>T?T:y}else b&&(this.currentSpeed=b)},init:function(){this.adjustDimensions(),this.setSpeed(),this.containerEl=document.createElement("div"),this.containerEl.className=t.classes.CONTAINER,this.canvas=u(this.containerEl,this.dimensions.WIDTH,this.dimensions.HEIGHT,t.classes.PLAYER),this.canvasCtx=this.canvas.getContext("2d"),this.canvasCtx.fillStyle="#f7f7f7",this.canvasCtx.fill(),t.updateCanvasScaling(this.canvas),this.horizon=new k(this.canvas,this.spriteDef,this.dimensions,this.config.GAP_COEFFICIENT),this.distanceMeter=new L(this.canvas,this.spriteDef.TEXT_SPRITE,this.dimensions.WIDTH),this.tRex=new M(this.canvas,this.spriteDef.TREX),this.outerContainerEl.appendChild(this.containerEl),a&&this.createTouchController(),this.startListening(),this.update(),window.addEventListener(t.events.RESIZE,this.debounceResize.bind(this))},createTouchController:function(){this.touchController=document.createElement("div"),this.touchController.className=t.classes.TOUCH_CONTROLLER},debounceResize:function(){this.resizeTimerId_||(this.resizeTimerId_=setInterval(this.adjustDimensions.bind(this),250))},adjustDimensions:function(){clearInterval(this.resizeTimerId_),this.resizeTimerId_=null;var b=window.getComputedStyle(this.outerContainerEl),T=Number(b.paddingLeft.substr(0,b.paddingLeft.length-2));this.dimensions.WIDTH=this.outerContainerEl.offsetWidth-T*2,this.canvas&&(this.canvas.width=this.dimensions.WIDTH,this.canvas.height=this.dimensions.HEIGHT,t.updateCanvasScaling(this.canvas),this.distanceMeter.calcXPos(this.dimensions.WIDTH),this.clearCanvas(),this.horizon.update(0,0,!0),this.tRex.update(0),this.activated||this.crashed||this.paused?(this.containerEl.style.width=this.dimensions.WIDTH+"px",this.containerEl.style.height=this.dimensions.HEIGHT+"px",this.distanceMeter.update(0,Math.ceil(this.distanceRan)),this.stop()):this.tRex.draw(0,0),this.crashed&&this.gameOverPanel&&(this.gameOverPanel.updateDimensions(this.dimensions.WIDTH),this.gameOverPanel.draw()))},playIntro:function(){!this.started&&!this.crashed?(this.playingIntro=!0,this.tRex.playingIntro=!0,document.styleSheets[1].insertRule("@-webkit-keyframes intro { from { width:"+M.config.WIDTH+"px }to { width: "+this.dimensions.WIDTH+"px }}",0),this.containerEl.addEventListener(t.events.ANIM_END,this.startGame.bind(this)),this.containerEl.style.webkitAnimation="intro .4s ease-out 1 both",this.containerEl.style.width=this.dimensions.WIDTH+"px",this.touchController&&this.outerContainerEl.appendChild(this.touchController),this.activated=!0,this.started=!0):this.crashed&&this.restart()},startGame:function(){this.runningTime=0,this.playingIntro=!1,this.tRex.playingIntro=!1,this.containerEl.style.webkitAnimation="",this.playCount++,document.addEventListener(t.events.VISIBILITY,this.onVisibilityChange.bind(this)),window.addEventListener(t.events.BLUR,this.onVisibilityChange.bind(this)),window.addEventListener(t.events.FOCUS,this.onVisibilityChange.bind(this))},clearCanvas:function(){this.canvasCtx.clearRect(0,0,this.dimensions.WIDTH,this.dimensions.HEIGHT)},update:function(){this.drawPending=!1;var b=f(),T=b-(this.time||b);if(this.time=b,this.activated){this.clearCanvas(),this.tRex.jumping&&this.tRex.updateJump(T),this.runningTime+=T;var y=this.runningTime>this.config.CLEAR_TIME;this.tRex.jumpCount==1&&!this.playingIntro&&this.playIntro(),this.playingIntro?this.horizon.update(0,this.currentSpeed,y):(T=this.started?T:0,this.horizon.update(T,this.currentSpeed,y));var v=y&&m(this.horizon.obstacles[0],this.tRex);v?this.gameOver():(this.distanceRan+=this.currentSpeed*T/this.msPerFrame,this.currentSpeed<this.config.MAX_SPEED&&(this.currentSpeed+=this.config.ACCELERATION));var w=this.distanceMeter.update(T,Math.ceil(this.distanceRan));w&&this.playSound(this.soundFx.SCORE)}this.crashed||(this.tRex.update(T),this.raq())},handleEvent:function(b){return function(T,y){switch(T){case y.KEYDOWN:case y.TOUCHSTART:case y.MOUSEDOWN:this.onKeyDown(b);break;case y.KEYUP:case y.TOUCHEND:case y.MOUSEUP:this.onKeyUp(b);break}}.bind(this)(b.type,t.events)},startListening:function(){document.addEventListener(t.events.KEYDOWN,this),document.addEventListener(t.events.KEYUP,this),a?(this.touchController.addEventListener(t.events.TOUCHSTART,this),this.touchController.addEventListener(t.events.TOUCHEND,this),this.containerEl.addEventListener(t.events.TOUCHSTART,this)):(document.addEventListener(t.events.MOUSEDOWN,this),document.addEventListener(t.events.MOUSEUP,this))},stopListening:function(){document.removeEventListener(t.events.KEYDOWN,this),document.removeEventListener(t.events.KEYUP,this),a?(this.touchController.removeEventListener(t.events.TOUCHSTART,this),this.touchController.removeEventListener(t.events.TOUCHEND,this),this.containerEl.removeEventListener(t.events.TOUCHSTART,this)):(document.removeEventListener(t.events.MOUSEDOWN,this),document.removeEventListener(t.events.MOUSEUP,this))},onKeyDown:function(b){a&&b.preventDefault(),!this.crashed&&(t.keycodes.JUMP[b.keyCode]||b.type==t.events.TOUCHSTART)&&(this.activated||(this.loadSounds(),this.activated=!0),!this.tRex.jumping&&!this.tRex.ducking&&(this.playSound(this.soundFx.BUTTON_PRESS),this.tRex.startJump(this.currentSpeed))),this.crashed&&b.type==t.events.TOUCHSTART&&b.currentTarget==this.containerEl&&this.restart(),this.activated&&!this.crashed&&t.keycodes.DUCK[b.keyCode]&&(b.preventDefault(),this.tRex.jumping?this.tRex.setSpeedDrop():!this.tRex.jumping&&!this.tRex.ducking&&this.tRex.setDuck(!0))},onKeyUp:function(b){var T=String(b.keyCode),y=t.keycodes.JUMP[T]||b.type==t.events.TOUCHEND||b.type==t.events.MOUSEDOWN;if(this.isRunning()&&y)this.tRex.endJump();else if(t.keycodes.DUCK[T])this.tRex.speedDrop=!1,this.tRex.setDuck(!1);else if(this.crashed){var v=f()-this.time;(t.keycodes.RESTART[T]||this.isLeftClickOnCanvas(b)||v>=this.config.GAMEOVER_CLEAR_TIME&&t.keycodes.JUMP[T])&&this.restart()}else this.paused&&y&&(this.tRex.reset(),this.play())},isLeftClickOnCanvas:function(b){return b.button!=null&&b.button<2&&b.type==t.events.MOUSEUP&&b.target==this.canvas},raq:function(){this.drawPending||(this.drawPending=!0,this.raqId=requestAnimationFrame(this.update.bind(this)))},isRunning:function(){return!!this.raqId},gameOver:function(){this.playSound(this.soundFx.HIT),c(200),this.stop(),this.crashed=!0,this.distanceMeter.acheivement=!1,this.tRex.update(100,M.status.CRASHED),this.gameOverPanel?this.gameOverPanel.draw():this.gameOverPanel=new d(this.canvas,this.spriteDef.TEXT_SPRITE,this.spriteDef.RESTART,this.dimensions),this.distanceRan>this.highestScore&&(this.highestScore=Math.ceil(this.distanceRan),this.distanceMeter.setHighScore(this.highestScore),Math.round(this.highestScore*.025)),this.time=f()},stop:function(){this.activated=!1,this.paused=!0,cancelAnimationFrame(this.raqId),this.raqId=0},play:function(){this.crashed||(this.activated=!0,this.paused=!1,this.tRex.update(0,M.status.RUNNING),this.time=f(),this.update())},restart:function(){this.raqId||(this.playCount++,this.runningTime=0,this.activated=!0,this.crashed=!1,this.distanceRan=0,this.setSpeed(this.config.SPEED),this.time=f(),this.containerEl.classList.remove(t.classes.CRASHED),this.clearCanvas(),this.distanceMeter.reset(this.highestScore),this.horizon.reset(),this.tRex.reset(),this.playSound(this.soundFx.BUTTON_PRESS),this.update())},onVisibilityChange:function(b){document.hidden||document.webkitHidden||b.type=="blur"?this.stop():this.crashed||(this.tRex.reset(),this.play())},playSound:function(b){if(b){var T=this.audioContext.createBufferSource();T.buffer=b,T.connect(this.audioContext.destination),T.start(0)}}},t.updateCanvasScaling=function(b,T,y){var v=b.getContext("2d"),w=Math.floor(window.devicePixelRatio)||1,g=Math.floor(v.webkitBackingStorePixelRatio)||1,N=w/g;if(w!==g){var z=T||b.width,Z=y||b.height;return b.width=z*N,b.height=Z*N,b.style.width=z+"px",b.style.height=Z+"px",v.scale(N,N),!0}else w==1&&(b.style.width=b.width+"px",b.style.height=b.height+"px");return!1};function l(b,T){return Math.floor(Math.random()*(T-b+1))+b}function c(b){a&&window.navigator.vibrate&&window.navigator.vibrate(b),F()}function u(b,T,y,v){var w=document.createElement("canvas");return w.className=v?t.classes.CANVAS+" "+v:t.classes.CANVAS,w.width=T,w.height=y,b.appendChild(w),w}function h(b){const T=b.length/4*3,y=atob(b),v=new ArrayBuffer(T),w=new Uint8Array(v);for(let g=0;g<T;g++)w[g]=y.charCodeAt(g);return w.buffer}function f(){return new Date().getTime()}function d(b,T,y,v){this.canvas=b,this.canvasCtx=b.getContext("2d"),this.canvasDimensions=v,this.textImgPos=T,this.restartImgPos=y,this.draw()}d.dimensions={TEXT_X:0,TEXT_Y:13,TEXT_WIDTH:191,TEXT_HEIGHT:11,RESTART_WIDTH:36,RESTART_HEIGHT:32},d.prototype={updateDimensions:function(b,T){this.canvasDimensions.WIDTH=b,T&&(this.canvasDimensions.HEIGHT=T)},draw:function(){var b=d.dimensions,T=this.canvasDimensions.WIDTH/2,y=b.TEXT_X,v=b.TEXT_Y,w=b.TEXT_WIDTH,g=b.TEXT_HEIGHT,N=Math.round(T-b.TEXT_WIDTH/2),z=Math.round((this.canvasDimensions.HEIGHT-25)/3),Z=b.TEXT_WIDTH,ee=b.TEXT_HEIGHT,te=b.RESTART_WIDTH,se=b.RESTART_HEIGHT,H=T-b.RESTART_WIDTH/2,W=this.canvasDimensions.HEIGHT/2;s&&(v*=2,y*=2,w*=2,g*=2,te*=2,se*=2),y+=this.textImgPos.x,v+=this.textImgPos.y,this.canvasCtx.drawImage(t.imageSprite,y,v,w,g,N,z,Z,ee),this.canvasCtx.drawImage(t.imageSprite,this.restartImgPos.x,this.restartImgPos.y,te,se,H,W,b.RESTART_WIDTH,b.RESTART_HEIGHT)}};function m(b,T,y){t.defaultDimensions.WIDTH+b.xPos;var v=new A(T.xPos+1,T.yPos+1,T.config.WIDTH-2,T.config.HEIGHT-2),w=new A(b.xPos+1,b.yPos+1,b.typeConfig.width*b.size-2,b.typeConfig.height-2);if(y&&E(y,v,w),p(v,w))for(var g=b.collisionBoxes,N=T.ducking?M.collisionBoxes.DUCKING:M.collisionBoxes.RUNNING,z=0;z<N.length;z++)for(var Z=0;Z<g.length;Z++){var ee=_(N[z],v),te=_(g[Z],w),se=p(ee,te);if(y&&E(y,ee,te),se)return[ee,te]}return!1}function _(b,T){return new A(b.x+T.x,b.y+T.y,b.width,b.height)}function E(b,T,y){b.save(),b.strokeStyle="#f00",b.strokeRect(T.x,T.y,T.width,T.height),b.strokeStyle="#0f0",b.strokeRect(y.x,y.y,y.width,y.height),b.restore()}function p(b,T){var y=!1;b.x,b.y;var v=T.x;return T.y,b.x<v+T.width&&b.x+b.width>v&&b.y<T.y+T.height&&b.height+b.y>T.y&&(y=!0),y}function A(b,T,y,v){this.x=b,this.y=T,this.width=y,this.height=v}function R(b,T,y,v,w,g){this.canvasCtx=b,this.spritePos=y,this.typeConfig=T,this.gapCoefficient=w,this.size=l(1,R.MAX_OBSTACLE_LENGTH),this.dimensions=v,this.remove=!1,this.xPos=0,this.yPos=0,this.width=0,this.collisionBoxes=[],this.gap=0,this.speedOffset=0,this.currentFrame=0,this.timer=0,this.init(g)}R.MAX_GAP_COEFFICIENT=1.5,R.MAX_OBSTACLE_LENGTH=3,R.prototype={init:function(b){if(this.cloneCollisionBoxes(),this.size>1&&this.typeConfig.multipleSpeed>b&&(this.size=1),this.width=this.typeConfig.width*this.size,this.xPos=this.dimensions.WIDTH-this.width,this.note=n.getRandomNote(),Array.isArray(this.typeConfig.yPos)){var T=a?this.typeConfig.yPosMobile:this.typeConfig.yPos;this.yPos=T[l(0,T.length-1)]}else this.yPos=this.typeConfig.yPos;this.draw(),this.size>1&&(this.collisionBoxes[1].width=this.width-this.collisionBoxes[0].width-this.collisionBoxes[2].width,this.collisionBoxes[2].x=this.width-this.collisionBoxes[2].width),this.typeConfig.speedOffset&&(this.speedOffset=Math.random()>.5?this.typeConfig.speedOffset:-this.typeConfig.speedOffset),this.gap=this.getGap(this.gapCoefficient,b)},draw:function(){var b=this.typeConfig.width,T=this.typeConfig.height;s&&(b=b*2,T=T*2);var y=b*this.size*(.5*(this.size-1))+this.spritePos.x;this.currentFrame>0&&(y+=b*this.currentFrame),this.canvasCtx.font="16px Arial",this.canvasCtx.fillStyle="white",this.canvasCtx.fillText(this.note,this.xPos,this.yPos-5),this.canvasCtx.drawImage(t.imageSprite,y,this.spritePos.y,b*this.size,T,this.xPos,this.yPos,this.typeConfig.width*this.size,this.typeConfig.height)},update:function(b,T){this.remove||(this.typeConfig.speedOffset&&(T+=this.speedOffset),this.xPos-=Math.floor(T*r/1e3*b),this.typeConfig.numFrames&&(this.timer+=b,this.timer>=this.typeConfig.frameRate&&(this.currentFrame=this.currentFrame==this.typeConfig.numFrames-1?0:this.currentFrame+1,this.timer=0)),this.draw(),this.isVisible()||(this.remove=!0))},getGap:function(b,T){var y=Math.round(this.width*T+this.typeConfig.minGap*b),v=Math.round(y*R.MAX_GAP_COEFFICIENT);return l(y,v)},isVisible:function(){return this.xPos+this.width>0},cloneCollisionBoxes:function(){for(var b=this.typeConfig.collisionBoxes,T=b.length-1;T>=0;T--)this.collisionBoxes[T]=new A(b[T].x,b[T].y,b[T].width,b[T].height)}},R.types=[{type:"CACTUS_SMALL",width:17,height:35,yPos:105,multipleSpeed:4,minGap:250,minSpeed:0,collisionBoxes:[new A(0,7,5,27),new A(4,0,6,34),new A(10,4,7,14)]},{type:"CACTUS_LARGE",width:25,height:50,yPos:90,multipleSpeed:7,minGap:250,minSpeed:0,collisionBoxes:[new A(0,12,7,38),new A(8,0,7,49),new A(13,10,10,38)]},{type:"PTERODACTYL",width:46,height:40,yPos:[100,75,50],yPosMobile:[100,50],multipleSpeed:999,minSpeed:8.5,minGap:300,collisionBoxes:[new A(15,15,16,5),new A(18,21,24,6),new A(2,14,4,3),new A(6,10,4,7),new A(10,8,6,9)],numFrames:2,frameRate:1e3/6,speedOffset:.8}];function M(b,T){this.canvas=b,this.canvasCtx=b.getContext("2d"),this.spritePos=T,this.xPos=0,this.yPos=0,this.groundYPos=0,this.currentFrame=0,this.currentAnimFrames=[],this.blinkDelay=0,this.animStartTime=0,this.timer=0,this.msPerFrame=1e3/r,this.config=M.config,this.status=M.status.WAITING,this.jumping=!1,this.ducking=!1,this.jumpVelocity=0,this.reachedMinHeight=!1,this.speedDrop=!1,this.jumpCount=0,this.jumpspotX=0,this.init()}M.config={DROP_VELOCITY:-5,GRAVITY:.6,HEIGHT:47,HEIGHT_DUCK:25,INIITAL_JUMP_VELOCITY:-10,INTRO_DURATION:1500,MAX_JUMP_HEIGHT:30,MIN_JUMP_HEIGHT:30,SPEED_DROP_COEFFICIENT:3,SPRITE_WIDTH:262,START_X_POS:50,WIDTH:44,WIDTH_DUCK:59},M.collisionBoxes={DUCKING:[new A(1,18,55,25)],RUNNING:[new A(22,0,17,16),new A(1,18,30,9),new A(10,35,14,8),new A(1,24,29,5),new A(5,30,21,4),new A(9,34,15,4)]},M.status={CRASHED:"CRASHED",DUCKING:"DUCKING",JUMPING:"JUMPING",RUNNING:"RUNNING",WAITING:"WAITING"},M.BLINK_TIMING=7e3,M.animFrames={WAITING:{frames:[44,0],msPerFrame:1e3/3},RUNNING:{frames:[88,132],msPerFrame:1e3/12},CRASHED:{frames:[220],msPerFrame:1e3/60},JUMPING:{frames:[0],msPerFrame:1e3/60},DUCKING:{frames:[262,321],msPerFrame:1e3/8}},M.prototype={init:function(){this.blinkDelay=this.setBlinkDelay(),this.groundYPos=t.defaultDimensions.HEIGHT-this.config.HEIGHT-t.config.BOTTOM_PAD,this.yPos=this.groundYPos,this.minJumpHeight=this.groundYPos-this.config.MIN_JUMP_HEIGHT,this.draw(0,0),this.update(0,M.status.WAITING)},setJumpVelocity:function(b){this.config.INIITAL_JUMP_VELOCITY=-b,this.config.DROP_VELOCITY=-b/2},update:function(b,T){this.timer+=b,T&&(this.status=T,this.currentFrame=0,this.msPerFrame=M.animFrames[T].msPerFrame,this.currentAnimFrames=M.animFrames[T].frames,T==M.status.WAITING&&(this.animStartTime=f(),this.setBlinkDelay())),this.playingIntro&&this.xPos<this.config.START_X_POS&&(this.xPos+=Math.round(this.config.START_X_POS/this.config.INTRO_DURATION*b)),this.status==M.status.WAITING?this.blink(f()):this.draw(this.currentAnimFrames[this.currentFrame],0),this.timer>=this.msPerFrame&&(this.currentFrame=this.currentFrame==this.currentAnimFrames.length-1?0:this.currentFrame+1,this.timer=0),this.speedDrop&&this.yPos==this.groundYPos&&(this.speedDrop=!1,this.setDuck(!0))},draw:function(b,T){var y=b,v=T,w=this.ducking&&this.status!=M.status.CRASHED?this.config.WIDTH_DUCK:this.config.WIDTH,g=this.config.HEIGHT;s&&(y*=2,v*=2,w*=2,g*=2),y+=this.spritePos.x,v+=this.spritePos.y,this.ducking&&this.status!=M.status.CRASHED?this.canvasCtx.drawImage(t.imageSprite,y,v,w,g,this.xPos,this.yPos,this.config.WIDTH_DUCK,this.config.HEIGHT):(this.ducking&&this.status==M.status.CRASHED&&this.xPos++,this.canvasCtx.drawImage(t.imageSprite,y,v,w,g,this.xPos,this.yPos,this.config.WIDTH,this.config.HEIGHT))},setBlinkDelay:function(){this.blinkDelay=Math.ceil(Math.random()*M.BLINK_TIMING)},blink:function(b){var T=b-this.animStartTime;T>=this.blinkDelay&&(this.draw(this.currentAnimFrames[this.currentFrame],0),this.currentFrame==1&&(this.setBlinkDelay(),this.animStartTime=b))},startJump:function(b){this.jumping||(this.update(0,M.status.JUMPING),this.jumpVelocity=this.config.INIITAL_JUMP_VELOCITY-b/10,this.jumping=!0,this.reachedMinHeight=!1,this.speedDrop=!1)},endJump:function(){this.reachedMinHeight&&this.jumpVelocity<this.config.DROP_VELOCITY&&(this.jumpVelocity=this.config.DROP_VELOCITY)},updateJump:function(b,T){var y=M.animFrames[this.status].msPerFrame,v=b/y;this.speedDrop?this.yPos+=Math.round(this.jumpVelocity*this.config.SPEED_DROP_COEFFICIENT*v):this.yPos+=Math.round(this.jumpVelocity*v),this.jumpVelocity+=this.config.GRAVITY*v,(this.yPos<this.minJumpHeight||this.speedDrop)&&(this.reachedMinHeight=!0),(this.yPos<this.config.MAX_JUMP_HEIGHT||this.speedDrop)&&this.endJump(),this.yPos>this.groundYPos&&(this.reset(),this.jumpCount++),this.update(b)},setSpeedDrop:function(){this.speedDrop=!0,this.jumpVelocity=1},setDuck:function(b){b&&this.status!=M.status.DUCKING?(this.update(0,M.status.DUCKING),this.ducking=!0):this.status==M.status.DUCKING&&(this.update(0,M.status.RUNNING),this.ducking=!1)},reset:function(){this.yPos=this.groundYPos,this.jumpVelocity=0,this.jumping=!1,this.ducking=!1,this.update(0,M.status.RUNNING),this.midair=!1,this.speedDrop=!1,this.jumpCount=0}};function L(b,T,y){this.canvas=b,this.canvasCtx=b.getContext("2d"),this.image=t.imageSprite,this.spritePos=T,this.x=0,this.y=5,this.currentDistance=0,this.maxScore=0,this.highScore=0,this.container=null,this.digits=[],this.acheivement=!1,this.defaultString="",this.flashTimer=0,this.flashIterations=0,this.config=L.config,this.maxScoreUnits=this.config.MAX_DISTANCE_UNITS,this.init(y)}L.dimensions={WIDTH:10,HEIGHT:13,DEST_WIDTH:11},L.yPos=[0,13,27,40,53,67,80,93,107,120],L.config={MAX_DISTANCE_UNITS:5,ACHIEVEMENT_DISTANCE:100,COEFFICIENT:.025,FLASH_DURATION:1e3/4,FLASH_ITERATIONS:3},L.prototype={init:function(b){var T="";this.calcXPos(b),this.maxScore=this.maxScoreUnits;for(var y=0;y<this.maxScoreUnits;y++)this.draw(y,0),this.defaultString+="0",T+="9";this.maxScore=parseInt(T)},calcXPos:function(b){this.x=b-L.dimensions.DEST_WIDTH*(this.maxScoreUnits+1)},draw:function(b,T,y){var v=L.dimensions.WIDTH,w=L.dimensions.HEIGHT,g=L.dimensions.WIDTH*T,N=0,z=b*L.dimensions.DEST_WIDTH,Z=this.y,ee=L.dimensions.WIDTH,te=L.dimensions.HEIGHT;if(s&&(v*=2,w*=2,g*=2),g+=this.spritePos.x,N+=this.spritePos.y,this.canvasCtx.save(),y){var se=this.x-this.maxScoreUnits*2*L.dimensions.WIDTH;this.canvasCtx.translate(se,this.y)}else this.canvasCtx.translate(this.x,this.y);this.canvasCtx.drawImage(this.image,g,N,v,w,z,Z,ee,te),this.canvasCtx.restore()},getActualDistance:function(b){return b?Math.round(b*this.config.COEFFICIENT):0},update:function(b,T){var y=!0,v=!1;if(this.acheivement)this.flashIterations<=this.config.FLASH_ITERATIONS?(this.flashTimer+=b,this.flashTimer<this.config.FLASH_DURATION?y=!1:this.flashTimer>this.config.FLASH_DURATION*2&&(this.flashTimer=0,this.flashIterations++)):(this.acheivement=!1,this.flashIterations=0,this.flashTimer=0);else if(T=this.getActualDistance(T),T>this.maxScore&&this.maxScoreUnits==this.config.MAX_DISTANCE_UNITS?(this.maxScoreUnits++,this.maxScore=parseInt(this.maxScore+"9")):this.distance=0,T>0){T%this.config.ACHIEVEMENT_DISTANCE==0&&(this.acheivement=!0,this.flashTimer=0,v=!0);var w=(this.defaultString+T).substr(-this.maxScoreUnits);this.digits=w.split("")}else this.digits=this.defaultString.split("");if(y)for(var g=this.digits.length-1;g>=0;g--)this.draw(g,parseInt(this.digits[g]));return this.drawHighScore(),v},drawHighScore:function(){this.canvasCtx.save(),this.canvasCtx.globalAlpha=.8;for(var b=this.highScore.length-1;b>=0;b--)this.draw(b,parseInt(this.highScore[b],10),!0);this.canvasCtx.restore()},setHighScore:function(b){b=this.getActualDistance(b);var T=(this.defaultString+b).substr(-this.maxScoreUnits);this.highScore=["10","11",""].concat(T.split(""))},reset:function(){this.update(0),this.acheivement=!1}};function D(b,T,y){this.canvas=b,this.canvasCtx=this.canvas.getContext("2d"),this.spritePos=T,this.containerWidth=y,this.xPos=y,this.yPos=0,this.remove=!1,this.cloudGap=l(D.config.MIN_CLOUD_GAP,D.config.MAX_CLOUD_GAP),this.init()}D.config={HEIGHT:14,MAX_CLOUD_GAP:400,MAX_SKY_LEVEL:30,MIN_CLOUD_GAP:100,MIN_SKY_LEVEL:71,WIDTH:46},D.prototype={init:function(){this.yPos=l(D.config.MAX_SKY_LEVEL,D.config.MIN_SKY_LEVEL),this.draw()},draw:function(){this.canvasCtx.save();var b=D.config.WIDTH,T=D.config.HEIGHT;s&&(b=b*2,T=T*2),this.canvasCtx.drawImage(t.imageSprite,this.spritePos.x,this.spritePos.y,b,T,this.xPos,this.yPos,D.config.WIDTH,D.config.HEIGHT),this.canvasCtx.restore()},update:function(b){this.remove||(this.xPos-=Math.ceil(b),this.draw(),this.isVisible()||(this.remove=!0))},isVisible:function(){return this.xPos+D.config.WIDTH>0}};function C(b,T){this.spritePos=T,this.canvas=b,this.canvasCtx=b.getContext("2d"),this.sourceDimensions={},this.dimensions=C.dimensions,this.sourceXPos=[this.spritePos.x,this.spritePos.x+this.dimensions.WIDTH],this.xPos=[],this.yPos=0,this.bumpThreshold=.5,this.setSourceDimensions(),this.draw()}C.dimensions={WIDTH:600,HEIGHT:12,YPOS:127},C.prototype={setSourceDimensions:function(){for(var b in C.dimensions)s?b!="YPOS"&&(this.sourceDimensions[b]=C.dimensions[b]*2):this.sourceDimensions[b]=C.dimensions[b],this.dimensions[b]=C.dimensions[b];this.xPos=[0,C.dimensions.WIDTH],this.yPos=C.dimensions.YPOS},getRandomType:function(){return Math.random()>this.bumpThreshold?this.dimensions.WIDTH:0},draw:function(){this.canvasCtx.drawImage(t.imageSprite,this.sourceXPos[0],this.spritePos.y,this.sourceDimensions.WIDTH,this.sourceDimensions.HEIGHT,this.xPos[0],this.yPos,this.dimensions.WIDTH,this.dimensions.HEIGHT),this.canvasCtx.drawImage(t.imageSprite,this.sourceXPos[1],this.spritePos.y,this.sourceDimensions.WIDTH,this.sourceDimensions.HEIGHT,this.xPos[1],this.yPos,this.dimensions.WIDTH,this.dimensions.HEIGHT)},updateXPos:function(b,T){var y=b,v=b==0?1:0;this.xPos[y]-=T,this.xPos[v]=this.xPos[y]+this.dimensions.WIDTH,this.xPos[y]<=-this.dimensions.WIDTH&&(this.xPos[y]+=this.dimensions.WIDTH*2,this.xPos[v]=this.xPos[y]-this.dimensions.WIDTH,this.sourceXPos[y]=this.getRandomType()+this.spritePos.x)},update:function(b,T){var y=Math.floor(T*(r/1e3)*b);this.xPos[0]<=0?this.updateXPos(0,y):this.updateXPos(1,y),this.draw()},reset:function(){this.xPos[0]=0,this.xPos[1]=C.dimensions.WIDTH}};function k(b,T,y,v){this.canvas=b,this.canvasCtx=this.canvas.getContext("2d"),this.config=k.config,this.dimensions=y,this.gapCoefficient=v,this.obstacles=[],this.obstacleHistory=[],this.horizonOffsets=[0,0],this.cloudFrequency=this.config.CLOUD_FREQUENCY,this.spritePos=T,this.clouds=[],this.cloudSpeed=this.config.BG_CLOUD_SPEED,this.horizonLine=null,this.init()}k.config={BG_CLOUD_SPEED:.2,BUMPY_THRESHOLD:.3,CLOUD_FREQUENCY:.5,HORIZON_HEIGHT:16,MAX_CLOUDS:6},k.prototype={init:function(){this.addCloud(),this.horizonLine=new C(this.canvas,this.spritePos.HORIZON)},update:function(b,T,y){this.runningTime+=b,this.horizonLine.update(b,T),this.updateClouds(b,T),y&&this.updateObstacles(b,T)},updateClouds:function(b,T){var y=this.cloudSpeed/1e3*b*T,v=this.clouds.length;if(v){for(var w=v-1;w>=0;w--)this.clouds[w].update(y);var g=this.clouds[v-1];v<this.config.MAX_CLOUDS&&this.dimensions.WIDTH-g.xPos>g.cloudGap&&this.cloudFrequency>Math.random()&&this.addCloud(),this.clouds=this.clouds.filter(function(N){return!N.remove})}},updateObstacles:function(b,T){for(var y=this.obstacles.slice(0),v=0;v<this.obstacles.length;v++){var w=this.obstacles[v];w.update(b,T),w.remove&&y.shift()}if(this.obstacles=y,this.obstacles.length>0){var g=this.obstacles[this.obstacles.length-1];g&&!g.followingObstacleCreated&&g.isVisible()&&g.xPos+g.width+g.gap<this.dimensions.WIDTH&&(this.addNewObstacle(T),g.followingObstacleCreated=!0)}else this.addNewObstacle(T)},addNewObstacle:function(b){var T=l(0,R.types.length-1),y=R.types[T];if(this.duplicateObstacleCheck(y.type)||b<y.minSpeed)this.addNewObstacle(b);else{var v=this.spritePos[y.type];this.obstacles.push(new R(this.canvasCtx,y,v,this.dimensions,this.gapCoefficient,b)),this.obstacleHistory.unshift(y.type),this.obstacleHistory.length>1&&this.obstacleHistory.splice(t.config.MAX_OBSTACLE_DUPLICATION)}},duplicateObstacleCheck:function(b){for(var T=0,y=0;y<this.obstacleHistory.length;y++)T=this.obstacleHistory[y]==b?T+1:0;return T>=t.config.MAX_OBSTACLE_DUPLICATION},reset:function(){this.obstacles=[],this.horizonLine.reset()},resize:function(b,T){this.canvas.width=b,this.canvas.height=T},addCloud:function(){this.clouds.push(new D(this.canvas,this.spritePos.CLOUD,this.dimensions.WIDTH))}};let U=[];const F=()=>{U.forEach(async b=>{const T=[1,0,1,64,64,0,1,64,64,72,1];await b.sendReport(1,new Uint8Array(T));const y=152,v=70,w=30,g=32839,N=y,z=v,Z=w,ee=g,te=y,se=v,H=w,W=g,ie=[0,N&255,Z+(N>>>8&255),z+(ee>>>8&255),ee&255,te&255,H+(te>>>8&255),se+(W>>>8&255),W&255];await b.sendReport(16,new Uint8Array(ie)),console.log(`HID rumbling: ${b.productName}`)})};if(!("hid"in navigator))return;let S,G=(b,T)=>{let y=n.hotkeys[b.name],v=!1,g=currentRunner.horizon.obstacles.map(z=>z.note);if(!g.length)return;let N=g[0];(N===""||y===N)&&(v=!0),y===void 0&&(v=!1),v&&(clearTimeout(S),S=setTimeout(()=>{console.log("Jump");const z=new Event("keydown");z.keyCode=32,document.dispatchEvent(z)},50))};n.addInputDetailCBK(function(b,T){G(b)}),window.currentRunner=new t(".interstitial-wrapper")},methods:{getNotes(n){return[...new Set(Object.values(n))]},getRandomNote(){let n=this;return n.obstacleCount++,n.obstacleCount%2!==0?n.notes[Math.floor(Math.random()*n.notes.length)]:""}}},Oc=n=>(wc("data-v-a95dc29b"),n=n(),bc(),n),My={class:"container dark-mode"},Sy=Oc(()=>he("div",{class:"interstitial-wrapper"},null,-1)),Ey=Oc(()=>he("details",{class:"controller instruction"},[he("summary",null,"Instructions"),he("ol",null,[he("li",null,"Pair up Joy-Con controllers."),he("li",null,"Press space to start the game."),he("li",null,"Jump whenever an obstacle appears by pressing the corresponding button.")])],-1)),Ty=Oc(()=>he("div",{id:"offline-resources"},[he("img",{id:"offline-resources-1x",src:_y}),he("img",{id:"offline-resources-2x",src:wy}),he("template",{id:"audio-resources",jstcache:"0"},[he("audio",{id:"offline-sound-press",src:"data:audio/mpeg;base64,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"}),he("audio",{id:"offline-sound-hit",src:"data:audio/mpeg;base64,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"}),he("audio",{id:"offline-sound-reached",src:"data:audio/mpeg;base64,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"})])],-1)),Cy=[Sy,Ey,Ty];function Iy(n,e,t,i,r,s){return Me(),Ee("div",My,Cy)}const Ly=Ps(by,[["render",Iy],["__scopeId","data-v-a95dc29b"]]);var rs=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ry(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Ep={exports:{}};(function(n,e){(function(t,i){n.exports=i()})(rs,function(){function t(y,v,w){if(w||arguments.length===2)for(var g,N=0,z=v.length;N<z;N++)!g&&N in v||(g||(g=Array.prototype.slice.call(v,0,N)),g[N]=v[N]);return y.concat(g||Array.prototype.slice.call(v))}var i=Object.freeze({__proto__:null,blackman:function(y){for(var v=new Float32Array(y),w=2*Math.PI/(y-1),g=2*w,N=0;N<y/2;N++)v[N]=.42-.5*Math.cos(N*w)+.08*Math.cos(N*g);for(N=Math.ceil(y/2);N>0;N--)v[y-N]=v[N-1];return v},sine:function(y){for(var v=Math.PI/(y-1),w=new Float32Array(y),g=0;g<y;g++)w[g]=Math.sin(v*g);return w},hanning:function(y){for(var v=new Float32Array(y),w=0;w<y;w++)v[w]=.5-.5*Math.cos(2*Math.PI*w/(y-1));return v},hamming:function(y){for(var v=new Float32Array(y),w=0;w<y;w++)v[w]=.54-.46*Math.cos(2*Math.PI*(w/y-1));return v}}),r={};function s(y){for(;y%2==0&&y>1;)y/=2;return y===1}function o(y,v){if(v!=="rect"){if(v!==""&&v||(v="hanning"),r[v]||(r[v]={}),!r[v][y.length])try{r[v][y.length]=i[v](y.length)}catch{throw new Error("Invalid windowing function")}y=function(w,g){for(var N=[],z=0;z<Math.min(w.length,g.length);z++)N[z]=w[z]*g[z];return N}(y,r[v][y.length])}return y}function a(y,v,w){for(var g=new Float32Array(y),N=0;N<g.length;N++)g[N]=N*v/w,g[N]=13*Math.atan(g[N]/1315.8)+3.5*Math.atan(Math.pow(g[N]/7518,2));return g}function l(y){return Float32Array.from(y)}function c(y){return 1125*Math.log(1+y/700)}function u(y,v,w){for(var g,N=new Float32Array(y+2),z=new Float32Array(y+2),Z=v/2,ee=c(0),te=(c(Z)-ee)/(y+1),se=new Array(y+2),H=0;H<N.length;H++)N[H]=H*te,z[H]=(g=N[H],700*(Math.exp(g/1125)-1)),se[H]=Math.floor((w+1)*z[H]/v);for(var W=new Array(y),ie=0;ie<W.length;ie++){for(W[ie]=new Array(w/2+1).fill(0),H=se[ie];H<se[ie+1];H++)W[ie][H]=(H-se[ie])/(se[ie+1]-se[ie]);for(H=se[ie+1];H<se[ie+2];H++)W[ie][H]=(se[ie+2]-H)/(se[ie+2]-se[ie+1])}return W}function h(y,v,w,g,N,z,Z){g===void 0&&(g=5),N===void 0&&(N=2),z===void 0&&(z=!0),Z===void 0&&(Z=440);var ee=Math.floor(w/2)+1,te=new Array(w).fill(0).map(function(I,O){return y*function(Q,J){return Math.log2(16*Q/J)}(v*O/w,Z)});te[0]=te[1]-1.5*y;var se,H,W,ie=te.slice(1).map(function(I,O){return Math.max(I-te[O])},1).concat([1]),fe=Math.round(y/2),de=new Array(y).fill(0).map(function(I,O){return te.map(function(Q){return(10*y+fe+Q-O)%y-fe})}),me=de.map(function(I,O){return I.map(function(Q,J){return Math.exp(-.5*Math.pow(2*de[O][J]/ie[J],2))})});if(H=(se=me)[0].map(function(){return 0}),W=se.reduce(function(I,O){return O.forEach(function(Q,J){I[J]+=Math.pow(Q,2)}),I},H).map(Math.sqrt),me=se.map(function(I,O){return I.map(function(Q,J){return Q/(W[J]||1)})}),N){var ye=te.map(function(I){return Math.exp(-.5*Math.pow((I/y-g)/N,2))});me=me.map(function(I){return I.map(function(O,Q){return O*ye[Q]})})}return z&&(me=t(t([],me.slice(3),!0),me.slice(0,3),!0)),me.map(function(I){return I.slice(0,ee)})}function f(y,v){for(var w=0,g=0,N=0;N<v.length;N++)w+=Math.pow(N,y)*Math.abs(v[N]),g+=v[N];return w/g}function d(y){var v=y.ampSpectrum,w=y.barkScale,g=y.numberOfBarkBands,N=g===void 0?24:g;if(typeof v!="object"||typeof w!="object")throw new TypeError;var z=N,Z=new Float32Array(z),ee=0,te=v,se=new Int32Array(z+1);se[0]=0;for(var H=w[te.length-1]/z,W=1,ie=0;ie<te.length;ie++)for(;w[ie]>H;)se[W++]=ie,H=W*w[te.length-1]/z;for(se[z]=te.length-1,ie=0;ie<z;ie++){for(var fe=0,de=se[ie];de<se[ie+1];de++)fe+=te[de];Z[ie]=Math.pow(fe,.23)}for(ie=0;ie<Z.length;ie++)ee+=Z[ie];return{specific:Z,total:ee}}function m(y){var v=y.ampSpectrum;if(typeof v!="object")throw new TypeError;for(var w=new Float32Array(v.length),g=0;g<w.length;g++)w[g]=Math.pow(v[g],2);return w}function _(y){var v=y.ampSpectrum,w=y.melFilterBank,g=y.bufferSize;if(typeof v!="object")throw new TypeError("Valid ampSpectrum is required to generate melBands");if(typeof w!="object")throw new TypeError("Valid melFilterBank is required to generate melBands");for(var N=m({ampSpectrum:v}),z=w.length,Z=Array(z),ee=new Float32Array(z),te=0;te<ee.length;te++){Z[te]=new Float32Array(g/2),ee[te]=0;for(var se=0;se<g/2;se++)Z[te][se]=w[te][se]*N[se],ee[te]+=Z[te][se];ee[te]=Math.log(ee[te]+1)}return Array.prototype.slice.call(ee)}function E(y){return y&&y.__esModule&&Object.prototype.hasOwnProperty.call(y,"default")?y.default:y}var p={},A=null,R=function(y,v){var w=y.length;return v=v||2,A&&A[w]||function(g){(A=A||{})[g]=new Array(g*g);for(var N=Math.PI/g,z=0;z<g;z++)for(var Z=0;Z<g;Z++)A[g][Z+z*g]=Math.cos(N*(Z+.5)*z)}(w),y.map(function(){return 0}).map(function(g,N){return v*y.reduce(function(z,Z,ee,te){return z+Z*A[w][ee+N*w]},0)})};(function(y){y.exports=R})({get exports(){return p},set exports(y){p=y}});var M=E(p),L=Object.freeze({__proto__:null,buffer:function(y){return y.signal},rms:function(y){var v=y.signal;if(typeof v!="object")throw new TypeError;for(var w=0,g=0;g<v.length;g++)w+=Math.pow(v[g],2);return w/=v.length,w=Math.sqrt(w)},energy:function(y){var v=y.signal;if(typeof v!="object")throw new TypeError;for(var w=0,g=0;g<v.length;g++)w+=Math.pow(Math.abs(v[g]),2);return w},complexSpectrum:function(y){return y.complexSpectrum},spectralSlope:function(y){var v=y.ampSpectrum,w=y.sampleRate,g=y.bufferSize;if(typeof v!="object")throw new TypeError;for(var N=0,z=0,Z=new Float32Array(v.length),ee=0,te=0,se=0;se<v.length;se++){N+=v[se];var H=se*w/g;Z[se]=H,ee+=H*H,z+=H,te+=H*v[se]}return(v.length*te-z*N)/(N*(ee-Math.pow(z,2)))},spectralCentroid:function(y){var v=y.ampSpectrum;if(typeof v!="object")throw new TypeError;return f(1,v)},spectralRolloff:function(y){var v=y.ampSpectrum,w=y.sampleRate;if(typeof v!="object")throw new TypeError;for(var g=v,N=w/(2*(g.length-1)),z=0,Z=0;Z<g.length;Z++)z+=g[Z];for(var ee=.99*z,te=g.length-1;z>ee&&te>=0;)z-=g[te],--te;return(te+1)*N},spectralFlatness:function(y){var v=y.ampSpectrum;if(typeof v!="object")throw new TypeError;for(var w=0,g=0,N=0;N<v.length;N++)w+=Math.log(v[N]),g+=v[N];return Math.exp(w/v.length)*v.length/g},spectralSpread:function(y){var v=y.ampSpectrum;if(typeof v!="object")throw new TypeError;return Math.sqrt(f(2,v)-Math.pow(f(1,v),2))},spectralSkewness:function(y){var v=y.ampSpectrum;if(typeof v!="object")throw new TypeError;var w=f(1,v),g=f(2,v),N=f(3,v);return(2*Math.pow(w,3)-3*w*g+N)/Math.pow(Math.sqrt(g-Math.pow(w,2)),3)},spectralKurtosis:function(y){var v=y.ampSpectrum;if(typeof v!="object")throw new TypeError;var w=v,g=f(1,w),N=f(2,w),z=f(3,w),Z=f(4,w);return(-3*Math.pow(g,4)+6*g*N-4*g*z+Z)/Math.pow(Math.sqrt(N-Math.pow(g,2)),4)},amplitudeSpectrum:function(y){return y.ampSpectrum},zcr:function(y){var v=y.signal;if(typeof v!="object")throw new TypeError;for(var w=0,g=1;g<v.length;g++)(v[g-1]>=0&&v[g]<0||v[g-1]<0&&v[g]>=0)&&w++;return w},loudness:d,perceptualSpread:function(y){for(var v=d({ampSpectrum:y.ampSpectrum,barkScale:y.barkScale}),w=0,g=0;g<v.specific.length;g++)v.specific[g]>w&&(w=v.specific[g]);return Math.pow((v.total-w)/v.total,2)},perceptualSharpness:function(y){for(var v=d({ampSpectrum:y.ampSpectrum,barkScale:y.barkScale}),w=v.specific,g=0,N=0;N<w.length;N++)g+=N<15?(N+1)*w[N+1]:.066*Math.exp(.171*(N+1));return g*=.11/v.total},powerSpectrum:m,mfcc:function(y){var v=y.ampSpectrum,w=y.melFilterBank,g=y.numberOfMFCCCoefficients,N=y.bufferSize,z=Math.min(40,Math.max(1,g||13));if(w.length<z)throw new Error("Insufficient filter bank for requested number of coefficients");var Z=_({ampSpectrum:v,melFilterBank:w,bufferSize:N});return M(Z).slice(0,z)},chroma:function(y){var v=y.ampSpectrum,w=y.chromaFilterBank;if(typeof v!="object")throw new TypeError("Valid ampSpectrum is required to generate chroma");if(typeof w!="object")throw new TypeError("Valid chromaFilterBank is required to generate chroma");var g=w.map(function(z,Z){return v.reduce(function(ee,te,se){return ee+te*z[se]},0)}),N=Math.max.apply(Math,g);return N?g.map(function(z){return z/N}):g},spectralFlux:function(y){var v=y.signal,w=y.previousSignal,g=y.bufferSize;if(typeof v!="object"||typeof w!="object")throw new TypeError;for(var N=0,z=-g/2;z<v.length/2-1;z++)x=Math.abs(v[z])-Math.abs(w[z]),N+=(x+Math.abs(x))/2;return N},spectralCrest:function(y){var v=y.ampSpectrum;if(typeof v!="object")throw new TypeError;var w=0,g=-1/0;return v.forEach(function(N){w+=Math.pow(N,2),g=N>g?N:g}),w/=v.length,w=Math.sqrt(w),g/w},melBands:_});function D(y){if(Array.isArray(y)){for(var v=0,w=Array(y.length);v<y.length;v++)w[v]=y[v];return w}return Array.from(y)}var C={},k={},U={bitReverseArray:function(y){if(C[y]===void 0){for(var v=(y-1).toString(2).length,w="0".repeat(v),g={},N=0;N<y;N++){var z=N.toString(2);z=w.substr(z.length)+z,z=[].concat(D(z)).reverse().join(""),g[N]=parseInt(z,2)}C[y]=g}return C[y]},multiply:function(y,v){return{real:y.real*v.real-y.imag*v.imag,imag:y.real*v.imag+y.imag*v.real}},add:function(y,v){return{real:y.real+v.real,imag:y.imag+v.imag}},subtract:function(y,v){return{real:y.real-v.real,imag:y.imag-v.imag}},euler:function(y,v){var w=-2*Math.PI*y/v;return{real:Math.cos(w),imag:Math.sin(w)}},conj:function(y){return y.imag*=-1,y},constructComplexArray:function(y){var v={};v.real=y.real===void 0?y.slice():y.real.slice();var w=v.real.length;return k[w]===void 0&&(k[w]=Array.apply(null,Array(w)).map(Number.prototype.valueOf,0)),v.imag=k[w].slice(),v}},F=function(y){var v={};y.real===void 0||y.imag===void 0?v=U.constructComplexArray(y):(v.real=y.real.slice(),v.imag=y.imag.slice());var w=v.real.length,g=Math.log2(w);if(Math.round(g)!=g)throw new Error("Input size must be a power of 2.");if(v.real.length!=v.imag.length)throw new Error("Real and imaginary components must have the same length.");for(var N=U.bitReverseArray(w),z={real:[],imag:[]},Z=0;Z<w;Z++)z.real[N[Z]]=v.real[Z],z.imag[N[Z]]=v.imag[Z];for(var ee=0;ee<w;ee++)v.real[ee]=z.real[ee],v.imag[ee]=z.imag[ee];for(var te=1;te<=g;te++)for(var se=Math.pow(2,te),H=0;H<se/2;H++)for(var W=U.euler(H,se),ie=0;ie<w/se;ie++){var fe=se*ie+H,de=se*ie+H+se/2,me={real:v.real[fe],imag:v.imag[fe]},ye={real:v.real[de],imag:v.imag[de]},I=U.multiply(W,ye),O=U.subtract(me,I);v.real[de]=O.real,v.imag[de]=O.imag;var Q=U.add(I,me);v.real[fe]=Q.real,v.imag[fe]=Q.imag}return v},S=F,G=function(){function y(v,w){var g=this;if(this._m=w,!v.audioContext)throw this._m.errors.noAC;if(v.bufferSize&&!s(v.bufferSize))throw this._m._errors.notPow2;if(!v.source)throw this._m._errors.noSource;this._m.audioContext=v.audioContext,this._m.bufferSize=v.bufferSize||this._m.bufferSize||256,this._m.hopSize=v.hopSize||this._m.hopSize||this._m.bufferSize,this._m.sampleRate=v.sampleRate||this._m.audioContext.sampleRate||44100,this._m.callback=v.callback,this._m.windowingFunction=v.windowingFunction||"hanning",this._m.featureExtractors=L,this._m.EXTRACTION_STARTED=v.startImmediately||!1,this._m.channel=typeof v.channel=="number"?v.channel:0,this._m.inputs=v.inputs||1,this._m.outputs=v.outputs||1,this._m.numberOfMFCCCoefficients=v.numberOfMFCCCoefficients||this._m.numberOfMFCCCoefficients||13,this._m.numberOfBarkBands=v.numberOfBarkBands||this._m.numberOfBarkBands||24,this._m.spn=this._m.audioContext.createScriptProcessor(this._m.bufferSize,this._m.inputs,this._m.outputs),this._m.spn.connect(this._m.audioContext.destination),this._m._featuresToExtract=v.featureExtractors||[],this._m.barkScale=a(this._m.bufferSize,this._m.sampleRate,this._m.bufferSize),this._m.melFilterBank=u(Math.max(this._m.melBands,this._m.numberOfMFCCCoefficients),this._m.sampleRate,this._m.bufferSize),this._m.inputData=null,this._m.previousInputData=null,this._m.frame=null,this._m.previousFrame=null,this.setSource(v.source),this._m.spn.onaudioprocess=function(N){var z;g._m.inputData!==null&&(g._m.previousInputData=g._m.inputData),g._m.inputData=N.inputBuffer.getChannelData(g._m.channel),g._m.previousInputData?((z=new Float32Array(g._m.previousInputData.length+g._m.inputData.length-g._m.hopSize)).set(g._m.previousInputData.slice(g._m.hopSize)),z.set(g._m.inputData,g._m.previousInputData.length-g._m.hopSize)):z=g._m.inputData,function(Z,ee,te){if(Z.length<ee)throw new Error("Buffer is too short for frame length");if(te<1)throw new Error("Hop length cannot be less that 1");if(ee<1)throw new Error("Frame length cannot be less that 1");var se=1+Math.floor((Z.length-ee)/te);return new Array(se).fill(0).map(function(H,W){return Z.slice(W*te,W*te+ee)})}(z,g._m.bufferSize,g._m.hopSize).forEach(function(Z){g._m.frame=Z;var ee=g._m.extract(g._m._featuresToExtract,g._m.frame,g._m.previousFrame);typeof g._m.callback=="function"&&g._m.EXTRACTION_STARTED&&g._m.callback(ee),g._m.previousFrame=g._m.frame})}}return y.prototype.start=function(v){this._m._featuresToExtract=v||this._m._featuresToExtract,this._m.EXTRACTION_STARTED=!0},y.prototype.stop=function(){this._m.EXTRACTION_STARTED=!1},y.prototype.setSource=function(v){this._m.source&&this._m.source.disconnect(this._m.spn),this._m.source=v,this._m.source.connect(this._m.spn)},y.prototype.setChannel=function(v){v<=this._m.inputs?this._m.channel=v:console.error("Channel ".concat(v," does not exist. Make sure you've provided a value for 'inputs' that is greater than ").concat(v," when instantiating the MeydaAnalyzer"))},y.prototype.get=function(v){return this._m.inputData?this._m.extract(v||this._m._featuresToExtract,this._m.inputData,this._m.previousInputData):null},y}(),b={audioContext:null,spn:null,bufferSize:512,sampleRate:44100,melBands:26,chromaBands:12,callback:null,windowingFunction:"hanning",featureExtractors:L,EXTRACTION_STARTED:!1,numberOfMFCCCoefficients:13,numberOfBarkBands:24,_featuresToExtract:[],windowing:o,_errors:{notPow2:new Error("Meyda: Buffer size must be a power of 2, e.g. 64 or 512"),featureUndef:new Error("Meyda: No features defined."),invalidFeatureFmt:new Error("Meyda: Invalid feature format"),invalidInput:new Error("Meyda: Invalid input."),noAC:new Error("Meyda: No AudioContext specified."),noSource:new Error("Meyda: No source node specified.")},createMeydaAnalyzer:function(y){return new G(y,Object.assign({},b))},listAvailableFeatureExtractors:function(){return Object.keys(this.featureExtractors)},extract:function(y,v,w){var g=this;if(!v)throw this._errors.invalidInput;if(typeof v!="object")throw this._errors.invalidInput;if(!y)throw this._errors.featureUndef;if(!s(v.length))throw this._errors.notPow2;this.barkScale!==void 0&&this.barkScale.length==this.bufferSize||(this.barkScale=a(this.bufferSize,this.sampleRate,this.bufferSize)),this.melFilterBank!==void 0&&this.barkScale.length==this.bufferSize&&this.melFilterBank.length==this.melBands||(this.melFilterBank=u(Math.max(this.melBands,this.numberOfMFCCCoefficients),this.sampleRate,this.bufferSize)),this.chromaFilterBank!==void 0&&this.chromaFilterBank.length==this.chromaBands||(this.chromaFilterBank=h(this.chromaBands,this.sampleRate,this.bufferSize)),"buffer"in v&&v.buffer===void 0?this.signal=l(v):this.signal=v;var N=T(v,this.windowingFunction,this.bufferSize);if(this.signal=N.windowedSignal,this.complexSpectrum=N.complexSpectrum,this.ampSpectrum=N.ampSpectrum,w){var z=T(w,this.windowingFunction,this.bufferSize);this.previousSignal=z.windowedSignal,this.previousComplexSpectrum=z.complexSpectrum,this.previousAmpSpectrum=z.ampSpectrum}var Z=function(ee){return g.featureExtractors[ee]({ampSpectrum:g.ampSpectrum,chromaFilterBank:g.chromaFilterBank,complexSpectrum:g.complexSpectrum,signal:g.signal,bufferSize:g.bufferSize,sampleRate:g.sampleRate,barkScale:g.barkScale,melFilterBank:g.melFilterBank,previousSignal:g.previousSignal,previousAmpSpectrum:g.previousAmpSpectrum,previousComplexSpectrum:g.previousComplexSpectrum,numberOfMFCCCoefficients:g.numberOfMFCCCoefficients,numberOfBarkBands:g.numberOfBarkBands})};if(typeof y=="object")return y.reduce(function(ee,te){var se;return Object.assign({},ee,((se={})[te]=Z(te),se))},{});if(typeof y=="string")return Z(y);throw this._errors.invalidFeatureFmt}},T=function(y,v,w){var g={};y.buffer===void 0?g.signal=l(y):g.signal=y,g.windowedSignal=o(g.signal,v),g.complexSpectrum=S(g.windowedSignal),g.ampSpectrum=new Float32Array(w/2);for(var N=0;N<w/2;N++)g.ampSpectrum[N]=Math.sqrt(Math.pow(g.complexSpectrum.real[N],2)+Math.pow(g.complexSpectrum.imag[N],2));return g};return typeof window<"u"&&(window.Meyda=b),b})})(Ep);let Uc;async function Py(n){let e;try{e=await navigator.mediaDevices.getDisplayMedia(n)}catch(t){console.error(`Error: ${t}`)}return e}const Dy=async function(n){let e=new AudioContext,t=await Py({audio:!0,video:!0}),i=e.createMediaStreamSource(t);Uc=Ep.exports.createMeydaAnalyzer({audioContext:e,source:i,bufferSize:n,windowingFunction:"blackman"})};let By=function(n){return Uc.get(n)},Fy=function(){return Uc};/**
 * @license
 * Copyright 2010-2021 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const Tp="131",Ny=0,yh=1,Oy=2,Cp=1,Uy=2,Xr=3,_s=0,gt=1,_r=2,Ip=1,ri=0,ss=1,xh=2,_h=3,wh=4,Vy=5,ir=100,ky=101,zy=102,bh=103,Mh=104,Hy=200,Gy=201,Wy=202,qy=203,Lp=204,Rp=205,Qy=206,Ky=207,Yy=208,Zy=209,Jy=210,Xy=0,jy=1,$y=2,Xl=3,ex=4,tx=5,nx=6,ix=7,ma=0,rx=1,sx=2,Ri=0,ox=1,ax=2,lx=3,cx=4,ux=5,Pp=300,ga=301,Aa=302,jl=303,$l=304,va=306,Vc=307,ec=1e3,Gt=1001,tc=1002,yt=1003,Sh=1004,Eh=1005,Yt=1006,hx=1007,ya=1008,wr=1009,fx=1010,dx=1011,Qo=1012,px=1013,Bo=1014,Ti=1015,pr=1016,mx=1017,gx=1018,Ax=1019,os=1020,vx=1021,Pi=1022,ln=1023,yx=1024,xx=1025,_x=ln,mr=1026,ws=1027,wx=1028,bx=1029,Mx=1030,Sx=1031,Ex=1032,Tx=1033,Th=33776,Ch=33777,Ih=33778,Lh=33779,Rh=35840,Ph=35841,Dh=35842,Bh=35843,Cx=36196,Fh=37492,Nh=37496,Ix=37808,Lx=37809,Rx=37810,Px=37811,Dx=37812,Bx=37813,Fx=37814,Nx=37815,Ox=37816,Ux=37817,Vx=37818,kx=37819,zx=37820,Hx=37821,Gx=36492,Wx=37840,qx=37841,Qx=37842,Kx=37843,Yx=37844,Zx=37845,Jx=37846,Xx=37847,jx=37848,$x=37849,e_=37850,t_=37851,n_=37852,i_=37853,r_=2200,s_=2201,o_=2202,Ko=2300,Yo=2301,Qa=2302,rr=2400,sr=2401,Zo=2402,kc=2500,Dp=2501,a_=0,Vt=3e3,xa=3001,zc=3007,Hc=3002,l_=3003,Bp=3004,Fp=3005,Np=3006,c_=3200,u_=3201,Ir=0,h_=1,Ka=7680,f_=519,bs=35044,Jo=35048,Oh="300 es";class Bi{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const i=this._listeners;i[e]===void 0&&(i[e]=[]),i[e].indexOf(t)===-1&&i[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const i=this._listeners;return i[e]!==void 0&&i[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const r=this._listeners[e];if(r!==void 0){const s=r.indexOf(t);s!==-1&&r.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const i=this._listeners[e.type];if(i!==void 0){e.target=this;const r=i.slice(0);for(let s=0,o=r.length;s<o;s++)r[s].call(this,e);e.target=null}}}const bt=[];for(let n=0;n<256;n++)bt[n]=(n<16?"0":"")+n.toString(16);const Ya=Math.PI/180,nc=180/Math.PI;function vn(){const n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(bt[n&255]+bt[n>>8&255]+bt[n>>16&255]+bt[n>>24&255]+"-"+bt[e&255]+bt[e>>8&255]+"-"+bt[e>>16&15|64]+bt[e>>24&255]+"-"+bt[t&63|128]+bt[t>>8&255]+"-"+bt[t>>16&255]+bt[t>>24&255]+bt[i&255]+bt[i>>8&255]+bt[i>>16&255]+bt[i>>24&255]).toUpperCase()}function Ht(n,e,t){return Math.max(e,Math.min(t,n))}function d_(n,e){return(n%e+e)%e}function Za(n,e,t){return(1-t)*n+t*e}function Uh(n){return(n&n-1)===0&&n!==0}function p_(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}class xe{constructor(e=0,t=0){this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e,t){return t!==void 0?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this)}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e,t){return t!==void 0?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this)}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,i=this.y,r=e.elements;return this.x=r[0]*t+r[3]*i+r[6],this.y=r[1]*t+r[4]*i+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y;return t*t+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t,i){return i!==void 0&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const i=Math.cos(t),r=Math.sin(t),s=this.x-e.x,o=this.y-e.y;return this.x=s*i-o*r+e.x,this.y=s*r+o*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}}xe.prototype.isVector2=!0;class St{constructor(){this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}set(e,t,i,r,s,o,a,l,c){const u=this.elements;return u[0]=e,u[1]=r,u[2]=a,u[3]=t,u[4]=s,u[5]=l,u[6]=i,u[7]=o,u[8]=c,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],this}extractBasis(e,t,i){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,s=this.elements,o=i[0],a=i[3],l=i[6],c=i[1],u=i[4],h=i[7],f=i[2],d=i[5],m=i[8],_=r[0],E=r[3],p=r[6],A=r[1],R=r[4],M=r[7],L=r[2],D=r[5],C=r[8];return s[0]=o*_+a*A+l*L,s[3]=o*E+a*R+l*D,s[6]=o*p+a*M+l*C,s[1]=c*_+u*A+h*L,s[4]=c*E+u*R+h*D,s[7]=c*p+u*M+h*C,s[2]=f*_+d*A+m*L,s[5]=f*E+d*R+m*D,s[8]=f*p+d*M+m*C,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8];return t*o*u-t*a*c-i*s*u+i*a*l+r*s*c-r*o*l}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8],h=u*o-a*c,f=a*l-u*s,d=c*s-o*l,m=t*h+i*f+r*d;if(m===0)return this.set(0,0,0,0,0,0,0,0,0);const _=1/m;return e[0]=h*_,e[1]=(r*c-u*i)*_,e[2]=(a*i-r*o)*_,e[3]=f*_,e[4]=(u*t-r*l)*_,e[5]=(r*s-a*t)*_,e[6]=d*_,e[7]=(i*l-c*t)*_,e[8]=(o*t-i*s)*_,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,i,r,s,o,a){const l=Math.cos(s),c=Math.sin(s);return this.set(i*l,i*c,-i*(l*o+c*a)+o+e,-r*c,r*l,-r*(-c*o+l*a)+a+t,0,0,1),this}scale(e,t){const i=this.elements;return i[0]*=e,i[3]*=e,i[6]*=e,i[1]*=t,i[4]*=t,i[7]*=t,this}rotate(e){const t=Math.cos(e),i=Math.sin(e),r=this.elements,s=r[0],o=r[3],a=r[6],l=r[1],c=r[4],u=r[7];return r[0]=t*s+i*l,r[3]=t*o+i*c,r[6]=t*a+i*u,r[1]=-i*s+t*l,r[4]=-i*o+t*c,r[7]=-i*a+t*u,this}translate(e,t){const i=this.elements;return i[0]+=e*i[2],i[3]+=e*i[5],i[6]+=e*i[8],i[1]+=t*i[2],i[4]+=t*i[5],i[7]+=t*i[8],this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<9;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<9;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e}clone(){return new this.constructor().fromArray(this.elements)}}St.prototype.isMatrix3=!0;let Ni;class Lr{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{Ni===void 0&&(Ni=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")),Ni.width=e.width,Ni.height=e.height;const i=Ni.getContext("2d");e instanceof ImageData?i.putImageData(e,0,0):i.drawImage(e,0,0,e.width,e.height),t=Ni}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}}let m_=0;class Et extends Bi{constructor(e=Et.DEFAULT_IMAGE,t=Et.DEFAULT_MAPPING,i=Gt,r=Gt,s=Yt,o=ya,a=ln,l=wr,c=1,u=Vt){super(),Object.defineProperty(this,"id",{value:m_++}),this.uuid=vn(),this.name="",this.image=e,this.mipmaps=[],this.mapping=t,this.wrapS=i,this.wrapT=r,this.magFilter=s,this.minFilter=o,this.anisotropy=c,this.format=a,this.internalFormat=null,this.type=l,this.offset=new xe(0,0),this.repeat=new xe(1,1),this.center=new xe(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new St,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=u,this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.image=e.image,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const i={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};if(this.image!==void 0){const r=this.image;if(r.uuid===void 0&&(r.uuid=vn()),!t&&e.images[r.uuid]===void 0){let s;if(Array.isArray(r)){s=[];for(let o=0,a=r.length;o<a;o++)r[o].isDataTexture?s.push(Ja(r[o].image)):s.push(Ja(r[o]))}else s=Ja(r);e.images[r.uuid]={uuid:r.uuid,url:s}}i.image=r.uuid}return t||(e.textures[this.uuid]=i),i}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==Pp)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case ec:e.x=e.x-Math.floor(e.x);break;case Gt:e.x=e.x<0?0:1;break;case tc:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case ec:e.y=e.y-Math.floor(e.y);break;case Gt:e.y=e.y<0?0:1;break;case tc:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&this.version++}}Et.DEFAULT_IMAGE=void 0;Et.DEFAULT_MAPPING=Pp;Et.prototype.isTexture=!0;function Ja(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?Lr.getDataURL(n):n.data?{data:Array.prototype.slice.call(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}class Ze{constructor(e=0,t=0,i=0,r=1){this.x=e,this.y=t,this.z=i,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,i,r){return this.x=e,this.y=t,this.z=i,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e,t){return t!==void 0?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this)}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e,t){return t!==void 0?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this)}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,s=this.w,o=e.elements;return this.x=o[0]*t+o[4]*i+o[8]*r+o[12]*s,this.y=o[1]*t+o[5]*i+o[9]*r+o[13]*s,this.z=o[2]*t+o[6]*i+o[10]*r+o[14]*s,this.w=o[3]*t+o[7]*i+o[11]*r+o[15]*s,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,i,r,s;const l=e.elements,c=l[0],u=l[4],h=l[8],f=l[1],d=l[5],m=l[9],_=l[2],E=l[6],p=l[10];if(Math.abs(u-f)<.01&&Math.abs(h-_)<.01&&Math.abs(m-E)<.01){if(Math.abs(u+f)<.1&&Math.abs(h+_)<.1&&Math.abs(m+E)<.1&&Math.abs(c+d+p-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const R=(c+1)/2,M=(d+1)/2,L=(p+1)/2,D=(u+f)/4,C=(h+_)/4,k=(m+E)/4;return R>M&&R>L?R<.01?(i=0,r=.707106781,s=.707106781):(i=Math.sqrt(R),r=D/i,s=C/i):M>L?M<.01?(i=.707106781,r=0,s=.707106781):(r=Math.sqrt(M),i=D/r,s=k/r):L<.01?(i=.707106781,r=.707106781,s=0):(s=Math.sqrt(L),i=C/s,r=k/s),this.set(i,r,s,t),this}let A=Math.sqrt((E-m)*(E-m)+(h-_)*(h-_)+(f-u)*(f-u));return Math.abs(A)<.001&&(A=1),this.x=(E-m)/A,this.y=(h-_)/A,this.z=(f-u)/A,this.w=Math.acos((c+d+p-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this.w=e.w+(t.w-e.w)*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t,i){return i!==void 0&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}}Ze.prototype.isVector4=!0;class yn extends Bi{constructor(e,t,i={}){super(),this.width=e,this.height=t,this.depth=1,this.scissor=new Ze(0,0,e,t),this.scissorTest=!1,this.viewport=new Ze(0,0,e,t),this.texture=new Et(void 0,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.encoding),this.texture.isRenderTargetTexture=!0,this.texture.image={width:e,height:t,depth:1},this.texture.generateMipmaps=i.generateMipmaps!==void 0?i.generateMipmaps:!1,this.texture.minFilter=i.minFilter!==void 0?i.minFilter:Yt,this.depthBuffer=i.depthBuffer!==void 0?i.depthBuffer:!0,this.stencilBuffer=i.stencilBuffer!==void 0?i.stencilBuffer:!1,this.depthTexture=i.depthTexture!==void 0?i.depthTexture:null}setTexture(e){e.image={width:this.width,height:this.height,depth:this.depth},this.texture=e}setSize(e,t,i=1){(this.width!==e||this.height!==t||this.depth!==i)&&(this.width=e,this.height=t,this.depth=i,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=i,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.image={...this.texture.image},this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture,this}dispose(){this.dispatchEvent({type:"dispose"})}}yn.prototype.isWebGLRenderTarget=!0;class g_ extends yn{constructor(e,t,i){super(e,t);const r=this.texture;this.texture=[];for(let s=0;s<i;s++)this.texture[s]=r.clone()}setSize(e,t,i=1){if(this.width!==e||this.height!==t||this.depth!==i){this.width=e,this.height=t,this.depth=i;for(let r=0,s=this.texture.length;r<s;r++)this.texture[r].image.width=e,this.texture[r].image.height=t,this.texture[r].image.depth=i;this.dispose()}return this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t),this}copy(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.set(0,0,this.width,this.height),this.scissor.set(0,0,this.width,this.height),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture,this.texture.length=0;for(let t=0,i=e.texture.length;t<i;t++)this.texture[t]=e.texture[t].clone();return this}}g_.prototype.isWebGLMultipleRenderTargets=!0;class Op extends yn{constructor(e,t,i){super(e,t,i),this.samples=4}copy(e){return super.copy.call(this,e),this.samples=e.samples,this}}Op.prototype.isWebGLMultisampleRenderTarget=!0;class Ot{constructor(e=0,t=0,i=0,r=1){this._x=e,this._y=t,this._z=i,this._w=r}static slerp(e,t,i,r){return console.warn("THREE.Quaternion: Static .slerp() has been deprecated. Use qm.slerpQuaternions( qa, qb, t ) instead."),i.slerpQuaternions(e,t,r)}static slerpFlat(e,t,i,r,s,o,a){let l=i[r+0],c=i[r+1],u=i[r+2],h=i[r+3];const f=s[o+0],d=s[o+1],m=s[o+2],_=s[o+3];if(a===0){e[t+0]=l,e[t+1]=c,e[t+2]=u,e[t+3]=h;return}if(a===1){e[t+0]=f,e[t+1]=d,e[t+2]=m,e[t+3]=_;return}if(h!==_||l!==f||c!==d||u!==m){let E=1-a;const p=l*f+c*d+u*m+h*_,A=p>=0?1:-1,R=1-p*p;if(R>Number.EPSILON){const L=Math.sqrt(R),D=Math.atan2(L,p*A);E=Math.sin(E*D)/L,a=Math.sin(a*D)/L}const M=a*A;if(l=l*E+f*M,c=c*E+d*M,u=u*E+m*M,h=h*E+_*M,E===1-a){const L=1/Math.sqrt(l*l+c*c+u*u+h*h);l*=L,c*=L,u*=L,h*=L}}e[t]=l,e[t+1]=c,e[t+2]=u,e[t+3]=h}static multiplyQuaternionsFlat(e,t,i,r,s,o){const a=i[r],l=i[r+1],c=i[r+2],u=i[r+3],h=s[o],f=s[o+1],d=s[o+2],m=s[o+3];return e[t]=a*m+u*h+l*d-c*f,e[t+1]=l*m+u*f+c*h-a*d,e[t+2]=c*m+u*d+a*f-l*h,e[t+3]=u*m-a*h-l*f-c*d,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,i,r){return this._x=e,this._y=t,this._z=i,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){if(!(e&&e.isEuler))throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");const i=e._x,r=e._y,s=e._z,o=e._order,a=Math.cos,l=Math.sin,c=a(i/2),u=a(r/2),h=a(s/2),f=l(i/2),d=l(r/2),m=l(s/2);switch(o){case"XYZ":this._x=f*u*h+c*d*m,this._y=c*d*h-f*u*m,this._z=c*u*m+f*d*h,this._w=c*u*h-f*d*m;break;case"YXZ":this._x=f*u*h+c*d*m,this._y=c*d*h-f*u*m,this._z=c*u*m-f*d*h,this._w=c*u*h+f*d*m;break;case"ZXY":this._x=f*u*h-c*d*m,this._y=c*d*h+f*u*m,this._z=c*u*m+f*d*h,this._w=c*u*h-f*d*m;break;case"ZYX":this._x=f*u*h-c*d*m,this._y=c*d*h+f*u*m,this._z=c*u*m-f*d*h,this._w=c*u*h+f*d*m;break;case"YZX":this._x=f*u*h+c*d*m,this._y=c*d*h+f*u*m,this._z=c*u*m-f*d*h,this._w=c*u*h-f*d*m;break;case"XZY":this._x=f*u*h-c*d*m,this._y=c*d*h-f*u*m,this._z=c*u*m+f*d*h,this._w=c*u*h+f*d*m;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return t!==!1&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const i=t/2,r=Math.sin(i);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,i=t[0],r=t[4],s=t[8],o=t[1],a=t[5],l=t[9],c=t[2],u=t[6],h=t[10],f=i+a+h;if(f>0){const d=.5/Math.sqrt(f+1);this._w=.25/d,this._x=(u-l)*d,this._y=(s-c)*d,this._z=(o-r)*d}else if(i>a&&i>h){const d=2*Math.sqrt(1+i-a-h);this._w=(u-l)/d,this._x=.25*d,this._y=(r+o)/d,this._z=(s+c)/d}else if(a>h){const d=2*Math.sqrt(1+a-i-h);this._w=(s-c)/d,this._x=(r+o)/d,this._y=.25*d,this._z=(l+u)/d}else{const d=2*Math.sqrt(1+h-i-a);this._w=(o-r)/d,this._x=(s+c)/d,this._y=(l+u)/d,this._z=.25*d}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let i=e.dot(t)+1;return i<Number.EPSILON?(i=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=i):(this._x=0,this._y=-e.z,this._z=e.y,this._w=i)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=i),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Ht(this.dot(e),-1,1)))}rotateTowards(e,t){const i=this.angleTo(e);if(i===0)return this;const r=Math.min(1,t/i);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e,t){return t!==void 0?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(e,t)):this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const i=e._x,r=e._y,s=e._z,o=e._w,a=t._x,l=t._y,c=t._z,u=t._w;return this._x=i*u+o*a+r*c-s*l,this._y=r*u+o*l+s*a-i*c,this._z=s*u+o*c+i*l-r*a,this._w=o*u-i*a-r*l-s*c,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const i=this._x,r=this._y,s=this._z,o=this._w;let a=o*e._w+i*e._x+r*e._y+s*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=i,this._y=r,this._z=s,this;const l=1-a*a;if(l<=Number.EPSILON){const d=1-t;return this._w=d*o+t*this._w,this._x=d*i+t*this._x,this._y=d*r+t*this._y,this._z=d*s+t*this._z,this.normalize(),this._onChangeCallback(),this}const c=Math.sqrt(l),u=Math.atan2(c,a),h=Math.sin((1-t)*u)/c,f=Math.sin(t*u)/c;return this._w=o*h+this._w*f,this._x=i*h+this._x*f,this._y=r*h+this._y*f,this._z=s*h+this._z*f,this._onChangeCallback(),this}slerpQuaternions(e,t,i){this.copy(e).slerp(t,i)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}}Ot.prototype.isQuaternion=!0;class q{constructor(e=0,t=0,i=0){this.x=e,this.y=t,this.z=i}set(e,t,i){return i===void 0&&(i=this.z),this.x=e,this.y=t,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e,t){return t!==void 0?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this)}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e,t){return t!==void 0?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this)}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e,t){return t!==void 0?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(e,t)):(this.x*=e.x,this.y*=e.y,this.z*=e.z,this)}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return e&&e.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(Vh.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(Vh.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[3]*i+s[6]*r,this.y=s[1]*t+s[4]*i+s[7]*r,this.z=s[2]*t+s[5]*i+s[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,s=e.elements,o=1/(s[3]*t+s[7]*i+s[11]*r+s[15]);return this.x=(s[0]*t+s[4]*i+s[8]*r+s[12])*o,this.y=(s[1]*t+s[5]*i+s[9]*r+s[13])*o,this.z=(s[2]*t+s[6]*i+s[10]*r+s[14])*o,this}applyQuaternion(e){const t=this.x,i=this.y,r=this.z,s=e.x,o=e.y,a=e.z,l=e.w,c=l*t+o*r-a*i,u=l*i+a*t-s*r,h=l*r+s*i-o*t,f=-s*t-o*i-a*r;return this.x=c*l+f*-s+u*-a-h*-o,this.y=u*l+f*-o+h*-s-c*-a,this.z=h*l+f*-a+c*-o-u*-s,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[4]*i+s[8]*r,this.y=s[1]*t+s[5]*i+s[9]*r,this.z=s[2]*t+s[6]*i+s[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this}cross(e,t){return t!==void 0?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(e,t)):this.crossVectors(this,e)}crossVectors(e,t){const i=e.x,r=e.y,s=e.z,o=t.x,a=t.y,l=t.z;return this.x=r*l-s*a,this.y=s*o-i*l,this.z=i*a-r*o,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const i=e.dot(this)/t;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return Xa.copy(this).projectOnVector(e),this.sub(Xa)}reflect(e){return this.sub(Xa.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(Ht(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y,r=this.z-e.z;return t*t+i*i+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,i){const r=Math.sin(t)*e;return this.x=r*Math.sin(i),this.y=Math.cos(t)*e,this.z=r*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,i){return this.x=e*Math.sin(t),this.y=i,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=i,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t,i){return i!==void 0&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}}q.prototype.isVector3=!0;const Xa=new q,Vh=new Ot;class un{constructor(e=new q(1/0,1/0,1/0),t=new q(-1/0,-1/0,-1/0)){this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){let t=1/0,i=1/0,r=1/0,s=-1/0,o=-1/0,a=-1/0;for(let l=0,c=e.length;l<c;l+=3){const u=e[l],h=e[l+1],f=e[l+2];u<t&&(t=u),h<i&&(i=h),f<r&&(r=f),u>s&&(s=u),h>o&&(o=h),f>a&&(a=f)}return this.min.set(t,i,r),this.max.set(s,o,a),this}setFromBufferAttribute(e){let t=1/0,i=1/0,r=1/0,s=-1/0,o=-1/0,a=-1/0;for(let l=0,c=e.count;l<c;l++){const u=e.getX(l),h=e.getY(l),f=e.getZ(l);u<t&&(t=u),h<i&&(i=h),f<r&&(r=f),u>s&&(s=u),h>o&&(o=h),f>a&&(a=f)}return this.min.set(t,i,r),this.max.set(s,o,a),this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=kr.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e){return this.makeEmpty(),this.expandByObject(e)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e){e.updateWorldMatrix(!1,!1);const t=e.geometry;t!==void 0&&(t.boundingBox===null&&t.computeBoundingBox(),ja.copy(t.boundingBox),ja.applyMatrix4(e.matrixWorld),this.union(ja));const i=e.children;for(let r=0,s=i.length;r<s;r++)this.expandByObject(i[r]);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,kr),kr.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,i;return e.normal.x>0?(t=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),t<=-e.constant&&i>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(zr),qs.subVectors(this.max,zr),Oi.subVectors(e.a,zr),Ui.subVectors(e.b,zr),Vi.subVectors(e.c,zr),qn.subVectors(Ui,Oi),Qn.subVectors(Vi,Ui),yi.subVectors(Oi,Vi);let t=[0,-qn.z,qn.y,0,-Qn.z,Qn.y,0,-yi.z,yi.y,qn.z,0,-qn.x,Qn.z,0,-Qn.x,yi.z,0,-yi.x,-qn.y,qn.x,0,-Qn.y,Qn.x,0,-yi.y,yi.x,0];return!$a(t,Oi,Ui,Vi,qs)||(t=[1,0,0,0,1,0,0,0,1],!$a(t,Oi,Ui,Vi,qs))?!1:(Qs.crossVectors(qn,Qn),t=[Qs.x,Qs.y,Qs.z],$a(t,Oi,Ui,Vi,qs))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return kr.copy(e).clamp(this.min,this.max).sub(e).length()}getBoundingSphere(e){return this.getCenter(e.center),e.radius=this.getSize(kr).length()*.5,e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(In[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),In[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),In[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),In[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),In[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),In[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),In[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),In[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(In),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}un.prototype.isBox3=!0;const In=[new q,new q,new q,new q,new q,new q,new q,new q],kr=new q,ja=new un,Oi=new q,Ui=new q,Vi=new q,qn=new q,Qn=new q,yi=new q,zr=new q,qs=new q,Qs=new q,xi=new q;function $a(n,e,t,i,r){for(let s=0,o=n.length-3;s<=o;s+=3){xi.fromArray(n,s);const a=r.x*Math.abs(xi.x)+r.y*Math.abs(xi.y)+r.z*Math.abs(xi.z),l=e.dot(xi),c=t.dot(xi),u=i.dot(xi);if(Math.max(-Math.max(l,c,u),Math.min(l,c,u))>a)return!1}return!0}const A_=new un,kh=new q,el=new q,tl=new q;class Rr{constructor(e=new q,t=-1){this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const i=this.center;t!==void 0?i.copy(t):A_.setFromPoints(e).getCenter(i);let r=0;for(let s=0,o=e.length;s<o;s++)r=Math.max(r,i.distanceToSquared(e[s]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const i=this.center.distanceToSquared(e);return t.copy(e),i>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){tl.subVectors(e,this.center);const t=tl.lengthSq();if(t>this.radius*this.radius){const i=Math.sqrt(t),r=(i-this.radius)*.5;this.center.add(tl.multiplyScalar(r/i)),this.radius+=r}return this}union(e){return el.subVectors(e.center,this.center).normalize().multiplyScalar(e.radius),this.expandByPoint(kh.copy(e.center).add(el)),this.expandByPoint(kh.copy(e.center).sub(el)),this}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const Ln=new q,nl=new q,Ks=new q,Kn=new q,il=new q,Ys=new q,rl=new q;class Pr{constructor(e=new q,t=new q(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.direction).multiplyScalar(e).add(this.origin)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Ln)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const i=t.dot(this.direction);return i<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(i).add(this.origin)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=Ln.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Ln.copy(this.direction).multiplyScalar(t).add(this.origin),Ln.distanceToSquared(e))}distanceSqToSegment(e,t,i,r){nl.copy(e).add(t).multiplyScalar(.5),Ks.copy(t).sub(e).normalize(),Kn.copy(this.origin).sub(nl);const s=e.distanceTo(t)*.5,o=-this.direction.dot(Ks),a=Kn.dot(this.direction),l=-Kn.dot(Ks),c=Kn.lengthSq(),u=Math.abs(1-o*o);let h,f,d,m;if(u>0)if(h=o*l-a,f=o*a-l,m=s*u,h>=0)if(f>=-m)if(f<=m){const _=1/u;h*=_,f*=_,d=h*(h+o*f+2*a)+f*(o*h+f+2*l)+c}else f=s,h=Math.max(0,-(o*f+a)),d=-h*h+f*(f+2*l)+c;else f=-s,h=Math.max(0,-(o*f+a)),d=-h*h+f*(f+2*l)+c;else f<=-m?(h=Math.max(0,-(-o*s+a)),f=h>0?-s:Math.min(Math.max(-s,-l),s),d=-h*h+f*(f+2*l)+c):f<=m?(h=0,f=Math.min(Math.max(-s,-l),s),d=f*(f+2*l)+c):(h=Math.max(0,-(o*s+a)),f=h>0?s:Math.min(Math.max(-s,-l),s),d=-h*h+f*(f+2*l)+c);else f=o>0?-s:s,h=Math.max(0,-(o*f+a)),d=-h*h+f*(f+2*l)+c;return i&&i.copy(this.direction).multiplyScalar(h).add(this.origin),r&&r.copy(Ks).multiplyScalar(f).add(nl),d}intersectSphere(e,t){Ln.subVectors(e.center,this.origin);const i=Ln.dot(this.direction),r=Ln.dot(Ln)-i*i,s=e.radius*e.radius;if(r>s)return null;const o=Math.sqrt(s-r),a=i-o,l=i+o;return a<0&&l<0?null:a<0?this.at(l,t):this.at(a,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const i=-(this.origin.dot(e.normal)+e.constant)/t;return i>=0?i:null}intersectPlane(e,t){const i=this.distanceToPlane(e);return i===null?null:this.at(i,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let i,r,s,o,a,l;const c=1/this.direction.x,u=1/this.direction.y,h=1/this.direction.z,f=this.origin;return c>=0?(i=(e.min.x-f.x)*c,r=(e.max.x-f.x)*c):(i=(e.max.x-f.x)*c,r=(e.min.x-f.x)*c),u>=0?(s=(e.min.y-f.y)*u,o=(e.max.y-f.y)*u):(s=(e.max.y-f.y)*u,o=(e.min.y-f.y)*u),i>o||s>r||((s>i||i!==i)&&(i=s),(o<r||r!==r)&&(r=o),h>=0?(a=(e.min.z-f.z)*h,l=(e.max.z-f.z)*h):(a=(e.max.z-f.z)*h,l=(e.min.z-f.z)*h),i>l||a>r)||((a>i||i!==i)&&(i=a),(l<r||r!==r)&&(r=l),r<0)?null:this.at(i>=0?i:r,t)}intersectsBox(e){return this.intersectBox(e,Ln)!==null}intersectTriangle(e,t,i,r,s){il.subVectors(t,e),Ys.subVectors(i,e),rl.crossVectors(il,Ys);let o=this.direction.dot(rl),a;if(o>0){if(r)return null;a=1}else if(o<0)a=-1,o=-o;else return null;Kn.subVectors(this.origin,e);const l=a*this.direction.dot(Ys.crossVectors(Kn,Ys));if(l<0)return null;const c=a*this.direction.dot(il.cross(Kn));if(c<0||l+c>o)return null;const u=-a*Kn.dot(rl);return u<0?null:this.at(u/o,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class Ie{constructor(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}set(e,t,i,r,s,o,a,l,c,u,h,f,d,m,_,E){const p=this.elements;return p[0]=e,p[4]=t,p[8]=i,p[12]=r,p[1]=s,p[5]=o,p[9]=a,p[13]=l,p[2]=c,p[6]=u,p[10]=h,p[14]=f,p[3]=d,p[7]=m,p[11]=_,p[15]=E,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new Ie().fromArray(this.elements)}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],t[9]=i[9],t[10]=i[10],t[11]=i[11],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15],this}copyPosition(e){const t=this.elements,i=e.elements;return t[12]=i[12],t[13]=i[13],t[14]=i[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,i){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(e,t,i){return this.set(e.x,t.x,i.x,0,e.y,t.y,i.y,0,e.z,t.z,i.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,i=e.elements,r=1/ki.setFromMatrixColumn(e,0).length(),s=1/ki.setFromMatrixColumn(e,1).length(),o=1/ki.setFromMatrixColumn(e,2).length();return t[0]=i[0]*r,t[1]=i[1]*r,t[2]=i[2]*r,t[3]=0,t[4]=i[4]*s,t[5]=i[5]*s,t[6]=i[6]*s,t[7]=0,t[8]=i[8]*o,t[9]=i[9]*o,t[10]=i[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){e&&e.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");const t=this.elements,i=e.x,r=e.y,s=e.z,o=Math.cos(i),a=Math.sin(i),l=Math.cos(r),c=Math.sin(r),u=Math.cos(s),h=Math.sin(s);if(e.order==="XYZ"){const f=o*u,d=o*h,m=a*u,_=a*h;t[0]=l*u,t[4]=-l*h,t[8]=c,t[1]=d+m*c,t[5]=f-_*c,t[9]=-a*l,t[2]=_-f*c,t[6]=m+d*c,t[10]=o*l}else if(e.order==="YXZ"){const f=l*u,d=l*h,m=c*u,_=c*h;t[0]=f+_*a,t[4]=m*a-d,t[8]=o*c,t[1]=o*h,t[5]=o*u,t[9]=-a,t[2]=d*a-m,t[6]=_+f*a,t[10]=o*l}else if(e.order==="ZXY"){const f=l*u,d=l*h,m=c*u,_=c*h;t[0]=f-_*a,t[4]=-o*h,t[8]=m+d*a,t[1]=d+m*a,t[5]=o*u,t[9]=_-f*a,t[2]=-o*c,t[6]=a,t[10]=o*l}else if(e.order==="ZYX"){const f=o*u,d=o*h,m=a*u,_=a*h;t[0]=l*u,t[4]=m*c-d,t[8]=f*c+_,t[1]=l*h,t[5]=_*c+f,t[9]=d*c-m,t[2]=-c,t[6]=a*l,t[10]=o*l}else if(e.order==="YZX"){const f=o*l,d=o*c,m=a*l,_=a*c;t[0]=l*u,t[4]=_-f*h,t[8]=m*h+d,t[1]=h,t[5]=o*u,t[9]=-a*u,t[2]=-c*u,t[6]=d*h+m,t[10]=f-_*h}else if(e.order==="XZY"){const f=o*l,d=o*c,m=a*l,_=a*c;t[0]=l*u,t[4]=-h,t[8]=c*u,t[1]=f*h+_,t[5]=o*u,t[9]=d*h-m,t[2]=m*h-d,t[6]=a*u,t[10]=_*h+f}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(v_,e,y_)}lookAt(e,t,i){const r=this.elements;return kt.subVectors(e,t),kt.lengthSq()===0&&(kt.z=1),kt.normalize(),Yn.crossVectors(i,kt),Yn.lengthSq()===0&&(Math.abs(i.z)===1?kt.x+=1e-4:kt.z+=1e-4,kt.normalize(),Yn.crossVectors(i,kt)),Yn.normalize(),Zs.crossVectors(kt,Yn),r[0]=Yn.x,r[4]=Zs.x,r[8]=kt.x,r[1]=Yn.y,r[5]=Zs.y,r[9]=kt.y,r[2]=Yn.z,r[6]=Zs.z,r[10]=kt.z,this}multiply(e,t){return t!==void 0?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(e,t)):this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,s=this.elements,o=i[0],a=i[4],l=i[8],c=i[12],u=i[1],h=i[5],f=i[9],d=i[13],m=i[2],_=i[6],E=i[10],p=i[14],A=i[3],R=i[7],M=i[11],L=i[15],D=r[0],C=r[4],k=r[8],U=r[12],F=r[1],S=r[5],G=r[9],b=r[13],T=r[2],y=r[6],v=r[10],w=r[14],g=r[3],N=r[7],z=r[11],Z=r[15];return s[0]=o*D+a*F+l*T+c*g,s[4]=o*C+a*S+l*y+c*N,s[8]=o*k+a*G+l*v+c*z,s[12]=o*U+a*b+l*w+c*Z,s[1]=u*D+h*F+f*T+d*g,s[5]=u*C+h*S+f*y+d*N,s[9]=u*k+h*G+f*v+d*z,s[13]=u*U+h*b+f*w+d*Z,s[2]=m*D+_*F+E*T+p*g,s[6]=m*C+_*S+E*y+p*N,s[10]=m*k+_*G+E*v+p*z,s[14]=m*U+_*b+E*w+p*Z,s[3]=A*D+R*F+M*T+L*g,s[7]=A*C+R*S+M*y+L*N,s[11]=A*k+R*G+M*v+L*z,s[15]=A*U+R*b+M*w+L*Z,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[4],r=e[8],s=e[12],o=e[1],a=e[5],l=e[9],c=e[13],u=e[2],h=e[6],f=e[10],d=e[14],m=e[3],_=e[7],E=e[11],p=e[15];return m*(+s*l*h-r*c*h-s*a*f+i*c*f+r*a*d-i*l*d)+_*(+t*l*d-t*c*f+s*o*f-r*o*d+r*c*u-s*l*u)+E*(+t*c*h-t*a*d-s*o*h+i*o*d+s*a*u-i*c*u)+p*(-r*a*u-t*l*h+t*a*f+r*o*h-i*o*f+i*l*u)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,i){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=i),this}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8],h=e[9],f=e[10],d=e[11],m=e[12],_=e[13],E=e[14],p=e[15],A=h*E*c-_*f*c+_*l*d-a*E*d-h*l*p+a*f*p,R=m*f*c-u*E*c-m*l*d+o*E*d+u*l*p-o*f*p,M=u*_*c-m*h*c+m*a*d-o*_*d-u*a*p+o*h*p,L=m*h*l-u*_*l-m*a*f+o*_*f+u*a*E-o*h*E,D=t*A+i*R+r*M+s*L;if(D===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const C=1/D;return e[0]=A*C,e[1]=(_*f*s-h*E*s-_*r*d+i*E*d+h*r*p-i*f*p)*C,e[2]=(a*E*s-_*l*s+_*r*c-i*E*c-a*r*p+i*l*p)*C,e[3]=(h*l*s-a*f*s-h*r*c+i*f*c+a*r*d-i*l*d)*C,e[4]=R*C,e[5]=(u*E*s-m*f*s+m*r*d-t*E*d-u*r*p+t*f*p)*C,e[6]=(m*l*s-o*E*s-m*r*c+t*E*c+o*r*p-t*l*p)*C,e[7]=(o*f*s-u*l*s+u*r*c-t*f*c-o*r*d+t*l*d)*C,e[8]=M*C,e[9]=(m*h*s-u*_*s-m*i*d+t*_*d+u*i*p-t*h*p)*C,e[10]=(o*_*s-m*a*s+m*i*c-t*_*c-o*i*p+t*a*p)*C,e[11]=(u*a*s-o*h*s-u*i*c+t*h*c+o*i*d-t*a*d)*C,e[12]=L*C,e[13]=(u*_*r-m*h*r+m*i*f-t*_*f-u*i*E+t*h*E)*C,e[14]=(m*a*r-o*_*r-m*i*l+t*_*l+o*i*E-t*a*E)*C,e[15]=(o*h*r-u*a*r+u*i*l-t*h*l-o*i*f+t*a*f)*C,this}scale(e){const t=this.elements,i=e.x,r=e.y,s=e.z;return t[0]*=i,t[4]*=r,t[8]*=s,t[1]*=i,t[5]*=r,t[9]*=s,t[2]*=i,t[6]*=r,t[10]*=s,t[3]*=i,t[7]*=r,t[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,i,r))}makeTranslation(e,t,i){return this.set(1,0,0,e,0,1,0,t,0,0,1,i,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,t,-i,0,0,i,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,0,i,0,0,1,0,0,-i,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,0,i,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const i=Math.cos(t),r=Math.sin(t),s=1-i,o=e.x,a=e.y,l=e.z,c=s*o,u=s*a;return this.set(c*o+i,c*a-r*l,c*l+r*a,0,c*a+r*l,u*a+i,u*l-r*o,0,c*l-r*a,u*l+r*o,s*l*l+i,0,0,0,0,1),this}makeScale(e,t,i){return this.set(e,0,0,0,0,t,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,t,i,r,s,o){return this.set(1,i,s,0,e,1,o,0,t,r,1,0,0,0,0,1),this}compose(e,t,i){const r=this.elements,s=t._x,o=t._y,a=t._z,l=t._w,c=s+s,u=o+o,h=a+a,f=s*c,d=s*u,m=s*h,_=o*u,E=o*h,p=a*h,A=l*c,R=l*u,M=l*h,L=i.x,D=i.y,C=i.z;return r[0]=(1-(_+p))*L,r[1]=(d+M)*L,r[2]=(m-R)*L,r[3]=0,r[4]=(d-M)*D,r[5]=(1-(f+p))*D,r[6]=(E+A)*D,r[7]=0,r[8]=(m+R)*C,r[9]=(E-A)*C,r[10]=(1-(f+_))*C,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,i){const r=this.elements;let s=ki.set(r[0],r[1],r[2]).length();const o=ki.set(r[4],r[5],r[6]).length(),a=ki.set(r[8],r[9],r[10]).length();this.determinant()<0&&(s=-s),e.x=r[12],e.y=r[13],e.z=r[14],$t.copy(this);const c=1/s,u=1/o,h=1/a;return $t.elements[0]*=c,$t.elements[1]*=c,$t.elements[2]*=c,$t.elements[4]*=u,$t.elements[5]*=u,$t.elements[6]*=u,$t.elements[8]*=h,$t.elements[9]*=h,$t.elements[10]*=h,t.setFromRotationMatrix($t),i.x=s,i.y=o,i.z=a,this}makePerspective(e,t,i,r,s,o){o===void 0&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");const a=this.elements,l=2*s/(t-e),c=2*s/(i-r),u=(t+e)/(t-e),h=(i+r)/(i-r),f=-(o+s)/(o-s),d=-2*o*s/(o-s);return a[0]=l,a[4]=0,a[8]=u,a[12]=0,a[1]=0,a[5]=c,a[9]=h,a[13]=0,a[2]=0,a[6]=0,a[10]=f,a[14]=d,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this}makeOrthographic(e,t,i,r,s,o){const a=this.elements,l=1/(t-e),c=1/(i-r),u=1/(o-s),h=(t+e)*l,f=(i+r)*c,d=(o+s)*u;return a[0]=2*l,a[4]=0,a[8]=0,a[12]=-h,a[1]=0,a[5]=2*c,a[9]=0,a[13]=-f,a[2]=0,a[6]=0,a[10]=-2*u,a[14]=-d,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<16;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<16;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e[t+9]=i[9],e[t+10]=i[10],e[t+11]=i[11],e[t+12]=i[12],e[t+13]=i[13],e[t+14]=i[14],e[t+15]=i[15],e}}Ie.prototype.isMatrix4=!0;const ki=new q,$t=new Ie,v_=new q(0,0,0),y_=new q(1,1,1),Yn=new q,Zs=new q,kt=new q,zh=new Ie,Hh=new Ot;class Dr{constructor(e=0,t=0,i=0,r=Dr.DefaultOrder){this._x=e,this._y=t,this._z=i,this._order=r}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,i,r=this._order){return this._x=e,this._y=t,this._z=i,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,i=!0){const r=e.elements,s=r[0],o=r[4],a=r[8],l=r[1],c=r[5],u=r[9],h=r[2],f=r[6],d=r[10];switch(t){case"XYZ":this._y=Math.asin(Ht(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-u,d),this._z=Math.atan2(-o,s)):(this._x=Math.atan2(f,c),this._z=0);break;case"YXZ":this._x=Math.asin(-Ht(u,-1,1)),Math.abs(u)<.9999999?(this._y=Math.atan2(a,d),this._z=Math.atan2(l,c)):(this._y=Math.atan2(-h,s),this._z=0);break;case"ZXY":this._x=Math.asin(Ht(f,-1,1)),Math.abs(f)<.9999999?(this._y=Math.atan2(-h,d),this._z=Math.atan2(-o,c)):(this._y=0,this._z=Math.atan2(l,s));break;case"ZYX":this._y=Math.asin(-Ht(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(f,d),this._z=Math.atan2(l,s)):(this._x=0,this._z=Math.atan2(-o,c));break;case"YZX":this._z=Math.asin(Ht(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-u,c),this._y=Math.atan2(-h,s)):(this._x=0,this._y=Math.atan2(a,d));break;case"XZY":this._z=Math.asin(-Ht(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(f,c),this._y=Math.atan2(a,s)):(this._x=Math.atan2(-u,d),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,i===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,i){return zh.makeRotationFromQuaternion(e),this.setFromRotationMatrix(zh,t,i)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return Hh.setFromEuler(this),this.setFromQuaternion(Hh,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}toVector3(e){return e?e.set(this._x,this._y,this._z):new q(this._x,this._y,this._z)}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}}Dr.prototype.isEuler=!0;Dr.DefaultOrder="XYZ";Dr.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];class x_{constructor(){this.mask=1}set(e){this.mask=1<<e|0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}}let __=0;const Gh=new q,zi=new Ot,Rn=new Ie,Js=new q,Hr=new q,w_=new q,b_=new Ot,Wh=new q(1,0,0),qh=new q(0,1,0),Qh=new q(0,0,1),M_={type:"added"},Kh={type:"removed"};class We extends Bi{constructor(){super(),Object.defineProperty(this,"id",{value:__++}),this.uuid=vn(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=We.DefaultUp.clone();const e=new q,t=new Dr,i=new Ot,r=new q(1,1,1);function s(){i.setFromEuler(t,!1)}function o(){t.setFromQuaternion(i,void 0,!1)}t._onChange(s),i._onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new Ie},normalMatrix:{value:new St}}),this.matrix=new Ie,this.matrixWorld=new Ie,this.matrixAutoUpdate=We.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new x_,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return zi.setFromAxisAngle(e,t),this.quaternion.multiply(zi),this}rotateOnWorldAxis(e,t){return zi.setFromAxisAngle(e,t),this.quaternion.premultiply(zi),this}rotateX(e){return this.rotateOnAxis(Wh,e)}rotateY(e){return this.rotateOnAxis(qh,e)}rotateZ(e){return this.rotateOnAxis(Qh,e)}translateOnAxis(e,t){return Gh.copy(e).applyQuaternion(this.quaternion),this.position.add(Gh.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(Wh,e)}translateY(e){return this.translateOnAxis(qh,e)}translateZ(e){return this.translateOnAxis(Qh,e)}localToWorld(e){return e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return e.applyMatrix4(Rn.copy(this.matrixWorld).invert())}lookAt(e,t,i){e.isVector3?Js.copy(e):Js.set(e,t,i);const r=this.parent;this.updateWorldMatrix(!0,!1),Hr.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Rn.lookAt(Hr,Js,this.up):Rn.lookAt(Js,Hr,this.up),this.quaternion.setFromRotationMatrix(Rn),r&&(Rn.extractRotation(r.matrixWorld),zi.setFromRotationMatrix(Rn),this.quaternion.premultiply(zi.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(M_)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.remove(arguments[i]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(Kh)),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){for(let e=0;e<this.children.length;e++){const t=this.children[e];t.parent=null,t.dispatchEvent(Kh)}return this.children.length=0,this}attach(e){return this.updateWorldMatrix(!0,!1),Rn.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),Rn.multiply(e.parent.matrixWorld)),e.applyMatrix4(Rn),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let i=0,r=this.children.length;i<r;i++){const o=this.children[i].getObjectByProperty(e,t);if(o!==void 0)return o}}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Hr,e,w_),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Hr,b_,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].updateMatrixWorld(e)}updateWorldMatrix(e,t){const i=this.parent;if(e===!0&&i!==null&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),t===!0){const r=this.children;for(let s=0,o=r.length;s<o;s++)r[s].updateWorldMatrix(!1,!0)}}toJSON(e){const t=e===void 0||typeof e=="string",i={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{}},i.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const r={};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.castShadow===!0&&(r.castShadow=!0),this.receiveShadow===!0&&(r.receiveShadow=!0),this.visible===!1&&(r.visible=!1),this.frustumCulled===!1&&(r.frustumCulled=!1),this.renderOrder!==0&&(r.renderOrder=this.renderOrder),JSON.stringify(this.userData)!=="{}"&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),this.matrixAutoUpdate===!1&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(r.instanceColor=this.instanceColor.toJSON()));function s(a,l){return a[l.uuid]===void 0&&(a[l.uuid]=l.toJSON(e)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&(r.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=s(e.geometries,this.geometry);const a=this.geometry.parameters;if(a!==void 0&&a.shapes!==void 0){const l=a.shapes;if(Array.isArray(l))for(let c=0,u=l.length;c<u;c++){const h=l[c];s(e.shapes,h)}else s(e.shapes,l)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const a=[];for(let l=0,c=this.material.length;l<c;l++)a.push(s(e.materials,this.material[l]));r.material=a}else r.material=s(e.materials,this.material);if(this.children.length>0){r.children=[];for(let a=0;a<this.children.length;a++)r.children.push(this.children[a].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(let a=0;a<this.animations.length;a++){const l=this.animations[a];r.animations.push(s(e.animations,l))}}if(t){const a=o(e.geometries),l=o(e.materials),c=o(e.textures),u=o(e.images),h=o(e.shapes),f=o(e.skeletons),d=o(e.animations);a.length>0&&(i.geometries=a),l.length>0&&(i.materials=l),c.length>0&&(i.textures=c),u.length>0&&(i.images=u),h.length>0&&(i.shapes=h),f.length>0&&(i.skeletons=f),d.length>0&&(i.animations=d)}return i.object=r,i;function o(a){const l=[];for(const c in a){const u=a[c];delete u.metadata,l.push(u)}return l}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let i=0;i<e.children.length;i++){const r=e.children[i];this.add(r.clone())}return this}}We.DefaultUp=new q(0,1,0);We.DefaultMatrixAutoUpdate=!0;We.prototype.isObject3D=!0;const en=new q,Pn=new q,sl=new q,Dn=new q,Hi=new q,Gi=new q,Yh=new q,ol=new q,al=new q,ll=new q;class pt{constructor(e=new q,t=new q,i=new q){this.a=e,this.b=t,this.c=i}static getNormal(e,t,i,r){r.subVectors(i,t),en.subVectors(e,t),r.cross(en);const s=r.lengthSq();return s>0?r.multiplyScalar(1/Math.sqrt(s)):r.set(0,0,0)}static getBarycoord(e,t,i,r,s){en.subVectors(r,t),Pn.subVectors(i,t),sl.subVectors(e,t);const o=en.dot(en),a=en.dot(Pn),l=en.dot(sl),c=Pn.dot(Pn),u=Pn.dot(sl),h=o*c-a*a;if(h===0)return s.set(-2,-1,-1);const f=1/h,d=(c*l-a*u)*f,m=(o*u-a*l)*f;return s.set(1-d-m,m,d)}static containsPoint(e,t,i,r){return this.getBarycoord(e,t,i,r,Dn),Dn.x>=0&&Dn.y>=0&&Dn.x+Dn.y<=1}static getUV(e,t,i,r,s,o,a,l){return this.getBarycoord(e,t,i,r,Dn),l.set(0,0),l.addScaledVector(s,Dn.x),l.addScaledVector(o,Dn.y),l.addScaledVector(a,Dn.z),l}static isFrontFacing(e,t,i,r){return en.subVectors(i,t),Pn.subVectors(e,t),en.cross(Pn).dot(r)<0}set(e,t,i){return this.a.copy(e),this.b.copy(t),this.c.copy(i),this}setFromPointsAndIndices(e,t,i,r){return this.a.copy(e[t]),this.b.copy(e[i]),this.c.copy(e[r]),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return en.subVectors(this.c,this.b),Pn.subVectors(this.a,this.b),en.cross(Pn).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return pt.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return pt.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,i,r,s){return pt.getUV(e,this.a,this.b,this.c,t,i,r,s)}containsPoint(e){return pt.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return pt.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const i=this.a,r=this.b,s=this.c;let o,a;Hi.subVectors(r,i),Gi.subVectors(s,i),ol.subVectors(e,i);const l=Hi.dot(ol),c=Gi.dot(ol);if(l<=0&&c<=0)return t.copy(i);al.subVectors(e,r);const u=Hi.dot(al),h=Gi.dot(al);if(u>=0&&h<=u)return t.copy(r);const f=l*h-u*c;if(f<=0&&l>=0&&u<=0)return o=l/(l-u),t.copy(i).addScaledVector(Hi,o);ll.subVectors(e,s);const d=Hi.dot(ll),m=Gi.dot(ll);if(m>=0&&d<=m)return t.copy(s);const _=d*c-l*m;if(_<=0&&c>=0&&m<=0)return a=c/(c-m),t.copy(i).addScaledVector(Gi,a);const E=u*m-d*h;if(E<=0&&h-u>=0&&d-m>=0)return Yh.subVectors(s,r),a=(h-u)/(h-u+(d-m)),t.copy(r).addScaledVector(Yh,a);const p=1/(E+_+f);return o=_*p,a=f*p,t.copy(i).addScaledVector(Hi,o).addScaledVector(Gi,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}let S_=0;class Rt extends Bi{constructor(){super(),Object.defineProperty(this,"id",{value:S_++}),this.uuid=vn(),this.name="",this.type="Material",this.fog=!0,this.blending=ss,this.side=_s,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=Lp,this.blendDst=Rp,this.blendEquation=ir,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=Xl,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=f_,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Ka,this.stencilZFail=Ka,this.stencilZPass=Ka,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaTest=0,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0}onBuild(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const i=e[t];if(i===void 0){console.warn("THREE.Material: '"+t+"' parameter is undefined.");continue}if(t==="shading"){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=i===Ip;continue}const r=this[t];if(r===void 0){console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.");continue}r&&r.isColor?r.set(i):r&&r.isVector3&&i&&i.isVector3?r.copy(i):this[t]=i}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const i={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),this.roughness!==void 0&&(i.roughness=this.roughness),this.metalness!==void 0&&(i.metalness=this.metalness),this.sheen&&this.sheen.isColor&&(i.sheen=this.sheen.getHex()),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(i.specularIntensity=this.specularIntensity),this.specularTint&&this.specularTint.isColor&&(i.specularTint=this.specularTint.getHex()),this.shininess!==void 0&&(i.shininess=this.shininess),this.clearcoat!==void 0&&(i.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(e).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(e).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularTintMap&&this.specularTintMap.isTexture&&(i.specularTintMap=this.specularTintMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(i.combine=this.combine)),this.envMapIntensity!==void 0&&(i.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(i.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&(i.attenuationDistance=this.attenuationDistance),this.attenuationTint!==void 0&&(i.attenuationTint=this.attenuationTint.getHex()),this.size!==void 0&&(i.size=this.size),this.shadowSide!==null&&(i.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==ss&&(i.blending=this.blending),this.side!==_s&&(i.side=this.side),this.vertexColors&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),this.transparent===!0&&(i.transparent=this.transparent),i.depthFunc=this.depthFunc,i.depthTest=this.depthTest,i.depthWrite=this.depthWrite,i.colorWrite=this.colorWrite,i.stencilWrite=this.stencilWrite,i.stencilWriteMask=this.stencilWriteMask,i.stencilFunc=this.stencilFunc,i.stencilRef=this.stencilRef,i.stencilFuncMask=this.stencilFuncMask,i.stencilFail=this.stencilFail,i.stencilZFail=this.stencilZFail,i.stencilZPass=this.stencilZPass,this.rotation&&this.rotation!==0&&(i.rotation=this.rotation),this.polygonOffset===!0&&(i.polygonOffset=!0),this.polygonOffsetFactor!==0&&(i.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(i.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth&&this.linewidth!==1&&(i.linewidth=this.linewidth),this.dashSize!==void 0&&(i.dashSize=this.dashSize),this.gapSize!==void 0&&(i.gapSize=this.gapSize),this.scale!==void 0&&(i.scale=this.scale),this.dithering===!0&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),this.alphaToCoverage===!0&&(i.alphaToCoverage=this.alphaToCoverage),this.premultipliedAlpha===!0&&(i.premultipliedAlpha=this.premultipliedAlpha),this.wireframe===!0&&(i.wireframe=this.wireframe),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(i.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(i.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(i.flatShading=this.flatShading),this.visible===!1&&(i.visible=!1),this.toneMapped===!1&&(i.toneMapped=!1),JSON.stringify(this.userData)!=="{}"&&(i.userData=this.userData);function r(s){const o=[];for(const a in s){const l=s[a];delete l.metadata,o.push(l)}return o}if(t){const s=r(e.textures),o=r(e.images);s.length>0&&(i.textures=s),o.length>0&&(i.images=o)}return i}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.fog=e.fog,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let i=null;if(t!==null){const r=t.length;i=new Array(r);for(let s=0;s!==r;++s)i[s]=t[s].clone()}return this.clippingPlanes=i,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}Rt.prototype.isMaterial=!0;const Up={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},tn={h:0,s:0,l:0},Xs={h:0,s:0,l:0};function cl(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*6*(2/3-t):n}function ul(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function hl(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}class Te{constructor(e,t,i){return t===void 0&&i===void 0?this.set(e):this.setRGB(e,t,i)}set(e){return e&&e.isColor?this.copy(e):typeof e=="number"?this.setHex(e):typeof e=="string"&&this.setStyle(e),this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,this}setRGB(e,t,i){return this.r=e,this.g=t,this.b=i,this}setHSL(e,t,i){if(e=d_(e,1),t=Ht(t,0,1),i=Ht(i,0,1),t===0)this.r=this.g=this.b=i;else{const r=i<=.5?i*(1+t):i+t-i*t,s=2*i-r;this.r=cl(s,r,e+1/3),this.g=cl(s,r,e),this.b=cl(s,r,e-1/3)}return this}setStyle(e){function t(r){r!==void 0&&parseFloat(r)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let i;if(i=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(e)){let r;const s=i[1],o=i[2];switch(s){case"rgb":case"rgba":if(r=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return this.r=Math.min(255,parseInt(r[1],10))/255,this.g=Math.min(255,parseInt(r[2],10))/255,this.b=Math.min(255,parseInt(r[3],10))/255,t(r[4]),this;if(r=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return this.r=Math.min(100,parseInt(r[1],10))/100,this.g=Math.min(100,parseInt(r[2],10))/100,this.b=Math.min(100,parseInt(r[3],10))/100,t(r[4]),this;break;case"hsl":case"hsla":if(r=/^\s*(\d*\.?\d+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o)){const a=parseFloat(r[1])/360,l=parseInt(r[2],10)/100,c=parseInt(r[3],10)/100;return t(r[4]),this.setHSL(a,l,c)}break}}else if(i=/^\#([A-Fa-f\d]+)$/.exec(e)){const r=i[1],s=r.length;if(s===3)return this.r=parseInt(r.charAt(0)+r.charAt(0),16)/255,this.g=parseInt(r.charAt(1)+r.charAt(1),16)/255,this.b=parseInt(r.charAt(2)+r.charAt(2),16)/255,this;if(s===6)return this.r=parseInt(r.charAt(0)+r.charAt(1),16)/255,this.g=parseInt(r.charAt(2)+r.charAt(3),16)/255,this.b=parseInt(r.charAt(4)+r.charAt(5),16)/255,this}return e&&e.length>0?this.setColorName(e):this}setColorName(e){const t=Up[e.toLowerCase()];return t!==void 0?this.setHex(t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copyGammaToLinear(e,t=2){return this.r=Math.pow(e.r,t),this.g=Math.pow(e.g,t),this.b=Math.pow(e.b,t),this}copyLinearToGamma(e,t=2){const i=t>0?1/t:1;return this.r=Math.pow(e.r,i),this.g=Math.pow(e.g,i),this.b=Math.pow(e.b,i),this}convertGammaToLinear(e){return this.copyGammaToLinear(this,e),this}convertLinearToGamma(e){return this.copyLinearToGamma(this,e),this}copySRGBToLinear(e){return this.r=ul(e.r),this.g=ul(e.g),this.b=ul(e.b),this}copyLinearToSRGB(e){return this.r=hl(e.r),this.g=hl(e.g),this.b=hl(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(){return this.r*255<<16^this.g*255<<8^this.b*255<<0}getHexString(){return("000000"+this.getHex().toString(16)).slice(-6)}getHSL(e){const t=this.r,i=this.g,r=this.b,s=Math.max(t,i,r),o=Math.min(t,i,r);let a,l;const c=(o+s)/2;if(o===s)a=0,l=0;else{const u=s-o;switch(l=c<=.5?u/(s+o):u/(2-s-o),s){case t:a=(i-r)/u+(i<r?6:0);break;case i:a=(r-t)/u+2;break;case r:a=(t-i)/u+4;break}a/=6}return e.h=a,e.s=l,e.l=c,e}getStyle(){return"rgb("+(this.r*255|0)+","+(this.g*255|0)+","+(this.b*255|0)+")"}offsetHSL(e,t,i){return this.getHSL(tn),tn.h+=e,tn.s+=t,tn.l+=i,this.setHSL(tn.h,tn.s,tn.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,i){return this.r=e.r+(t.r-e.r)*i,this.g=e.g+(t.g-e.g)*i,this.b=e.b+(t.b-e.b)*i,this}lerpHSL(e,t){this.getHSL(tn),e.getHSL(Xs);const i=Za(tn.h,Xs.h,t),r=Za(tn.s,Xs.s,t),s=Za(tn.l,Xs.l,t);return this.setHSL(i,r,s),this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),e.normalized===!0&&(this.r/=255,this.g/=255,this.b/=255),this}toJSON(){return this.getHex()}}Te.NAMES=Up;Te.prototype.isColor=!0;Te.prototype.r=1;Te.prototype.g=1;Te.prototype.b=1;class _a extends Rt{constructor(e){super(),this.type="MeshBasicMaterial",this.color=new Te(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=ma,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this}}_a.prototype.isMeshBasicMaterial=!0;const Xe=new q,js=new xe;class it{constructor(e,t,i){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=i===!0,this.usage=bs,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}copyAt(e,t,i){e*=this.itemSize,i*=t.itemSize;for(let r=0,s=this.itemSize;r<s;r++)this.array[e+r]=t.array[i+r];return this}copyArray(e){return this.array.set(e),this}copyColorsArray(e){const t=this.array;let i=0;for(let r=0,s=e.length;r<s;r++){let o=e[r];o===void 0&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",r),o=new Te),t[i++]=o.r,t[i++]=o.g,t[i++]=o.b}return this}copyVector2sArray(e){const t=this.array;let i=0;for(let r=0,s=e.length;r<s;r++){let o=e[r];o===void 0&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",r),o=new xe),t[i++]=o.x,t[i++]=o.y}return this}copyVector3sArray(e){const t=this.array;let i=0;for(let r=0,s=e.length;r<s;r++){let o=e[r];o===void 0&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",r),o=new q),t[i++]=o.x,t[i++]=o.y,t[i++]=o.z}return this}copyVector4sArray(e){const t=this.array;let i=0;for(let r=0,s=e.length;r<s;r++){let o=e[r];o===void 0&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",r),o=new Ze),t[i++]=o.x,t[i++]=o.y,t[i++]=o.z,t[i++]=o.w}return this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,i=this.count;t<i;t++)js.fromBufferAttribute(this,t),js.applyMatrix3(e),this.setXY(t,js.x,js.y);else if(this.itemSize===3)for(let t=0,i=this.count;t<i;t++)Xe.fromBufferAttribute(this,t),Xe.applyMatrix3(e),this.setXYZ(t,Xe.x,Xe.y,Xe.z);return this}applyMatrix4(e){for(let t=0,i=this.count;t<i;t++)Xe.x=this.getX(t),Xe.y=this.getY(t),Xe.z=this.getZ(t),Xe.applyMatrix4(e),this.setXYZ(t,Xe.x,Xe.y,Xe.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)Xe.x=this.getX(t),Xe.y=this.getY(t),Xe.z=this.getZ(t),Xe.applyNormalMatrix(e),this.setXYZ(t,Xe.x,Xe.y,Xe.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)Xe.x=this.getX(t),Xe.y=this.getY(t),Xe.z=this.getZ(t),Xe.transformDirection(e),this.setXYZ(t,Xe.x,Xe.y,Xe.z);return this}set(e,t=0){return this.array.set(e,t),this}getX(e){return this.array[e*this.itemSize]}setX(e,t){return this.array[e*this.itemSize]=t,this}getY(e){return this.array[e*this.itemSize+1]}setY(e,t){return this.array[e*this.itemSize+1]=t,this}getZ(e){return this.array[e*this.itemSize+2]}setZ(e,t){return this.array[e*this.itemSize+2]=t,this}getW(e){return this.array[e*this.itemSize+3]}setW(e,t){return this.array[e*this.itemSize+3]=t,this}setXY(e,t,i){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=i,this}setXYZ(e,t,i,r){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this}setXYZW(e,t,i,r,s){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==bs&&(e.usage=this.usage),(this.updateRange.offset!==0||this.updateRange.count!==-1)&&(e.updateRange=this.updateRange),e}}it.prototype.isBufferAttribute=!0;class Vp extends it{constructor(e,t,i){super(new Uint16Array(e),t,i)}}class kp extends it{constructor(e,t,i){super(new Uint32Array(e),t,i)}}class E_ extends it{constructor(e,t,i){super(new Uint16Array(e),t,i)}}E_.prototype.isFloat16BufferAttribute=!0;class ut extends it{constructor(e,t,i){super(new Float32Array(e),t,i)}}function zp(n){if(n.length===0)return-1/0;let e=n[0];for(let t=1,i=n.length;t<i;++t)n[t]>e&&(e=n[t]);return e}let T_=0;const Qt=new Ie,fl=new We,Wi=new q,zt=new un,Gr=new un,vt=new q;class Ke extends Bi{constructor(){super(),Object.defineProperty(this,"id",{value:T_++}),this.uuid=vn(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(zp(e)>65535?kp:Vp)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,i=0){this.groups.push({start:e,count:t,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const i=this.attributes.normal;if(i!==void 0){const s=new St().getNormalMatrix(e);i.applyNormalMatrix(s),i.needsUpdate=!0}const r=this.attributes.tangent;return r!==void 0&&(r.transformDirection(e),r.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return Qt.makeRotationFromQuaternion(e),this.applyMatrix4(Qt),this}rotateX(e){return Qt.makeRotationX(e),this.applyMatrix4(Qt),this}rotateY(e){return Qt.makeRotationY(e),this.applyMatrix4(Qt),this}rotateZ(e){return Qt.makeRotationZ(e),this.applyMatrix4(Qt),this}translate(e,t,i){return Qt.makeTranslation(e,t,i),this.applyMatrix4(Qt),this}scale(e,t,i){return Qt.makeScale(e,t,i),this.applyMatrix4(Qt),this}lookAt(e){return fl.lookAt(e),fl.updateMatrix(),this.applyMatrix4(fl.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Wi).negate(),this.translate(Wi.x,Wi.y,Wi.z),this}setFromPoints(e){const t=[];for(let i=0,r=e.length;i<r;i++){const s=e[i];t.push(s.x,s.y,s.z||0)}return this.setAttribute("position",new ut(t,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new un);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new q(-1/0,-1/0,-1/0),new q(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let i=0,r=t.length;i<r;i++){const s=t[i];zt.setFromBufferAttribute(s),this.morphTargetsRelative?(vt.addVectors(this.boundingBox.min,zt.min),this.boundingBox.expandByPoint(vt),vt.addVectors(this.boundingBox.max,zt.max),this.boundingBox.expandByPoint(vt)):(this.boundingBox.expandByPoint(zt.min),this.boundingBox.expandByPoint(zt.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Rr);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new q,1/0);return}if(e){const i=this.boundingSphere.center;if(zt.setFromBufferAttribute(e),t)for(let s=0,o=t.length;s<o;s++){const a=t[s];Gr.setFromBufferAttribute(a),this.morphTargetsRelative?(vt.addVectors(zt.min,Gr.min),zt.expandByPoint(vt),vt.addVectors(zt.max,Gr.max),zt.expandByPoint(vt)):(zt.expandByPoint(Gr.min),zt.expandByPoint(Gr.max))}zt.getCenter(i);let r=0;for(let s=0,o=e.count;s<o;s++)vt.fromBufferAttribute(e,s),r=Math.max(r,i.distanceToSquared(vt));if(t)for(let s=0,o=t.length;s<o;s++){const a=t[s],l=this.morphTargetsRelative;for(let c=0,u=a.count;c<u;c++)vt.fromBufferAttribute(a,c),l&&(Wi.fromBufferAttribute(e,c),vt.add(Wi)),r=Math.max(r,i.distanceToSquared(vt))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeFaceNormals(){}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const i=e.array,r=t.position.array,s=t.normal.array,o=t.uv.array,a=r.length/3;t.tangent===void 0&&this.setAttribute("tangent",new it(new Float32Array(4*a),4));const l=t.tangent.array,c=[],u=[];for(let F=0;F<a;F++)c[F]=new q,u[F]=new q;const h=new q,f=new q,d=new q,m=new xe,_=new xe,E=new xe,p=new q,A=new q;function R(F,S,G){h.fromArray(r,F*3),f.fromArray(r,S*3),d.fromArray(r,G*3),m.fromArray(o,F*2),_.fromArray(o,S*2),E.fromArray(o,G*2),f.sub(h),d.sub(h),_.sub(m),E.sub(m);const b=1/(_.x*E.y-E.x*_.y);!isFinite(b)||(p.copy(f).multiplyScalar(E.y).addScaledVector(d,-_.y).multiplyScalar(b),A.copy(d).multiplyScalar(_.x).addScaledVector(f,-E.x).multiplyScalar(b),c[F].add(p),c[S].add(p),c[G].add(p),u[F].add(A),u[S].add(A),u[G].add(A))}let M=this.groups;M.length===0&&(M=[{start:0,count:i.length}]);for(let F=0,S=M.length;F<S;++F){const G=M[F],b=G.start,T=G.count;for(let y=b,v=b+T;y<v;y+=3)R(i[y+0],i[y+1],i[y+2])}const L=new q,D=new q,C=new q,k=new q;function U(F){C.fromArray(s,F*3),k.copy(C);const S=c[F];L.copy(S),L.sub(C.multiplyScalar(C.dot(S))).normalize(),D.crossVectors(k,S);const b=D.dot(u[F])<0?-1:1;l[F*4]=L.x,l[F*4+1]=L.y,l[F*4+2]=L.z,l[F*4+3]=b}for(let F=0,S=M.length;F<S;++F){const G=M[F],b=G.start,T=G.count;for(let y=b,v=b+T;y<v;y+=3)U(i[y+0]),U(i[y+1]),U(i[y+2])}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let i=this.getAttribute("normal");if(i===void 0)i=new it(new Float32Array(t.count*3),3),this.setAttribute("normal",i);else for(let f=0,d=i.count;f<d;f++)i.setXYZ(f,0,0,0);const r=new q,s=new q,o=new q,a=new q,l=new q,c=new q,u=new q,h=new q;if(e)for(let f=0,d=e.count;f<d;f+=3){const m=e.getX(f+0),_=e.getX(f+1),E=e.getX(f+2);r.fromBufferAttribute(t,m),s.fromBufferAttribute(t,_),o.fromBufferAttribute(t,E),u.subVectors(o,s),h.subVectors(r,s),u.cross(h),a.fromBufferAttribute(i,m),l.fromBufferAttribute(i,_),c.fromBufferAttribute(i,E),a.add(u),l.add(u),c.add(u),i.setXYZ(m,a.x,a.y,a.z),i.setXYZ(_,l.x,l.y,l.z),i.setXYZ(E,c.x,c.y,c.z)}else for(let f=0,d=t.count;f<d;f+=3)r.fromBufferAttribute(t,f+0),s.fromBufferAttribute(t,f+1),o.fromBufferAttribute(t,f+2),u.subVectors(o,s),h.subVectors(r,s),u.cross(h),i.setXYZ(f+0,u.x,u.y,u.z),i.setXYZ(f+1,u.x,u.y,u.z),i.setXYZ(f+2,u.x,u.y,u.z);this.normalizeNormals(),i.needsUpdate=!0}}merge(e,t){if(!(e&&e.isBufferGeometry)){console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",e);return}t===void 0&&(t=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));const i=this.attributes;for(const r in i){if(e.attributes[r]===void 0)continue;const o=i[r].array,a=e.attributes[r],l=a.array,c=a.itemSize*t,u=Math.min(l.length,o.length-c);for(let h=0,f=c;h<u;h++,f++)o[f]=l[h]}return this}normalizeNormals(){const e=this.attributes.normal;for(let t=0,i=e.count;t<i;t++)vt.fromBufferAttribute(e,t),vt.normalize(),e.setXYZ(t,vt.x,vt.y,vt.z)}toNonIndexed(){function e(a,l){const c=a.array,u=a.itemSize,h=a.normalized,f=new c.constructor(l.length*u);let d=0,m=0;for(let _=0,E=l.length;_<E;_++){a.isInterleavedBufferAttribute?d=l[_]*a.data.stride+a.offset:d=l[_]*u;for(let p=0;p<u;p++)f[m++]=c[d++]}return new it(f,u,h)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new Ke,i=this.index.array,r=this.attributes;for(const a in r){const l=r[a],c=e(l,i);t.setAttribute(a,c)}const s=this.morphAttributes;for(const a in s){const l=[],c=s[a];for(let u=0,h=c.length;u<h;u++){const f=c[u],d=e(f,i);l.push(d)}t.morphAttributes[a]=l}t.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let a=0,l=o.length;a<l;a++){const c=o[a];t.addGroup(c.start,c.count,c.materialIndex)}return t}toJSON(){const e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const l=this.parameters;for(const c in l)l[c]!==void 0&&(e[c]=l[c]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const i=this.attributes;for(const l in i){const c=i[l];e.data.attributes[l]=c.toJSON(e.data)}const r={};let s=!1;for(const l in this.morphAttributes){const c=this.morphAttributes[l],u=[];for(let h=0,f=c.length;h<f;h++){const d=c[h];u.push(d.toJSON(e.data))}u.length>0&&(r[l]=u,s=!0)}s&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return a!==null&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return new Ke().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const i=e.index;i!==null&&this.setIndex(i.clone(t));const r=e.attributes;for(const c in r){const u=r[c];this.setAttribute(c,u.clone(t))}const s=e.morphAttributes;for(const c in s){const u=[],h=s[c];for(let f=0,d=h.length;f<d;f++)u.push(h[f].clone(t));this.morphAttributes[c]=u}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let c=0,u=o.length;c<u;c++){const h=o[c];this.addGroup(h.start,h.count,h.materialIndex)}const a=e.boundingBox;a!==null&&(this.boundingBox=a.clone());const l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}Ke.prototype.isBufferGeometry=!0;const Zh=new Ie,qi=new Pr,dl=new Rr,Zn=new q,Jn=new q,Xn=new q,pl=new q,ml=new q,gl=new q,$s=new q,eo=new q,to=new q,no=new xe,io=new xe,ro=new xe,Al=new q,so=new q;class Bt extends We{constructor(e=new Ke,t=new _a){super(),this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e){return super.copy(e),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){const e=this.geometry;if(e.isBufferGeometry){const t=e.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}else{const t=e.morphTargets;t!==void 0&&t.length>0&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}raycast(e,t){const i=this.geometry,r=this.material,s=this.matrixWorld;if(r===void 0||(i.boundingSphere===null&&i.computeBoundingSphere(),dl.copy(i.boundingSphere),dl.applyMatrix4(s),e.ray.intersectsSphere(dl)===!1)||(Zh.copy(s).invert(),qi.copy(e.ray).applyMatrix4(Zh),i.boundingBox!==null&&qi.intersectsBox(i.boundingBox)===!1))return;let o;if(i.isBufferGeometry){const a=i.index,l=i.attributes.position,c=i.morphAttributes.position,u=i.morphTargetsRelative,h=i.attributes.uv,f=i.attributes.uv2,d=i.groups,m=i.drawRange;if(a!==null)if(Array.isArray(r))for(let _=0,E=d.length;_<E;_++){const p=d[_],A=r[p.materialIndex],R=Math.max(p.start,m.start),M=Math.min(p.start+p.count,m.start+m.count);for(let L=R,D=M;L<D;L+=3){const C=a.getX(L),k=a.getX(L+1),U=a.getX(L+2);o=oo(this,A,e,qi,l,c,u,h,f,C,k,U),o&&(o.faceIndex=Math.floor(L/3),o.face.materialIndex=p.materialIndex,t.push(o))}}else{const _=Math.max(0,m.start),E=Math.min(a.count,m.start+m.count);for(let p=_,A=E;p<A;p+=3){const R=a.getX(p),M=a.getX(p+1),L=a.getX(p+2);o=oo(this,r,e,qi,l,c,u,h,f,R,M,L),o&&(o.faceIndex=Math.floor(p/3),t.push(o))}}else if(l!==void 0)if(Array.isArray(r))for(let _=0,E=d.length;_<E;_++){const p=d[_],A=r[p.materialIndex],R=Math.max(p.start,m.start),M=Math.min(p.start+p.count,m.start+m.count);for(let L=R,D=M;L<D;L+=3){const C=L,k=L+1,U=L+2;o=oo(this,A,e,qi,l,c,u,h,f,C,k,U),o&&(o.faceIndex=Math.floor(L/3),o.face.materialIndex=p.materialIndex,t.push(o))}}else{const _=Math.max(0,m.start),E=Math.min(l.count,m.start+m.count);for(let p=_,A=E;p<A;p+=3){const R=p,M=p+1,L=p+2;o=oo(this,r,e,qi,l,c,u,h,f,R,M,L),o&&(o.faceIndex=Math.floor(p/3),t.push(o))}}}else i.isGeometry&&console.error("THREE.Mesh.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}Bt.prototype.isMesh=!0;function C_(n,e,t,i,r,s,o,a){let l;if(e.side===gt?l=i.intersectTriangle(o,s,r,!0,a):l=i.intersectTriangle(r,s,o,e.side!==_r,a),l===null)return null;so.copy(a),so.applyMatrix4(n.matrixWorld);const c=t.ray.origin.distanceTo(so);return c<t.near||c>t.far?null:{distance:c,point:so.clone(),object:n}}function oo(n,e,t,i,r,s,o,a,l,c,u,h){Zn.fromBufferAttribute(r,c),Jn.fromBufferAttribute(r,u),Xn.fromBufferAttribute(r,h);const f=n.morphTargetInfluences;if(s&&f){$s.set(0,0,0),eo.set(0,0,0),to.set(0,0,0);for(let m=0,_=s.length;m<_;m++){const E=f[m],p=s[m];E!==0&&(pl.fromBufferAttribute(p,c),ml.fromBufferAttribute(p,u),gl.fromBufferAttribute(p,h),o?($s.addScaledVector(pl,E),eo.addScaledVector(ml,E),to.addScaledVector(gl,E)):($s.addScaledVector(pl.sub(Zn),E),eo.addScaledVector(ml.sub(Jn),E),to.addScaledVector(gl.sub(Xn),E)))}Zn.add($s),Jn.add(eo),Xn.add(to)}n.isSkinnedMesh&&(n.boneTransform(c,Zn),n.boneTransform(u,Jn),n.boneTransform(h,Xn));const d=C_(n,e,t,i,Zn,Jn,Xn,Al);if(d){a&&(no.fromBufferAttribute(a,c),io.fromBufferAttribute(a,u),ro.fromBufferAttribute(a,h),d.uv=pt.getUV(Al,Zn,Jn,Xn,no,io,ro,new xe)),l&&(no.fromBufferAttribute(l,c),io.fromBufferAttribute(l,u),ro.fromBufferAttribute(l,h),d.uv2=pt.getUV(Al,Zn,Jn,Xn,no,io,ro,new xe));const m={a:c,b:u,c:h,normal:new q,materialIndex:0};pt.getNormal(Zn,Jn,Xn,m.normal),d.face=m}return d}class Ds extends Ke{constructor(e=1,t=1,i=1,r=1,s=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:i,widthSegments:r,heightSegments:s,depthSegments:o};const a=this;r=Math.floor(r),s=Math.floor(s),o=Math.floor(o);const l=[],c=[],u=[],h=[];let f=0,d=0;m("z","y","x",-1,-1,i,t,e,o,s,0),m("z","y","x",1,-1,i,t,-e,o,s,1),m("x","z","y",1,1,e,i,t,r,o,2),m("x","z","y",1,-1,e,i,-t,r,o,3),m("x","y","z",1,-1,e,t,i,r,s,4),m("x","y","z",-1,-1,e,t,-i,r,s,5),this.setIndex(l),this.setAttribute("position",new ut(c,3)),this.setAttribute("normal",new ut(u,3)),this.setAttribute("uv",new ut(h,2));function m(_,E,p,A,R,M,L,D,C,k,U){const F=M/C,S=L/k,G=M/2,b=L/2,T=D/2,y=C+1,v=k+1;let w=0,g=0;const N=new q;for(let z=0;z<v;z++){const Z=z*S-b;for(let ee=0;ee<y;ee++){const te=ee*F-G;N[_]=te*A,N[E]=Z*R,N[p]=T,c.push(N.x,N.y,N.z),N[_]=0,N[E]=0,N[p]=D>0?1:-1,u.push(N.x,N.y,N.z),h.push(ee/C),h.push(1-z/k),w+=1}}for(let z=0;z<k;z++)for(let Z=0;Z<C;Z++){const ee=f+Z+y*z,te=f+Z+y*(z+1),se=f+(Z+1)+y*(z+1),H=f+(Z+1)+y*z;l.push(ee,te,H),l.push(te,se,H),g+=6}a.addGroup(d,g,U),d+=g,f+=w}}static fromJSON(e){return new Ds(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function br(n){const e={};for(const t in n){e[t]={};for(const i in n[t]){const r=n[t][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?e[t][i]=r.clone():Array.isArray(r)?e[t][i]=r.slice():e[t][i]=r}}return e}function Tt(n){const e={};for(let t=0;t<n.length;t++){const i=br(n[t]);for(const r in i)e[r]=i[r]}return e}const I_={clone:br,merge:Tt};var L_=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,R_=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class Di extends Rt{constructor(e){super(),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader=L_,this.fragmentShader=R_,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&(e.attributes!==void 0&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(e))}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=br(e.uniforms),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const r in this.uniforms){const o=this.uniforms[r].value;o&&o.isTexture?t.uniforms[r]={type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?t.uniforms[r]={type:"c",value:o.getHex()}:o&&o.isVector2?t.uniforms[r]={type:"v2",value:o.toArray()}:o&&o.isVector3?t.uniforms[r]={type:"v3",value:o.toArray()}:o&&o.isVector4?t.uniforms[r]={type:"v4",value:o.toArray()}:o&&o.isMatrix3?t.uniforms[r]={type:"m3",value:o.toArray()}:o&&o.isMatrix4?t.uniforms[r]={type:"m4",value:o.toArray()}:t.uniforms[r]={value:o}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;const i={};for(const r in this.extensions)this.extensions[r]===!0&&(i[r]=!0);return Object.keys(i).length>0&&(t.extensions=i),t}}Di.prototype.isShaderMaterial=!0;class Gc extends We{constructor(){super(),this.type="Camera",this.matrixWorldInverse=new Ie,this.projectionMatrix=new Ie,this.projectionMatrixInverse=new Ie}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}Gc.prototype.isCamera=!0;class Dt extends Gc{constructor(e=50,t=1,i=.1,r=2e3){super(),this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=i,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=nc*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(Ya*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return nc*2*Math.atan(Math.tan(Ya*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,i,r,s,o){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(Ya*.5*this.fov)/this.zoom,i=2*t,r=this.aspect*i,s=-.5*r;const o=this.view;if(this.view!==null&&this.view.enabled){const l=o.fullWidth,c=o.fullHeight;s+=o.offsetX*r/l,t-=o.offsetY*i/c,r*=o.width/l,i*=o.height/c}const a=this.filmOffset;a!==0&&(s+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+r,t,t-i,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}Dt.prototype.isPerspectiveCamera=!0;const Qi=90,Ki=1;class Wc extends We{constructor(e,t,i){if(super(),this.type="CubeCamera",i.isWebGLCubeRenderTarget!==!0){console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter.");return}this.renderTarget=i;const r=new Dt(Qi,Ki,e,t);r.layers=this.layers,r.up.set(0,-1,0),r.lookAt(new q(1,0,0)),this.add(r);const s=new Dt(Qi,Ki,e,t);s.layers=this.layers,s.up.set(0,-1,0),s.lookAt(new q(-1,0,0)),this.add(s);const o=new Dt(Qi,Ki,e,t);o.layers=this.layers,o.up.set(0,0,1),o.lookAt(new q(0,1,0)),this.add(o);const a=new Dt(Qi,Ki,e,t);a.layers=this.layers,a.up.set(0,0,-1),a.lookAt(new q(0,-1,0)),this.add(a);const l=new Dt(Qi,Ki,e,t);l.layers=this.layers,l.up.set(0,-1,0),l.lookAt(new q(0,0,1)),this.add(l);const c=new Dt(Qi,Ki,e,t);c.layers=this.layers,c.up.set(0,-1,0),c.lookAt(new q(0,0,-1)),this.add(c)}update(e,t){this.parent===null&&this.updateMatrixWorld();const i=this.renderTarget,[r,s,o,a,l,c]=this.children,u=e.xr.enabled,h=e.getRenderTarget();e.xr.enabled=!1;const f=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,e.setRenderTarget(i,0),e.render(t,r),e.setRenderTarget(i,1),e.render(t,s),e.setRenderTarget(i,2),e.render(t,o),e.setRenderTarget(i,3),e.render(t,a),e.setRenderTarget(i,4),e.render(t,l),i.texture.generateMipmaps=f,e.setRenderTarget(i,5),e.render(t,c),e.setRenderTarget(h),e.xr.enabled=u}}class wa extends Et{constructor(e,t,i,r,s,o,a,l,c,u){e=e!==void 0?e:[],t=t!==void 0?t:ga,a=a!==void 0?a:Pi,super(e,t,i,r,s,o,a,l,c,u),this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}wa.prototype.isCubeTexture=!0;class Hp extends yn{constructor(e,t,i){Number.isInteger(t)&&(console.warn("THREE.WebGLCubeRenderTarget: constructor signature is now WebGLCubeRenderTarget( size, options )"),t=i),super(e,e,t),t=t||{},this.texture=new wa(void 0,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:Yt,this.texture._needsFlipEnvMap=!1}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.format=ln,this.texture.encoding=t.encoding,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const i={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},r=new Ds(5,5,5),s=new Di({name:"CubemapFromEquirect",uniforms:br(i.uniforms),vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,side:gt,blending:ri});s.uniforms.tEquirect.value=t;const o=new Bt(r,s),a=t.minFilter;return t.minFilter===ya&&(t.minFilter=Yt),new Wc(1,10,this).update(e,o),t.minFilter=a,o.geometry.dispose(),o.material.dispose(),this}clear(e,t,i,r){const s=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(t,i,r);e.setRenderTarget(s)}}Hp.prototype.isWebGLCubeRenderTarget=!0;const vl=new q,P_=new q,D_=new St;class Nn{constructor(e=new q(1,0,0),t=0){this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,i,r){return this.normal.set(e,t,i),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,i){const r=vl.subVectors(i,t).cross(P_.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)}intersectLine(e,t){const i=e.delta(vl),r=this.normal.dot(i);if(r===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/r;return s<0||s>1?null:t.copy(i).multiplyScalar(s).add(e.start)}intersectsLine(e){const t=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return t<0&&i>0||i<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const i=t||D_.getNormalMatrix(e),r=this.coplanarPoint(vl).applyMatrix4(e),s=this.normal.applyMatrix3(i).normalize();return this.constant=-r.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}Nn.prototype.isPlane=!0;const Yi=new Rr,ao=new q;class ba{constructor(e=new Nn,t=new Nn,i=new Nn,r=new Nn,s=new Nn,o=new Nn){this.planes=[e,t,i,r,s,o]}set(e,t,i,r,s,o){const a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(i),a[3].copy(r),a[4].copy(s),a[5].copy(o),this}copy(e){const t=this.planes;for(let i=0;i<6;i++)t[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e){const t=this.planes,i=e.elements,r=i[0],s=i[1],o=i[2],a=i[3],l=i[4],c=i[5],u=i[6],h=i[7],f=i[8],d=i[9],m=i[10],_=i[11],E=i[12],p=i[13],A=i[14],R=i[15];return t[0].setComponents(a-r,h-l,_-f,R-E).normalize(),t[1].setComponents(a+r,h+l,_+f,R+E).normalize(),t[2].setComponents(a+s,h+c,_+d,R+p).normalize(),t[3].setComponents(a-s,h-c,_-d,R-p).normalize(),t[4].setComponents(a-o,h-u,_-m,R-A).normalize(),t[5].setComponents(a+o,h+u,_+m,R+A).normalize(),this}intersectsObject(e){const t=e.geometry;return t.boundingSphere===null&&t.computeBoundingSphere(),Yi.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(Yi)}intersectsSprite(e){return Yi.center.set(0,0,0),Yi.radius=.7071067811865476,Yi.applyMatrix4(e.matrixWorld),this.intersectsSphere(Yi)}intersectsSphere(e){const t=this.planes,i=e.center,r=-e.radius;for(let s=0;s<6;s++)if(t[s].distanceToPoint(i)<r)return!1;return!0}intersectsBox(e){const t=this.planes;for(let i=0;i<6;i++){const r=t[i];if(ao.x=r.normal.x>0?e.max.x:e.min.x,ao.y=r.normal.y>0?e.max.y:e.min.y,ao.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(ao)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let i=0;i<6;i++)if(t[i].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function Gp(){let n=null,e=!1,t=null,i=null;function r(s,o){t(s,o),i=n.requestAnimationFrame(r)}return{start:function(){e!==!0&&t!==null&&(i=n.requestAnimationFrame(r),e=!0)},stop:function(){n.cancelAnimationFrame(i),e=!1},setAnimationLoop:function(s){t=s},setContext:function(s){n=s}}}function B_(n,e){const t=e.isWebGL2,i=new WeakMap;function r(c,u){const h=c.array,f=c.usage,d=n.createBuffer();n.bindBuffer(u,d),n.bufferData(u,h,f),c.onUploadCallback();let m=5126;return h instanceof Float32Array?m=5126:h instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):h instanceof Uint16Array?c.isFloat16BufferAttribute?t?m=5131:console.warn("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2."):m=5123:h instanceof Int16Array?m=5122:h instanceof Uint32Array?m=5125:h instanceof Int32Array?m=5124:h instanceof Int8Array?m=5120:(h instanceof Uint8Array||h instanceof Uint8ClampedArray)&&(m=5121),{buffer:d,type:m,bytesPerElement:h.BYTES_PER_ELEMENT,version:c.version}}function s(c,u,h){const f=u.array,d=u.updateRange;n.bindBuffer(h,c),d.count===-1?n.bufferSubData(h,0,f):(t?n.bufferSubData(h,d.offset*f.BYTES_PER_ELEMENT,f,d.offset,d.count):n.bufferSubData(h,d.offset*f.BYTES_PER_ELEMENT,f.subarray(d.offset,d.offset+d.count)),d.count=-1)}function o(c){return c.isInterleavedBufferAttribute&&(c=c.data),i.get(c)}function a(c){c.isInterleavedBufferAttribute&&(c=c.data);const u=i.get(c);u&&(n.deleteBuffer(u.buffer),i.delete(c))}function l(c,u){if(c.isGLBufferAttribute){const f=i.get(c);(!f||f.version<c.version)&&i.set(c,{buffer:c.buffer,type:c.type,bytesPerElement:c.elementSize,version:c.version});return}c.isInterleavedBufferAttribute&&(c=c.data);const h=i.get(c);h===void 0?i.set(c,r(c,u)):h.version<c.version&&(s(h.buffer,c,u),h.version=c.version)}return{get:o,remove:a,update:l}}class qc extends Ke{constructor(e=1,t=1,i=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:i,heightSegments:r};const s=e/2,o=t/2,a=Math.floor(i),l=Math.floor(r),c=a+1,u=l+1,h=e/a,f=t/l,d=[],m=[],_=[],E=[];for(let p=0;p<u;p++){const A=p*f-o;for(let R=0;R<c;R++){const M=R*h-s;m.push(M,-A,0),_.push(0,0,1),E.push(R/a),E.push(1-p/l)}}for(let p=0;p<l;p++)for(let A=0;A<a;A++){const R=A+c*p,M=A+c*(p+1),L=A+1+c*(p+1),D=A+1+c*p;d.push(R,M,D),d.push(M,L,D)}this.setIndex(d),this.setAttribute("position",new ut(m,3)),this.setAttribute("normal",new ut(_,3)),this.setAttribute("uv",new ut(E,2))}static fromJSON(e){return new qc(e.width,e.height,e.widthSegments,e.heightSegments)}}var F_=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vUv ).g;
#endif`,N_=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,O_=`#ifdef ALPHATEST
	if ( diffuseColor.a < ALPHATEST ) discard;
#endif`,U_=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );
	#endif
#endif`,V_=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,k_="vec3 transformed = vec3( position );",z_=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,H_=`vec2 integrateSpecularBRDF( const in float dotNV, const in float roughness ) {
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	return vec2( -1.04, 1.04 ) * a004 + r.zw;
}
float punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
#if defined ( PHYSICALLY_CORRECT_LIGHTS )
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
#else
	if( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
		return pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );
	}
	return 1.0;
#endif
}
vec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in vec3 f90, const in float dotVH ) {
	float fresnel = exp2( ( -5.55473 * dotVH - 6.98316 ) * dotVH );
	return ( f90 - f0 ) * fresnel + f0;
}
vec3 F_Schlick_RoughnessDependent( const in vec3 F0, const in float dotNV, const in float roughness ) {
	float fresnel = exp2( ( -5.55473 * dotNV - 6.98316 ) * dotNV );
	vec3 Fr = max( vec3( 1.0 - roughness ), F0 ) - F0;
	return Fr * fresnel + F0;
}
float G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	float gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	return 1.0 / ( gl * gv );
}
float G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
vec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in vec3 f90, const in float roughness ) {
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( incidentLight.direction + viewDir );
	float dotNL = saturate( dot( normal, incidentLight.direction ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotLH = saturate( dot( incidentLight.direction, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotLH );
	float G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );
	float D = D_GGX( alpha, dotNH );
	return F * ( G * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
vec3 BRDF_Specular_GGX_Environment( const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	vec2 brdf = integrateSpecularBRDF( dotNV, roughness );
	return specularColor * brdf.x + brdf.y;
}
void BRDF_Specular_Multiscattering_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
	float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
	vec3 F = F_Schlick_RoughnessDependent( specularColor, dotNV, roughness );
	vec2 brdf = integrateSpecularBRDF( dotNV, roughness );
	vec3 FssEss = F * brdf.x + brdf.y;
	float Ess = brdf.x + brdf.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );
	float dotNH = saturate( dot( geometry.normal, halfDir ) );
	float dotLH = saturate( dot( incidentLight.direction, halfDir ) );
	vec3 F = F_Schlick( specularColor, vec3( 1.0 ), dotLH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
}
float GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {
	return ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );
}
float BlinnExponentToGGXRoughness( const in float blinnExponent ) {
	return sqrt( 2.0 / ( blinnExponent + 2.0 ) );
}
#if defined( USE_SHEEN )
float D_Charlie(float roughness, float NoH) {
	float invAlpha = 1.0 / roughness;
	float cos2h = NoH * NoH;
	float sin2h = max(1.0 - cos2h, 0.0078125);	return (2.0 + invAlpha) * pow(sin2h, invAlpha * 0.5) / (2.0 * PI);
}
float V_Neubelt(float NoV, float NoL) {
	return saturate(1.0 / (4.0 * (NoL + NoV - NoL * NoV)));
}
vec3 BRDF_Specular_Sheen( const in float roughness, const in vec3 L, const in GeometricContext geometry, vec3 specularColor ) {
	vec3 N = geometry.normal;
	vec3 V = geometry.viewDir;
	vec3 H = normalize( V + L );
	float dotNH = saturate( dot( N, H ) );
	return specularColor * D_Charlie( roughness, dotNH ) * V_Neubelt( dot(N, V), dot(N, L) );
}
#endif`,G_=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vUv );
		vec2 dSTdy = dFdy( vUv );
		float Hll = bumpScale * texture2D( bumpMap, vUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );
		vec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,W_=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,q_=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,Q_=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,K_=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,Y_=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,Z_=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,J_=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,X_=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,j_=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate(a) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement(a) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract(sin(sn) * c);
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float max3( vec3 v ) { return max( max( v.x, v.y ), v.z ); }
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
#ifdef CLEARCOAT
	vec3 clearcoatNormal;
#endif
};
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
vec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {
	float distance = dot( planeNormal, point - pointOnPlane );
	return - distance * planeNormal + point;
}
float sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {
	return sign( dot( point - pointOnPlane, planeNormal ) );
}
vec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {
	return lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float linearToRelativeLuminance( const in vec3 color ) {
	vec3 weights = vec3( 0.2126, 0.7152, 0.0722 );
	return dot( weights, color.rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}`,$_=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_maxMipLevel 8.0
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_maxTileSize 256.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		float texelSize = 1.0 / ( 3.0 * cubeUV_maxTileSize );
		vec2 uv = getUV( direction, face ) * ( faceSize - 1.0 );
		vec2 f = fract( uv );
		uv += 0.5 - f;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		if ( mipInt < cubeUV_maxMipLevel ) {
			uv.y += 2.0 * cubeUV_maxTileSize;
		}
		uv.y += filterInt * 2.0 * cubeUV_minTileSize;
		uv.x += 3.0 * max( 0.0, cubeUV_maxTileSize - 2.0 * faceSize );
		uv *= texelSize;
		vec3 tl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;
		uv.x += texelSize;
		vec3 tr = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;
		uv.y += texelSize;
		vec3 br = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;
		uv.x -= texelSize;
		vec3 bl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;
		vec3 tm = mix( tl, tr, f.x );
		vec3 bm = mix( bl, br, f.x );
		return mix( tm, bm, f.y );
	}
	#define r0 1.0
	#define v0 0.339
	#define m0 - 2.0
	#define r1 0.8
	#define v1 0.276
	#define m1 - 1.0
	#define r4 0.4
	#define v4 0.046
	#define m4 2.0
	#define r5 0.305
	#define v5 0.016
	#define m5 3.0
	#define r6 0.21
	#define v6 0.0038
	#define m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= r1 ) {
			mip = ( r0 - roughness ) * ( m1 - m0 ) / ( r0 - r1 ) + m0;
		} else if ( roughness >= r4 ) {
			mip = ( r1 - roughness ) * ( m4 - m1 ) / ( r1 - r4 ) + m1;
		} else if ( roughness >= r5 ) {
			mip = ( r4 - roughness ) * ( m5 - m4 ) / ( r4 - r5 ) + m4;
		} else if ( roughness >= r6 ) {
			mip = ( r5 - roughness ) * ( m6 - m5 ) / ( r5 - r6 ) + m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), m0, cubeUV_maxMipLevel );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,ew=`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,tw=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,nw=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );
#endif`,iw=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vUv );
	emissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,rw=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,sw="gl_FragColor = linearToOutputTexel( gl_FragColor );",ow=`
vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 GammaToLinear( in vec4 value, in float gammaFactor ) {
	return vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );
}
vec4 LinearToGamma( in vec4 value, in float gammaFactor ) {
	return vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );
}
vec4 sRGBToLinear( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}
vec4 RGBEToLinear( in vec4 value ) {
	return vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );
}
vec4 LinearToRGBE( in vec4 value ) {
	float maxComponent = max( max( value.r, value.g ), value.b );
	float fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );
	return vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );
}
vec4 RGBMToLinear( in vec4 value, in float maxRange ) {
	return vec4( value.rgb * value.a * maxRange, 1.0 );
}
vec4 LinearToRGBM( in vec4 value, in float maxRange ) {
	float maxRGB = max( value.r, max( value.g, value.b ) );
	float M = clamp( maxRGB / maxRange, 0.0, 1.0 );
	M = ceil( M * 255.0 ) / 255.0;
	return vec4( value.rgb / ( M * maxRange ), M );
}
vec4 RGBDToLinear( in vec4 value, in float maxRange ) {
	return vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );
}
vec4 LinearToRGBD( in vec4 value, in float maxRange ) {
	float maxRGB = max( value.r, max( value.g, value.b ) );
	float D = max( maxRange / maxRGB, 1.0 );
	D = clamp( floor( D ) / 255.0, 0.0, 1.0 );
	return vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );
}
const mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );
vec4 LinearToLogLuv( in vec4 value ) {
	vec3 Xp_Y_XYZp = cLogLuvM * value.rgb;
	Xp_Y_XYZp = max( Xp_Y_XYZp, vec3( 1e-6, 1e-6, 1e-6 ) );
	vec4 vResult;
	vResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;
	float Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;
	vResult.w = fract( Le );
	vResult.z = ( Le - ( floor( vResult.w * 255.0 ) ) / 255.0 ) / 255.0;
	return vResult;
}
const mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );
vec4 LogLuvToLinear( in vec4 value ) {
	float Le = value.z * 255.0 + value.w;
	vec3 Xp_Y_XYZp;
	Xp_Y_XYZp.y = exp2( ( Le - 127.0 ) / 2.0 );
	Xp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;
	Xp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;
	vec3 vRGB = cLogLuvInverseM * Xp_Y_XYZp.rgb;
	return vec4( max( vRGB, 0.0 ), 1.0 );
}`,aw=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifndef ENVMAP_TYPE_CUBE_UV
		envColor = envMapTexelToLinear( envColor );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,lw=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform int maxMipLevel;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,cw=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,uw=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,hw=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,fw=`#ifdef USE_FOG
	fogDepth = - mvPosition.z;
#endif`,dw=`#ifdef USE_FOG
	varying float fogDepth;
#endif`,pw=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * fogDepth * fogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, fogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,mw=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float fogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,gw=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return texture2D( gradientMap, coord ).rgb;
	#else
		return ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );
	#endif
}`,Aw=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel= texture2D( lightMap, vUv2 );
	reflectedLight.indirectDiffuse += PI * lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;
#endif`,vw=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,yw=`vec3 diffuse = vec3( 1.0 );
GeometricContext geometry;
geometry.position = mvPosition.xyz;
geometry.normal = normalize( transformedNormal );
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );
GeometricContext backGeometry;
backGeometry.position = geometry.position;
backGeometry.normal = -geometry.normal;
backGeometry.viewDir = geometry.viewDir;
vLightFront = vec3( 0.0 );
vIndirectFront = vec3( 0.0 );
#ifdef DOUBLE_SIDED
	vLightBack = vec3( 0.0 );
	vIndirectBack = vec3( 0.0 );
#endif
IncidentLight directLight;
float dotNL;
vec3 directLightColor_Diffuse;
vIndirectFront += getAmbientLightIrradiance( ambientLightColor );
vIndirectFront += getLightProbeIrradiance( lightProbe, geometry );
#ifdef DOUBLE_SIDED
	vIndirectBack += getAmbientLightIrradiance( ambientLightColor );
	vIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry );
#endif
#if NUM_POINT_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		getPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = PI * directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_SPOT_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		getSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = PI * directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_DIR_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		getDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = PI * directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_HEMI_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
		vIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );
		#ifdef DOUBLE_SIDED
			vIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );
		#endif
	}
	#pragma unroll_loop_end
#endif`,xw=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
uniform vec3 lightProbe[ 9 ];
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in GeometricContext geometry ) {
	vec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	#ifndef PHYSICALLY_CORRECT_LIGHTS
		irradiance *= PI;
	#endif
	return irradiance;
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {
		directLight.color = directionalLight.color;
		directLight.direction = directionalLight.direction;
		directLight.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {
		vec3 lVector = pointLight.position - geometry.position;
		directLight.direction = normalize( lVector );
		float lightDistance = length( lVector );
		directLight.color = pointLight.color;
		directLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );
		directLight.visible = ( directLight.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight ) {
		vec3 lVector = spotLight.position - geometry.position;
		directLight.direction = normalize( lVector );
		float lightDistance = length( lVector );
		float angleCos = dot( directLight.direction, spotLight.direction );
		if ( angleCos > spotLight.coneCos ) {
			float spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );
			directLight.color = spotLight.color;
			directLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );
			directLight.visible = true;
		} else {
			directLight.color = vec3( 0.0 );
			directLight.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {
		float dotNL = dot( geometry.normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		#ifndef PHYSICALLY_CORRECT_LIGHTS
			irradiance *= PI;
		#endif
		return irradiance;
	}
#endif`,_w=`#if defined( USE_ENVMAP )
	#ifdef ENVMAP_MODE_REFRACTION
		uniform float refractionRatio;
	#endif
	vec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {
		vec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );
		#ifdef ENVMAP_TYPE_CUBE
			vec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );
			#ifdef TEXTURE_LOD_EXT
				vec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );
			#else
				vec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );
			#endif
			envMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;
		#elif defined( ENVMAP_TYPE_CUBE_UV )
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
		#else
			vec4 envMapColor = vec4( 0.0 );
		#endif
		return PI * envMapColor.rgb * envMapIntensity;
	}
	float getSpecularMIPLevel( const in float roughness, const in int maxMIPLevel ) {
		float maxMIPLevelScalar = float( maxMIPLevel );
		float sigma = PI * roughness * roughness / ( 1.0 + roughness );
		float desiredMIPLevel = maxMIPLevelScalar + log2( sigma );
		return clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );
	}
	vec3 getLightProbeIndirectRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in int maxMIPLevel ) {
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( -viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
		#else
			vec3 reflectVec = refract( -viewDir, normal, refractionRatio );
		#endif
		reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
		float specularMIPLevel = getSpecularMIPLevel( roughness, maxMIPLevel );
		#ifdef ENVMAP_TYPE_CUBE
			vec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );
			#ifdef TEXTURE_LOD_EXT
				vec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );
			#else
				vec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );
			#endif
			envMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;
		#elif defined( ENVMAP_TYPE_CUBE_UV )
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
		#endif
		return envMapColor.rgb * envMapIntensity;
	}
#endif`,ww=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,bw=`varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	#ifndef PHYSICALLY_CORRECT_LIGHTS
		irradiance *= PI;
	#endif
	reflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon
#define Material_LightProbeLOD( material )	(0)`,Mw=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,Sw=`varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifndef PHYSICALLY_CORRECT_LIGHTS
		irradiance *= PI;
	#endif
	reflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong
#define Material_LightProbeLOD( material )	(0)`,Ew=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.specularRoughness = max( roughnessFactor, 0.0525 );material.specularRoughness += geometryRoughness;
material.specularRoughness = min( material.specularRoughness, 1.0 );
#ifdef REFLECTIVITY
	#ifdef SPECULAR
		vec3 specularIntensityFactor = vec3( specularIntensity );
		vec3 specularTintFactor = specularTint;
		#ifdef USE_SPECULARINTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;
		#endif
		#ifdef USE_SPECULARTINTMAP
			specularTintFactor *= specularTintMapTexelToLinear( texture2D( specularTintMap, vUv ) ).rgb;
		#endif
		material.specularColorF90 = mix( specularIntensityFactor, vec3( 1.0 ), metalnessFactor );
	#else
		vec3 specularIntensityFactor = vec3( 1.0 );
		vec3 specularTintFactor = vec3( 1.0 );
		material.specularColorF90 = vec3( 1.0 );
	#endif
	material.specularColor = mix( min( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ) * specularTintFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );
	material.specularColorF90 = vec3( 1.0 );
#endif
#ifdef CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheen;
#endif`,Tw=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float specularRoughness;
	vec3 specularColor;
	vec3 specularColorF90;
#ifdef CLEARCOAT
	float clearcoat;
	float clearcoatRoughness;
#endif
#ifdef USE_SHEEN
	vec3 sheenColor;
#endif
};
#define MAXIMUM_SPECULAR_COEFFICIENT 0.16
#define DEFAULT_SPECULAR_COEFFICIENT 0.04
float clearcoatDHRApprox( const in float roughness, const in float dotNL ) {
	return DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.specularRoughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifndef PHYSICALLY_CORRECT_LIGHTS
		irradiance *= PI;
	#endif
	#ifdef CLEARCOAT
		float ccDotNL = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = ccDotNL * directLight.color;
		#ifndef PHYSICALLY_CORRECT_LIGHTS
			ccIrradiance *= PI;
		#endif
		float clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );
		reflectedLight.directSpecular += ccIrradiance * material.clearcoat * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), vec3( 1.0 ), material.clearcoatRoughness );
	#else
		float clearcoatDHR = 0.0;
	#endif
	#ifdef USE_SHEEN
		reflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_Sheen(
			material.specularRoughness,
			directLight.direction,
			geometry,
			material.sheenColor
		);
	#else
		reflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.normal, material.specularColor, material.specularColorF90, material.specularRoughness);
	#endif
	reflectedLight.directDiffuse += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef CLEARCOAT
		float ccDotNV = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );
		reflectedLight.indirectSpecular += clearcoatRadiance * material.clearcoat * BRDF_Specular_GGX_Environment( geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );
		float ccDotNL = ccDotNV;
		float clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );
	#else
		float clearcoatDHR = 0.0;
	#endif
	float clearcoatInv = 1.0 - clearcoatDHR;
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	BRDF_Specular_Multiscattering_Environment( geometry, material.specularColor, material.specularRoughness, singleScattering, multiScattering );
	vec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );
	reflectedLight.indirectSpecular += clearcoatInv * radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,Cw=`
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
#ifdef CLEARCOAT
	geometry.clearcoatNormal = clearcoatNormal;
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointDirectLightIrradiance( pointLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotDirectLightIrradiance( spotLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	irradiance += getLightProbeIrradiance( lightProbe, geometry );
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,Iw=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel= texture2D( lightMap, vUv2 );
		vec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;
		#ifndef PHYSICALLY_CORRECT_LIGHTS
			lightMapIrradiance *= PI;
		#endif
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getLightProbeIndirectIrradiance( geometry, maxMipLevel );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	radiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.normal, material.specularRoughness, maxMipLevel );
	#ifdef CLEARCOAT
		clearcoatRadiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness, maxMipLevel );
	#endif
#endif`,Lw=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );
#endif`,Rw=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,Pw=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,Dw=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,Bw=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,Fw=`#ifdef USE_MAP
	vec4 texelColor = texture2D( map, vUv );
	texelColor = mapTexelToLinear( texelColor );
	diffuseColor *= texelColor;
#endif`,Nw=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,Ow=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
#endif
#ifdef USE_MAP
	vec4 mapTexel = texture2D( map, uv );
	diffuseColor *= mapTexelToLinear( mapTexel );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,Uw=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	uniform mat3 uvTransform;
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,Vw=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vUv );
	metalnessFactor *= texelMetalness.b;
#endif`,kw=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,zw=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
	objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
	objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
	objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
#endif`,Hw=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifndef USE_MORPHNORMALS
		uniform float morphTargetInfluences[ 8 ];
	#else
		uniform float morphTargetInfluences[ 4 ];
	#endif
#endif`,Gw=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	transformed += morphTarget0 * morphTargetInfluences[ 0 ];
	transformed += morphTarget1 * morphTargetInfluences[ 1 ];
	transformed += morphTarget2 * morphTargetInfluences[ 2 ];
	transformed += morphTarget3 * morphTargetInfluences[ 3 ];
	#ifndef USE_MORPHNORMALS
		transformed += morphTarget4 * morphTargetInfluences[ 4 ];
		transformed += morphTarget5 * morphTargetInfluences[ 5 ];
		transformed += morphTarget6 * morphTargetInfluences[ 6 ];
		transformed += morphTarget7 * morphTargetInfluences[ 7 ];
	#endif
#endif`,Ww=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );
	vec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	#ifdef USE_TANGENT
		vec3 tangent = normalize( vTangent );
		vec3 bitangent = normalize( vBitangent );
		#ifdef DOUBLE_SIDED
			tangent = tangent * faceDirection;
			bitangent = bitangent * faceDirection;
		#endif
		#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )
			mat3 vTBN = mat3( tangent, bitangent, normal );
		#endif
	#endif
#endif
vec3 geometryNormal = normal;`,qw=`#ifdef OBJECTSPACE_NORMALMAP
	normal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( TANGENTSPACE_NORMALMAP )
	vec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	#ifdef USE_TANGENT
		normal = normalize( vTBN * mapN );
	#else
		normal = perturbNormal2Arb( -vViewPosition, normal, mapN, faceDirection );
	#endif
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,Qw=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef OBJECTSPACE_NORMALMAP
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )
	vec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {
		vec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );
		vec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );
		vec2 st0 = dFdx( vUv.st );
		vec2 st1 = dFdy( vUv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );
		return normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );
	}
#endif`,Kw=`#ifdef CLEARCOAT
	vec3 clearcoatNormal = geometryNormal;
#endif`,Yw=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	#ifdef USE_TANGENT
		clearcoatNormal = normalize( vTBN * clearcoatMapN );
	#else
		clearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );
	#endif
#endif`,Zw=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif`,Jw=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ));
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w);
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {
	return linearClipZ * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return (( near + viewZ ) * far ) / (( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * invClipZ - far );
}`,Xw=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,jw=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,$w=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,eb=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,tb=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vUv );
	roughnessFactor *= texelRoughness.g;
#endif`,nb=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,ib=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		varying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );
		bool inFrustum = all( inFrustumVec );
		bvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );
		bool frustumTest = all( frustumTestVec );
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), 
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), 
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,rb=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];
		varying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,sb=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0
		vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		vec4 shadowWorldPosition;
	#endif
	#if NUM_DIR_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
		vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );
		vSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
		vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
#endif`,ob=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,ab=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,lb=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	#ifdef BONE_TEXTURE
		uniform highp sampler2D boneTexture;
		uniform int boneTextureSize;
		mat4 getBoneMatrix( const in float i ) {
			float j = i * 4.0;
			float x = mod( j, float( boneTextureSize ) );
			float y = floor( j / float( boneTextureSize ) );
			float dx = 1.0 / float( boneTextureSize );
			float dy = 1.0 / float( boneTextureSize );
			y = dy * ( y + 0.5 );
			vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
			vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
			vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
			vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
			mat4 bone = mat4( v1, v2, v3, v4 );
			return bone;
		}
	#else
		uniform mat4 boneMatrices[ MAX_BONES ];
		mat4 getBoneMatrix( const in float i ) {
			mat4 bone = boneMatrices[ int(i) ];
			return bone;
		}
	#endif
#endif`,cb=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,ub=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,hb=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,fb=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,db=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,pb=`#ifndef saturate
#define saturate(a) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return toneMappingExposure * color;
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,mb=`#ifdef USE_TRANSMISSION
	float transmissionFactor = transmission;
	float thicknessFactor = thickness;
	#ifdef USE_TRANSMISSIONMAP
		transmissionFactor *= texture2D( transmissionMap, vUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		thicknessFactor *= texture2D( thicknessMap, vUv ).g;
	#endif
	vec3 pos = vWorldPosition.xyz / vWorldPosition.w;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	float ior = ( 1.0 + 0.4 * reflectivity ) / ( 1.0 - 0.4 * reflectivity );
	vec3 transmission = transmissionFactor * getIBLVolumeRefraction(
		n, v, roughnessFactor, material.diffuseColor, material.specularColor,
		pos, modelMatrix, viewMatrix, projectionMatrix, ior, thicknessFactor,
		attenuationTint, attenuationDistance );
	totalDiffuse = mix( totalDiffuse, transmission, transmissionFactor );
#endif`,gb=`#ifdef USE_TRANSMISSION
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec4 vWorldPosition;
	vec3 getVolumeTransmissionRay(vec3 n, vec3 v, float thickness, float ior, mat4 modelMatrix) {
		vec3 refractionVector = refract(-v, normalize(n), 1.0 / ior);
		vec3 modelScale;
		modelScale.x = length(vec3(modelMatrix[0].xyz));
		modelScale.y = length(vec3(modelMatrix[1].xyz));
		modelScale.z = length(vec3(modelMatrix[2].xyz));
		return normalize(refractionVector) * thickness * modelScale;
	}
	float applyIorToRoughness(float roughness, float ior) {
		return roughness * clamp(ior * 2.0 - 2.0, 0.0, 1.0);
	}
	vec3 getTransmissionSample(vec2 fragCoord, float roughness, float ior) {
		float framebufferLod = log2(transmissionSamplerSize.x) * applyIorToRoughness(roughness, ior);
		return texture2DLodEXT(transmissionSamplerMap, fragCoord.xy, framebufferLod).rgb;
	}
	vec3 applyVolumeAttenuation(vec3 radiance, float transmissionDistance, vec3 attenuationColor, float attenuationDistance) {
		if (attenuationDistance == 0.0) {
			return radiance;
		} else {
			vec3 attenuationCoefficient = -log(attenuationColor) / attenuationDistance;
			vec3 transmittance = exp(-attenuationCoefficient * transmissionDistance);			return transmittance * radiance;
		}
	}
	vec3 getIBLVolumeRefraction(vec3 n, vec3 v, float perceptualRoughness, vec3 baseColor, vec3 specularColor,
		vec3 position, mat4 modelMatrix, mat4 viewMatrix, mat4 projMatrix, float ior, float thickness,
		vec3 attenuationColor, float attenuationDistance) {
		vec3 transmissionRay = getVolumeTransmissionRay(n, v, thickness, ior, modelMatrix);
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4(refractedRayExit, 1.0);
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec3 transmittedLight = getTransmissionSample(refractionCoords, perceptualRoughness, ior);
		vec3 attenuatedColor = applyVolumeAttenuation(transmittedLight, length(transmissionRay), attenuationColor, attenuationDistance);
		return (1.0 - specularColor) * attenuatedColor * baseColor;
	}
#endif`,Ab=`#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )
	varying vec2 vUv;
#endif`,vb=`#ifdef USE_UV
	#ifdef UVS_VERTEX_ONLY
		vec2 vUv;
	#else
		varying vec2 vUv;
	#endif
	uniform mat3 uvTransform;
#endif`,yb=`#ifdef USE_UV
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
#endif`,xb=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	varying vec2 vUv2;
#endif`,_b=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	attribute vec2 uv2;
	varying vec2 vUv2;
	uniform mat3 uv2Transform;
#endif`,wb=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	vUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;
#endif`,bb=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION )
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`,Mb=`uniform sampler2D t2D;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	gl_FragColor = mapTexelToLinear( texColor );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,Sb=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,Eb=`#include <envmap_common_pars_fragment>
uniform float opacity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	vec3 vReflect = vWorldDirection;
	#include <envmap_fragment>
	gl_FragColor = envColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,Tb=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,Cb=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,Ib=`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,Lb=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,Rb=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,Pb=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	vec4 texColor = texture2D( tEquirect, sampleUV );
	gl_FragColor = mapTexelToLinear( texColor );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,Db=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,Bb=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,Fb=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <color_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,Nb=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
	
		vec4 lightMapTexel= texture2D( lightMap, vUv2 );
		reflectedLight.indirectDiffuse += lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Ob=`#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,Ub=`uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
varying vec3 vLightFront;
varying vec3 vIndirectFront;
#ifdef DOUBLE_SIDED
	varying vec3 vLightBack;
	varying vec3 vIndirectBack;
#endif
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <fog_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <emissivemap_fragment>
	#ifdef DOUBLE_SIDED
		reflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;
	#else
		reflectedLight.indirectDiffuse += vIndirectFront;
	#endif
	#include <lightmap_fragment>
	reflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );
	#ifdef DOUBLE_SIDED
		reflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;
	#else
		reflectedLight.directDiffuse = vLightFront;
	#endif
	reflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Vb=`#define LAMBERT
varying vec3 vLightFront;
varying vec3 vIndirectFront;
#ifdef DOUBLE_SIDED
	varying vec3 vLightBack;
	varying vec3 vIndirectBack;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <bsdfs>
#include <lights_pars_begin>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <lights_lambert_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,kb=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <fog_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
		matcapColor = matcapTexelToLinear( matcapColor );
	#else
		vec4 matcapColor = vec4( 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,zb=`#define MATCAP
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#ifndef FLAT_SHADED
		vNormal = normalize( transformedNormal );
		#ifdef USE_TANGENT
			vTangent = normalize( transformedTangent );
			vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
		#endif
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,Hb=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Gb=`#define TOON
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Wb=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,qb=`#define PHONG
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Qb=`#define STANDARD
#ifdef PHYSICAL
	#define REFLECTIVITY
	#define CLEARCOAT
	#define SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationTint;
#endif
#ifdef REFLECTIVITY
	uniform float reflectivity;
#endif
#ifdef SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularTint;
	#ifdef USE_SPECULARINTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
	#ifdef USE_SPECULARTINTMAP
		uniform sampler2D specularTintMap;
	#endif
#endif
#ifdef CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheen;
#endif
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <bsdfs>
#include <transmission_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <lights_physical_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Kb=`#define STANDARD
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif
#ifdef USE_TRANSMISSION
	varying vec4 vWorldPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition;
#endif
}`,Yb=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif
#include <packing>
#include <uv_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
}`,Zb=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	vViewPosition = - mvPosition.xyz;
#endif
}`,Jb=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,Xb=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <color_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,jb=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,$b=`#include <common>
#include <fog_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <begin_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,eM=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,tM=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`;const Oe={alphamap_fragment:F_,alphamap_pars_fragment:N_,alphatest_fragment:O_,aomap_fragment:U_,aomap_pars_fragment:V_,begin_vertex:k_,beginnormal_vertex:z_,bsdfs:H_,bumpmap_pars_fragment:G_,clipping_planes_fragment:W_,clipping_planes_pars_fragment:q_,clipping_planes_pars_vertex:Q_,clipping_planes_vertex:K_,color_fragment:Y_,color_pars_fragment:Z_,color_pars_vertex:J_,color_vertex:X_,common:j_,cube_uv_reflection_fragment:$_,defaultnormal_vertex:ew,displacementmap_pars_vertex:tw,displacementmap_vertex:nw,emissivemap_fragment:iw,emissivemap_pars_fragment:rw,encodings_fragment:sw,encodings_pars_fragment:ow,envmap_fragment:aw,envmap_common_pars_fragment:lw,envmap_pars_fragment:cw,envmap_pars_vertex:uw,envmap_physical_pars_fragment:_w,envmap_vertex:hw,fog_vertex:fw,fog_pars_vertex:dw,fog_fragment:pw,fog_pars_fragment:mw,gradientmap_pars_fragment:gw,lightmap_fragment:Aw,lightmap_pars_fragment:vw,lights_lambert_vertex:yw,lights_pars_begin:xw,lights_toon_fragment:ww,lights_toon_pars_fragment:bw,lights_phong_fragment:Mw,lights_phong_pars_fragment:Sw,lights_physical_fragment:Ew,lights_physical_pars_fragment:Tw,lights_fragment_begin:Cw,lights_fragment_maps:Iw,lights_fragment_end:Lw,logdepthbuf_fragment:Rw,logdepthbuf_pars_fragment:Pw,logdepthbuf_pars_vertex:Dw,logdepthbuf_vertex:Bw,map_fragment:Fw,map_pars_fragment:Nw,map_particle_fragment:Ow,map_particle_pars_fragment:Uw,metalnessmap_fragment:Vw,metalnessmap_pars_fragment:kw,morphnormal_vertex:zw,morphtarget_pars_vertex:Hw,morphtarget_vertex:Gw,normal_fragment_begin:Ww,normal_fragment_maps:qw,normalmap_pars_fragment:Qw,clearcoat_normal_fragment_begin:Kw,clearcoat_normal_fragment_maps:Yw,clearcoat_pars_fragment:Zw,packing:Jw,premultiplied_alpha_fragment:Xw,project_vertex:jw,dithering_fragment:$w,dithering_pars_fragment:eb,roughnessmap_fragment:tb,roughnessmap_pars_fragment:nb,shadowmap_pars_fragment:ib,shadowmap_pars_vertex:rb,shadowmap_vertex:sb,shadowmask_pars_fragment:ob,skinbase_vertex:ab,skinning_pars_vertex:lb,skinning_vertex:cb,skinnormal_vertex:ub,specularmap_fragment:hb,specularmap_pars_fragment:fb,tonemapping_fragment:db,tonemapping_pars_fragment:pb,transmission_fragment:mb,transmission_pars_fragment:gb,uv_pars_fragment:Ab,uv_pars_vertex:vb,uv_vertex:yb,uv2_pars_fragment:xb,uv2_pars_vertex:_b,uv2_vertex:wb,worldpos_vertex:bb,background_frag:Mb,background_vert:Sb,cube_frag:Eb,cube_vert:Tb,depth_frag:Cb,depth_vert:Ib,distanceRGBA_frag:Lb,distanceRGBA_vert:Rb,equirect_frag:Pb,equirect_vert:Db,linedashed_frag:Bb,linedashed_vert:Fb,meshbasic_frag:Nb,meshbasic_vert:Ob,meshlambert_frag:Ub,meshlambert_vert:Vb,meshmatcap_frag:kb,meshmatcap_vert:zb,meshtoon_frag:Hb,meshtoon_vert:Gb,meshphong_frag:Wb,meshphong_vert:qb,meshphysical_frag:Qb,meshphysical_vert:Kb,normal_frag:Yb,normal_vert:Zb,points_frag:Jb,points_vert:Xb,shadow_frag:jb,shadow_vert:$b,sprite_frag:eM,sprite_vert:tM},we={common:{diffuse:{value:new Te(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new St},uv2Transform:{value:new St},alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new xe(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Te(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Te(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},uvTransform:{value:new St}},sprite:{diffuse:{value:new Te(16777215)},opacity:{value:1},center:{value:new xe(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},uvTransform:{value:new St}}},mn={basic:{uniforms:Tt([we.common,we.specularmap,we.envmap,we.aomap,we.lightmap,we.fog]),vertexShader:Oe.meshbasic_vert,fragmentShader:Oe.meshbasic_frag},lambert:{uniforms:Tt([we.common,we.specularmap,we.envmap,we.aomap,we.lightmap,we.emissivemap,we.fog,we.lights,{emissive:{value:new Te(0)}}]),vertexShader:Oe.meshlambert_vert,fragmentShader:Oe.meshlambert_frag},phong:{uniforms:Tt([we.common,we.specularmap,we.envmap,we.aomap,we.lightmap,we.emissivemap,we.bumpmap,we.normalmap,we.displacementmap,we.fog,we.lights,{emissive:{value:new Te(0)},specular:{value:new Te(1118481)},shininess:{value:30}}]),vertexShader:Oe.meshphong_vert,fragmentShader:Oe.meshphong_frag},standard:{uniforms:Tt([we.common,we.envmap,we.aomap,we.lightmap,we.emissivemap,we.bumpmap,we.normalmap,we.displacementmap,we.roughnessmap,we.metalnessmap,we.fog,we.lights,{emissive:{value:new Te(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Oe.meshphysical_vert,fragmentShader:Oe.meshphysical_frag},toon:{uniforms:Tt([we.common,we.aomap,we.lightmap,we.emissivemap,we.bumpmap,we.normalmap,we.displacementmap,we.gradientmap,we.fog,we.lights,{emissive:{value:new Te(0)}}]),vertexShader:Oe.meshtoon_vert,fragmentShader:Oe.meshtoon_frag},matcap:{uniforms:Tt([we.common,we.bumpmap,we.normalmap,we.displacementmap,we.fog,{matcap:{value:null}}]),vertexShader:Oe.meshmatcap_vert,fragmentShader:Oe.meshmatcap_frag},points:{uniforms:Tt([we.points,we.fog]),vertexShader:Oe.points_vert,fragmentShader:Oe.points_frag},dashed:{uniforms:Tt([we.common,we.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Oe.linedashed_vert,fragmentShader:Oe.linedashed_frag},depth:{uniforms:Tt([we.common,we.displacementmap]),vertexShader:Oe.depth_vert,fragmentShader:Oe.depth_frag},normal:{uniforms:Tt([we.common,we.bumpmap,we.normalmap,we.displacementmap,{opacity:{value:1}}]),vertexShader:Oe.normal_vert,fragmentShader:Oe.normal_frag},sprite:{uniforms:Tt([we.sprite,we.fog]),vertexShader:Oe.sprite_vert,fragmentShader:Oe.sprite_frag},background:{uniforms:{uvTransform:{value:new St},t2D:{value:null}},vertexShader:Oe.background_vert,fragmentShader:Oe.background_frag},cube:{uniforms:Tt([we.envmap,{opacity:{value:1}}]),vertexShader:Oe.cube_vert,fragmentShader:Oe.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Oe.equirect_vert,fragmentShader:Oe.equirect_frag},distanceRGBA:{uniforms:Tt([we.common,we.displacementmap,{referencePosition:{value:new q},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Oe.distanceRGBA_vert,fragmentShader:Oe.distanceRGBA_frag},shadow:{uniforms:Tt([we.lights,we.fog,{color:{value:new Te(0)},opacity:{value:1}}]),vertexShader:Oe.shadow_vert,fragmentShader:Oe.shadow_frag}};mn.physical={uniforms:Tt([mn.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new xe(1,1)},clearcoatNormalMap:{value:null},sheen:{value:new Te(0)},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new xe},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationTint:{value:new Te(0)},specularIntensity:{value:0},specularIntensityMap:{value:null},specularTint:{value:new Te(1,1,1)},specularTintMap:{value:null}}]),vertexShader:Oe.meshphysical_vert,fragmentShader:Oe.meshphysical_frag};function nM(n,e,t,i,r){const s=new Te(0);let o=0,a,l,c=null,u=0,h=null;function f(m,_){let E=!1,p=_.isScene===!0?_.background:null;p&&p.isTexture&&(p=e.get(p));const A=n.xr,R=A.getSession&&A.getSession();R&&R.environmentBlendMode==="additive"&&(p=null),p===null?d(s,o):p&&p.isColor&&(d(p,1),E=!0),(n.autoClear||E)&&n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil),p&&(p.isCubeTexture||p.mapping===va)?(l===void 0&&(l=new Bt(new Ds(1,1,1),new Di({name:"BackgroundCubeMaterial",uniforms:br(mn.cube.uniforms),vertexShader:mn.cube.vertexShader,fragmentShader:mn.cube.fragmentShader,side:gt,depthTest:!1,depthWrite:!1,fog:!1})),l.geometry.deleteAttribute("normal"),l.geometry.deleteAttribute("uv"),l.onBeforeRender=function(M,L,D){this.matrixWorld.copyPosition(D.matrixWorld)},Object.defineProperty(l.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(l)),l.material.uniforms.envMap.value=p,l.material.uniforms.flipEnvMap.value=p.isCubeTexture&&p.isRenderTargetTexture===!1?-1:1,(c!==p||u!==p.version||h!==n.toneMapping)&&(l.material.needsUpdate=!0,c=p,u=p.version,h=n.toneMapping),m.unshift(l,l.geometry,l.material,0,0,null)):p&&p.isTexture&&(a===void 0&&(a=new Bt(new qc(2,2),new Di({name:"BackgroundMaterial",uniforms:br(mn.background.uniforms),vertexShader:mn.background.vertexShader,fragmentShader:mn.background.fragmentShader,side:_s,depthTest:!1,depthWrite:!1,fog:!1})),a.geometry.deleteAttribute("normal"),Object.defineProperty(a.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(a)),a.material.uniforms.t2D.value=p,p.matrixAutoUpdate===!0&&p.updateMatrix(),a.material.uniforms.uvTransform.value.copy(p.matrix),(c!==p||u!==p.version||h!==n.toneMapping)&&(a.material.needsUpdate=!0,c=p,u=p.version,h=n.toneMapping),m.unshift(a,a.geometry,a.material,0,0,null))}function d(m,_){t.buffers.color.setClear(m.r,m.g,m.b,_,r)}return{getClearColor:function(){return s},setClearColor:function(m,_=1){s.set(m),o=_,d(s,o)},getClearAlpha:function(){return o},setClearAlpha:function(m){o=m,d(s,o)},render:f}}function iM(n,e,t,i){const r=n.getParameter(34921),s=i.isWebGL2?null:e.get("OES_vertex_array_object"),o=i.isWebGL2||s!==null,a={},l=_(null);let c=l;function u(b,T,y,v,w){let g=!1;if(o){const N=m(v,y,T);c!==N&&(c=N,f(c.object)),g=E(v,w),g&&p(v,w)}else{const N=T.wireframe===!0;(c.geometry!==v.id||c.program!==y.id||c.wireframe!==N)&&(c.geometry=v.id,c.program=y.id,c.wireframe=N,g=!0)}b.isInstancedMesh===!0&&(g=!0),w!==null&&t.update(w,34963),g&&(C(b,T,y,v),w!==null&&n.bindBuffer(34963,t.get(w).buffer))}function h(){return i.isWebGL2?n.createVertexArray():s.createVertexArrayOES()}function f(b){return i.isWebGL2?n.bindVertexArray(b):s.bindVertexArrayOES(b)}function d(b){return i.isWebGL2?n.deleteVertexArray(b):s.deleteVertexArrayOES(b)}function m(b,T,y){const v=y.wireframe===!0;let w=a[b.id];w===void 0&&(w={},a[b.id]=w);let g=w[T.id];g===void 0&&(g={},w[T.id]=g);let N=g[v];return N===void 0&&(N=_(h()),g[v]=N),N}function _(b){const T=[],y=[],v=[];for(let w=0;w<r;w++)T[w]=0,y[w]=0,v[w]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:T,enabledAttributes:y,attributeDivisors:v,object:b,attributes:{},index:null}}function E(b,T){const y=c.attributes,v=b.attributes;let w=0;for(const g in v){const N=y[g],z=v[g];if(N===void 0||N.attribute!==z||N.data!==z.data)return!0;w++}return c.attributesNum!==w||c.index!==T}function p(b,T){const y={},v=b.attributes;let w=0;for(const g in v){const N=v[g],z={};z.attribute=N,N.data&&(z.data=N.data),y[g]=z,w++}c.attributes=y,c.attributesNum=w,c.index=T}function A(){const b=c.newAttributes;for(let T=0,y=b.length;T<y;T++)b[T]=0}function R(b){M(b,0)}function M(b,T){const y=c.newAttributes,v=c.enabledAttributes,w=c.attributeDivisors;y[b]=1,v[b]===0&&(n.enableVertexAttribArray(b),v[b]=1),w[b]!==T&&((i.isWebGL2?n:e.get("ANGLE_instanced_arrays"))[i.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](b,T),w[b]=T)}function L(){const b=c.newAttributes,T=c.enabledAttributes;for(let y=0,v=T.length;y<v;y++)T[y]!==b[y]&&(n.disableVertexAttribArray(y),T[y]=0)}function D(b,T,y,v,w,g){i.isWebGL2===!0&&(y===5124||y===5125)?n.vertexAttribIPointer(b,T,y,w,g):n.vertexAttribPointer(b,T,y,v,w,g)}function C(b,T,y,v){if(i.isWebGL2===!1&&(b.isInstancedMesh||v.isInstancedBufferGeometry)&&e.get("ANGLE_instanced_arrays")===null)return;A();const w=v.attributes,g=y.getAttributes(),N=T.defaultAttributeValues;for(const z in g){const Z=g[z];if(Z>=0){const ee=w[z];if(ee!==void 0){const te=ee.normalized,se=ee.itemSize,H=t.get(ee);if(H===void 0)continue;const W=H.buffer,ie=H.type,fe=H.bytesPerElement;if(ee.isInterleavedBufferAttribute){const de=ee.data,me=de.stride,ye=ee.offset;de&&de.isInstancedInterleavedBuffer?(M(Z,de.meshPerAttribute),v._maxInstanceCount===void 0&&(v._maxInstanceCount=de.meshPerAttribute*de.count)):R(Z),n.bindBuffer(34962,W),D(Z,se,ie,te,me*fe,ye*fe)}else ee.isInstancedBufferAttribute?(M(Z,ee.meshPerAttribute),v._maxInstanceCount===void 0&&(v._maxInstanceCount=ee.meshPerAttribute*ee.count)):R(Z),n.bindBuffer(34962,W),D(Z,se,ie,te,0,0)}else if(z==="instanceMatrix"){const te=t.get(b.instanceMatrix);if(te===void 0)continue;const se=te.buffer,H=te.type;M(Z+0,1),M(Z+1,1),M(Z+2,1),M(Z+3,1),n.bindBuffer(34962,se),n.vertexAttribPointer(Z+0,4,H,!1,64,0),n.vertexAttribPointer(Z+1,4,H,!1,64,16),n.vertexAttribPointer(Z+2,4,H,!1,64,32),n.vertexAttribPointer(Z+3,4,H,!1,64,48)}else if(z==="instanceColor"){const te=t.get(b.instanceColor);if(te===void 0)continue;const se=te.buffer,H=te.type;M(Z,1),n.bindBuffer(34962,se),n.vertexAttribPointer(Z,3,H,!1,12,0)}else if(N!==void 0){const te=N[z];if(te!==void 0)switch(te.length){case 2:n.vertexAttrib2fv(Z,te);break;case 3:n.vertexAttrib3fv(Z,te);break;case 4:n.vertexAttrib4fv(Z,te);break;default:n.vertexAttrib1fv(Z,te)}}}}L()}function k(){S();for(const b in a){const T=a[b];for(const y in T){const v=T[y];for(const w in v)d(v[w].object),delete v[w];delete T[y]}delete a[b]}}function U(b){if(a[b.id]===void 0)return;const T=a[b.id];for(const y in T){const v=T[y];for(const w in v)d(v[w].object),delete v[w];delete T[y]}delete a[b.id]}function F(b){for(const T in a){const y=a[T];if(y[b.id]===void 0)continue;const v=y[b.id];for(const w in v)d(v[w].object),delete v[w];delete y[b.id]}}function S(){G(),c!==l&&(c=l,f(c.object))}function G(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:u,reset:S,resetDefaultState:G,dispose:k,releaseStatesOfGeometry:U,releaseStatesOfProgram:F,initAttributes:A,enableAttribute:R,disableUnusedAttributes:L}}function rM(n,e,t,i){const r=i.isWebGL2;let s;function o(c){s=c}function a(c,u){n.drawArrays(s,c,u),t.update(u,s,1)}function l(c,u,h){if(h===0)return;let f,d;if(r)f=n,d="drawArraysInstanced";else if(f=e.get("ANGLE_instanced_arrays"),d="drawArraysInstancedANGLE",f===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}f[d](s,c,u,h),t.update(u,s,h)}this.setMode=o,this.render=a,this.renderInstances=l}function sM(n,e,t){let i;function r(){if(i!==void 0)return i;if(e.has("EXT_texture_filter_anisotropic")===!0){const C=e.get("EXT_texture_filter_anisotropic");i=n.getParameter(C.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i}function s(C){if(C==="highp"){if(n.getShaderPrecisionFormat(35633,36338).precision>0&&n.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";C="mediump"}return C==="mediump"&&n.getShaderPrecisionFormat(35633,36337).precision>0&&n.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const o=typeof WebGL2RenderingContext<"u"&&n instanceof WebGL2RenderingContext||typeof WebGL2ComputeRenderingContext<"u"&&n instanceof WebGL2ComputeRenderingContext;let a=t.precision!==void 0?t.precision:"highp";const l=s(a);l!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",l,"instead."),a=l);const c=o||e.has("WEBGL_draw_buffers"),u=t.logarithmicDepthBuffer===!0,h=n.getParameter(34930),f=n.getParameter(35660),d=n.getParameter(3379),m=n.getParameter(34076),_=n.getParameter(34921),E=n.getParameter(36347),p=n.getParameter(36348),A=n.getParameter(36349),R=f>0,M=o||e.has("OES_texture_float"),L=R&&M,D=o?n.getParameter(36183):0;return{isWebGL2:o,drawBuffers:c,getMaxAnisotropy:r,getMaxPrecision:s,precision:a,logarithmicDepthBuffer:u,maxTextures:h,maxVertexTextures:f,maxTextureSize:d,maxCubemapSize:m,maxAttributes:_,maxVertexUniforms:E,maxVaryings:p,maxFragmentUniforms:A,vertexTextures:R,floatFragmentTextures:M,floatVertexTextures:L,maxSamples:D}}function oM(n){const e=this;let t=null,i=0,r=!1,s=!1;const o=new Nn,a=new St,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(h,f,d){const m=h.length!==0||f||i!==0||r;return r=f,t=u(h,d,0),i=h.length,m},this.beginShadows=function(){s=!0,u(null)},this.endShadows=function(){s=!1,c()},this.setState=function(h,f,d){const m=h.clippingPlanes,_=h.clipIntersection,E=h.clipShadows,p=n.get(h);if(!r||m===null||m.length===0||s&&!E)s?u(null):c();else{const A=s?0:i,R=A*4;let M=p.clippingState||null;l.value=M,M=u(m,f,R,d);for(let L=0;L!==R;++L)M[L]=t[L];p.clippingState=M,this.numIntersection=_?this.numPlanes:0,this.numPlanes+=A}};function c(){l.value!==t&&(l.value=t,l.needsUpdate=i>0),e.numPlanes=i,e.numIntersection=0}function u(h,f,d,m){const _=h!==null?h.length:0;let E=null;if(_!==0){if(E=l.value,m!==!0||E===null){const p=d+_*4,A=f.matrixWorldInverse;a.getNormalMatrix(A),(E===null||E.length<p)&&(E=new Float32Array(p));for(let R=0,M=d;R!==_;++R,M+=4)o.copy(h[R]).applyMatrix4(A,a),o.normal.toArray(E,M),E[M+3]=o.constant}l.value=E,l.needsUpdate=!0}return e.numPlanes=_,e.numIntersection=0,E}}function aM(n){let e=new WeakMap;function t(o,a){return a===jl?o.mapping=ga:a===$l&&(o.mapping=Aa),o}function i(o){if(o&&o.isTexture&&o.isRenderTargetTexture===!1){const a=o.mapping;if(a===jl||a===$l)if(e.has(o)){const l=e.get(o).texture;return t(l,o.mapping)}else{const l=o.image;if(l&&l.height>0){const c=n.getRenderTarget(),u=new Hp(l.height/2);return u.fromEquirectangularTexture(n,o),e.set(o,u),n.setRenderTarget(c),o.addEventListener("dispose",r),t(u.texture,o.mapping)}else return null}}return o}function r(o){const a=o.target;a.removeEventListener("dispose",r);const l=e.get(a);l!==void 0&&(e.delete(a),l.dispose())}function s(){e=new WeakMap}return{get:i,dispose:s}}class Qc extends Gc{constructor(e=-1,t=1,i=1,r=-1,s=.1,o=2e3){super(),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=i,this.bottom=r,this.near=s,this.far=o,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,i,r,s,o){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let s=i-e,o=i+e,a=r+t,l=r-t;if(this.view!==null&&this.view.enabled){const c=(this.right-this.left)/this.view.fullWidth/this.zoom,u=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=c*this.view.offsetX,o=s+c*this.view.width,a-=u*this.view.offsetY,l=a-u*this.view.height}this.projectionMatrix.makeOrthographic(s,o,a,l,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}Qc.prototype.isOrthographicCamera=!0;class Ma extends Di{constructor(e){super(e),this.type="RawShaderMaterial"}}Ma.prototype.isRawShaderMaterial=!0;const gr=4,si=8,dn=Math.pow(2,si),Wp=[.125,.215,.35,.446,.526,.582],qp=si-gr+1+Wp.length,Zi=20,An={[Vt]:0,[xa]:1,[Hc]:2,[Bp]:3,[Fp]:4,[Np]:5,[zc]:6},wi=new _a({side:gt,depthWrite:!1,depthTest:!1}),lM=new Bt(new Ds,wi),yl=new Qc,{_lodPlanes:Wr,_sizeLods:Jh,_sigmas:lo}=hM(),Xh=new Te;let xl=null;const bi=(1+Math.sqrt(5))/2,Ji=1/bi,jh=[new q(1,1,1),new q(-1,1,1),new q(1,1,-1),new q(-1,1,-1),new q(0,bi,Ji),new q(0,bi,-Ji),new q(Ji,0,bi),new q(-Ji,0,bi),new q(bi,Ji,0),new q(-bi,Ji,0)];function $h(n){const e=Math.max(n.r,n.g,n.b),t=Math.min(Math.max(Math.ceil(Math.log2(e)),-128),127);return n.multiplyScalar(Math.pow(2,-t)),(t+128)/255}class cM{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._blurMaterial=fM(Zi),this._equirectShader=null,this._cubemapShader=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,i=.1,r=100){xl=this._renderer.getRenderTarget();const s=this._allocateTargets();return this._sceneToCubeUV(e,i,r,s),t>0&&this._blur(s,0,0,t),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(e){return this._fromTexture(e)}fromCubemap(e){return this._fromTexture(e)}compileCubemapShader(){this._cubemapShader===null&&(this._cubemapShader=nf(),this._compileMaterial(this._cubemapShader))}compileEquirectangularShader(){this._equirectShader===null&&(this._equirectShader=tf(),this._compileMaterial(this._equirectShader))}dispose(){this._blurMaterial.dispose(),this._cubemapShader!==null&&this._cubemapShader.dispose(),this._equirectShader!==null&&this._equirectShader.dispose();for(let e=0;e<Wr.length;e++)Wr[e].dispose()}_cleanup(e){this._pingPongRenderTarget.dispose(),this._renderer.setRenderTarget(xl),e.scissorTest=!1,co(e,0,0,e.width,e.height)}_fromTexture(e){xl=this._renderer.getRenderTarget();const t=this._allocateTargets(e);return this._textureToCubeUV(e,t),this._applyPMREM(t),this._cleanup(t),t}_allocateTargets(e){const t={magFilter:yt,minFilter:yt,generateMipmaps:!1,type:wr,format:_x,encoding:uM(e)?e.encoding:Hc,depthBuffer:!1},i=ef(t);return i.depthBuffer=!e,this._pingPongRenderTarget=ef(t),i}_compileMaterial(e){const t=new Bt(Wr[0],e);this._renderer.compile(t,yl)}_sceneToCubeUV(e,t,i,r){const a=new Dt(90,1,t,i),l=[1,-1,1,1,1,1],c=[1,1,1,-1,-1,-1],u=this._renderer,h=u.autoClear,f=u.outputEncoding,d=u.toneMapping;u.getClearColor(Xh),u.toneMapping=Ri,u.outputEncoding=Vt,u.autoClear=!1;let m=!1;const _=e.background;if(_){if(_.isColor){wi.color.copy(_).convertSRGBToLinear(),e.background=null;const E=$h(wi.color);wi.opacity=E,m=!0}}else{wi.color.copy(Xh).convertSRGBToLinear();const E=$h(wi.color);wi.opacity=E,m=!0}for(let E=0;E<6;E++){const p=E%3;p==0?(a.up.set(0,l[E],0),a.lookAt(c[E],0,0)):p==1?(a.up.set(0,0,l[E]),a.lookAt(0,c[E],0)):(a.up.set(0,l[E],0),a.lookAt(0,0,c[E])),co(r,p*dn,E>2?dn:0,dn,dn),u.setRenderTarget(r),m&&u.render(lM,a),u.render(e,a)}u.toneMapping=d,u.outputEncoding=f,u.autoClear=h}_textureToCubeUV(e,t){const i=this._renderer;e.isCubeTexture?this._cubemapShader==null&&(this._cubemapShader=nf()):this._equirectShader==null&&(this._equirectShader=tf());const r=e.isCubeTexture?this._cubemapShader:this._equirectShader,s=new Bt(Wr[0],r),o=r.uniforms;o.envMap.value=e,e.isCubeTexture||o.texelSize.value.set(1/e.image.width,1/e.image.height),o.inputEncoding.value=An[e.encoding],o.outputEncoding.value=An[t.texture.encoding],co(t,0,0,3*dn,2*dn),i.setRenderTarget(t),i.render(s,yl)}_applyPMREM(e){const t=this._renderer,i=t.autoClear;t.autoClear=!1;for(let r=1;r<qp;r++){const s=Math.sqrt(lo[r]*lo[r]-lo[r-1]*lo[r-1]),o=jh[(r-1)%jh.length];this._blur(e,r-1,r,s,o)}t.autoClear=i}_blur(e,t,i,r,s){const o=this._pingPongRenderTarget;this._halfBlur(e,o,t,i,r,"latitudinal",s),this._halfBlur(o,e,i,i,r,"longitudinal",s)}_halfBlur(e,t,i,r,s,o,a){const l=this._renderer,c=this._blurMaterial;o!=="latitudinal"&&o!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const u=3,h=new Bt(Wr[r],c),f=c.uniforms,d=Jh[i]-1,m=isFinite(s)?Math.PI/(2*d):2*Math.PI/(2*Zi-1),_=s/m,E=isFinite(s)?1+Math.floor(u*_):Zi;E>Zi&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${E} samples when the maximum is set to ${Zi}`);const p=[];let A=0;for(let D=0;D<Zi;++D){const C=D/_,k=Math.exp(-C*C/2);p.push(k),D==0?A+=k:D<E&&(A+=2*k)}for(let D=0;D<p.length;D++)p[D]=p[D]/A;f.envMap.value=e.texture,f.samples.value=E,f.weights.value=p,f.latitudinal.value=o==="latitudinal",a&&(f.poleAxis.value=a),f.dTheta.value=m,f.mipInt.value=si-i,f.inputEncoding.value=An[e.texture.encoding],f.outputEncoding.value=An[e.texture.encoding];const R=Jh[r],M=3*Math.max(0,dn-2*R),L=(r===0?0:2*dn)+2*R*(r>si-gr?r-si+gr:0);co(t,M,L,3*R,2*R),l.setRenderTarget(t),l.render(h,yl)}}function uM(n){return n===void 0||n.type!==wr?!1:n.encoding===Vt||n.encoding===xa||n.encoding===zc}function hM(){const n=[],e=[],t=[];let i=si;for(let r=0;r<qp;r++){const s=Math.pow(2,i);e.push(s);let o=1/s;r>si-gr?o=Wp[r-si+gr-1]:r==0&&(o=0),t.push(o);const a=1/(s-1),l=-a/2,c=1+a/2,u=[l,l,c,l,c,c,l,l,c,c,l,c],h=6,f=6,d=3,m=2,_=1,E=new Float32Array(d*f*h),p=new Float32Array(m*f*h),A=new Float32Array(_*f*h);for(let M=0;M<h;M++){const L=M%3*2/3-1,D=M>2?0:-1,C=[L,D,0,L+2/3,D,0,L+2/3,D+1,0,L,D,0,L+2/3,D+1,0,L,D+1,0];E.set(C,d*f*M),p.set(u,m*f*M);const k=[M,M,M,M,M,M];A.set(k,_*f*M)}const R=new Ke;R.setAttribute("position",new it(E,d)),R.setAttribute("uv",new it(p,m)),R.setAttribute("faceIndex",new it(A,_)),n.push(R),i>gr&&i--}return{_lodPlanes:n,_sizeLods:e,_sigmas:t}}function ef(n){const e=new yn(3*dn,3*dn,n);return e.texture.mapping=va,e.texture.name="PMREM.cubeUv",e.scissorTest=!0,e}function co(n,e,t,i,r){n.viewport.set(e,t,i,r),n.scissor.set(e,t,i,r)}function fM(n){const e=new Float32Array(n),t=new q(0,1,0);return new Ma({name:"SphericalGaussianBlur",defines:{n},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:e},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:t},inputEncoding:{value:An[Vt]},outputEncoding:{value:An[Vt]}},vertexShader:Kc(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			${Yc()}

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

				gl_FragColor = linearToOutputTexel( gl_FragColor );

			}
		`,blending:ri,depthTest:!1,depthWrite:!1})}function tf(){const n=new xe(1,1);return new Ma({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null},texelSize:{value:n},inputEncoding:{value:An[Vt]},outputEncoding:{value:An[Vt]}},vertexShader:Kc(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform vec2 texelSize;

			${Yc()}

			#include <common>

			void main() {

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				vec2 f = fract( uv / texelSize - 0.5 );
				uv -= f * texelSize;
				vec3 tl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;
				uv.x += texelSize.x;
				vec3 tr = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;
				uv.y += texelSize.y;
				vec3 br = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;
				uv.x -= texelSize.x;
				vec3 bl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;

				vec3 tm = mix( tl, tr, f.x );
				vec3 bm = mix( bl, br, f.x );
				gl_FragColor.rgb = mix( tm, bm, f.y );

				gl_FragColor = linearToOutputTexel( gl_FragColor );

			}
		`,blending:ri,depthTest:!1,depthWrite:!1})}function nf(){return new Ma({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},inputEncoding:{value:An[Vt]},outputEncoding:{value:An[Vt]}},vertexShader:Kc(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			${Yc()}

			void main() {

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb = envMapTexelToLinear( textureCube( envMap, vec3( - vOutputDirection.x, vOutputDirection.yz ) ) ).rgb;
				gl_FragColor = linearToOutputTexel( gl_FragColor );

			}
		`,blending:ri,depthTest:!1,depthWrite:!1})}function Kc(){return`

		precision mediump float;
		precision mediump int;

		attribute vec3 position;
		attribute vec2 uv;
		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function Yc(){return`

		uniform int inputEncoding;
		uniform int outputEncoding;

		#include <encodings_pars_fragment>

		vec4 inputTexelToLinear( vec4 value ) {

			if ( inputEncoding == 0 ) {

				return value;

			} else if ( inputEncoding == 1 ) {

				return sRGBToLinear( value );

			} else if ( inputEncoding == 2 ) {

				return RGBEToLinear( value );

			} else if ( inputEncoding == 3 ) {

				return RGBMToLinear( value, 7.0 );

			} else if ( inputEncoding == 4 ) {

				return RGBMToLinear( value, 16.0 );

			} else if ( inputEncoding == 5 ) {

				return RGBDToLinear( value, 256.0 );

			} else {

				return GammaToLinear( value, 2.2 );

			}

		}

		vec4 linearToOutputTexel( vec4 value ) {

			if ( outputEncoding == 0 ) {

				return value;

			} else if ( outputEncoding == 1 ) {

				return LinearTosRGB( value );

			} else if ( outputEncoding == 2 ) {

				return LinearToRGBE( value );

			} else if ( outputEncoding == 3 ) {

				return LinearToRGBM( value, 7.0 );

			} else if ( outputEncoding == 4 ) {

				return LinearToRGBM( value, 16.0 );

			} else if ( outputEncoding == 5 ) {

				return LinearToRGBD( value, 256.0 );

			} else {

				return LinearToGamma( value, 2.2 );

			}

		}

		vec4 envMapTexelToLinear( vec4 color ) {

			return inputTexelToLinear( color );

		}
	`}function dM(n){let e=new WeakMap,t=null;function i(a){if(a&&a.isTexture&&a.isRenderTargetTexture===!1){const l=a.mapping,c=l===jl||l===$l,u=l===ga||l===Aa;if(c||u){if(e.has(a))return e.get(a).texture;{const h=a.image;if(c&&h&&h.height>0||u&&h&&r(h)){const f=n.getRenderTarget();t===null&&(t=new cM(n));const d=c?t.fromEquirectangular(a):t.fromCubemap(a);return e.set(a,d),n.setRenderTarget(f),a.addEventListener("dispose",s),d.texture}else return null}}}return a}function r(a){let l=0;const c=6;for(let u=0;u<c;u++)a[u]!==void 0&&l++;return l===c}function s(a){const l=a.target;l.removeEventListener("dispose",s);const c=e.get(l);c!==void 0&&(c.delete(l),c.dispose())}function o(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:i,dispose:o}}function pM(n){const e={};function t(i){if(e[i]!==void 0)return e[i];let r;switch(i){case"WEBGL_depth_texture":r=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=n.getExtension(i)}return e[i]=r,r}return{has:function(i){return t(i)!==null},init:function(i){i.isWebGL2?t("EXT_color_buffer_float"):(t("WEBGL_depth_texture"),t("OES_texture_float"),t("OES_texture_half_float"),t("OES_texture_half_float_linear"),t("OES_standard_derivatives"),t("OES_element_index_uint"),t("OES_vertex_array_object"),t("ANGLE_instanced_arrays")),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float")},get:function(i){const r=t(i);return r===null&&console.warn("THREE.WebGLRenderer: "+i+" extension not supported."),r}}}function mM(n,e,t,i){const r={},s=new WeakMap;function o(h){const f=h.target;f.index!==null&&e.remove(f.index);for(const m in f.attributes)e.remove(f.attributes[m]);f.removeEventListener("dispose",o),delete r[f.id];const d=s.get(f);d&&(e.remove(d),s.delete(f)),i.releaseStatesOfGeometry(f),f.isInstancedBufferGeometry===!0&&delete f._maxInstanceCount,t.memory.geometries--}function a(h,f){return r[f.id]===!0||(f.addEventListener("dispose",o),r[f.id]=!0,t.memory.geometries++),f}function l(h){const f=h.attributes;for(const m in f)e.update(f[m],34962);const d=h.morphAttributes;for(const m in d){const _=d[m];for(let E=0,p=_.length;E<p;E++)e.update(_[E],34962)}}function c(h){const f=[],d=h.index,m=h.attributes.position;let _=0;if(d!==null){const A=d.array;_=d.version;for(let R=0,M=A.length;R<M;R+=3){const L=A[R+0],D=A[R+1],C=A[R+2];f.push(L,D,D,C,C,L)}}else{const A=m.array;_=m.version;for(let R=0,M=A.length/3-1;R<M;R+=3){const L=R+0,D=R+1,C=R+2;f.push(L,D,D,C,C,L)}}const E=new(zp(f)>65535?kp:Vp)(f,1);E.version=_;const p=s.get(h);p&&e.remove(p),s.set(h,E)}function u(h){const f=s.get(h);if(f){const d=h.index;d!==null&&f.version<d.version&&c(h)}else c(h);return s.get(h)}return{get:a,update:l,getWireframeAttribute:u}}function gM(n,e,t,i){const r=i.isWebGL2;let s;function o(f){s=f}let a,l;function c(f){a=f.type,l=f.bytesPerElement}function u(f,d){n.drawElements(s,d,a,f*l),t.update(d,s,1)}function h(f,d,m){if(m===0)return;let _,E;if(r)_=n,E="drawElementsInstanced";else if(_=e.get("ANGLE_instanced_arrays"),E="drawElementsInstancedANGLE",_===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}_[E](s,d,a,f*l,m),t.update(d,s,m)}this.setMode=o,this.setIndex=c,this.render=u,this.renderInstances=h}function AM(n){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function i(s,o,a){switch(t.calls++,o){case 4:t.triangles+=a*(s/3);break;case 1:t.lines+=a*(s/2);break;case 3:t.lines+=a*(s-1);break;case 2:t.lines+=a*s;break;case 0:t.points+=a*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o);break}}function r(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:r,update:i}}function vM(n,e){return n[0]-e[0]}function yM(n,e){return Math.abs(e[1])-Math.abs(n[1])}function xM(n){const e={},t=new Float32Array(8),i=[];for(let s=0;s<8;s++)i[s]=[s,0];function r(s,o,a,l){const c=s.morphTargetInfluences,u=c===void 0?0:c.length;let h=e[o.id];if(h===void 0||h.length!==u){h=[];for(let E=0;E<u;E++)h[E]=[E,0];e[o.id]=h}for(let E=0;E<u;E++){const p=h[E];p[0]=E,p[1]=c[E]}h.sort(yM);for(let E=0;E<8;E++)E<u&&h[E][1]?(i[E][0]=h[E][0],i[E][1]=h[E][1]):(i[E][0]=Number.MAX_SAFE_INTEGER,i[E][1]=0);i.sort(vM);const f=o.morphAttributes.position,d=o.morphAttributes.normal;let m=0;for(let E=0;E<8;E++){const p=i[E],A=p[0],R=p[1];A!==Number.MAX_SAFE_INTEGER&&R?(f&&o.getAttribute("morphTarget"+E)!==f[A]&&o.setAttribute("morphTarget"+E,f[A]),d&&o.getAttribute("morphNormal"+E)!==d[A]&&o.setAttribute("morphNormal"+E,d[A]),t[E]=R,m+=R):(f&&o.hasAttribute("morphTarget"+E)===!0&&o.deleteAttribute("morphTarget"+E),d&&o.hasAttribute("morphNormal"+E)===!0&&o.deleteAttribute("morphNormal"+E),t[E]=0)}const _=o.morphTargetsRelative?1:1-m;l.getUniforms().setValue(n,"morphTargetBaseInfluence",_),l.getUniforms().setValue(n,"morphTargetInfluences",t)}return{update:r}}function _M(n,e,t,i){let r=new WeakMap;function s(l){const c=i.render.frame,u=l.geometry,h=e.get(l,u);return r.get(h)!==c&&(e.update(h),r.set(h,c)),l.isInstancedMesh&&(l.hasEventListener("dispose",a)===!1&&l.addEventListener("dispose",a),t.update(l.instanceMatrix,34962),l.instanceColor!==null&&t.update(l.instanceColor,34962)),h}function o(){r=new WeakMap}function a(l){const c=l.target;c.removeEventListener("dispose",a),t.remove(c.instanceMatrix),c.instanceColor!==null&&t.remove(c.instanceColor)}return{update:s,dispose:o}}class Qp extends Et{constructor(e=null,t=1,i=1,r=1){super(null),this.image={data:e,width:t,height:i,depth:r},this.magFilter=yt,this.minFilter=yt,this.wrapR=Gt,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.needsUpdate=!0}}Qp.prototype.isDataTexture2DArray=!0;class Kp extends Et{constructor(e=null,t=1,i=1,r=1){super(null),this.image={data:e,width:t,height:i,depth:r},this.magFilter=yt,this.minFilter=yt,this.wrapR=Gt,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.needsUpdate=!0}}Kp.prototype.isDataTexture3D=!0;const Yp=new Et,wM=new Qp,bM=new Kp,Zp=new wa,rf=[],sf=[],of=new Float32Array(16),af=new Float32Array(9),lf=new Float32Array(4);function Br(n,e,t){const i=n[0];if(i<=0||i>0)return n;const r=e*t;let s=rf[r];if(s===void 0&&(s=new Float32Array(r),rf[r]=s),e!==0){i.toArray(s,0);for(let o=1,a=0;o!==e;++o)a+=t,n[o].toArray(s,a)}return s}function Ft(n,e){if(n.length!==e.length)return!1;for(let t=0,i=n.length;t<i;t++)if(n[t]!==e[t])return!1;return!0}function Lt(n,e){for(let t=0,i=e.length;t<i;t++)n[t]=e[t]}function Jp(n,e){let t=sf[e];t===void 0&&(t=new Int32Array(e),sf[e]=t);for(let i=0;i!==e;++i)t[i]=n.allocateTextureUnit();return t}function MM(n,e){const t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function SM(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Ft(t,e))return;n.uniform2fv(this.addr,e),Lt(t,e)}}function EM(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(Ft(t,e))return;n.uniform3fv(this.addr,e),Lt(t,e)}}function TM(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Ft(t,e))return;n.uniform4fv(this.addr,e),Lt(t,e)}}function CM(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(Ft(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),Lt(t,e)}else{if(Ft(t,i))return;lf.set(i),n.uniformMatrix2fv(this.addr,!1,lf),Lt(t,i)}}function IM(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(Ft(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),Lt(t,e)}else{if(Ft(t,i))return;af.set(i),n.uniformMatrix3fv(this.addr,!1,af),Lt(t,i)}}function LM(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(Ft(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),Lt(t,e)}else{if(Ft(t,i))return;of.set(i),n.uniformMatrix4fv(this.addr,!1,of),Lt(t,i)}}function RM(n,e){const t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function PM(n,e){const t=this.cache;Ft(t,e)||(n.uniform2iv(this.addr,e),Lt(t,e))}function DM(n,e){const t=this.cache;Ft(t,e)||(n.uniform3iv(this.addr,e),Lt(t,e))}function BM(n,e){const t=this.cache;Ft(t,e)||(n.uniform4iv(this.addr,e),Lt(t,e))}function FM(n,e){const t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function NM(n,e){const t=this.cache;Ft(t,e)||(n.uniform2uiv(this.addr,e),Lt(t,e))}function OM(n,e){const t=this.cache;Ft(t,e)||(n.uniform3uiv(this.addr,e),Lt(t,e))}function UM(n,e){const t=this.cache;Ft(t,e)||(n.uniform4uiv(this.addr,e),Lt(t,e))}function VM(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.safeSetTexture2D(e||Yp,r)}function kM(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture3D(e||bM,r)}function zM(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.safeSetTextureCube(e||Zp,r)}function HM(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture2DArray(e||wM,r)}function GM(n){switch(n){case 5126:return MM;case 35664:return SM;case 35665:return EM;case 35666:return TM;case 35674:return CM;case 35675:return IM;case 35676:return LM;case 5124:case 35670:return RM;case 35667:case 35671:return PM;case 35668:case 35672:return DM;case 35669:case 35673:return BM;case 5125:return FM;case 36294:return NM;case 36295:return OM;case 36296:return UM;case 35678:case 36198:case 36298:case 36306:case 35682:return VM;case 35679:case 36299:case 36307:return kM;case 35680:case 36300:case 36308:case 36293:return zM;case 36289:case 36303:case 36311:case 36292:return HM}}function WM(n,e){n.uniform1fv(this.addr,e)}function qM(n,e){const t=Br(e,this.size,2);n.uniform2fv(this.addr,t)}function QM(n,e){const t=Br(e,this.size,3);n.uniform3fv(this.addr,t)}function KM(n,e){const t=Br(e,this.size,4);n.uniform4fv(this.addr,t)}function YM(n,e){const t=Br(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function ZM(n,e){const t=Br(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function JM(n,e){const t=Br(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function XM(n,e){n.uniform1iv(this.addr,e)}function jM(n,e){n.uniform2iv(this.addr,e)}function $M(n,e){n.uniform3iv(this.addr,e)}function eS(n,e){n.uniform4iv(this.addr,e)}function tS(n,e){n.uniform1uiv(this.addr,e)}function nS(n,e){n.uniform2uiv(this.addr,e)}function iS(n,e){n.uniform3uiv(this.addr,e)}function rS(n,e){n.uniform4uiv(this.addr,e)}function sS(n,e,t){const i=e.length,r=Jp(t,i);n.uniform1iv(this.addr,r);for(let s=0;s!==i;++s)t.safeSetTexture2D(e[s]||Yp,r[s])}function oS(n,e,t){const i=e.length,r=Jp(t,i);n.uniform1iv(this.addr,r);for(let s=0;s!==i;++s)t.safeSetTextureCube(e[s]||Zp,r[s])}function aS(n){switch(n){case 5126:return WM;case 35664:return qM;case 35665:return QM;case 35666:return KM;case 35674:return YM;case 35675:return ZM;case 35676:return JM;case 5124:case 35670:return XM;case 35667:case 35671:return jM;case 35668:case 35672:return $M;case 35669:case 35673:return eS;case 5125:return tS;case 36294:return nS;case 36295:return iS;case 36296:return rS;case 35678:case 36198:case 36298:case 36306:case 35682:return sS;case 35680:case 36300:case 36308:case 36293:return oS}}function lS(n,e,t){this.id=n,this.addr=t,this.cache=[],this.setValue=GM(e.type)}function Xp(n,e,t){this.id=n,this.addr=t,this.cache=[],this.size=e.size,this.setValue=aS(e.type)}Xp.prototype.updateCache=function(n){const e=this.cache;n instanceof Float32Array&&e.length!==n.length&&(this.cache=new Float32Array(n.length)),Lt(e,n)};function jp(n){this.id=n,this.seq=[],this.map={}}jp.prototype.setValue=function(n,e,t){const i=this.seq;for(let r=0,s=i.length;r!==s;++r){const o=i[r];o.setValue(n,e[o.id],t)}};const _l=/(\w+)(\])?(\[|\.)?/g;function cf(n,e){n.seq.push(e),n.map[e.id]=e}function cS(n,e,t){const i=n.name,r=i.length;for(_l.lastIndex=0;;){const s=_l.exec(i),o=_l.lastIndex;let a=s[1];const l=s[2]==="]",c=s[3];if(l&&(a=a|0),c===void 0||c==="["&&o+2===r){cf(t,c===void 0?new lS(a,n,e):new Xp(a,n,e));break}else{let h=t.map[a];h===void 0&&(h=new jp(a),cf(t,h)),t=h}}}function oi(n,e){this.seq=[],this.map={};const t=n.getProgramParameter(e,35718);for(let i=0;i<t;++i){const r=n.getActiveUniform(e,i),s=n.getUniformLocation(e,r.name);cS(r,s,this)}}oi.prototype.setValue=function(n,e,t,i){const r=this.map[e];r!==void 0&&r.setValue(n,t,i)};oi.prototype.setOptional=function(n,e,t){const i=e[t];i!==void 0&&this.setValue(n,t,i)};oi.upload=function(n,e,t,i){for(let r=0,s=e.length;r!==s;++r){const o=e[r],a=t[o.id];a.needsUpdate!==!1&&o.setValue(n,a.value,i)}};oi.seqWithValue=function(n,e){const t=[];for(let i=0,r=n.length;i!==r;++i){const s=n[i];s.id in e&&t.push(s)}return t};function uf(n,e,t){const i=n.createShader(e);return n.shaderSource(i,t),n.compileShader(i),i}let uS=0;function hS(n){const e=n.split(`
`);for(let t=0;t<e.length;t++)e[t]=t+1+": "+e[t];return e.join(`
`)}function $p(n){switch(n){case Vt:return["Linear","( value )"];case xa:return["sRGB","( value )"];case Hc:return["RGBE","( value )"];case Bp:return["RGBM","( value, 7.0 )"];case Fp:return["RGBM","( value, 16.0 )"];case Np:return["RGBD","( value, 256.0 )"];case zc:return["Gamma","( value, float( GAMMA_FACTOR ) )"];case l_:return["LogLuv","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",n),["Linear","( value )"]}}function hf(n,e,t){const i=n.getShaderParameter(e,35713),r=n.getShaderInfoLog(e).trim();if(i&&r==="")return"";const s=n.getShaderSource(e);return"THREE.WebGLShader: gl.getShaderInfoLog() "+t+`
`+r+hS(s)}function Xi(n,e){const t=$p(e);return"vec4 "+n+"( vec4 value ) { return "+t[0]+"ToLinear"+t[1]+"; }"}function fS(n,e){const t=$p(e);return"vec4 "+n+"( vec4 value ) { return LinearTo"+t[0]+t[1]+"; }"}function dS(n,e){let t;switch(e){case ox:t="Linear";break;case ax:t="Reinhard";break;case lx:t="OptimizedCineon";break;case cx:t="ACESFilmic";break;case ux:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}function pS(n){return[n.extensionDerivatives||n.envMapCubeUV||n.bumpMap||n.tangentSpaceNormalMap||n.clearcoatNormalMap||n.flatShading||n.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(n.extensionFragDepth||n.logarithmicDepthBuffer)&&n.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",n.extensionDrawBuffers&&n.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(n.extensionShaderTextureLOD||n.envMap||n.transmission>0)&&n.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(jr).join(`
`)}function mS(n){const e=[];for(const t in n){const i=n[t];i!==!1&&e.push("#define "+t+" "+i)}return e.join(`
`)}function gS(n,e){const t={},i=n.getProgramParameter(e,35721);for(let r=0;r<i;r++){const o=n.getActiveAttrib(e,r).name;t[o]=n.getAttribLocation(e,o)}return t}function jr(n){return n!==""}function ff(n,e){return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function df(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const AS=/^[ \t]*#include +<([\w\d./]+)>/gm;function ic(n){return n.replace(AS,vS)}function vS(n,e){const t=Oe[e];if(t===void 0)throw new Error("Can not resolve #include <"+e+">");return ic(t)}const yS=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,xS=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function pf(n){return n.replace(xS,em).replace(yS,_S)}function _S(n,e,t,i){return console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."),em(n,e,t,i)}function em(n,e,t,i){let r="";for(let s=parseInt(e);s<parseInt(t);s++)r+=i.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return r}function mf(n){let e="precision "+n.precision+` float;
precision `+n.precision+" int;";return n.precision==="highp"?e+=`
#define HIGH_PRECISION`:n.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:n.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function wS(n){let e="SHADOWMAP_TYPE_BASIC";return n.shadowMapType===Cp?e="SHADOWMAP_TYPE_PCF":n.shadowMapType===Uy?e="SHADOWMAP_TYPE_PCF_SOFT":n.shadowMapType===Xr&&(e="SHADOWMAP_TYPE_VSM"),e}function bS(n){let e="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case ga:case Aa:e="ENVMAP_TYPE_CUBE";break;case va:case Vc:e="ENVMAP_TYPE_CUBE_UV";break}return e}function MS(n){let e="ENVMAP_MODE_REFLECTION";if(n.envMap)switch(n.envMapMode){case Aa:case Vc:e="ENVMAP_MODE_REFRACTION";break}return e}function SS(n){let e="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case ma:e="ENVMAP_BLENDING_MULTIPLY";break;case rx:e="ENVMAP_BLENDING_MIX";break;case sx:e="ENVMAP_BLENDING_ADD";break}return e}function ES(n,e,t,i){const r=n.getContext(),s=t.defines;let o=t.vertexShader,a=t.fragmentShader;const l=wS(t),c=bS(t),u=MS(t),h=SS(t),f=n.gammaFactor>0?n.gammaFactor:1,d=t.isWebGL2?"":pS(t),m=mS(s),_=r.createProgram();let E,p,A=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(E=[m].filter(jr).join(`
`),E.length>0&&(E+=`
`),p=[d,m].filter(jr).join(`
`),p.length>0&&(p+=`
`)):(E=[mf(t),"#define SHADER_NAME "+t.shaderName,m,t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+f,"#define MAX_BONES "+t.maxBones,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+u:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMap&&t.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",t.normalMap&&t.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.displacementMap&&t.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",t.specularTintMap?"#define USE_SPECULARTINTMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUvs?"#define USE_UV":"",t.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.useVertexTexture?"#define BONE_TEXTURE":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(jr).join(`
`),p=[d,mf(t),"#define SHADER_NAME "+t.shaderName,m,t.alphaTest?"#define ALPHATEST "+t.alphaTest+(t.alphaTest%1?"":".0"):"","#define GAMMA_FACTOR "+f,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+c:"",t.envMap?"#define "+u:"",t.envMap?"#define "+h:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMap&&t.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",t.normalMap&&t.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",t.specularTintMap?"#define USE_SPECULARTINTMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.sheen?"#define USE_SHEEN":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUvs?"#define USE_UV":"",t.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"",(t.extensionShaderTextureLOD||t.envMap)&&t.rendererExtensionShaderTextureLod?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==Ri?"#define TONE_MAPPING":"",t.toneMapping!==Ri?Oe.tonemapping_pars_fragment:"",t.toneMapping!==Ri?dS("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",Oe.encodings_pars_fragment,t.map?Xi("mapTexelToLinear",t.mapEncoding):"",t.matcap?Xi("matcapTexelToLinear",t.matcapEncoding):"",t.envMap?Xi("envMapTexelToLinear",t.envMapEncoding):"",t.emissiveMap?Xi("emissiveMapTexelToLinear",t.emissiveMapEncoding):"",t.specularTintMap?Xi("specularTintMapTexelToLinear",t.specularTintMapEncoding):"",t.lightMap?Xi("lightMapTexelToLinear",t.lightMapEncoding):"",fS("linearToOutputTexel",t.outputEncoding),t.depthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(jr).join(`
`)),o=ic(o),o=ff(o,t),o=df(o,t),a=ic(a),a=ff(a,t),a=df(a,t),o=pf(o),a=pf(a),t.isWebGL2&&t.isRawShaderMaterial!==!0&&(A=`#version 300 es
`,E=["#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+E,p=["#define varying in",t.glslVersion===Oh?"":"out highp vec4 pc_fragColor;",t.glslVersion===Oh?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+p);const R=A+E+o,M=A+p+a,L=uf(r,35633,R),D=uf(r,35632,M);if(r.attachShader(_,L),r.attachShader(_,D),t.index0AttributeName!==void 0?r.bindAttribLocation(_,0,t.index0AttributeName):t.morphTargets===!0&&r.bindAttribLocation(_,0,"position"),r.linkProgram(_),n.debug.checkShaderErrors){const U=r.getProgramInfoLog(_).trim(),F=r.getShaderInfoLog(L).trim(),S=r.getShaderInfoLog(D).trim();let G=!0,b=!0;if(r.getProgramParameter(_,35714)===!1){G=!1;const T=hf(r,L,"vertex"),y=hf(r,D,"fragment");console.error("THREE.WebGLProgram: shader error: ",r.getError(),"35715",r.getProgramParameter(_,35715),"gl.getProgramInfoLog",U,T,y)}else U!==""?console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",U):(F===""||S==="")&&(b=!1);b&&(this.diagnostics={runnable:G,programLog:U,vertexShader:{log:F,prefix:E},fragmentShader:{log:S,prefix:p}})}r.deleteShader(L),r.deleteShader(D);let C;this.getUniforms=function(){return C===void 0&&(C=new oi(r,_)),C};let k;return this.getAttributes=function(){return k===void 0&&(k=gS(r,_)),k},this.destroy=function(){i.releaseStatesOfProgram(this),r.deleteProgram(_),this.program=void 0},this.name=t.shaderName,this.id=uS++,this.cacheKey=e,this.usedTimes=1,this.program=_,this.vertexShader=L,this.fragmentShader=D,this}function TS(n,e,t,i,r,s,o){const a=[],l=r.isWebGL2,c=r.logarithmicDepthBuffer,u=r.floatVertexTextures,h=r.maxVertexUniforms,f=r.vertexTextures;let d=r.precision;const m={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"},_=["precision","isWebGL2","supportsVertexTextures","outputEncoding","instancing","instancingColor","map","mapEncoding","matcap","matcapEncoding","envMap","envMapMode","envMapEncoding","envMapCubeUV","lightMap","lightMapEncoding","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","objectSpaceNormalMap","tangentSpaceNormalMap","clearcoatMap","clearcoatRoughnessMap","clearcoatNormalMap","displacementMap","specularMap","specularIntensityMap","specularTintMap","specularTintMapEncoding","roughnessMap","metalnessMap","gradientMap","alphaMap","combine","vertexColors","vertexAlphas","vertexTangents","vertexUvs","uvsVertexOnly","fog","useFog","fogExp2","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","numDirLightShadows","numPointLightShadows","numSpotLightShadows","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","alphaTest","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering","sheen","transmission","transmissionMap","thicknessMap"];function E(C){const U=C.skeleton.bones;if(u)return 1024;{const S=Math.floor((h-20)/4),G=Math.min(S,U.length);return G<U.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+U.length+" bones. This GPU supports "+G+"."),0):G}}function p(C){let k;return C&&C.isTexture?k=C.encoding:C&&C.isWebGLRenderTarget?(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),k=C.texture.encoding):k=Vt,k}function A(C,k,U,F,S){const G=F.fog,b=C.isMeshStandardMaterial?F.environment:null,T=(C.isMeshStandardMaterial?t:e).get(C.envMap||b),y=m[C.type],v=S.isSkinnedMesh?E(S):0;C.precision!==null&&(d=r.getMaxPrecision(C.precision),d!==C.precision&&console.warn("THREE.WebGLProgram.getParameters:",C.precision,"not supported, using",d,"instead."));let w,g;if(y){const Z=mn[y];w=Z.vertexShader,g=Z.fragmentShader}else w=C.vertexShader,g=C.fragmentShader;const N=n.getRenderTarget();return{isWebGL2:l,shaderID:y,shaderName:C.type,vertexShader:w,fragmentShader:g,defines:C.defines,isRawShaderMaterial:C.isRawShaderMaterial===!0,glslVersion:C.glslVersion,precision:d,instancing:S.isInstancedMesh===!0,instancingColor:S.isInstancedMesh===!0&&S.instanceColor!==null,supportsVertexTextures:f,outputEncoding:N!==null?p(N.texture):n.outputEncoding,map:!!C.map,mapEncoding:p(C.map),matcap:!!C.matcap,matcapEncoding:p(C.matcap),envMap:!!T,envMapMode:T&&T.mapping,envMapEncoding:p(T),envMapCubeUV:!!T&&(T.mapping===va||T.mapping===Vc),lightMap:!!C.lightMap,lightMapEncoding:p(C.lightMap),aoMap:!!C.aoMap,emissiveMap:!!C.emissiveMap,emissiveMapEncoding:p(C.emissiveMap),bumpMap:!!C.bumpMap,normalMap:!!C.normalMap,objectSpaceNormalMap:C.normalMapType===h_,tangentSpaceNormalMap:C.normalMapType===Ir,clearcoatMap:!!C.clearcoatMap,clearcoatRoughnessMap:!!C.clearcoatRoughnessMap,clearcoatNormalMap:!!C.clearcoatNormalMap,displacementMap:!!C.displacementMap,roughnessMap:!!C.roughnessMap,metalnessMap:!!C.metalnessMap,specularMap:!!C.specularMap,specularIntensityMap:!!C.specularIntensityMap,specularTintMap:!!C.specularTintMap,specularTintMapEncoding:p(C.specularTintMap),alphaMap:!!C.alphaMap,gradientMap:!!C.gradientMap,sheen:!!C.sheen,transmission:!!C.transmission,transmissionMap:!!C.transmissionMap,thicknessMap:!!C.thicknessMap,combine:C.combine,vertexTangents:!!C.normalMap&&!!S.geometry&&!!S.geometry.attributes.tangent,vertexColors:C.vertexColors,vertexAlphas:C.vertexColors===!0&&!!S.geometry&&!!S.geometry.attributes.color&&S.geometry.attributes.color.itemSize===4,vertexUvs:!!C.map||!!C.bumpMap||!!C.normalMap||!!C.specularMap||!!C.alphaMap||!!C.emissiveMap||!!C.roughnessMap||!!C.metalnessMap||!!C.clearcoatMap||!!C.clearcoatRoughnessMap||!!C.clearcoatNormalMap||!!C.displacementMap||!!C.transmissionMap||!!C.thicknessMap||!!C.specularIntensityMap||!!C.specularTintMap,uvsVertexOnly:!(!!C.map||!!C.bumpMap||!!C.normalMap||!!C.specularMap||!!C.alphaMap||!!C.emissiveMap||!!C.roughnessMap||!!C.metalnessMap||!!C.clearcoatNormalMap||!!C.transmission||!!C.transmissionMap||!!C.thicknessMap||!!C.specularIntensityMap||!!C.specularTintMap)&&!!C.displacementMap,fog:!!G,useFog:C.fog,fogExp2:G&&G.isFogExp2,flatShading:!!C.flatShading,sizeAttenuation:C.sizeAttenuation,logarithmicDepthBuffer:c,skinning:S.isSkinnedMesh===!0&&v>0,maxBones:v,useVertexTexture:u,morphTargets:!!S.geometry&&!!S.geometry.morphAttributes.position,morphNormals:!!S.geometry&&!!S.geometry.morphAttributes.normal,numDirLights:k.directional.length,numPointLights:k.point.length,numSpotLights:k.spot.length,numRectAreaLights:k.rectArea.length,numHemiLights:k.hemi.length,numDirLightShadows:k.directionalShadowMap.length,numPointLightShadows:k.pointShadowMap.length,numSpotLightShadows:k.spotShadowMap.length,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:C.dithering,shadowMapEnabled:n.shadowMap.enabled&&U.length>0,shadowMapType:n.shadowMap.type,toneMapping:C.toneMapped?n.toneMapping:Ri,physicallyCorrectLights:n.physicallyCorrectLights,premultipliedAlpha:C.premultipliedAlpha,alphaTest:C.alphaTest,doubleSided:C.side===_r,flipSided:C.side===gt,depthPacking:C.depthPacking!==void 0?C.depthPacking:!1,index0AttributeName:C.index0AttributeName,extensionDerivatives:C.extensions&&C.extensions.derivatives,extensionFragDepth:C.extensions&&C.extensions.fragDepth,extensionDrawBuffers:C.extensions&&C.extensions.drawBuffers,extensionShaderTextureLOD:C.extensions&&C.extensions.shaderTextureLOD,rendererExtensionFragDepth:l||i.has("EXT_frag_depth"),rendererExtensionDrawBuffers:l||i.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:l||i.has("EXT_shader_texture_lod"),customProgramCacheKey:C.customProgramCacheKey()}}function R(C){const k=[];if(C.shaderID?k.push(C.shaderID):(k.push(C.fragmentShader),k.push(C.vertexShader)),C.defines!==void 0)for(const U in C.defines)k.push(U),k.push(C.defines[U]);if(C.isRawShaderMaterial===!1){for(let U=0;U<_.length;U++)k.push(C[_[U]]);k.push(n.outputEncoding),k.push(n.gammaFactor)}return k.push(C.customProgramCacheKey),k.join()}function M(C){const k=m[C.type];let U;if(k){const F=mn[k];U=I_.clone(F.uniforms)}else U=C.uniforms;return U}function L(C,k){let U;for(let F=0,S=a.length;F<S;F++){const G=a[F];if(G.cacheKey===k){U=G,++U.usedTimes;break}}return U===void 0&&(U=new ES(n,k,C,s),a.push(U)),U}function D(C){if(--C.usedTimes===0){const k=a.indexOf(C);a[k]=a[a.length-1],a.pop(),C.destroy()}}return{getParameters:A,getProgramCacheKey:R,getUniforms:M,acquireProgram:L,releaseProgram:D,programs:a}}function CS(){let n=new WeakMap;function e(s){let o=n.get(s);return o===void 0&&(o={},n.set(s,o)),o}function t(s){n.delete(s)}function i(s,o,a){n.get(s)[o]=a}function r(){n=new WeakMap}return{get:e,remove:t,update:i,dispose:r}}function IS(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.program!==e.program?n.program.id-e.program.id:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function gf(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function Af(n){const e=[];let t=0;const i=[],r=[],s=[],o={id:-1};function a(){t=0,i.length=0,r.length=0,s.length=0}function l(d,m,_,E,p,A){let R=e[t];const M=n.get(_);return R===void 0?(R={id:d.id,object:d,geometry:m,material:_,program:M.program||o,groupOrder:E,renderOrder:d.renderOrder,z:p,group:A},e[t]=R):(R.id=d.id,R.object=d,R.geometry=m,R.material=_,R.program=M.program||o,R.groupOrder=E,R.renderOrder=d.renderOrder,R.z=p,R.group=A),t++,R}function c(d,m,_,E,p,A){const R=l(d,m,_,E,p,A);_.transmission>0?r.push(R):_.transparent===!0?s.push(R):i.push(R)}function u(d,m,_,E,p,A){const R=l(d,m,_,E,p,A);_.transmission>0?r.unshift(R):_.transparent===!0?s.unshift(R):i.unshift(R)}function h(d,m){i.length>1&&i.sort(d||IS),r.length>1&&r.sort(m||gf),s.length>1&&s.sort(m||gf)}function f(){for(let d=t,m=e.length;d<m;d++){const _=e[d];if(_.id===null)break;_.id=null,_.object=null,_.geometry=null,_.material=null,_.program=null,_.group=null}}return{opaque:i,transmissive:r,transparent:s,init:a,push:c,unshift:u,finish:f,sort:h}}function LS(n){let e=new WeakMap;function t(r,s){let o;return e.has(r)===!1?(o=new Af(n),e.set(r,[o])):s>=e.get(r).length?(o=new Af(n),e.get(r).push(o)):o=e.get(r)[s],o}function i(){e=new WeakMap}return{get:t,dispose:i}}function RS(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new q,color:new Te};break;case"SpotLight":t={position:new q,direction:new q,color:new Te,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new q,color:new Te,distance:0,decay:0};break;case"HemisphereLight":t={direction:new q,skyColor:new Te,groundColor:new Te};break;case"RectAreaLight":t={color:new Te,position:new q,halfWidth:new q,halfHeight:new q};break}return n[e.id]=t,t}}}function PS(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new xe};break;case"SpotLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new xe};break;case"PointLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new xe,shadowCameraNear:1,shadowCameraFar:1e3};break}return n[e.id]=t,t}}}let DS=0;function BS(n,e){return(e.castShadow?1:0)-(n.castShadow?1:0)}function FS(n,e){const t=new RS,i=PS(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]};for(let u=0;u<9;u++)r.probe.push(new q);const s=new q,o=new Ie,a=new Ie;function l(u){let h=0,f=0,d=0;for(let C=0;C<9;C++)r.probe[C].set(0,0,0);let m=0,_=0,E=0,p=0,A=0,R=0,M=0,L=0;u.sort(BS);for(let C=0,k=u.length;C<k;C++){const U=u[C],F=U.color,S=U.intensity,G=U.distance,b=U.shadow&&U.shadow.map?U.shadow.map.texture:null;if(U.isAmbientLight)h+=F.r*S,f+=F.g*S,d+=F.b*S;else if(U.isLightProbe)for(let T=0;T<9;T++)r.probe[T].addScaledVector(U.sh.coefficients[T],S);else if(U.isDirectionalLight){const T=t.get(U);if(T.color.copy(U.color).multiplyScalar(U.intensity),U.castShadow){const y=U.shadow,v=i.get(U);v.shadowBias=y.bias,v.shadowNormalBias=y.normalBias,v.shadowRadius=y.radius,v.shadowMapSize=y.mapSize,r.directionalShadow[m]=v,r.directionalShadowMap[m]=b,r.directionalShadowMatrix[m]=U.shadow.matrix,R++}r.directional[m]=T,m++}else if(U.isSpotLight){const T=t.get(U);if(T.position.setFromMatrixPosition(U.matrixWorld),T.color.copy(F).multiplyScalar(S),T.distance=G,T.coneCos=Math.cos(U.angle),T.penumbraCos=Math.cos(U.angle*(1-U.penumbra)),T.decay=U.decay,U.castShadow){const y=U.shadow,v=i.get(U);v.shadowBias=y.bias,v.shadowNormalBias=y.normalBias,v.shadowRadius=y.radius,v.shadowMapSize=y.mapSize,r.spotShadow[E]=v,r.spotShadowMap[E]=b,r.spotShadowMatrix[E]=U.shadow.matrix,L++}r.spot[E]=T,E++}else if(U.isRectAreaLight){const T=t.get(U);T.color.copy(F).multiplyScalar(S),T.halfWidth.set(U.width*.5,0,0),T.halfHeight.set(0,U.height*.5,0),r.rectArea[p]=T,p++}else if(U.isPointLight){const T=t.get(U);if(T.color.copy(U.color).multiplyScalar(U.intensity),T.distance=U.distance,T.decay=U.decay,U.castShadow){const y=U.shadow,v=i.get(U);v.shadowBias=y.bias,v.shadowNormalBias=y.normalBias,v.shadowRadius=y.radius,v.shadowMapSize=y.mapSize,v.shadowCameraNear=y.camera.near,v.shadowCameraFar=y.camera.far,r.pointShadow[_]=v,r.pointShadowMap[_]=b,r.pointShadowMatrix[_]=U.shadow.matrix,M++}r.point[_]=T,_++}else if(U.isHemisphereLight){const T=t.get(U);T.skyColor.copy(U.color).multiplyScalar(S),T.groundColor.copy(U.groundColor).multiplyScalar(S),r.hemi[A]=T,A++}}p>0&&(e.isWebGL2||n.has("OES_texture_float_linear")===!0?(r.rectAreaLTC1=we.LTC_FLOAT_1,r.rectAreaLTC2=we.LTC_FLOAT_2):n.has("OES_texture_half_float_linear")===!0?(r.rectAreaLTC1=we.LTC_HALF_1,r.rectAreaLTC2=we.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),r.ambient[0]=h,r.ambient[1]=f,r.ambient[2]=d;const D=r.hash;(D.directionalLength!==m||D.pointLength!==_||D.spotLength!==E||D.rectAreaLength!==p||D.hemiLength!==A||D.numDirectionalShadows!==R||D.numPointShadows!==M||D.numSpotShadows!==L)&&(r.directional.length=m,r.spot.length=E,r.rectArea.length=p,r.point.length=_,r.hemi.length=A,r.directionalShadow.length=R,r.directionalShadowMap.length=R,r.pointShadow.length=M,r.pointShadowMap.length=M,r.spotShadow.length=L,r.spotShadowMap.length=L,r.directionalShadowMatrix.length=R,r.pointShadowMatrix.length=M,r.spotShadowMatrix.length=L,D.directionalLength=m,D.pointLength=_,D.spotLength=E,D.rectAreaLength=p,D.hemiLength=A,D.numDirectionalShadows=R,D.numPointShadows=M,D.numSpotShadows=L,r.version=DS++)}function c(u,h){let f=0,d=0,m=0,_=0,E=0;const p=h.matrixWorldInverse;for(let A=0,R=u.length;A<R;A++){const M=u[A];if(M.isDirectionalLight){const L=r.directional[f];L.direction.setFromMatrixPosition(M.matrixWorld),s.setFromMatrixPosition(M.target.matrixWorld),L.direction.sub(s),L.direction.transformDirection(p),f++}else if(M.isSpotLight){const L=r.spot[m];L.position.setFromMatrixPosition(M.matrixWorld),L.position.applyMatrix4(p),L.direction.setFromMatrixPosition(M.matrixWorld),s.setFromMatrixPosition(M.target.matrixWorld),L.direction.sub(s),L.direction.transformDirection(p),m++}else if(M.isRectAreaLight){const L=r.rectArea[_];L.position.setFromMatrixPosition(M.matrixWorld),L.position.applyMatrix4(p),a.identity(),o.copy(M.matrixWorld),o.premultiply(p),a.extractRotation(o),L.halfWidth.set(M.width*.5,0,0),L.halfHeight.set(0,M.height*.5,0),L.halfWidth.applyMatrix4(a),L.halfHeight.applyMatrix4(a),_++}else if(M.isPointLight){const L=r.point[d];L.position.setFromMatrixPosition(M.matrixWorld),L.position.applyMatrix4(p),d++}else if(M.isHemisphereLight){const L=r.hemi[E];L.direction.setFromMatrixPosition(M.matrixWorld),L.direction.transformDirection(p),L.direction.normalize(),E++}}}return{setup:l,setupView:c,state:r}}function vf(n,e){const t=new FS(n,e),i=[],r=[];function s(){i.length=0,r.length=0}function o(h){i.push(h)}function a(h){r.push(h)}function l(){t.setup(i)}function c(h){t.setupView(i,h)}return{init:s,state:{lightsArray:i,shadowsArray:r,lights:t},setupLights:l,setupLightsView:c,pushLight:o,pushShadow:a}}function NS(n,e){let t=new WeakMap;function i(s,o=0){let a;return t.has(s)===!1?(a=new vf(n,e),t.set(s,[a])):o>=t.get(s).length?(a=new vf(n,e),t.get(s).push(a)):a=t.get(s)[o],a}function r(){t=new WeakMap}return{get:i,dispose:r}}class tm extends Rt{constructor(e){super(),this.type="MeshDepthMaterial",this.depthPacking=c_,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}tm.prototype.isMeshDepthMaterial=!0;class nm extends Rt{constructor(e){super(),this.type="MeshDistanceMaterial",this.referencePosition=new q,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.setValues(e)}copy(e){return super.copy(e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}nm.prototype.isMeshDistanceMaterial=!0;var OS=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	float mean = 0.0;
	float squared_mean = 0.0;
	float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy ) / resolution ) );
	for ( float i = -1.0; i < 1.0 ; i += SAMPLE_RATE) {
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( i, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, i ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean * HALF_SAMPLE_RATE;
	squared_mean = squared_mean * HALF_SAMPLE_RATE;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`,US=`void main() {
	gl_Position = vec4( position, 1.0 );
}`;function im(n,e,t){let i=new ba;const r=new xe,s=new xe,o=new Ze,a=new tm({depthPacking:u_}),l=new nm,c={},u=t.maxTextureSize,h={0:gt,1:_s,2:_r},f=new Di({defines:{SAMPLE_RATE:2/8,HALF_SAMPLE_RATE:1/8},uniforms:{shadow_pass:{value:null},resolution:{value:new xe},radius:{value:4}},vertexShader:US,fragmentShader:OS}),d=f.clone();d.defines.HORIZONTAL_PASS=1;const m=new Ke;m.setAttribute("position",new it(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const _=new Bt(m,f),E=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=Cp,this.render=function(M,L,D){if(E.enabled===!1||E.autoUpdate===!1&&E.needsUpdate===!1||M.length===0)return;const C=n.getRenderTarget(),k=n.getActiveCubeFace(),U=n.getActiveMipmapLevel(),F=n.state;F.setBlending(ri),F.buffers.color.setClear(1,1,1,1),F.buffers.depth.setTest(!0),F.setScissorTest(!1);for(let S=0,G=M.length;S<G;S++){const b=M[S],T=b.shadow;if(T===void 0){console.warn("THREE.WebGLShadowMap:",b,"has no shadow.");continue}if(T.autoUpdate===!1&&T.needsUpdate===!1)continue;r.copy(T.mapSize);const y=T.getFrameExtents();if(r.multiply(y),s.copy(T.mapSize),(r.x>u||r.y>u)&&(r.x>u&&(s.x=Math.floor(u/y.x),r.x=s.x*y.x,T.mapSize.x=s.x),r.y>u&&(s.y=Math.floor(u/y.y),r.y=s.y*y.y,T.mapSize.y=s.y)),T.map===null&&!T.isPointLightShadow&&this.type===Xr){const w={minFilter:Yt,magFilter:Yt,format:ln};T.map=new yn(r.x,r.y,w),T.map.texture.name=b.name+".shadowMap",T.mapPass=new yn(r.x,r.y,w),T.camera.updateProjectionMatrix()}if(T.map===null){const w={minFilter:yt,magFilter:yt,format:ln};T.map=new yn(r.x,r.y,w),T.map.texture.name=b.name+".shadowMap",T.camera.updateProjectionMatrix()}n.setRenderTarget(T.map),n.clear();const v=T.getViewportCount();for(let w=0;w<v;w++){const g=T.getViewport(w);o.set(s.x*g.x,s.y*g.y,s.x*g.z,s.y*g.w),F.viewport(o),T.updateMatrices(b,w),i=T.getFrustum(),R(L,D,T.camera,b,this.type)}!T.isPointLightShadow&&this.type===Xr&&p(T,D),T.needsUpdate=!1}E.needsUpdate=!1,n.setRenderTarget(C,k,U)};function p(M,L){const D=e.update(_);f.uniforms.shadow_pass.value=M.map.texture,f.uniforms.resolution.value=M.mapSize,f.uniforms.radius.value=M.radius,n.setRenderTarget(M.mapPass),n.clear(),n.renderBufferDirect(L,null,D,f,_,null),d.uniforms.shadow_pass.value=M.mapPass.texture,d.uniforms.resolution.value=M.mapSize,d.uniforms.radius.value=M.radius,n.setRenderTarget(M.map),n.clear(),n.renderBufferDirect(L,null,D,d,_,null)}function A(M,L,D,C,k,U,F){let S=null;const G=C.isPointLight===!0?M.customDistanceMaterial:M.customDepthMaterial;if(G!==void 0?S=G:S=C.isPointLight===!0?l:a,n.localClippingEnabled&&D.clipShadows===!0&&D.clippingPlanes.length!==0){const b=S.uuid,T=D.uuid;let y=c[b];y===void 0&&(y={},c[b]=y);let v=y[T];v===void 0&&(v=S.clone(),y[T]=v),S=v}return S.visible=D.visible,S.wireframe=D.wireframe,F===Xr?S.side=D.shadowSide!==null?D.shadowSide:D.side:S.side=D.shadowSide!==null?D.shadowSide:h[D.side],S.clipShadows=D.clipShadows,S.clippingPlanes=D.clippingPlanes,S.clipIntersection=D.clipIntersection,S.wireframeLinewidth=D.wireframeLinewidth,S.linewidth=D.linewidth,C.isPointLight===!0&&S.isMeshDistanceMaterial===!0&&(S.referencePosition.setFromMatrixPosition(C.matrixWorld),S.nearDistance=k,S.farDistance=U),S}function R(M,L,D,C,k){if(M.visible===!1)return;if(M.layers.test(L.layers)&&(M.isMesh||M.isLine||M.isPoints)&&(M.castShadow||M.receiveShadow&&k===Xr)&&(!M.frustumCulled||i.intersectsObject(M))){M.modelViewMatrix.multiplyMatrices(D.matrixWorldInverse,M.matrixWorld);const S=e.update(M),G=M.material;if(Array.isArray(G)){const b=S.groups;for(let T=0,y=b.length;T<y;T++){const v=b[T],w=G[v.materialIndex];if(w&&w.visible){const g=A(M,S,w,C,D.near,D.far,k);n.renderBufferDirect(D,null,S,g,M,v)}}}else if(G.visible){const b=A(M,S,G,C,D.near,D.far,k);n.renderBufferDirect(D,null,S,b,M,null)}}const F=M.children;for(let S=0,G=F.length;S<G;S++)R(F[S],L,D,C,k)}}function VS(n,e,t){const i=t.isWebGL2;function r(){let Y=!1;const pe=new Ze;let le=null;const _e=new Ze(0,0,0,0);return{setMask:function(be){le!==be&&!Y&&(n.colorMask(be,be,be,be),le=be)},setLocked:function(be){Y=be},setClear:function(be,Ne,rt,mt,st){st===!0&&(be*=mt,Ne*=mt,rt*=mt),pe.set(be,Ne,rt,mt),_e.equals(pe)===!1&&(n.clearColor(be,Ne,rt,mt),_e.copy(pe))},reset:function(){Y=!1,le=null,_e.set(-1,0,0,0)}}}function s(){let Y=!1,pe=null,le=null,_e=null;return{setTest:function(be){be?se(2929):H(2929)},setMask:function(be){pe!==be&&!Y&&(n.depthMask(be),pe=be)},setFunc:function(be){if(le!==be){if(be)switch(be){case Xy:n.depthFunc(512);break;case jy:n.depthFunc(519);break;case $y:n.depthFunc(513);break;case Xl:n.depthFunc(515);break;case ex:n.depthFunc(514);break;case tx:n.depthFunc(518);break;case nx:n.depthFunc(516);break;case ix:n.depthFunc(517);break;default:n.depthFunc(515)}else n.depthFunc(515);le=be}},setLocked:function(be){Y=be},setClear:function(be){_e!==be&&(n.clearDepth(be),_e=be)},reset:function(){Y=!1,pe=null,le=null,_e=null}}}function o(){let Y=!1,pe=null,le=null,_e=null,be=null,Ne=null,rt=null,mt=null,st=null;return{setTest:function(He){Y||(He?se(2960):H(2960))},setMask:function(He){pe!==He&&!Y&&(n.stencilMask(He),pe=He)},setFunc:function(He,Wt,bn){(le!==He||_e!==Wt||be!==bn)&&(n.stencilFunc(He,Wt,bn),le=He,_e=Wt,be=bn)},setOp:function(He,Wt,bn){(Ne!==He||rt!==Wt||mt!==bn)&&(n.stencilOp(He,Wt,bn),Ne=He,rt=Wt,mt=bn)},setLocked:function(He){Y=He},setClear:function(He){st!==He&&(n.clearStencil(He),st=He)},reset:function(){Y=!1,pe=null,le=null,_e=null,be=null,Ne=null,rt=null,mt=null,st=null}}}const a=new r,l=new s,c=new o;let u={},h=null,f={},d=null,m=!1,_=null,E=null,p=null,A=null,R=null,M=null,L=null,D=!1,C=null,k=null,U=null,F=null,S=null;const G=n.getParameter(35661);let b=!1,T=0;const y=n.getParameter(7938);y.indexOf("WebGL")!==-1?(T=parseFloat(/^WebGL (\d)/.exec(y)[1]),b=T>=1):y.indexOf("OpenGL ES")!==-1&&(T=parseFloat(/^OpenGL ES (\d)/.exec(y)[1]),b=T>=2);let v=null,w={};const g=n.getParameter(3088),N=n.getParameter(2978),z=new Ze().fromArray(g),Z=new Ze().fromArray(N);function ee(Y,pe,le){const _e=new Uint8Array(4),be=n.createTexture();n.bindTexture(Y,be),n.texParameteri(Y,10241,9728),n.texParameteri(Y,10240,9728);for(let Ne=0;Ne<le;Ne++)n.texImage2D(pe+Ne,0,6408,1,1,0,6408,5121,_e);return be}const te={};te[3553]=ee(3553,3553,1),te[34067]=ee(34067,34069,6),a.setClear(0,0,0,1),l.setClear(1),c.setClear(0),se(2929),l.setFunc(Xl),O(!1),Q(yh),se(2884),ye(ri);function se(Y){u[Y]!==!0&&(n.enable(Y),u[Y]=!0)}function H(Y){u[Y]!==!1&&(n.disable(Y),u[Y]=!1)}function W(Y){Y!==h&&(n.bindFramebuffer(36160,Y),h=Y)}function ie(Y,pe){return pe===null&&h!==null&&(pe=h),f[Y]!==pe?(n.bindFramebuffer(Y,pe),f[Y]=pe,i&&(Y===36009&&(f[36160]=pe),Y===36160&&(f[36009]=pe)),!0):!1}function fe(Y){return d!==Y?(n.useProgram(Y),d=Y,!0):!1}const de={[ir]:32774,[ky]:32778,[zy]:32779};if(i)de[bh]=32775,de[Mh]=32776;else{const Y=e.get("EXT_blend_minmax");Y!==null&&(de[bh]=Y.MIN_EXT,de[Mh]=Y.MAX_EXT)}const me={[Hy]:0,[Gy]:1,[Wy]:768,[Lp]:770,[Jy]:776,[Yy]:774,[Qy]:772,[qy]:769,[Rp]:771,[Zy]:775,[Ky]:773};function ye(Y,pe,le,_e,be,Ne,rt,mt){if(Y===ri){m===!0&&(H(3042),m=!1);return}if(m===!1&&(se(3042),m=!0),Y!==Vy){if(Y!==_||mt!==D){if((E!==ir||R!==ir)&&(n.blendEquation(32774),E=ir,R=ir),mt)switch(Y){case ss:n.blendFuncSeparate(1,771,1,771);break;case xh:n.blendFunc(1,1);break;case _h:n.blendFuncSeparate(0,0,769,771);break;case wh:n.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",Y);break}else switch(Y){case ss:n.blendFuncSeparate(770,771,1,771);break;case xh:n.blendFunc(770,1);break;case _h:n.blendFunc(0,769);break;case wh:n.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",Y);break}p=null,A=null,M=null,L=null,_=Y,D=mt}return}be=be||pe,Ne=Ne||le,rt=rt||_e,(pe!==E||be!==R)&&(n.blendEquationSeparate(de[pe],de[be]),E=pe,R=be),(le!==p||_e!==A||Ne!==M||rt!==L)&&(n.blendFuncSeparate(me[le],me[_e],me[Ne],me[rt]),p=le,A=_e,M=Ne,L=rt),_=Y,D=null}function I(Y,pe){Y.side===_r?H(2884):se(2884);let le=Y.side===gt;pe&&(le=!le),O(le),Y.blending===ss&&Y.transparent===!1?ye(ri):ye(Y.blending,Y.blendEquation,Y.blendSrc,Y.blendDst,Y.blendEquationAlpha,Y.blendSrcAlpha,Y.blendDstAlpha,Y.premultipliedAlpha),l.setFunc(Y.depthFunc),l.setTest(Y.depthTest),l.setMask(Y.depthWrite),a.setMask(Y.colorWrite);const _e=Y.stencilWrite;c.setTest(_e),_e&&(c.setMask(Y.stencilWriteMask),c.setFunc(Y.stencilFunc,Y.stencilRef,Y.stencilFuncMask),c.setOp(Y.stencilFail,Y.stencilZFail,Y.stencilZPass)),X(Y.polygonOffset,Y.polygonOffsetFactor,Y.polygonOffsetUnits),Y.alphaToCoverage===!0?se(32926):H(32926)}function O(Y){C!==Y&&(Y?n.frontFace(2304):n.frontFace(2305),C=Y)}function Q(Y){Y!==Ny?(se(2884),Y!==k&&(Y===yh?n.cullFace(1029):Y===Oy?n.cullFace(1028):n.cullFace(1032))):H(2884),k=Y}function J(Y){Y!==U&&(b&&n.lineWidth(Y),U=Y)}function X(Y,pe,le){Y?(se(32823),(F!==pe||S!==le)&&(n.polygonOffset(pe,le),F=pe,S=le)):H(32823)}function B(Y){Y?se(3089):H(3089)}function P(Y){Y===void 0&&(Y=33984+G-1),v!==Y&&(n.activeTexture(Y),v=Y)}function K(Y,pe){v===null&&P();let le=w[v];le===void 0&&(le={type:void 0,texture:void 0},w[v]=le),(le.type!==Y||le.texture!==pe)&&(n.bindTexture(Y,pe||te[Y]),le.type=Y,le.texture=pe)}function j(){const Y=w[v];Y!==void 0&&Y.type!==void 0&&(n.bindTexture(Y.type,null),Y.type=void 0,Y.texture=void 0)}function $(){try{n.compressedTexImage2D.apply(n,arguments)}catch(Y){console.error("THREE.WebGLState:",Y)}}function oe(){try{n.texImage2D.apply(n,arguments)}catch(Y){console.error("THREE.WebGLState:",Y)}}function ue(){try{n.texImage3D.apply(n,arguments)}catch(Y){console.error("THREE.WebGLState:",Y)}}function ce(Y){z.equals(Y)===!1&&(n.scissor(Y.x,Y.y,Y.z,Y.w),z.copy(Y))}function Ae(Y){Z.equals(Y)===!1&&(n.viewport(Y.x,Y.y,Y.z,Y.w),Z.copy(Y))}function ge(){n.disable(3042),n.disable(2884),n.disable(2929),n.disable(32823),n.disable(3089),n.disable(2960),n.disable(32926),n.blendEquation(32774),n.blendFunc(1,0),n.blendFuncSeparate(1,0,1,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(513),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(519,0,4294967295),n.stencilOp(7680,7680,7680),n.clearStencil(0),n.cullFace(1029),n.frontFace(2305),n.polygonOffset(0,0),n.activeTexture(33984),n.bindFramebuffer(36160,null),i===!0&&(n.bindFramebuffer(36009,null),n.bindFramebuffer(36008,null)),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),u={},v=null,w={},h=null,f={},d=null,m=!1,_=null,E=null,p=null,A=null,R=null,M=null,L=null,D=!1,C=null,k=null,U=null,F=null,S=null,z.set(0,0,n.canvas.width,n.canvas.height),Z.set(0,0,n.canvas.width,n.canvas.height),a.reset(),l.reset(),c.reset()}return{buffers:{color:a,depth:l,stencil:c},enable:se,disable:H,bindFramebuffer:ie,bindXRFramebuffer:W,useProgram:fe,setBlending:ye,setMaterial:I,setFlipSided:O,setCullFace:Q,setLineWidth:J,setPolygonOffset:X,setScissorTest:B,activeTexture:P,bindTexture:K,unbindTexture:j,compressedTexImage2D:$,texImage2D:oe,texImage3D:ue,scissor:ce,viewport:Ae,reset:ge}}function kS(n,e,t,i,r,s,o){const a=r.isWebGL2,l=r.maxTextures,c=r.maxCubemapSize,u=r.maxTextureSize,h=r.maxSamples,f=new WeakMap;let d,m=!1;try{m=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function _(B,P){return m?new OffscreenCanvas(B,P):document.createElementNS("http://www.w3.org/1999/xhtml","canvas")}function E(B,P,K,j){let $=1;if((B.width>j||B.height>j)&&($=j/Math.max(B.width,B.height)),$<1||P===!0)if(typeof HTMLImageElement<"u"&&B instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&B instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&B instanceof ImageBitmap){const oe=P?p_:Math.floor,ue=oe($*B.width),ce=oe($*B.height);d===void 0&&(d=_(ue,ce));const Ae=K?_(ue,ce):d;return Ae.width=ue,Ae.height=ce,Ae.getContext("2d").drawImage(B,0,0,ue,ce),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+B.width+"x"+B.height+") to ("+ue+"x"+ce+")."),Ae}else return"data"in B&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+B.width+"x"+B.height+")."),B;return B}function p(B){return Uh(B.width)&&Uh(B.height)}function A(B){return a?!1:B.wrapS!==Gt||B.wrapT!==Gt||B.minFilter!==yt&&B.minFilter!==Yt}function R(B,P){return B.generateMipmaps&&P&&B.minFilter!==yt&&B.minFilter!==Yt}function M(B,P,K,j,$=1){n.generateMipmap(B);const oe=i.get(P);oe.__maxMipLevel=Math.log2(Math.max(K,j,$))}function L(B,P,K){if(a===!1)return P;if(B!==null){if(n[B]!==void 0)return n[B];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+B+"'")}let j=P;return P===6403&&(K===5126&&(j=33326),K===5131&&(j=33325),K===5121&&(j=33321)),P===6407&&(K===5126&&(j=34837),K===5131&&(j=34843),K===5121&&(j=32849)),P===6408&&(K===5126&&(j=34836),K===5131&&(j=34842),K===5121&&(j=32856)),(j===33325||j===33326||j===34842||j===34836)&&e.get("EXT_color_buffer_float"),j}function D(B){return B===yt||B===Sh||B===Eh?9728:9729}function C(B){const P=B.target;P.removeEventListener("dispose",C),U(P),P.isVideoTexture&&f.delete(P),o.memory.textures--}function k(B){const P=B.target;P.removeEventListener("dispose",k),F(P)}function U(B){const P=i.get(B);P.__webglInit!==void 0&&(n.deleteTexture(P.__webglTexture),i.remove(B))}function F(B){const P=B.texture,K=i.get(B),j=i.get(P);if(!!B){if(j.__webglTexture!==void 0&&(n.deleteTexture(j.__webglTexture),o.memory.textures--),B.depthTexture&&B.depthTexture.dispose(),B.isWebGLCubeRenderTarget)for(let $=0;$<6;$++)n.deleteFramebuffer(K.__webglFramebuffer[$]),K.__webglDepthbuffer&&n.deleteRenderbuffer(K.__webglDepthbuffer[$]);else n.deleteFramebuffer(K.__webglFramebuffer),K.__webglDepthbuffer&&n.deleteRenderbuffer(K.__webglDepthbuffer),K.__webglMultisampledFramebuffer&&n.deleteFramebuffer(K.__webglMultisampledFramebuffer),K.__webglColorRenderbuffer&&n.deleteRenderbuffer(K.__webglColorRenderbuffer),K.__webglDepthRenderbuffer&&n.deleteRenderbuffer(K.__webglDepthRenderbuffer);if(B.isWebGLMultipleRenderTargets)for(let $=0,oe=P.length;$<oe;$++){const ue=i.get(P[$]);ue.__webglTexture&&(n.deleteTexture(ue.__webglTexture),o.memory.textures--),i.remove(P[$])}i.remove(P),i.remove(B)}}let S=0;function G(){S=0}function b(){const B=S;return B>=l&&console.warn("THREE.WebGLTextures: Trying to use "+B+" texture units while this GPU supports only "+l),S+=1,B}function T(B,P){const K=i.get(B);if(B.isVideoTexture&&I(B),B.version>0&&K.__version!==B.version){const j=B.image;if(j===void 0)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined");else if(j.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{ee(K,B,P);return}}t.activeTexture(33984+P),t.bindTexture(3553,K.__webglTexture)}function y(B,P){const K=i.get(B);if(B.version>0&&K.__version!==B.version){ee(K,B,P);return}t.activeTexture(33984+P),t.bindTexture(35866,K.__webglTexture)}function v(B,P){const K=i.get(B);if(B.version>0&&K.__version!==B.version){ee(K,B,P);return}t.activeTexture(33984+P),t.bindTexture(32879,K.__webglTexture)}function w(B,P){const K=i.get(B);if(B.version>0&&K.__version!==B.version){te(K,B,P);return}t.activeTexture(33984+P),t.bindTexture(34067,K.__webglTexture)}const g={[ec]:10497,[Gt]:33071,[tc]:33648},N={[yt]:9728,[Sh]:9984,[Eh]:9986,[Yt]:9729,[hx]:9985,[ya]:9987};function z(B,P,K){if(K?(n.texParameteri(B,10242,g[P.wrapS]),n.texParameteri(B,10243,g[P.wrapT]),(B===32879||B===35866)&&n.texParameteri(B,32882,g[P.wrapR]),n.texParameteri(B,10240,N[P.magFilter]),n.texParameteri(B,10241,N[P.minFilter])):(n.texParameteri(B,10242,33071),n.texParameteri(B,10243,33071),(B===32879||B===35866)&&n.texParameteri(B,32882,33071),(P.wrapS!==Gt||P.wrapT!==Gt)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),n.texParameteri(B,10240,D(P.magFilter)),n.texParameteri(B,10241,D(P.minFilter)),P.minFilter!==yt&&P.minFilter!==Yt&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),e.has("EXT_texture_filter_anisotropic")===!0){const j=e.get("EXT_texture_filter_anisotropic");if(P.type===Ti&&e.has("OES_texture_float_linear")===!1||a===!1&&P.type===pr&&e.has("OES_texture_half_float_linear")===!1)return;(P.anisotropy>1||i.get(P).__currentAnisotropy)&&(n.texParameterf(B,j.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(P.anisotropy,r.getMaxAnisotropy())),i.get(P).__currentAnisotropy=P.anisotropy)}}function Z(B,P){B.__webglInit===void 0&&(B.__webglInit=!0,P.addEventListener("dispose",C),B.__webglTexture=n.createTexture(),o.memory.textures++)}function ee(B,P,K){let j=3553;P.isDataTexture2DArray&&(j=35866),P.isDataTexture3D&&(j=32879),Z(B,P),t.activeTexture(33984+K),t.bindTexture(j,B.__webglTexture),n.pixelStorei(37440,P.flipY),n.pixelStorei(37441,P.premultiplyAlpha),n.pixelStorei(3317,P.unpackAlignment),n.pixelStorei(37443,0);const $=A(P)&&p(P.image)===!1,oe=E(P.image,$,!1,u),ue=p(oe)||a,ce=s.convert(P.format);let Ae=s.convert(P.type),ge=L(P.internalFormat,ce,Ae);z(j,P,ue);let Y;const pe=P.mipmaps;if(P.isDepthTexture)ge=6402,a?P.type===Ti?ge=36012:P.type===Bo?ge=33190:P.type===os?ge=35056:ge=33189:P.type===Ti&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),P.format===mr&&ge===6402&&P.type!==Qo&&P.type!==Bo&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),P.type=Qo,Ae=s.convert(P.type)),P.format===ws&&ge===6402&&(ge=34041,P.type!==os&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),P.type=os,Ae=s.convert(P.type))),t.texImage2D(3553,0,ge,oe.width,oe.height,0,ce,Ae,null);else if(P.isDataTexture)if(pe.length>0&&ue){for(let le=0,_e=pe.length;le<_e;le++)Y=pe[le],t.texImage2D(3553,le,ge,Y.width,Y.height,0,ce,Ae,Y.data);P.generateMipmaps=!1,B.__maxMipLevel=pe.length-1}else t.texImage2D(3553,0,ge,oe.width,oe.height,0,ce,Ae,oe.data),B.__maxMipLevel=0;else if(P.isCompressedTexture){for(let le=0,_e=pe.length;le<_e;le++)Y=pe[le],P.format!==ln&&P.format!==Pi?ce!==null?t.compressedTexImage2D(3553,le,ge,Y.width,Y.height,0,Y.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):t.texImage2D(3553,le,ge,Y.width,Y.height,0,ce,Ae,Y.data);B.__maxMipLevel=pe.length-1}else if(P.isDataTexture2DArray)t.texImage3D(35866,0,ge,oe.width,oe.height,oe.depth,0,ce,Ae,oe.data),B.__maxMipLevel=0;else if(P.isDataTexture3D)t.texImage3D(32879,0,ge,oe.width,oe.height,oe.depth,0,ce,Ae,oe.data),B.__maxMipLevel=0;else if(pe.length>0&&ue){for(let le=0,_e=pe.length;le<_e;le++)Y=pe[le],t.texImage2D(3553,le,ge,ce,Ae,Y);P.generateMipmaps=!1,B.__maxMipLevel=pe.length-1}else t.texImage2D(3553,0,ge,ce,Ae,oe),B.__maxMipLevel=0;R(P,ue)&&M(j,P,oe.width,oe.height),B.__version=P.version,P.onUpdate&&P.onUpdate(P)}function te(B,P,K){if(P.image.length!==6)return;Z(B,P),t.activeTexture(33984+K),t.bindTexture(34067,B.__webglTexture),n.pixelStorei(37440,P.flipY),n.pixelStorei(37441,P.premultiplyAlpha),n.pixelStorei(3317,P.unpackAlignment),n.pixelStorei(37443,0);const j=P&&(P.isCompressedTexture||P.image[0].isCompressedTexture),$=P.image[0]&&P.image[0].isDataTexture,oe=[];for(let le=0;le<6;le++)!j&&!$?oe[le]=E(P.image[le],!1,!0,c):oe[le]=$?P.image[le].image:P.image[le];const ue=oe[0],ce=p(ue)||a,Ae=s.convert(P.format),ge=s.convert(P.type),Y=L(P.internalFormat,Ae,ge);z(34067,P,ce);let pe;if(j){for(let le=0;le<6;le++){pe=oe[le].mipmaps;for(let _e=0;_e<pe.length;_e++){const be=pe[_e];P.format!==ln&&P.format!==Pi?Ae!==null?t.compressedTexImage2D(34069+le,_e,Y,be.width,be.height,0,be.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):t.texImage2D(34069+le,_e,Y,be.width,be.height,0,Ae,ge,be.data)}}B.__maxMipLevel=pe.length-1}else{pe=P.mipmaps;for(let le=0;le<6;le++)if($){t.texImage2D(34069+le,0,Y,oe[le].width,oe[le].height,0,Ae,ge,oe[le].data);for(let _e=0;_e<pe.length;_e++){const Ne=pe[_e].image[le].image;t.texImage2D(34069+le,_e+1,Y,Ne.width,Ne.height,0,Ae,ge,Ne.data)}}else{t.texImage2D(34069+le,0,Y,Ae,ge,oe[le]);for(let _e=0;_e<pe.length;_e++){const be=pe[_e];t.texImage2D(34069+le,_e+1,Y,Ae,ge,be.image[le])}}B.__maxMipLevel=pe.length}R(P,ce)&&M(34067,P,ue.width,ue.height),B.__version=P.version,P.onUpdate&&P.onUpdate(P)}function se(B,P,K,j,$){const oe=s.convert(K.format),ue=s.convert(K.type),ce=L(K.internalFormat,oe,ue);$===32879||$===35866?t.texImage3D($,0,ce,P.width,P.height,P.depth,0,oe,ue,null):t.texImage2D($,0,ce,P.width,P.height,0,oe,ue,null),t.bindFramebuffer(36160,B),n.framebufferTexture2D(36160,j,$,i.get(K).__webglTexture,0),t.bindFramebuffer(36160,null)}function H(B,P,K){if(n.bindRenderbuffer(36161,B),P.depthBuffer&&!P.stencilBuffer){let j=33189;if(K){const $=P.depthTexture;$&&$.isDepthTexture&&($.type===Ti?j=36012:$.type===Bo&&(j=33190));const oe=ye(P);n.renderbufferStorageMultisample(36161,oe,j,P.width,P.height)}else n.renderbufferStorage(36161,j,P.width,P.height);n.framebufferRenderbuffer(36160,36096,36161,B)}else if(P.depthBuffer&&P.stencilBuffer){if(K){const j=ye(P);n.renderbufferStorageMultisample(36161,j,35056,P.width,P.height)}else n.renderbufferStorage(36161,34041,P.width,P.height);n.framebufferRenderbuffer(36160,33306,36161,B)}else{const j=P.isWebGLMultipleRenderTargets===!0?P.texture[0]:P.texture,$=s.convert(j.format),oe=s.convert(j.type),ue=L(j.internalFormat,$,oe);if(K){const ce=ye(P);n.renderbufferStorageMultisample(36161,ce,ue,P.width,P.height)}else n.renderbufferStorage(36161,ue,P.width,P.height)}n.bindRenderbuffer(36161,null)}function W(B,P){if(P&&P.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(36160,B),!(P.depthTexture&&P.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!i.get(P.depthTexture).__webglTexture||P.depthTexture.image.width!==P.width||P.depthTexture.image.height!==P.height)&&(P.depthTexture.image.width=P.width,P.depthTexture.image.height=P.height,P.depthTexture.needsUpdate=!0),T(P.depthTexture,0);const j=i.get(P.depthTexture).__webglTexture;if(P.depthTexture.format===mr)n.framebufferTexture2D(36160,36096,3553,j,0);else if(P.depthTexture.format===ws)n.framebufferTexture2D(36160,33306,3553,j,0);else throw new Error("Unknown depthTexture format")}function ie(B){const P=i.get(B),K=B.isWebGLCubeRenderTarget===!0;if(B.depthTexture){if(K)throw new Error("target.depthTexture not supported in Cube render targets");W(P.__webglFramebuffer,B)}else if(K){P.__webglDepthbuffer=[];for(let j=0;j<6;j++)t.bindFramebuffer(36160,P.__webglFramebuffer[j]),P.__webglDepthbuffer[j]=n.createRenderbuffer(),H(P.__webglDepthbuffer[j],B,!1)}else t.bindFramebuffer(36160,P.__webglFramebuffer),P.__webglDepthbuffer=n.createRenderbuffer(),H(P.__webglDepthbuffer,B,!1);t.bindFramebuffer(36160,null)}function fe(B){const P=B.texture,K=i.get(B),j=i.get(P);B.addEventListener("dispose",k),B.isWebGLMultipleRenderTargets!==!0&&(j.__webglTexture=n.createTexture(),j.__version=P.version,o.memory.textures++);const $=B.isWebGLCubeRenderTarget===!0,oe=B.isWebGLMultipleRenderTargets===!0,ue=B.isWebGLMultisampleRenderTarget===!0,ce=P.isDataTexture3D||P.isDataTexture2DArray,Ae=p(B)||a;if(a&&P.format===Pi&&(P.type===Ti||P.type===pr)&&(P.format=ln,console.warn("THREE.WebGLRenderer: Rendering to textures with RGB format is not supported. Using RGBA format instead.")),$){K.__webglFramebuffer=[];for(let ge=0;ge<6;ge++)K.__webglFramebuffer[ge]=n.createFramebuffer()}else if(K.__webglFramebuffer=n.createFramebuffer(),oe)if(r.drawBuffers){const ge=B.texture;for(let Y=0,pe=ge.length;Y<pe;Y++){const le=i.get(ge[Y]);le.__webglTexture===void 0&&(le.__webglTexture=n.createTexture(),o.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");else if(ue)if(a){K.__webglMultisampledFramebuffer=n.createFramebuffer(),K.__webglColorRenderbuffer=n.createRenderbuffer(),n.bindRenderbuffer(36161,K.__webglColorRenderbuffer);const ge=s.convert(P.format),Y=s.convert(P.type),pe=L(P.internalFormat,ge,Y),le=ye(B);n.renderbufferStorageMultisample(36161,le,pe,B.width,B.height),t.bindFramebuffer(36160,K.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(36160,36064,36161,K.__webglColorRenderbuffer),n.bindRenderbuffer(36161,null),B.depthBuffer&&(K.__webglDepthRenderbuffer=n.createRenderbuffer(),H(K.__webglDepthRenderbuffer,B,!0)),t.bindFramebuffer(36160,null)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.");if($){t.bindTexture(34067,j.__webglTexture),z(34067,P,Ae);for(let ge=0;ge<6;ge++)se(K.__webglFramebuffer[ge],B,P,36064,34069+ge);R(P,Ae)&&M(34067,P,B.width,B.height),t.bindTexture(34067,null)}else if(oe){const ge=B.texture;for(let Y=0,pe=ge.length;Y<pe;Y++){const le=ge[Y],_e=i.get(le);t.bindTexture(3553,_e.__webglTexture),z(3553,le,Ae),se(K.__webglFramebuffer,B,le,36064+Y,3553),R(le,Ae)&&M(3553,le,B.width,B.height)}t.bindTexture(3553,null)}else{let ge=3553;ce&&(a?ge=P.isDataTexture3D?32879:35866:console.warn("THREE.DataTexture3D and THREE.DataTexture2DArray only supported with WebGL2.")),t.bindTexture(ge,j.__webglTexture),z(ge,P,Ae),se(K.__webglFramebuffer,B,P,36064,ge),R(P,Ae)&&M(ge,P,B.width,B.height,B.depth),t.bindTexture(ge,null)}B.depthBuffer&&ie(B)}function de(B){const P=p(B)||a,K=B.isWebGLMultipleRenderTargets===!0?B.texture:[B.texture];for(let j=0,$=K.length;j<$;j++){const oe=K[j];if(R(oe,P)){const ue=B.isWebGLCubeRenderTarget?34067:3553,ce=i.get(oe).__webglTexture;t.bindTexture(ue,ce),M(ue,oe,B.width,B.height),t.bindTexture(ue,null)}}}function me(B){if(B.isWebGLMultisampleRenderTarget)if(a){const P=B.width,K=B.height;let j=16384;B.depthBuffer&&(j|=256),B.stencilBuffer&&(j|=1024);const $=i.get(B);t.bindFramebuffer(36008,$.__webglMultisampledFramebuffer),t.bindFramebuffer(36009,$.__webglFramebuffer),n.blitFramebuffer(0,0,P,K,0,0,P,K,j,9728),t.bindFramebuffer(36008,null),t.bindFramebuffer(36009,$.__webglMultisampledFramebuffer)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.")}function ye(B){return a&&B.isWebGLMultisampleRenderTarget?Math.min(h,B.samples):0}function I(B){const P=o.render.frame;f.get(B)!==P&&(f.set(B,P),B.update())}let O=!1,Q=!1;function J(B,P){B&&B.isWebGLRenderTarget&&(O===!1&&(console.warn("THREE.WebGLTextures.safeSetTexture2D: don't use render targets as textures. Use their .texture property instead."),O=!0),B=B.texture),T(B,P)}function X(B,P){B&&B.isWebGLCubeRenderTarget&&(Q===!1&&(console.warn("THREE.WebGLTextures.safeSetTextureCube: don't use cube render targets as textures. Use their .texture property instead."),Q=!0),B=B.texture),w(B,P)}this.allocateTextureUnit=b,this.resetTextureUnits=G,this.setTexture2D=T,this.setTexture2DArray=y,this.setTexture3D=v,this.setTextureCube=w,this.setupRenderTarget=fe,this.updateRenderTargetMipmap=de,this.updateMultisampleRenderTarget=me,this.safeSetTexture2D=J,this.safeSetTextureCube=X}function zS(n,e,t){const i=t.isWebGL2;function r(s){let o;if(s===wr)return 5121;if(s===mx)return 32819;if(s===gx)return 32820;if(s===Ax)return 33635;if(s===fx)return 5120;if(s===dx)return 5122;if(s===Qo)return 5123;if(s===px)return 5124;if(s===Bo)return 5125;if(s===Ti)return 5126;if(s===pr)return i?5131:(o=e.get("OES_texture_half_float"),o!==null?o.HALF_FLOAT_OES:null);if(s===vx)return 6406;if(s===Pi)return 6407;if(s===ln)return 6408;if(s===yx)return 6409;if(s===xx)return 6410;if(s===mr)return 6402;if(s===ws)return 34041;if(s===wx)return 6403;if(s===bx)return 36244;if(s===Mx)return 33319;if(s===Sx)return 33320;if(s===Ex)return 36248;if(s===Tx)return 36249;if(s===Th||s===Ch||s===Ih||s===Lh)if(o=e.get("WEBGL_compressed_texture_s3tc"),o!==null){if(s===Th)return o.COMPRESSED_RGB_S3TC_DXT1_EXT;if(s===Ch)return o.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(s===Ih)return o.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(s===Lh)return o.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(s===Rh||s===Ph||s===Dh||s===Bh)if(o=e.get("WEBGL_compressed_texture_pvrtc"),o!==null){if(s===Rh)return o.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(s===Ph)return o.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(s===Dh)return o.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(s===Bh)return o.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(s===Cx)return o=e.get("WEBGL_compressed_texture_etc1"),o!==null?o.COMPRESSED_RGB_ETC1_WEBGL:null;if((s===Fh||s===Nh)&&(o=e.get("WEBGL_compressed_texture_etc"),o!==null)){if(s===Fh)return o.COMPRESSED_RGB8_ETC2;if(s===Nh)return o.COMPRESSED_RGBA8_ETC2_EAC}if(s===Ix||s===Lx||s===Rx||s===Px||s===Dx||s===Bx||s===Fx||s===Nx||s===Ox||s===Ux||s===Vx||s===kx||s===zx||s===Hx||s===Wx||s===qx||s===Qx||s===Kx||s===Yx||s===Zx||s===Jx||s===Xx||s===jx||s===$x||s===e_||s===t_||s===n_||s===i_)return o=e.get("WEBGL_compressed_texture_astc"),o!==null?s:null;if(s===Gx)return o=e.get("EXT_texture_compression_bptc"),o!==null?s:null;if(s===os)return i?34042:(o=e.get("WEBGL_depth_texture"),o!==null?o.UNSIGNED_INT_24_8_WEBGL:null)}return{convert:r}}class rm extends Dt{constructor(e=[]){super(),this.cameras=e}}rm.prototype.isArrayCamera=!0;class or extends We{constructor(){super(),this.type="Group"}}or.prototype.isGroup=!0;const HS={type:"move"};class wl{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new or,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new or,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new q,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new q),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new or,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new q,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new q),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,i){let r=null,s=null,o=null;const a=this._targetRay,l=this._grip,c=this._hand;if(e&&t.session.visibilityState!=="visible-blurred")if(a!==null&&(r=t.getPose(e.targetRaySpace,i),r!==null&&(a.matrix.fromArray(r.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),r.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(r.linearVelocity)):a.hasLinearVelocity=!1,r.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(r.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(HS))),c&&e.hand){o=!0;for(const _ of e.hand.values()){const E=t.getJointPose(_,i);if(c.joints[_.jointName]===void 0){const A=new or;A.matrixAutoUpdate=!1,A.visible=!1,c.joints[_.jointName]=A,c.add(A)}const p=c.joints[_.jointName];E!==null&&(p.matrix.fromArray(E.transform.matrix),p.matrix.decompose(p.position,p.rotation,p.scale),p.jointRadius=E.radius),p.visible=E!==null}const u=c.joints["index-finger-tip"],h=c.joints["thumb-tip"],f=u.position.distanceTo(h.position),d=.02,m=.005;c.inputState.pinching&&f>d+m?(c.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!c.inputState.pinching&&f<=d-m&&(c.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else l!==null&&e.gripSpace&&(s=t.getPose(e.gripSpace,i),s!==null&&(l.matrix.fromArray(s.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),s.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(s.linearVelocity)):l.hasLinearVelocity=!1,s.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(s.angularVelocity)):l.hasAngularVelocity=!1));return a!==null&&(a.visible=r!==null),l!==null&&(l.visible=s!==null),c!==null&&(c.visible=o!==null),this}}class GS extends Bi{constructor(e,t){super();const i=this,r=e.state;let s=null,o=1,a=null,l="local-floor",c=null,u=null,h=null,f=null,d=null;const m=[],_=new Map,E=new Dt;E.layers.enable(1),E.viewport=new Ze;const p=new Dt;p.layers.enable(2),p.viewport=new Ze;const A=[E,p],R=new rm;R.layers.enable(1),R.layers.enable(2);let M=null,L=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(v){let w=m[v];return w===void 0&&(w=new wl,m[v]=w),w.getTargetRaySpace()},this.getControllerGrip=function(v){let w=m[v];return w===void 0&&(w=new wl,m[v]=w),w.getGripSpace()},this.getHand=function(v){let w=m[v];return w===void 0&&(w=new wl,m[v]=w),w.getHandSpace()};function D(v){const w=_.get(v.inputSource);w&&w.dispatchEvent({type:v.type,data:v.inputSource})}function C(){_.forEach(function(v,w){v.disconnect(w)}),_.clear(),M=null,L=null,r.bindXRFramebuffer(null),e.setRenderTarget(e.getRenderTarget()),y.stop(),i.isPresenting=!1,i.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(v){o=v,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(v){l=v,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return a},this.getSession=function(){return s},this.setSession=async function(v){if(s=v,s!==null){s.addEventListener("select",D),s.addEventListener("selectstart",D),s.addEventListener("selectend",D),s.addEventListener("squeeze",D),s.addEventListener("squeezestart",D),s.addEventListener("squeezeend",D),s.addEventListener("end",C),s.addEventListener("inputsourceschange",k);const w=t.getContextAttributes();if(w.xrCompatible!==!0&&await t.makeXRCompatible(),s.renderState.layers===void 0){const g={antialias:w.antialias,alpha:w.alpha,depth:w.depth,stencil:w.stencil,framebufferScaleFactor:o};d=new XRWebGLLayer(s,t,g),s.updateRenderState({baseLayer:d})}else{let g=0;if(w.antialias){const N={antialias:!0,alpha:w.alpha,depth:w.depth,stencil:w.stencil,framebufferScaleFactor:o};d=new XRWebGLLayer(s,t,N),s.updateRenderState({layers:[d]})}else{w.depth&&(g=w.stencil?34041:6402);const N={colorFormat:w.alpha?6408:6407,depthFormat:g,scaleFactor:o};u=new XRWebGLBinding(s,t),f=u.createProjectionLayer(N),h=t.createFramebuffer(),s.updateRenderState({layers:[f]})}}a=await s.requestReferenceSpace(l),y.setContext(s),y.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}};function k(v){const w=s.inputSources;for(let g=0;g<m.length;g++)_.set(w[g],m[g]);for(let g=0;g<v.removed.length;g++){const N=v.removed[g],z=_.get(N);z&&(z.dispatchEvent({type:"disconnected",data:N}),_.delete(N))}for(let g=0;g<v.added.length;g++){const N=v.added[g],z=_.get(N);z&&z.dispatchEvent({type:"connected",data:N})}}const U=new q,F=new q;function S(v,w,g){U.setFromMatrixPosition(w.matrixWorld),F.setFromMatrixPosition(g.matrixWorld);const N=U.distanceTo(F),z=w.projectionMatrix.elements,Z=g.projectionMatrix.elements,ee=z[14]/(z[10]-1),te=z[14]/(z[10]+1),se=(z[9]+1)/z[5],H=(z[9]-1)/z[5],W=(z[8]-1)/z[0],ie=(Z[8]+1)/Z[0],fe=ee*W,de=ee*ie,me=N/(-W+ie),ye=me*-W;w.matrixWorld.decompose(v.position,v.quaternion,v.scale),v.translateX(ye),v.translateZ(me),v.matrixWorld.compose(v.position,v.quaternion,v.scale),v.matrixWorldInverse.copy(v.matrixWorld).invert();const I=ee+me,O=te+me,Q=fe-ye,J=de+(N-ye),X=se*te/O*I,B=H*te/O*I;v.projectionMatrix.makePerspective(Q,J,X,B,I,O)}function G(v,w){w===null?v.matrixWorld.copy(v.matrix):v.matrixWorld.multiplyMatrices(w.matrixWorld,v.matrix),v.matrixWorldInverse.copy(v.matrixWorld).invert()}this.updateCamera=function(v){if(s===null)return;R.near=p.near=E.near=v.near,R.far=p.far=E.far=v.far,(M!==R.near||L!==R.far)&&(s.updateRenderState({depthNear:R.near,depthFar:R.far}),M=R.near,L=R.far);const w=v.parent,g=R.cameras;G(R,w);for(let z=0;z<g.length;z++)G(g[z],w);R.matrixWorld.decompose(R.position,R.quaternion,R.scale),v.position.copy(R.position),v.quaternion.copy(R.quaternion),v.scale.copy(R.scale),v.matrix.copy(R.matrix),v.matrixWorld.copy(R.matrixWorld);const N=v.children;for(let z=0,Z=N.length;z<Z;z++)N[z].updateMatrixWorld(!0);g.length===2?S(R,E,p):R.projectionMatrix.copy(E.projectionMatrix)},this.getCamera=function(){return R},this.getFoveation=function(){if(f!==null)return f.fixedFoveation;if(d!==null)return d.fixedFoveation},this.setFoveation=function(v){f!==null&&(f.fixedFoveation=v),d!==null&&d.fixedFoveation!==void 0&&(d.fixedFoveation=v)};let b=null;function T(v,w){if(c=w.getViewerPose(a),c!==null){const N=c.views;d!==null&&r.bindXRFramebuffer(d.framebuffer);let z=!1;N.length!==R.cameras.length&&(R.cameras.length=0,z=!0);for(let Z=0;Z<N.length;Z++){const ee=N[Z];let te=null;if(d!==null)te=d.getViewport(ee);else{const H=u.getViewSubImage(f,ee);r.bindXRFramebuffer(h),H.depthStencilTexture!==void 0&&t.framebufferTexture2D(36160,36096,3553,H.depthStencilTexture,0),t.framebufferTexture2D(36160,36064,3553,H.colorTexture,0),te=H.viewport}const se=A[Z];se.matrix.fromArray(ee.transform.matrix),se.projectionMatrix.fromArray(ee.projectionMatrix),se.viewport.set(te.x,te.y,te.width,te.height),Z===0&&R.matrix.copy(se.matrix),z===!0&&R.cameras.push(se)}}const g=s.inputSources;for(let N=0;N<m.length;N++){const z=m[N],Z=g[N];z.update(Z,w,a)}b&&b(v,w)}const y=new Gp;y.setAnimationLoop(T),this.setAnimationLoop=function(v){b=v},this.dispose=function(){}}}function WS(n){function e(p,A){p.fogColor.value.copy(A.color),A.isFog?(p.fogNear.value=A.near,p.fogFar.value=A.far):A.isFogExp2&&(p.fogDensity.value=A.density)}function t(p,A,R,M,L){A.isMeshBasicMaterial?i(p,A):A.isMeshLambertMaterial?(i(p,A),l(p,A)):A.isMeshToonMaterial?(i(p,A),u(p,A)):A.isMeshPhongMaterial?(i(p,A),c(p,A)):A.isMeshStandardMaterial?(i(p,A),A.isMeshPhysicalMaterial?f(p,A,L):h(p,A)):A.isMeshMatcapMaterial?(i(p,A),d(p,A)):A.isMeshDepthMaterial?(i(p,A),m(p,A)):A.isMeshDistanceMaterial?(i(p,A),_(p,A)):A.isMeshNormalMaterial?(i(p,A),E(p,A)):A.isLineBasicMaterial?(r(p,A),A.isLineDashedMaterial&&s(p,A)):A.isPointsMaterial?o(p,A,R,M):A.isSpriteMaterial?a(p,A):A.isShadowMaterial?(p.color.value.copy(A.color),p.opacity.value=A.opacity):A.isShaderMaterial&&(A.uniformsNeedUpdate=!1)}function i(p,A){p.opacity.value=A.opacity,A.color&&p.diffuse.value.copy(A.color),A.emissive&&p.emissive.value.copy(A.emissive).multiplyScalar(A.emissiveIntensity),A.map&&(p.map.value=A.map),A.alphaMap&&(p.alphaMap.value=A.alphaMap),A.specularMap&&(p.specularMap.value=A.specularMap);const R=n.get(A).envMap;if(R){p.envMap.value=R,p.flipEnvMap.value=R.isCubeTexture&&R.isRenderTargetTexture===!1?-1:1,p.reflectivity.value=A.reflectivity,p.refractionRatio.value=A.refractionRatio;const D=n.get(R).__maxMipLevel;D!==void 0&&(p.maxMipLevel.value=D)}A.lightMap&&(p.lightMap.value=A.lightMap,p.lightMapIntensity.value=A.lightMapIntensity),A.aoMap&&(p.aoMap.value=A.aoMap,p.aoMapIntensity.value=A.aoMapIntensity);let M;A.map?M=A.map:A.specularMap?M=A.specularMap:A.displacementMap?M=A.displacementMap:A.normalMap?M=A.normalMap:A.bumpMap?M=A.bumpMap:A.roughnessMap?M=A.roughnessMap:A.metalnessMap?M=A.metalnessMap:A.alphaMap?M=A.alphaMap:A.emissiveMap?M=A.emissiveMap:A.clearcoatMap?M=A.clearcoatMap:A.clearcoatNormalMap?M=A.clearcoatNormalMap:A.clearcoatRoughnessMap?M=A.clearcoatRoughnessMap:A.specularIntensityMap?M=A.specularIntensityMap:A.specularTintMap&&(M=A.specularTintMap),M!==void 0&&(M.isWebGLRenderTarget&&(M=M.texture),M.matrixAutoUpdate===!0&&M.updateMatrix(),p.uvTransform.value.copy(M.matrix));let L;A.aoMap?L=A.aoMap:A.lightMap&&(L=A.lightMap),L!==void 0&&(L.isWebGLRenderTarget&&(L=L.texture),L.matrixAutoUpdate===!0&&L.updateMatrix(),p.uv2Transform.value.copy(L.matrix))}function r(p,A){p.diffuse.value.copy(A.color),p.opacity.value=A.opacity}function s(p,A){p.dashSize.value=A.dashSize,p.totalSize.value=A.dashSize+A.gapSize,p.scale.value=A.scale}function o(p,A,R,M){p.diffuse.value.copy(A.color),p.opacity.value=A.opacity,p.size.value=A.size*R,p.scale.value=M*.5,A.map&&(p.map.value=A.map),A.alphaMap&&(p.alphaMap.value=A.alphaMap);let L;A.map?L=A.map:A.alphaMap&&(L=A.alphaMap),L!==void 0&&(L.matrixAutoUpdate===!0&&L.updateMatrix(),p.uvTransform.value.copy(L.matrix))}function a(p,A){p.diffuse.value.copy(A.color),p.opacity.value=A.opacity,p.rotation.value=A.rotation,A.map&&(p.map.value=A.map),A.alphaMap&&(p.alphaMap.value=A.alphaMap);let R;A.map?R=A.map:A.alphaMap&&(R=A.alphaMap),R!==void 0&&(R.matrixAutoUpdate===!0&&R.updateMatrix(),p.uvTransform.value.copy(R.matrix))}function l(p,A){A.emissiveMap&&(p.emissiveMap.value=A.emissiveMap)}function c(p,A){p.specular.value.copy(A.specular),p.shininess.value=Math.max(A.shininess,1e-4),A.emissiveMap&&(p.emissiveMap.value=A.emissiveMap),A.bumpMap&&(p.bumpMap.value=A.bumpMap,p.bumpScale.value=A.bumpScale,A.side===gt&&(p.bumpScale.value*=-1)),A.normalMap&&(p.normalMap.value=A.normalMap,p.normalScale.value.copy(A.normalScale),A.side===gt&&p.normalScale.value.negate()),A.displacementMap&&(p.displacementMap.value=A.displacementMap,p.displacementScale.value=A.displacementScale,p.displacementBias.value=A.displacementBias)}function u(p,A){A.gradientMap&&(p.gradientMap.value=A.gradientMap),A.emissiveMap&&(p.emissiveMap.value=A.emissiveMap),A.bumpMap&&(p.bumpMap.value=A.bumpMap,p.bumpScale.value=A.bumpScale,A.side===gt&&(p.bumpScale.value*=-1)),A.normalMap&&(p.normalMap.value=A.normalMap,p.normalScale.value.copy(A.normalScale),A.side===gt&&p.normalScale.value.negate()),A.displacementMap&&(p.displacementMap.value=A.displacementMap,p.displacementScale.value=A.displacementScale,p.displacementBias.value=A.displacementBias)}function h(p,A){p.roughness.value=A.roughness,p.metalness.value=A.metalness,A.roughnessMap&&(p.roughnessMap.value=A.roughnessMap),A.metalnessMap&&(p.metalnessMap.value=A.metalnessMap),A.emissiveMap&&(p.emissiveMap.value=A.emissiveMap),A.bumpMap&&(p.bumpMap.value=A.bumpMap,p.bumpScale.value=A.bumpScale,A.side===gt&&(p.bumpScale.value*=-1)),A.normalMap&&(p.normalMap.value=A.normalMap,p.normalScale.value.copy(A.normalScale),A.side===gt&&p.normalScale.value.negate()),A.displacementMap&&(p.displacementMap.value=A.displacementMap,p.displacementScale.value=A.displacementScale,p.displacementBias.value=A.displacementBias),n.get(A).envMap&&(p.envMapIntensity.value=A.envMapIntensity)}function f(p,A,R){h(p,A),p.reflectivity.value=A.reflectivity,p.clearcoat.value=A.clearcoat,p.clearcoatRoughness.value=A.clearcoatRoughness,A.sheen&&p.sheen.value.copy(A.sheen),A.clearcoatMap&&(p.clearcoatMap.value=A.clearcoatMap),A.clearcoatRoughnessMap&&(p.clearcoatRoughnessMap.value=A.clearcoatRoughnessMap),A.clearcoatNormalMap&&(p.clearcoatNormalScale.value.copy(A.clearcoatNormalScale),p.clearcoatNormalMap.value=A.clearcoatNormalMap,A.side===gt&&p.clearcoatNormalScale.value.negate()),p.transmission.value=A.transmission,A.transmissionMap&&(p.transmissionMap.value=A.transmissionMap),A.transmission>0&&(p.transmissionSamplerMap.value=R.texture,p.transmissionSamplerSize.value.set(R.width,R.height)),p.thickness.value=A.thickness,A.thicknessMap&&(p.thicknessMap.value=A.thicknessMap),p.attenuationDistance.value=A.attenuationDistance,p.attenuationTint.value.copy(A.attenuationTint),p.specularIntensity.value=A.specularIntensity,p.specularTint.value.copy(A.specularTint),A.specularIntensityMap&&(p.specularIntensityMap.value=A.specularIntensityMap),A.specularTintMap&&(p.specularTintMap.value=A.specularTintMap)}function d(p,A){A.matcap&&(p.matcap.value=A.matcap),A.bumpMap&&(p.bumpMap.value=A.bumpMap,p.bumpScale.value=A.bumpScale,A.side===gt&&(p.bumpScale.value*=-1)),A.normalMap&&(p.normalMap.value=A.normalMap,p.normalScale.value.copy(A.normalScale),A.side===gt&&p.normalScale.value.negate()),A.displacementMap&&(p.displacementMap.value=A.displacementMap,p.displacementScale.value=A.displacementScale,p.displacementBias.value=A.displacementBias)}function m(p,A){A.displacementMap&&(p.displacementMap.value=A.displacementMap,p.displacementScale.value=A.displacementScale,p.displacementBias.value=A.displacementBias)}function _(p,A){A.displacementMap&&(p.displacementMap.value=A.displacementMap,p.displacementScale.value=A.displacementScale,p.displacementBias.value=A.displacementBias),p.referencePosition.value.copy(A.referencePosition),p.nearDistance.value=A.nearDistance,p.farDistance.value=A.farDistance}function E(p,A){A.bumpMap&&(p.bumpMap.value=A.bumpMap,p.bumpScale.value=A.bumpScale,A.side===gt&&(p.bumpScale.value*=-1)),A.normalMap&&(p.normalMap.value=A.normalMap,p.normalScale.value.copy(A.normalScale),A.side===gt&&p.normalScale.value.negate()),A.displacementMap&&(p.displacementMap.value=A.displacementMap,p.displacementScale.value=A.displacementScale,p.displacementBias.value=A.displacementBias)}return{refreshFogUniforms:e,refreshMaterialUniforms:t}}function qS(){const n=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");return n.style.display="block",n}function Ye(n={}){const e=n.canvas!==void 0?n.canvas:qS(),t=n.context!==void 0?n.context:null,i=n.alpha!==void 0?n.alpha:!1,r=n.depth!==void 0?n.depth:!0,s=n.stencil!==void 0?n.stencil:!0,o=n.antialias!==void 0?n.antialias:!1,a=n.premultipliedAlpha!==void 0?n.premultipliedAlpha:!0,l=n.preserveDrawingBuffer!==void 0?n.preserveDrawingBuffer:!1,c=n.powerPreference!==void 0?n.powerPreference:"default",u=n.failIfMajorPerformanceCaveat!==void 0?n.failIfMajorPerformanceCaveat:!1;let h=null,f=null;const d=[],m=[];this.domElement=e,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.outputEncoding=Vt,this.physicallyCorrectLights=!1,this.toneMapping=Ri,this.toneMappingExposure=1;const _=this;let E=!1,p=0,A=0,R=null,M=-1,L=null;const D=new Ze,C=new Ze;let k=null,U=e.width,F=e.height,S=1,G=null,b=null;const T=new Ze(0,0,U,F),y=new Ze(0,0,U,F);let v=!1;const w=[],g=new ba;let N=!1,z=!1,Z=null;const ee=new Ie,te=new q,se={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function H(){return R===null?S:1}let W=t;function ie(V,re){for(let ne=0;ne<V.length;ne++){const ae=V[ne],ve=e.getContext(ae,re);if(ve!==null)return ve}return null}try{const V={alpha:i,depth:r,stencil:s,antialias:o,premultipliedAlpha:a,preserveDrawingBuffer:l,powerPreference:c,failIfMajorPerformanceCaveat:u};if(e.addEventListener("webglcontextlost",rt,!1),e.addEventListener("webglcontextrestored",mt,!1),W===null){const re=["webgl2","webgl","experimental-webgl"];if(_.isWebGL1Renderer===!0&&re.shift(),W=ie(re,V),W===null)throw ie(re)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}W.getShaderPrecisionFormat===void 0&&(W.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(V){throw console.error("THREE.WebGLRenderer: "+V.message),V}let fe,de,me,ye,I,O,Q,J,X,B,P,K,j,$,oe,ue,ce,Ae,ge,Y,pe,le,_e;function be(){fe=new pM(W),de=new sM(W,fe,n),fe.init(de),le=new zS(W,fe,de),me=new VS(W,fe,de),w[0]=1029,ye=new AM,I=new CS,O=new kS(W,fe,me,I,de,le,ye),Q=new aM(_),J=new dM(_),X=new B_(W,de),_e=new iM(W,fe,X,de),B=new mM(W,X,ye,_e),P=new _M(W,B,X,ye),ge=new xM(W),ue=new oM(I),K=new TS(_,Q,J,fe,de,_e,ue),j=new WS(I),$=new LS(I),oe=new NS(fe,de),Ae=new nM(_,Q,me,P,a),ce=new im(_,P,de),Y=new rM(W,fe,ye,de),pe=new gM(W,fe,ye,de),ye.programs=K.programs,_.capabilities=de,_.extensions=fe,_.properties=I,_.renderLists=$,_.shadowMap=ce,_.state=me,_.info=ye}be();const Ne=new GS(_,W);this.xr=Ne,this.getContext=function(){return W},this.getContextAttributes=function(){return W.getContextAttributes()},this.forceContextLoss=function(){const V=fe.get("WEBGL_lose_context");V&&V.loseContext()},this.forceContextRestore=function(){const V=fe.get("WEBGL_lose_context");V&&V.restoreContext()},this.getPixelRatio=function(){return S},this.setPixelRatio=function(V){V!==void 0&&(S=V,this.setSize(U,F,!1))},this.getSize=function(V){return V.set(U,F)},this.setSize=function(V,re,ne){if(Ne.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}U=V,F=re,e.width=Math.floor(V*S),e.height=Math.floor(re*S),ne!==!1&&(e.style.width=V+"px",e.style.height=re+"px"),this.setViewport(0,0,V,re)},this.getDrawingBufferSize=function(V){return V.set(U*S,F*S).floor()},this.setDrawingBufferSize=function(V,re,ne){U=V,F=re,S=ne,e.width=Math.floor(V*ne),e.height=Math.floor(re*ne),this.setViewport(0,0,V,re)},this.getCurrentViewport=function(V){return V.copy(D)},this.getViewport=function(V){return V.copy(T)},this.setViewport=function(V,re,ne,ae){V.isVector4?T.set(V.x,V.y,V.z,V.w):T.set(V,re,ne,ae),me.viewport(D.copy(T).multiplyScalar(S).floor())},this.getScissor=function(V){return V.copy(y)},this.setScissor=function(V,re,ne,ae){V.isVector4?y.set(V.x,V.y,V.z,V.w):y.set(V,re,ne,ae),me.scissor(C.copy(y).multiplyScalar(S).floor())},this.getScissorTest=function(){return v},this.setScissorTest=function(V){me.setScissorTest(v=V)},this.setOpaqueSort=function(V){G=V},this.setTransparentSort=function(V){b=V},this.getClearColor=function(V){return V.copy(Ae.getClearColor())},this.setClearColor=function(){Ae.setClearColor.apply(Ae,arguments)},this.getClearAlpha=function(){return Ae.getClearAlpha()},this.setClearAlpha=function(){Ae.setClearAlpha.apply(Ae,arguments)},this.clear=function(V,re,ne){let ae=0;(V===void 0||V)&&(ae|=16384),(re===void 0||re)&&(ae|=256),(ne===void 0||ne)&&(ae|=1024),W.clear(ae)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",rt,!1),e.removeEventListener("webglcontextrestored",mt,!1),$.dispose(),oe.dispose(),I.dispose(),Q.dispose(),J.dispose(),P.dispose(),_e.dispose(),Ne.dispose(),Ne.removeEventListener("sessionstart",lu),Ne.removeEventListener("sessionend",cu),Z&&(Z.dispose(),Z=null),pi.stop()};function rt(V){V.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),E=!0}function mt(){console.log("THREE.WebGLRenderer: Context Restored."),E=!1;const V=ye.autoReset,re=ce.enabled,ne=ce.autoUpdate,ae=ce.needsUpdate,ve=ce.type;be(),ye.autoReset=V,ce.enabled=re,ce.autoUpdate=ne,ce.needsUpdate=ae,ce.type=ve}function st(V){const re=V.target;re.removeEventListener("dispose",st),He(re)}function He(V){Wt(V),I.remove(V)}function Wt(V){const re=I.get(V).programs;re!==void 0&&re.forEach(function(ne){K.releaseProgram(ne)})}function bn(V,re){V.render(function(ne){_.renderBufferImmediate(ne,re)})}this.renderBufferImmediate=function(V,re){_e.initAttributes();const ne=I.get(V);V.hasPositions&&!ne.position&&(ne.position=W.createBuffer()),V.hasNormals&&!ne.normal&&(ne.normal=W.createBuffer()),V.hasUvs&&!ne.uv&&(ne.uv=W.createBuffer()),V.hasColors&&!ne.color&&(ne.color=W.createBuffer());const ae=re.getAttributes();V.hasPositions&&(W.bindBuffer(34962,ne.position),W.bufferData(34962,V.positionArray,35048),_e.enableAttribute(ae.position),W.vertexAttribPointer(ae.position,3,5126,!1,0,0)),V.hasNormals&&(W.bindBuffer(34962,ne.normal),W.bufferData(34962,V.normalArray,35048),_e.enableAttribute(ae.normal),W.vertexAttribPointer(ae.normal,3,5126,!1,0,0)),V.hasUvs&&(W.bindBuffer(34962,ne.uv),W.bufferData(34962,V.uvArray,35048),_e.enableAttribute(ae.uv),W.vertexAttribPointer(ae.uv,2,5126,!1,0,0)),V.hasColors&&(W.bindBuffer(34962,ne.color),W.bufferData(34962,V.colorArray,35048),_e.enableAttribute(ae.color),W.vertexAttribPointer(ae.color,3,5126,!1,0,0)),_e.disableUnusedAttributes(),W.drawArrays(4,0,V.count),V.count=0},this.renderBufferDirect=function(V,re,ne,ae,ve,Pe){re===null&&(re=se);const Re=ve.isMesh&&ve.matrixWorld.determinant()<0,Se=du(V,re,ae,ve);me.setMaterial(ae,Re);let De=ne.index;const Ge=ne.attributes.position;if(De===null){if(Ge===void 0||Ge.count===0)return}else if(De.count===0)return;let Fe=1;ae.wireframe===!0&&(De=B.getWireframeAttribute(ne),Fe=2),(ne.morphAttributes.position!==void 0||ne.morphAttributes.normal!==void 0)&&ge.update(ve,ne,ae,Se),_e.setup(ve,ae,Se,ne,De);let Ve,Le=Y;De!==null&&(Ve=X.get(De),Le=pe,Le.setIndex(Ve));const Mn=De!==null?De.count:Ge.count,ot=ne.drawRange.start*Fe,kn=ne.drawRange.count*Fe,jt=Pe!==null?Pe.start*Fe:0,mi=Pe!==null?Pe.count*Fe:1/0,zn=Math.max(ot,jt),At=Math.min(Mn,ot+kn,jt+mi)-1,hn=Math.max(0,At-zn+1);if(hn!==0){if(ve.isMesh)ae.wireframe===!0?(me.setLineWidth(ae.wireframeLinewidth*H()),Le.setMode(1)):Le.setMode(4);else if(ve.isLine){let wt=ae.linewidth;wt===void 0&&(wt=1),me.setLineWidth(wt*H()),ve.isLineSegments?Le.setMode(1):ve.isLineLoop?Le.setMode(2):Le.setMode(3)}else ve.isPoints?Le.setMode(0):ve.isSprite&&Le.setMode(4);if(ve.isInstancedMesh)Le.renderInstances(zn,hn,ve.count);else if(ne.isInstancedBufferGeometry){const wt=Math.min(ne.instanceCount,ne._maxInstanceCount);Le.renderInstances(zn,hn,wt)}else Le.render(zn,hn)}},this.compile=function(V,re){f=oe.get(V),f.init(),m.push(f),V.traverseVisible(function(ne){ne.isLight&&ne.layers.test(re.layers)&&(f.pushLight(ne),ne.castShadow&&f.pushShadow(ne))}),f.setupLights(),V.traverse(function(ne){const ae=ne.material;if(ae)if(Array.isArray(ae))for(let ve=0;ve<ae.length;ve++){const Pe=ae[ve];Ra(Pe,V,ne)}else Ra(ae,V,ne)}),m.pop(),f=null};let La=null;function Cm(V){La&&La(V)}function lu(){pi.stop()}function cu(){pi.start()}const pi=new Gp;pi.setAnimationLoop(Cm),typeof window<"u"&&pi.setContext(window),this.setAnimationLoop=function(V){La=V,Ne.setAnimationLoop(V),V===null?pi.stop():pi.start()},Ne.addEventListener("sessionstart",lu),Ne.addEventListener("sessionend",cu),this.render=function(V,re){if(re!==void 0&&re.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(E===!0)return;V.autoUpdate===!0&&V.updateMatrixWorld(),re.parent===null&&re.updateMatrixWorld(),Ne.enabled===!0&&Ne.isPresenting===!0&&(Ne.cameraAutoUpdate===!0&&Ne.updateCamera(re),re=Ne.getCamera()),V.isScene===!0&&V.onBeforeRender(_,V,re,R),f=oe.get(V,m.length),f.init(),m.push(f),ee.multiplyMatrices(re.projectionMatrix,re.matrixWorldInverse),g.setFromProjectionMatrix(ee),z=this.localClippingEnabled,N=ue.init(this.clippingPlanes,z,re),h=$.get(V,d.length),h.init(),d.push(h),uu(V,re,0,_.sortObjects),h.finish(),_.sortObjects===!0&&h.sort(G,b),N===!0&&ue.beginShadows();const ne=f.state.shadowsArray;ce.render(ne,V,re),f.setupLights(),f.setupLightsView(re),N===!0&&ue.endShadows(),this.info.autoReset===!0&&this.info.reset(),Ae.render(h,V);const ae=h.opaque,ve=h.transmissive,Pe=h.transparent;ae.length>0&&Ns(ae,V,re),ve.length>0&&Im(ae,ve,V,re),Pe.length>0&&Ns(Pe,V,re),R!==null&&(O.updateMultisampleRenderTarget(R),O.updateRenderTargetMipmap(R)),V.isScene===!0&&V.onAfterRender(_,V,re),me.buffers.depth.setTest(!0),me.buffers.depth.setMask(!0),me.buffers.color.setMask(!0),me.setPolygonOffset(!1),_e.resetDefaultState(),M=-1,L=null,m.pop(),m.length>0?f=m[m.length-1]:f=null,d.pop(),d.length>0?h=d[d.length-1]:h=null};function uu(V,re,ne,ae){if(V.visible===!1)return;if(V.layers.test(re.layers)){if(V.isGroup)ne=V.renderOrder;else if(V.isLOD)V.autoUpdate===!0&&V.update(re);else if(V.isLight)f.pushLight(V),V.castShadow&&f.pushShadow(V);else if(V.isSprite){if(!V.frustumCulled||g.intersectsSprite(V)){ae&&te.setFromMatrixPosition(V.matrixWorld).applyMatrix4(ee);const Re=P.update(V),Se=V.material;Se.visible&&h.push(V,Re,Se,ne,te.z,null)}}else if(V.isImmediateRenderObject)ae&&te.setFromMatrixPosition(V.matrixWorld).applyMatrix4(ee),h.push(V,null,V.material,ne,te.z,null);else if((V.isMesh||V.isLine||V.isPoints)&&(V.isSkinnedMesh&&V.skeleton.frame!==ye.render.frame&&(V.skeleton.update(),V.skeleton.frame=ye.render.frame),!V.frustumCulled||g.intersectsObject(V))){ae&&te.setFromMatrixPosition(V.matrixWorld).applyMatrix4(ee);const Re=P.update(V),Se=V.material;if(Array.isArray(Se)){const De=Re.groups;for(let Ge=0,Fe=De.length;Ge<Fe;Ge++){const Ve=De[Ge],Le=Se[Ve.materialIndex];Le&&Le.visible&&h.push(V,Re,Le,ne,te.z,Ve)}}else Se.visible&&h.push(V,Re,Se,ne,te.z,null)}}const Pe=V.children;for(let Re=0,Se=Pe.length;Re<Se;Re++)uu(Pe[Re],re,ne,ae)}function Im(V,re,ne,ae){if(Z===null){const Se=o===!0&&de.isWebGL2===!0?Op:yn;Z=new Se(1024,1024,{generateMipmaps:!0,type:le.convert(pr)!==null?pr:wr,minFilter:ya,magFilter:yt,wrapS:Gt,wrapT:Gt})}const ve=_.getRenderTarget();_.setRenderTarget(Z),_.clear();const Pe=_.toneMapping;_.toneMapping=Ri,Ns(V,ne,ae),_.toneMapping=Pe,O.updateMultisampleRenderTarget(Z),O.updateRenderTargetMipmap(Z),_.setRenderTarget(ve),Ns(re,ne,ae)}function Ns(V,re,ne){const ae=re.isScene===!0?re.overrideMaterial:null;if(ne.isArrayCamera){const ve=ne.cameras;for(let Pe=0,Re=ve.length;Pe<Re;Pe++){const Se=ve[Pe];me.viewport(D.copy(Se.viewport)),f.setupLightsView(Se);for(let De=0,Ge=V.length;De<Ge;De++){const Fe=V[De],Ve=Fe.object,Le=Fe.geometry,Mn=ae===null?Fe.material:ae,ot=Fe.group;Ve.layers.test(Se.layers)&&hu(Ve,re,Se,Le,Mn,ot)}}}else for(let ve=0,Pe=V.length;ve<Pe;ve++){const Re=V[ve],Se=Re.object,De=Re.geometry,Ge=ae===null?Re.material:ae,Fe=Re.group;hu(Se,re,ne,De,Ge,Fe)}}function hu(V,re,ne,ae,ve,Pe){if(V.onBeforeRender(_,re,ne,ae,ve,Pe),V.modelViewMatrix.multiplyMatrices(ne.matrixWorldInverse,V.matrixWorld),V.normalMatrix.getNormalMatrix(V.modelViewMatrix),V.isImmediateRenderObject){const Re=du(ne,re,ve,V);me.setMaterial(ve),_e.reset(),bn(V,Re)}else ve.transparent===!0&&ve.side===_r?(ve.side=gt,ve.needsUpdate=!0,_.renderBufferDirect(ne,re,ae,ve,V,Pe),ve.side=_s,ve.needsUpdate=!0,_.renderBufferDirect(ne,re,ae,ve,V,Pe),ve.side=_r):_.renderBufferDirect(ne,re,ae,ve,V,Pe);V.onAfterRender(_,re,ne,ae,ve,Pe)}function Ra(V,re,ne){re.isScene!==!0&&(re=se);const ae=I.get(V),ve=f.state.lights,Pe=f.state.shadowsArray,Re=ve.state.version,Se=K.getParameters(V,ve.state,Pe,re,ne),De=K.getProgramCacheKey(Se);let Ge=ae.programs;ae.environment=V.isMeshStandardMaterial?re.environment:null,ae.fog=re.fog,ae.envMap=(V.isMeshStandardMaterial?J:Q).get(V.envMap||ae.environment),Ge===void 0&&(V.addEventListener("dispose",st),Ge=new Map,ae.programs=Ge);let Fe=Ge.get(De);if(Fe!==void 0){if(ae.currentProgram===Fe&&ae.lightsStateVersion===Re)return fu(V,Se),Fe}else Se.uniforms=K.getUniforms(V),V.onBuild(Se,_),V.onBeforeCompile(Se,_),Fe=K.acquireProgram(Se,De),Ge.set(De,Fe),ae.uniforms=Se.uniforms;const Ve=ae.uniforms;(!V.isShaderMaterial&&!V.isRawShaderMaterial||V.clipping===!0)&&(Ve.clippingPlanes=ue.uniform),fu(V,Se),ae.needsLights=Rm(V),ae.lightsStateVersion=Re,ae.needsLights&&(Ve.ambientLightColor.value=ve.state.ambient,Ve.lightProbe.value=ve.state.probe,Ve.directionalLights.value=ve.state.directional,Ve.directionalLightShadows.value=ve.state.directionalShadow,Ve.spotLights.value=ve.state.spot,Ve.spotLightShadows.value=ve.state.spotShadow,Ve.rectAreaLights.value=ve.state.rectArea,Ve.ltc_1.value=ve.state.rectAreaLTC1,Ve.ltc_2.value=ve.state.rectAreaLTC2,Ve.pointLights.value=ve.state.point,Ve.pointLightShadows.value=ve.state.pointShadow,Ve.hemisphereLights.value=ve.state.hemi,Ve.directionalShadowMap.value=ve.state.directionalShadowMap,Ve.directionalShadowMatrix.value=ve.state.directionalShadowMatrix,Ve.spotShadowMap.value=ve.state.spotShadowMap,Ve.spotShadowMatrix.value=ve.state.spotShadowMatrix,Ve.pointShadowMap.value=ve.state.pointShadowMap,Ve.pointShadowMatrix.value=ve.state.pointShadowMatrix);const Le=Fe.getUniforms(),Mn=oi.seqWithValue(Le.seq,Ve);return ae.currentProgram=Fe,ae.uniformsList=Mn,Fe}function fu(V,re){const ne=I.get(V);ne.outputEncoding=re.outputEncoding,ne.instancing=re.instancing,ne.skinning=re.skinning,ne.morphTargets=re.morphTargets,ne.morphNormals=re.morphNormals,ne.numClippingPlanes=re.numClippingPlanes,ne.numIntersection=re.numClipIntersection,ne.vertexAlphas=re.vertexAlphas,ne.vertexTangents=re.vertexTangents}function du(V,re,ne,ae){re.isScene!==!0&&(re=se),O.resetTextureUnits();const ve=re.fog,Pe=ne.isMeshStandardMaterial?re.environment:null,Re=R===null?_.outputEncoding:R.texture.encoding,Se=(ne.isMeshStandardMaterial?J:Q).get(ne.envMap||Pe),De=ne.vertexColors===!0&&!!ae.geometry&&!!ae.geometry.attributes.color&&ae.geometry.attributes.color.itemSize===4,Ge=!!ae.geometry&&!!ae.geometry.attributes.tangent,Fe=!!ae.geometry&&!!ae.geometry.morphAttributes.position,Ve=!!ae.geometry&&!!ae.geometry.morphAttributes.normal,Le=I.get(ne),Mn=f.state.lights;if(N===!0&&(z===!0||V!==L)){const wt=V===L&&ne.id===M;ue.setState(ne,V,wt)}let ot=!1;ne.version===Le.__version?(Le.needsLights&&Le.lightsStateVersion!==Mn.state.version||Le.outputEncoding!==Re||ae.isInstancedMesh&&Le.instancing===!1||!ae.isInstancedMesh&&Le.instancing===!0||ae.isSkinnedMesh&&Le.skinning===!1||!ae.isSkinnedMesh&&Le.skinning===!0||Le.envMap!==Se||ne.fog&&Le.fog!==ve||Le.numClippingPlanes!==void 0&&(Le.numClippingPlanes!==ue.numPlanes||Le.numIntersection!==ue.numIntersection)||Le.vertexAlphas!==De||Le.vertexTangents!==Ge||Le.morphTargets!==Fe||Le.morphNormals!==Ve)&&(ot=!0):(ot=!0,Le.__version=ne.version);let kn=Le.currentProgram;ot===!0&&(kn=Ra(ne,re,ae));let jt=!1,mi=!1,zn=!1;const At=kn.getUniforms(),hn=Le.uniforms;if(me.useProgram(kn.program)&&(jt=!0,mi=!0,zn=!0),ne.id!==M&&(M=ne.id,mi=!0),jt||L!==V){if(At.setValue(W,"projectionMatrix",V.projectionMatrix),de.logarithmicDepthBuffer&&At.setValue(W,"logDepthBufFC",2/(Math.log(V.far+1)/Math.LN2)),L!==V&&(L=V,mi=!0,zn=!0),ne.isShaderMaterial||ne.isMeshPhongMaterial||ne.isMeshToonMaterial||ne.isMeshStandardMaterial||ne.envMap){const wt=At.map.cameraPosition;wt!==void 0&&wt.setValue(W,te.setFromMatrixPosition(V.matrixWorld))}(ne.isMeshPhongMaterial||ne.isMeshToonMaterial||ne.isMeshLambertMaterial||ne.isMeshBasicMaterial||ne.isMeshStandardMaterial||ne.isShaderMaterial)&&At.setValue(W,"isOrthographic",V.isOrthographicCamera===!0),(ne.isMeshPhongMaterial||ne.isMeshToonMaterial||ne.isMeshLambertMaterial||ne.isMeshBasicMaterial||ne.isMeshStandardMaterial||ne.isShaderMaterial||ne.isShadowMaterial||ae.isSkinnedMesh)&&At.setValue(W,"viewMatrix",V.matrixWorldInverse)}if(ae.isSkinnedMesh){At.setOptional(W,ae,"bindMatrix"),At.setOptional(W,ae,"bindMatrixInverse");const wt=ae.skeleton;wt&&(de.floatVertexTextures?(wt.boneTexture===null&&wt.computeBoneTexture(),At.setValue(W,"boneTexture",wt.boneTexture,O),At.setValue(W,"boneTextureSize",wt.boneTextureSize)):At.setOptional(W,wt,"boneMatrices"))}return(mi||Le.receiveShadow!==ae.receiveShadow)&&(Le.receiveShadow=ae.receiveShadow,At.setValue(W,"receiveShadow",ae.receiveShadow)),mi&&(At.setValue(W,"toneMappingExposure",_.toneMappingExposure),Le.needsLights&&Lm(hn,zn),ve&&ne.fog&&j.refreshFogUniforms(hn,ve),j.refreshMaterialUniforms(hn,ne,S,F,Z),oi.upload(W,Le.uniformsList,hn,O)),ne.isShaderMaterial&&ne.uniformsNeedUpdate===!0&&(oi.upload(W,Le.uniformsList,hn,O),ne.uniformsNeedUpdate=!1),ne.isSpriteMaterial&&At.setValue(W,"center",ae.center),At.setValue(W,"modelViewMatrix",ae.modelViewMatrix),At.setValue(W,"normalMatrix",ae.normalMatrix),At.setValue(W,"modelMatrix",ae.matrixWorld),kn}function Lm(V,re){V.ambientLightColor.needsUpdate=re,V.lightProbe.needsUpdate=re,V.directionalLights.needsUpdate=re,V.directionalLightShadows.needsUpdate=re,V.pointLights.needsUpdate=re,V.pointLightShadows.needsUpdate=re,V.spotLights.needsUpdate=re,V.spotLightShadows.needsUpdate=re,V.rectAreaLights.needsUpdate=re,V.hemisphereLights.needsUpdate=re}function Rm(V){return V.isMeshLambertMaterial||V.isMeshToonMaterial||V.isMeshPhongMaterial||V.isMeshStandardMaterial||V.isShadowMaterial||V.isShaderMaterial&&V.lights===!0}this.getActiveCubeFace=function(){return p},this.getActiveMipmapLevel=function(){return A},this.getRenderTarget=function(){return R},this.setRenderTarget=function(V,re=0,ne=0){R=V,p=re,A=ne,V&&I.get(V).__webglFramebuffer===void 0&&O.setupRenderTarget(V);let ae=null,ve=!1,Pe=!1;if(V){const Se=V.texture;(Se.isDataTexture3D||Se.isDataTexture2DArray)&&(Pe=!0);const De=I.get(V).__webglFramebuffer;V.isWebGLCubeRenderTarget?(ae=De[re],ve=!0):V.isWebGLMultisampleRenderTarget?ae=I.get(V).__webglMultisampledFramebuffer:ae=De,D.copy(V.viewport),C.copy(V.scissor),k=V.scissorTest}else D.copy(T).multiplyScalar(S).floor(),C.copy(y).multiplyScalar(S).floor(),k=v;if(me.bindFramebuffer(36160,ae)&&de.drawBuffers){let Se=!1;if(V)if(V.isWebGLMultipleRenderTargets){const De=V.texture;if(w.length!==De.length||w[0]!==36064){for(let Ge=0,Fe=De.length;Ge<Fe;Ge++)w[Ge]=36064+Ge;w.length=De.length,Se=!0}}else(w.length!==1||w[0]!==36064)&&(w[0]=36064,w.length=1,Se=!0);else(w.length!==1||w[0]!==1029)&&(w[0]=1029,w.length=1,Se=!0);Se&&(de.isWebGL2?W.drawBuffers(w):fe.get("WEBGL_draw_buffers").drawBuffersWEBGL(w))}if(me.viewport(D),me.scissor(C),me.setScissorTest(k),ve){const Se=I.get(V.texture);W.framebufferTexture2D(36160,36064,34069+re,Se.__webglTexture,ne)}else if(Pe){const Se=I.get(V.texture),De=re||0;W.framebufferTextureLayer(36160,36064,Se.__webglTexture,ne||0,De)}},this.readRenderTargetPixels=function(V,re,ne,ae,ve,Pe,Re){if(!(V&&V.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let Se=I.get(V).__webglFramebuffer;if(V.isWebGLCubeRenderTarget&&Re!==void 0&&(Se=Se[Re]),Se){me.bindFramebuffer(36160,Se);try{const De=V.texture,Ge=De.format,Fe=De.type;if(Ge!==ln&&le.convert(Ge)!==W.getParameter(35739)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}const Ve=Fe===pr&&(fe.has("EXT_color_buffer_half_float")||de.isWebGL2&&fe.has("EXT_color_buffer_float"));if(Fe!==wr&&le.convert(Fe)!==W.getParameter(35738)&&!(Fe===Ti&&(de.isWebGL2||fe.has("OES_texture_float")||fe.has("WEBGL_color_buffer_float")))&&!Ve){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}W.checkFramebufferStatus(36160)===36053?re>=0&&re<=V.width-ae&&ne>=0&&ne<=V.height-ve&&W.readPixels(re,ne,ae,ve,le.convert(Ge),le.convert(Fe),Pe):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{const De=R!==null?I.get(R).__webglFramebuffer:null;me.bindFramebuffer(36160,De)}}},this.copyFramebufferToTexture=function(V,re,ne=0){const ae=Math.pow(2,-ne),ve=Math.floor(re.image.width*ae),Pe=Math.floor(re.image.height*ae);let Re=le.convert(re.format);de.isWebGL2&&(Re===6407&&(Re=32849),Re===6408&&(Re=32856)),O.setTexture2D(re,0),W.copyTexImage2D(3553,ne,Re,V.x,V.y,ve,Pe,0),me.unbindTexture()},this.copyTextureToTexture=function(V,re,ne,ae=0){const ve=re.image.width,Pe=re.image.height,Re=le.convert(ne.format),Se=le.convert(ne.type);O.setTexture2D(ne,0),W.pixelStorei(37440,ne.flipY),W.pixelStorei(37441,ne.premultiplyAlpha),W.pixelStorei(3317,ne.unpackAlignment),re.isDataTexture?W.texSubImage2D(3553,ae,V.x,V.y,ve,Pe,Re,Se,re.image.data):re.isCompressedTexture?W.compressedTexSubImage2D(3553,ae,V.x,V.y,re.mipmaps[0].width,re.mipmaps[0].height,Re,re.mipmaps[0].data):W.texSubImage2D(3553,ae,V.x,V.y,Re,Se,re.image),ae===0&&ne.generateMipmaps&&W.generateMipmap(3553),me.unbindTexture()},this.copyTextureToTexture3D=function(V,re,ne,ae,ve=0){if(_.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}const Pe=V.max.x-V.min.x+1,Re=V.max.y-V.min.y+1,Se=V.max.z-V.min.z+1,De=le.convert(ae.format),Ge=le.convert(ae.type);let Fe;if(ae.isDataTexture3D)O.setTexture3D(ae,0),Fe=32879;else if(ae.isDataTexture2DArray)O.setTexture2DArray(ae,0),Fe=35866;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}W.pixelStorei(37440,ae.flipY),W.pixelStorei(37441,ae.premultiplyAlpha),W.pixelStorei(3317,ae.unpackAlignment);const Ve=W.getParameter(3314),Le=W.getParameter(32878),Mn=W.getParameter(3316),ot=W.getParameter(3315),kn=W.getParameter(32877),jt=ne.isCompressedTexture?ne.mipmaps[0]:ne.image;W.pixelStorei(3314,jt.width),W.pixelStorei(32878,jt.height),W.pixelStorei(3316,V.min.x),W.pixelStorei(3315,V.min.y),W.pixelStorei(32877,V.min.z),ne.isDataTexture||ne.isDataTexture3D?W.texSubImage3D(Fe,ve,re.x,re.y,re.z,Pe,Re,Se,De,Ge,jt.data):ne.isCompressedTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),W.compressedTexSubImage3D(Fe,ve,re.x,re.y,re.z,Pe,Re,Se,De,jt.data)):W.texSubImage3D(Fe,ve,re.x,re.y,re.z,Pe,Re,Se,De,Ge,jt),W.pixelStorei(3314,Ve),W.pixelStorei(32878,Le),W.pixelStorei(3316,Mn),W.pixelStorei(3315,ot),W.pixelStorei(32877,kn),ve===0&&ae.generateMipmaps&&W.generateMipmap(Fe),me.unbindTexture()},this.initTexture=function(V){O.setTexture2D(V,0),me.unbindTexture()},this.resetState=function(){p=0,A=0,R=null,me.reset(),_e.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}class QS extends Ye{}QS.prototype.isWebGL1Renderer=!0;class Zc extends We{constructor(){super(),this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.autoUpdate=e.autoUpdate,this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),t}}Zc.prototype.isScene=!0;class Bs{constructor(e,t){this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=bs,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=vn()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,i){e*=this.stride,i*=t.stride;for(let r=0,s=this.stride;r<s;r++)this.array[e+r]=t.array[i+r];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=vn()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),i=new this.constructor(t,this.stride);return i.setUsage(this.usage),i}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=vn()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.prototype.slice.call(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}Bs.prototype.isInterleavedBuffer=!0;const ht=new q;class Ms{constructor(e,t,i,r=!1){this.name="",this.data=e,this.itemSize=t,this.offset=i,this.normalized=r===!0}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,i=this.data.count;t<i;t++)ht.x=this.getX(t),ht.y=this.getY(t),ht.z=this.getZ(t),ht.applyMatrix4(e),this.setXYZ(t,ht.x,ht.y,ht.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)ht.x=this.getX(t),ht.y=this.getY(t),ht.z=this.getZ(t),ht.applyNormalMatrix(e),this.setXYZ(t,ht.x,ht.y,ht.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)ht.x=this.getX(t),ht.y=this.getY(t),ht.z=this.getZ(t),ht.transformDirection(e),this.setXYZ(t,ht.x,ht.y,ht.z);return this}setX(e,t){return this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){return this.data.array[e*this.data.stride+this.offset]}getY(e){return this.data.array[e*this.data.stride+this.offset+1]}getZ(e){return this.data.array[e*this.data.stride+this.offset+2]}getW(e){return this.data.array[e*this.data.stride+this.offset+3]}setXY(e,t,i){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=i,this}setXYZ(e,t,i,r){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this}setXYZW(e,t,i,r,s){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this.data.array[e+3]=s,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interlaved buffer attribute will deinterleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return new it(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new Ms(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interlaved buffer attribute will deinterleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}Ms.prototype.isInterleavedBufferAttribute=!0;class sm extends Rt{constructor(e){super(),this.type="SpriteMaterial",this.color=new Te(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this}}sm.prototype.isSpriteMaterial=!0;let ji;const qr=new q,$i=new q,er=new q,tr=new xe,Qr=new xe,om=new Ie,uo=new q,Kr=new q,ho=new q,yf=new xe,bl=new xe,xf=new xe;class KS extends We{constructor(e){if(super(),this.type="Sprite",ji===void 0){ji=new Ke;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),i=new Bs(t,5);ji.setIndex([0,1,2,0,2,3]),ji.setAttribute("position",new Ms(i,3,0,!1)),ji.setAttribute("uv",new Ms(i,2,3,!1))}this.geometry=ji,this.material=e!==void 0?e:new sm,this.center=new xe(.5,.5)}raycast(e,t){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),$i.setFromMatrixScale(this.matrixWorld),om.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),er.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&$i.multiplyScalar(-er.z);const i=this.material.rotation;let r,s;i!==0&&(s=Math.cos(i),r=Math.sin(i));const o=this.center;fo(uo.set(-.5,-.5,0),er,o,$i,r,s),fo(Kr.set(.5,-.5,0),er,o,$i,r,s),fo(ho.set(.5,.5,0),er,o,$i,r,s),yf.set(0,0),bl.set(1,0),xf.set(1,1);let a=e.ray.intersectTriangle(uo,Kr,ho,!1,qr);if(a===null&&(fo(Kr.set(-.5,.5,0),er,o,$i,r,s),bl.set(0,1),a=e.ray.intersectTriangle(uo,ho,Kr,!1,qr),a===null))return;const l=e.ray.origin.distanceTo(qr);l<e.near||l>e.far||t.push({distance:l,point:qr.clone(),uv:pt.getUV(qr,uo,Kr,ho,yf,bl,xf,new xe),face:null,object:this})}copy(e){return super.copy(e),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}KS.prototype.isSprite=!0;function fo(n,e,t,i,r,s){tr.subVectors(n,t).addScalar(.5).multiply(i),r!==void 0?(Qr.x=s*tr.x-r*tr.y,Qr.y=r*tr.x+s*tr.y):Qr.copy(tr),n.copy(e),n.x+=Qr.x,n.y+=Qr.y,n.applyMatrix4(om)}const _f=new q,wf=new Ze,bf=new Ze,YS=new q,Mf=new Ie;class am extends Bt{constructor(e,t){super(e,t),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new Ie,this.bindMatrixInverse=new Ie}copy(e){return super.copy(e),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,this}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new Ze,t=this.geometry.attributes.skinWeight;for(let i=0,r=t.count;i<r;i++){e.x=t.getX(i),e.y=t.getY(i),e.z=t.getZ(i),e.w=t.getW(i);const s=1/e.manhattanLength();s!==1/0?e.multiplyScalar(s):e.set(1,0,0,0),t.setXYZW(i,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode==="attached"?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode==="detached"?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}boneTransform(e,t){const i=this.skeleton,r=this.geometry;wf.fromBufferAttribute(r.attributes.skinIndex,e),bf.fromBufferAttribute(r.attributes.skinWeight,e),_f.fromBufferAttribute(r.attributes.position,e).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let s=0;s<4;s++){const o=bf.getComponent(s);if(o!==0){const a=wf.getComponent(s);Mf.multiplyMatrices(i.bones[a].matrixWorld,i.boneInverses[a]),t.addScaledVector(YS.copy(_f).applyMatrix4(Mf),o)}}return t.applyMatrix4(this.bindMatrixInverse)}}am.prototype.isSkinnedMesh=!0;class ZS extends We{constructor(){super(),this.type="Bone"}}ZS.prototype.isBone=!0;class JS extends Et{constructor(e=null,t=1,i=1,r,s,o,a,l,c=yt,u=yt,h,f){super(null,o,a,l,c,u,r,s,h,f),this.image={data:e,width:t,height:i},this.magFilter=c,this.minFilter=u,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.needsUpdate=!0}}JS.prototype.isDataTexture=!0;const Sf=new Ie,Ef=new Ie,po=[],Yr=new Bt;class XS extends Bt{constructor(e,t,i){super(e,t),this.instanceMatrix=new it(new Float32Array(i*16),16),this.instanceColor=null,this.count=i,this.frustumCulled=!1}copy(e){return super.copy(e),this.instanceMatrix.copy(e.instanceMatrix),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}raycast(e,t){const i=this.matrixWorld,r=this.count;if(Yr.geometry=this.geometry,Yr.material=this.material,Yr.material!==void 0)for(let s=0;s<r;s++){this.getMatrixAt(s,Sf),Ef.multiplyMatrices(i,Sf),Yr.matrixWorld=Ef,Yr.raycast(e,po);for(let o=0,a=po.length;o<a;o++){const l=po[o];l.instanceId=s,l.object=this,t.push(l)}po.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new it(new Float32Array(this.instanceMatrix.count*3),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}XS.prototype.isInstancedMesh=!0;class ui extends Rt{constructor(e){super(),this.type="LineBasicMaterial",this.color=new Te(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this}}ui.prototype.isLineBasicMaterial=!0;const Tf=new q,Cf=new q,If=new Ie,Ml=new Pr,mo=new Rr;class Mr extends We{constructor(e=new Ke,t=new ui){super(),this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e){return super.copy(e),this.material=e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.isBufferGeometry)if(e.index===null){const t=e.attributes.position,i=[0];for(let r=1,s=t.count;r<s;r++)Tf.fromBufferAttribute(t,r-1),Cf.fromBufferAttribute(t,r),i[r]=i[r-1],i[r]+=Tf.distanceTo(Cf);e.setAttribute("lineDistance",new ut(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else e.isGeometry&&console.error("THREE.Line.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}raycast(e,t){const i=this.geometry,r=this.matrixWorld,s=e.params.Line.threshold,o=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),mo.copy(i.boundingSphere),mo.applyMatrix4(r),mo.radius+=s,e.ray.intersectsSphere(mo)===!1)return;If.copy(r).invert(),Ml.copy(e.ray).applyMatrix4(If);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,c=new q,u=new q,h=new q,f=new q,d=this.isLineSegments?2:1;if(i.isBufferGeometry){const m=i.index,E=i.attributes.position;if(m!==null){const p=Math.max(0,o.start),A=Math.min(m.count,o.start+o.count);for(let R=p,M=A-1;R<M;R+=d){const L=m.getX(R),D=m.getX(R+1);if(c.fromBufferAttribute(E,L),u.fromBufferAttribute(E,D),Ml.distanceSqToSegment(c,u,f,h)>l)continue;f.applyMatrix4(this.matrixWorld);const k=e.ray.origin.distanceTo(f);k<e.near||k>e.far||t.push({distance:k,point:h.clone().applyMatrix4(this.matrixWorld),index:R,face:null,faceIndex:null,object:this})}}else{const p=Math.max(0,o.start),A=Math.min(E.count,o.start+o.count);for(let R=p,M=A-1;R<M;R+=d){if(c.fromBufferAttribute(E,R),u.fromBufferAttribute(E,R+1),Ml.distanceSqToSegment(c,u,f,h)>l)continue;f.applyMatrix4(this.matrixWorld);const D=e.ray.origin.distanceTo(f);D<e.near||D>e.far||t.push({distance:D,point:h.clone().applyMatrix4(this.matrixWorld),index:R,face:null,faceIndex:null,object:this})}}}else i.isGeometry&&console.error("THREE.Line.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}updateMorphTargets(){const e=this.geometry;if(e.isBufferGeometry){const t=e.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}else{const t=e.morphTargets;t!==void 0&&t.length>0&&console.error("THREE.Line.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}}Mr.prototype.isLine=!0;const Lf=new q,Rf=new q;class Jc extends Mr{constructor(e,t){super(e,t),this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.isBufferGeometry)if(e.index===null){const t=e.attributes.position,i=[];for(let r=0,s=t.count;r<s;r+=2)Lf.fromBufferAttribute(t,r),Rf.fromBufferAttribute(t,r+1),i[r]=r===0?0:i[r-1],i[r+1]=i[r]+Lf.distanceTo(Rf);e.setAttribute("lineDistance",new ut(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else e.isGeometry&&console.error("THREE.LineSegments.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}}Jc.prototype.isLineSegments=!0;class jS extends Mr{constructor(e,t){super(e,t),this.type="LineLoop"}}jS.prototype.isLineLoop=!0;class lm extends Rt{constructor(e){super(),this.type="PointsMaterial",this.color=new Te(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this}}lm.prototype.isPointsMaterial=!0;const Pf=new Ie,rc=new Pr,go=new Rr,Ao=new q;class $S extends We{constructor(e=new Ke,t=new lm){super(),this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e){return super.copy(e),this.material=e.material,this.geometry=e.geometry,this}raycast(e,t){const i=this.geometry,r=this.matrixWorld,s=e.params.Points.threshold,o=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),go.copy(i.boundingSphere),go.applyMatrix4(r),go.radius+=s,e.ray.intersectsSphere(go)===!1)return;Pf.copy(r).invert(),rc.copy(e.ray).applyMatrix4(Pf);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a;if(i.isBufferGeometry){const c=i.index,h=i.attributes.position;if(c!==null){const f=Math.max(0,o.start),d=Math.min(c.count,o.start+o.count);for(let m=f,_=d;m<_;m++){const E=c.getX(m);Ao.fromBufferAttribute(h,E),Df(Ao,E,l,r,e,t,this)}}else{const f=Math.max(0,o.start),d=Math.min(h.count,o.start+o.count);for(let m=f,_=d;m<_;m++)Ao.fromBufferAttribute(h,m),Df(Ao,m,l,r,e,t,this)}}else console.error("THREE.Points.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}updateMorphTargets(){const e=this.geometry;if(e.isBufferGeometry){const t=e.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}else{const t=e.morphTargets;t!==void 0&&t.length>0&&console.error("THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}}$S.prototype.isPoints=!0;function Df(n,e,t,i,r,s,o){const a=rc.distanceSqToPoint(n);if(a<t){const l=new q;rc.closestPointToPoint(n,l),l.applyMatrix4(i);const c=r.ray.origin.distanceTo(l);if(c<r.near||c>r.far)return;s.push({distance:c,distanceToRay:Math.sqrt(a),point:l,index:e,face:null,object:o})}}class e1 extends Et{constructor(e,t,i,r,s,o,a,l,c){super(e,t,i,r,s,o,a,l,c),this.format=a!==void 0?a:Pi,this.minFilter=o!==void 0?o:Yt,this.magFilter=s!==void 0?s:Yt,this.generateMipmaps=!1;const u=this;function h(){u.needsUpdate=!0,e.requestVideoFrameCallback(h)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(h)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}e1.prototype.isVideoTexture=!0;class t1 extends Et{constructor(e,t,i,r,s,o,a,l,c,u,h,f){super(null,o,a,l,c,u,r,s,h,f),this.image={width:t,height:i},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}t1.prototype.isCompressedTexture=!0;class n1 extends Et{constructor(e,t,i,r,s,o,a,l,c){super(e,t,i,r,s,o,a,l,c),this.needsUpdate=!0}}n1.prototype.isCanvasTexture=!0;class i1 extends Et{constructor(e,t,i,r,s,o,a,l,c,u){if(u=u!==void 0?u:mr,u!==mr&&u!==ws)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");i===void 0&&u===mr&&(i=Qo),i===void 0&&u===ws&&(i=os),super(null,r,s,o,a,l,u,i,c),this.image={width:e,height:t},this.magFilter=a!==void 0?a:yt,this.minFilter=l!==void 0?l:yt,this.flipY=!1,this.generateMipmaps=!1}}i1.prototype.isDepthTexture=!0;class Xc extends Ke{constructor(e=1,t=1,i=1,r=8,s=1,o=!1,a=0,l=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:i,radialSegments:r,heightSegments:s,openEnded:o,thetaStart:a,thetaLength:l};const c=this;r=Math.floor(r),s=Math.floor(s);const u=[],h=[],f=[],d=[];let m=0;const _=[],E=i/2;let p=0;A(),o===!1&&(e>0&&R(!0),t>0&&R(!1)),this.setIndex(u),this.setAttribute("position",new ut(h,3)),this.setAttribute("normal",new ut(f,3)),this.setAttribute("uv",new ut(d,2));function A(){const M=new q,L=new q;let D=0;const C=(t-e)/i;for(let k=0;k<=s;k++){const U=[],F=k/s,S=F*(t-e)+e;for(let G=0;G<=r;G++){const b=G/r,T=b*l+a,y=Math.sin(T),v=Math.cos(T);L.x=S*y,L.y=-F*i+E,L.z=S*v,h.push(L.x,L.y,L.z),M.set(y,C,v).normalize(),f.push(M.x,M.y,M.z),d.push(b,1-F),U.push(m++)}_.push(U)}for(let k=0;k<r;k++)for(let U=0;U<s;U++){const F=_[U][k],S=_[U+1][k],G=_[U+1][k+1],b=_[U][k+1];u.push(F,S,b),u.push(S,G,b),D+=6}c.addGroup(p,D,0),p+=D}function R(M){const L=m,D=new xe,C=new q;let k=0;const U=M===!0?e:t,F=M===!0?1:-1;for(let G=1;G<=r;G++)h.push(0,E*F,0),f.push(0,F,0),d.push(.5,.5),m++;const S=m;for(let G=0;G<=r;G++){const T=G/r*l+a,y=Math.cos(T),v=Math.sin(T);C.x=U*v,C.y=E*F,C.z=U*y,h.push(C.x,C.y,C.z),f.push(0,F,0),D.x=y*.5+.5,D.y=v*.5*F+.5,d.push(D.x,D.y),m++}for(let G=0;G<r;G++){const b=L+G,T=S+G;M===!0?u.push(T,T+1,b):u.push(T+1,T,b),k+=3}c.addGroup(p,k,M===!0?1:2),p+=k}}static fromJSON(e){return new Xc(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}new q;new q;new q;new pt;class Xt{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const i=this.getUtoTmapping(e);return this.getPoint(i,t)}getPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return t}getSpacedPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPointAt(i/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let i,r=this.getPoint(0),s=0;t.push(0);for(let o=1;o<=e;o++)i=this.getPoint(o/e),s+=i.distanceTo(r),t.push(s),r=i;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const i=this.getLengths();let r=0;const s=i.length;let o;t?o=t:o=e*i[s-1];let a=0,l=s-1,c;for(;a<=l;)if(r=Math.floor(a+(l-a)/2),c=i[r]-o,c<0)a=r+1;else if(c>0)l=r-1;else{l=r;break}if(r=l,i[r]===o)return r/(s-1);const u=i[r],f=i[r+1]-u,d=(o-u)/f;return(r+d)/(s-1)}getTangent(e,t){let r=e-1e-4,s=e+1e-4;r<0&&(r=0),s>1&&(s=1);const o=this.getPoint(r),a=this.getPoint(s),l=t||(o.isVector2?new xe:new q);return l.copy(a).sub(o).normalize(),l}getTangentAt(e,t){const i=this.getUtoTmapping(e);return this.getTangent(i,t)}computeFrenetFrames(e,t){const i=new q,r=[],s=[],o=[],a=new q,l=new Ie;for(let d=0;d<=e;d++){const m=d/e;r[d]=this.getTangentAt(m,new q),r[d].normalize()}s[0]=new q,o[0]=new q;let c=Number.MAX_VALUE;const u=Math.abs(r[0].x),h=Math.abs(r[0].y),f=Math.abs(r[0].z);u<=c&&(c=u,i.set(1,0,0)),h<=c&&(c=h,i.set(0,1,0)),f<=c&&i.set(0,0,1),a.crossVectors(r[0],i).normalize(),s[0].crossVectors(r[0],a),o[0].crossVectors(r[0],s[0]);for(let d=1;d<=e;d++){if(s[d]=s[d-1].clone(),o[d]=o[d-1].clone(),a.crossVectors(r[d-1],r[d]),a.length()>Number.EPSILON){a.normalize();const m=Math.acos(Ht(r[d-1].dot(r[d]),-1,1));s[d].applyMatrix4(l.makeRotationAxis(a,m))}o[d].crossVectors(r[d],s[d])}if(t===!0){let d=Math.acos(Ht(s[0].dot(s[e]),-1,1));d/=e,r[0].dot(a.crossVectors(s[0],s[e]))>0&&(d=-d);for(let m=1;m<=e;m++)s[m].applyMatrix4(l.makeRotationAxis(r[m],d*m)),o[m].crossVectors(r[m],s[m])}return{tangents:r,normals:s,binormals:o}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class Sa extends Xt{constructor(e=0,t=0,i=1,r=1,s=0,o=Math.PI*2,a=!1,l=0){super(),this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=i,this.yRadius=r,this.aStartAngle=s,this.aEndAngle=o,this.aClockwise=a,this.aRotation=l}getPoint(e,t){const i=t||new xe,r=Math.PI*2;let s=this.aEndAngle-this.aStartAngle;const o=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=r;for(;s>r;)s-=r;s<Number.EPSILON&&(o?s=0:s=r),this.aClockwise===!0&&!o&&(s===r?s=-r:s=s-r);const a=this.aStartAngle+e*s;let l=this.aX+this.xRadius*Math.cos(a),c=this.aY+this.yRadius*Math.sin(a);if(this.aRotation!==0){const u=Math.cos(this.aRotation),h=Math.sin(this.aRotation),f=l-this.aX,d=c-this.aY;l=f*u-d*h+this.aX,c=f*h+d*u+this.aY}return i.set(l,c)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}Sa.prototype.isEllipseCurve=!0;class cm extends Sa{constructor(e,t,i,r,s,o){super(e,t,i,i,r,s,o),this.type="ArcCurve"}}cm.prototype.isArcCurve=!0;function jc(){let n=0,e=0,t=0,i=0;function r(s,o,a,l){n=s,e=a,t=-3*s+3*o-2*a-l,i=2*s-2*o+a+l}return{initCatmullRom:function(s,o,a,l,c){r(o,a,c*(a-s),c*(l-o))},initNonuniformCatmullRom:function(s,o,a,l,c,u,h){let f=(o-s)/c-(a-s)/(c+u)+(a-o)/u,d=(a-o)/u-(l-o)/(u+h)+(l-a)/h;f*=u,d*=u,r(o,a,f,d)},calc:function(s){const o=s*s,a=o*s;return n+e*s+t*o+i*a}}}const vo=new q,Sl=new jc,El=new jc,Tl=new jc;class um extends Xt{constructor(e=[],t=!1,i="centripetal",r=.5){super(),this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=i,this.tension=r}getPoint(e,t=new q){const i=t,r=this.points,s=r.length,o=(s-(this.closed?0:1))*e;let a=Math.floor(o),l=o-a;this.closed?a+=a>0?0:(Math.floor(Math.abs(a)/s)+1)*s:l===0&&a===s-1&&(a=s-2,l=1);let c,u;this.closed||a>0?c=r[(a-1)%s]:(vo.subVectors(r[0],r[1]).add(r[0]),c=vo);const h=r[a%s],f=r[(a+1)%s];if(this.closed||a+2<s?u=r[(a+2)%s]:(vo.subVectors(r[s-1],r[s-2]).add(r[s-1]),u=vo),this.curveType==="centripetal"||this.curveType==="chordal"){const d=this.curveType==="chordal"?.5:.25;let m=Math.pow(c.distanceToSquared(h),d),_=Math.pow(h.distanceToSquared(f),d),E=Math.pow(f.distanceToSquared(u),d);_<1e-4&&(_=1),m<1e-4&&(m=_),E<1e-4&&(E=_),Sl.initNonuniformCatmullRom(c.x,h.x,f.x,u.x,m,_,E),El.initNonuniformCatmullRom(c.y,h.y,f.y,u.y,m,_,E),Tl.initNonuniformCatmullRom(c.z,h.z,f.z,u.z,m,_,E)}else this.curveType==="catmullrom"&&(Sl.initCatmullRom(c.x,h.x,f.x,u.x,this.tension),El.initCatmullRom(c.y,h.y,f.y,u.y,this.tension),Tl.initCatmullRom(c.z,h.z,f.z,u.z,this.tension));return i.set(Sl.calc(l),El.calc(l),Tl.calc(l)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(r.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){const r=this.points[t];e.points.push(r.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(new q().fromArray(r))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}um.prototype.isCatmullRomCurve3=!0;function Bf(n,e,t,i,r){const s=(i-e)*.5,o=(r-t)*.5,a=n*n,l=n*a;return(2*t-2*i+s+o)*l+(-3*t+3*i-2*s-o)*a+s*n+t}function r1(n,e){const t=1-n;return t*t*e}function s1(n,e){return 2*(1-n)*n*e}function o1(n,e){return n*n*e}function as(n,e,t,i){return r1(n,e)+s1(n,t)+o1(n,i)}function a1(n,e){const t=1-n;return t*t*t*e}function l1(n,e){const t=1-n;return 3*t*t*n*e}function c1(n,e){return 3*(1-n)*n*n*e}function u1(n,e){return n*n*n*e}function ls(n,e,t,i,r){return a1(n,e)+l1(n,t)+c1(n,i)+u1(n,r)}class $c extends Xt{constructor(e=new xe,t=new xe,i=new xe,r=new xe){super(),this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=i,this.v3=r}getPoint(e,t=new xe){const i=t,r=this.v0,s=this.v1,o=this.v2,a=this.v3;return i.set(ls(e,r.x,s.x,o.x,a.x),ls(e,r.y,s.y,o.y,a.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}$c.prototype.isCubicBezierCurve=!0;class hm extends Xt{constructor(e=new q,t=new q,i=new q,r=new q){super(),this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=i,this.v3=r}getPoint(e,t=new q){const i=t,r=this.v0,s=this.v1,o=this.v2,a=this.v3;return i.set(ls(e,r.x,s.x,o.x,a.x),ls(e,r.y,s.y,o.y,a.y),ls(e,r.z,s.z,o.z,a.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}hm.prototype.isCubicBezierCurve3=!0;class Ea extends Xt{constructor(e=new xe,t=new xe){super(),this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new xe){const i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t){const i=t||new xe;return i.copy(this.v2).sub(this.v1).normalize(),i}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}Ea.prototype.isLineCurve=!0;class h1 extends Xt{constructor(e=new q,t=new q){super(),this.type="LineCurve3",this.isLineCurve3=!0,this.v1=e,this.v2=t}getPoint(e,t=new q){const i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class eu extends Xt{constructor(e=new xe,t=new xe,i=new xe){super(),this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new xe){const i=t,r=this.v0,s=this.v1,o=this.v2;return i.set(as(e,r.x,s.x,o.x),as(e,r.y,s.y,o.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}eu.prototype.isQuadraticBezierCurve=!0;class fm extends Xt{constructor(e=new q,t=new q,i=new q){super(),this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new q){const i=t,r=this.v0,s=this.v1,o=this.v2;return i.set(as(e,r.x,s.x,o.x),as(e,r.y,s.y,o.y),as(e,r.z,s.z,o.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}fm.prototype.isQuadraticBezierCurve3=!0;class tu extends Xt{constructor(e=[]){super(),this.type="SplineCurve",this.points=e}getPoint(e,t=new xe){const i=t,r=this.points,s=(r.length-1)*e,o=Math.floor(s),a=s-o,l=r[o===0?o:o-1],c=r[o],u=r[o>r.length-2?r.length-1:o+1],h=r[o>r.length-3?r.length-1:o+2];return i.set(Bf(a,l.x,c.x,u.x,h.x),Bf(a,l.y,c.y,u.y,h.y)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){const r=this.points[t];e.points.push(r.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(new xe().fromArray(r))}return this}}tu.prototype.isSplineCurve=!0;var dm=Object.freeze({__proto__:null,ArcCurve:cm,CatmullRomCurve3:um,CubicBezierCurve:$c,CubicBezierCurve3:hm,EllipseCurve:Sa,LineCurve:Ea,LineCurve3:h1,QuadraticBezierCurve:eu,QuadraticBezierCurve3:fm,SplineCurve:tu});const f1={triangulate:function(n,e,t=2){const i=e&&e.length,r=i?e[0]*t:n.length;let s=pm(n,0,r,t,!0);const o=[];if(!s||s.next===s.prev)return o;let a,l,c,u,h,f,d;if(i&&(s=A1(n,e,s,t)),n.length>80*t){a=c=n[0],l=u=n[1];for(let m=t;m<r;m+=t)h=n[m],f=n[m+1],h<a&&(a=h),f<l&&(l=f),h>c&&(c=h),f>u&&(u=f);d=Math.max(c-a,u-l),d=d!==0?1/d:0}return Ss(s,o,t,a,l,d),o}};function pm(n,e,t,i,r){let s,o;if(r===C1(n,e,t,i)>0)for(s=e;s<t;s+=i)o=Ff(s,n[s],n[s+1],o);else for(s=t-i;s>=e;s-=i)o=Ff(s,n[s],n[s+1],o);return o&&Ta(o,o.next)&&(Ts(o),o=o.next),o}function hi(n,e){if(!n)return n;e||(e=n);let t=n,i;do if(i=!1,!t.steiner&&(Ta(t,t.next)||nt(t.prev,t,t.next)===0)){if(Ts(t),t=e=t.prev,t===t.next)break;i=!0}else t=t.next;while(i||t!==e);return e}function Ss(n,e,t,i,r,s,o){if(!n)return;!o&&s&&w1(n,i,r,s);let a=n,l,c;for(;n.prev!==n.next;){if(l=n.prev,c=n.next,s?p1(n,i,r,s):d1(n)){e.push(l.i/t),e.push(n.i/t),e.push(c.i/t),Ts(n),n=c.next,a=c.next;continue}if(n=c,n===a){o?o===1?(n=m1(hi(n),e,t),Ss(n,e,t,i,r,s,2)):o===2&&g1(n,e,t,i,r,s):Ss(hi(n),e,t,i,r,s,1);break}}}function d1(n){const e=n.prev,t=n,i=n.next;if(nt(e,t,i)>=0)return!1;let r=n.next.next;for(;r!==n.prev;){if(ar(e.x,e.y,t.x,t.y,i.x,i.y,r.x,r.y)&&nt(r.prev,r,r.next)>=0)return!1;r=r.next}return!0}function p1(n,e,t,i){const r=n.prev,s=n,o=n.next;if(nt(r,s,o)>=0)return!1;const a=r.x<s.x?r.x<o.x?r.x:o.x:s.x<o.x?s.x:o.x,l=r.y<s.y?r.y<o.y?r.y:o.y:s.y<o.y?s.y:o.y,c=r.x>s.x?r.x>o.x?r.x:o.x:s.x>o.x?s.x:o.x,u=r.y>s.y?r.y>o.y?r.y:o.y:s.y>o.y?s.y:o.y,h=sc(a,l,e,t,i),f=sc(c,u,e,t,i);let d=n.prevZ,m=n.nextZ;for(;d&&d.z>=h&&m&&m.z<=f;){if(d!==n.prev&&d!==n.next&&ar(r.x,r.y,s.x,s.y,o.x,o.y,d.x,d.y)&&nt(d.prev,d,d.next)>=0||(d=d.prevZ,m!==n.prev&&m!==n.next&&ar(r.x,r.y,s.x,s.y,o.x,o.y,m.x,m.y)&&nt(m.prev,m,m.next)>=0))return!1;m=m.nextZ}for(;d&&d.z>=h;){if(d!==n.prev&&d!==n.next&&ar(r.x,r.y,s.x,s.y,o.x,o.y,d.x,d.y)&&nt(d.prev,d,d.next)>=0)return!1;d=d.prevZ}for(;m&&m.z<=f;){if(m!==n.prev&&m!==n.next&&ar(r.x,r.y,s.x,s.y,o.x,o.y,m.x,m.y)&&nt(m.prev,m,m.next)>=0)return!1;m=m.nextZ}return!0}function m1(n,e,t){let i=n;do{const r=i.prev,s=i.next.next;!Ta(r,s)&&mm(r,i,i.next,s)&&Es(r,s)&&Es(s,r)&&(e.push(r.i/t),e.push(i.i/t),e.push(s.i/t),Ts(i),Ts(i.next),i=n=s),i=i.next}while(i!==n);return hi(i)}function g1(n,e,t,i,r,s){let o=n;do{let a=o.next.next;for(;a!==o.prev;){if(o.i!==a.i&&S1(o,a)){let l=gm(o,a);o=hi(o,o.next),l=hi(l,l.next),Ss(o,e,t,i,r,s),Ss(l,e,t,i,r,s);return}a=a.next}o=o.next}while(o!==n)}function A1(n,e,t,i){const r=[];let s,o,a,l,c;for(s=0,o=e.length;s<o;s++)a=e[s]*i,l=s<o-1?e[s+1]*i:n.length,c=pm(n,a,l,i,!1),c===c.next&&(c.steiner=!0),r.push(M1(c));for(r.sort(v1),s=0;s<r.length;s++)y1(r[s],t),t=hi(t,t.next);return t}function v1(n,e){return n.x-e.x}function y1(n,e){if(e=x1(n,e),e){const t=gm(e,n);hi(e,e.next),hi(t,t.next)}}function x1(n,e){let t=e;const i=n.x,r=n.y;let s=-1/0,o;do{if(r<=t.y&&r>=t.next.y&&t.next.y!==t.y){const f=t.x+(r-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(f<=i&&f>s){if(s=f,f===i){if(r===t.y)return t;if(r===t.next.y)return t.next}o=t.x<t.next.x?t:t.next}}t=t.next}while(t!==e);if(!o)return null;if(i===s)return o;const a=o,l=o.x,c=o.y;let u=1/0,h;t=o;do i>=t.x&&t.x>=l&&i!==t.x&&ar(r<c?i:s,r,l,c,r<c?s:i,r,t.x,t.y)&&(h=Math.abs(r-t.y)/(i-t.x),Es(t,n)&&(h<u||h===u&&(t.x>o.x||t.x===o.x&&_1(o,t)))&&(o=t,u=h)),t=t.next;while(t!==a);return o}function _1(n,e){return nt(n.prev,n,e.prev)<0&&nt(e.next,n,n.next)<0}function w1(n,e,t,i){let r=n;do r.z===null&&(r.z=sc(r.x,r.y,e,t,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next;while(r!==n);r.prevZ.nextZ=null,r.prevZ=null,b1(r)}function b1(n){let e,t,i,r,s,o,a,l,c=1;do{for(t=n,n=null,s=null,o=0;t;){for(o++,i=t,a=0,e=0;e<c&&(a++,i=i.nextZ,!!i);e++);for(l=c;a>0||l>0&&i;)a!==0&&(l===0||!i||t.z<=i.z)?(r=t,t=t.nextZ,a--):(r=i,i=i.nextZ,l--),s?s.nextZ=r:n=r,r.prevZ=s,s=r;t=i}s.nextZ=null,c*=2}while(o>1);return n}function sc(n,e,t,i,r){return n=32767*(n-t)*r,e=32767*(e-i)*r,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,n|e<<1}function M1(n){let e=n,t=n;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==n);return t}function ar(n,e,t,i,r,s,o,a){return(r-o)*(e-a)-(n-o)*(s-a)>=0&&(n-o)*(i-a)-(t-o)*(e-a)>=0&&(t-o)*(s-a)-(r-o)*(i-a)>=0}function S1(n,e){return n.next.i!==e.i&&n.prev.i!==e.i&&!E1(n,e)&&(Es(n,e)&&Es(e,n)&&T1(n,e)&&(nt(n.prev,n,e.prev)||nt(n,e.prev,e))||Ta(n,e)&&nt(n.prev,n,n.next)>0&&nt(e.prev,e,e.next)>0)}function nt(n,e,t){return(e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y)}function Ta(n,e){return n.x===e.x&&n.y===e.y}function mm(n,e,t,i){const r=xo(nt(n,e,t)),s=xo(nt(n,e,i)),o=xo(nt(t,i,n)),a=xo(nt(t,i,e));return!!(r!==s&&o!==a||r===0&&yo(n,t,e)||s===0&&yo(n,i,e)||o===0&&yo(t,n,i)||a===0&&yo(t,e,i))}function yo(n,e,t){return e.x<=Math.max(n.x,t.x)&&e.x>=Math.min(n.x,t.x)&&e.y<=Math.max(n.y,t.y)&&e.y>=Math.min(n.y,t.y)}function xo(n){return n>0?1:n<0?-1:0}function E1(n,e){let t=n;do{if(t.i!==n.i&&t.next.i!==n.i&&t.i!==e.i&&t.next.i!==e.i&&mm(t,t.next,n,e))return!0;t=t.next}while(t!==n);return!1}function Es(n,e){return nt(n.prev,n,n.next)<0?nt(n,e,n.next)>=0&&nt(n,n.prev,e)>=0:nt(n,e,n.prev)<0||nt(n,n.next,e)<0}function T1(n,e){let t=n,i=!1;const r=(n.x+e.x)/2,s=(n.y+e.y)/2;do t.y>s!=t.next.y>s&&t.next.y!==t.y&&r<(t.next.x-t.x)*(s-t.y)/(t.next.y-t.y)+t.x&&(i=!i),t=t.next;while(t!==n);return i}function gm(n,e){const t=new oc(n.i,n.x,n.y),i=new oc(e.i,e.x,e.y),r=n.next,s=e.prev;return n.next=e,e.prev=n,t.next=r,r.prev=t,i.next=t,t.prev=i,s.next=i,i.prev=s,i}function Ff(n,e,t,i){const r=new oc(n,e,t);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function Ts(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function oc(n,e,t){this.i=n,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function C1(n,e,t,i){let r=0;for(let s=e,o=t-i;s<t;s+=i)r+=(n[o]-n[s])*(n[s+1]+n[o+1]),o=s;return r}class ai{static area(e){const t=e.length;let i=0;for(let r=t-1,s=0;s<t;r=s++)i+=e[r].x*e[s].y-e[s].x*e[r].y;return i*.5}static isClockWise(e){return ai.area(e)<0}static triangulateShape(e,t){const i=[],r=[],s=[];Nf(e),Of(i,e);let o=e.length;t.forEach(Nf);for(let l=0;l<t.length;l++)r.push(o),o+=t[l].length,Of(i,t[l]);const a=f1.triangulate(i,r);for(let l=0;l<a.length;l+=3)s.push(a.slice(l,l+3));return s}}function Nf(n){const e=n.length;e>2&&n[e-1].equals(n[0])&&n.pop()}function Of(n,e){for(let t=0;t<e.length;t++)n.push(e[t].x),n.push(e[t].y)}class Fr extends Ke{constructor(e,t){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const i=this,r=[],s=[];for(let a=0,l=e.length;a<l;a++){const c=e[a];o(c)}this.setAttribute("position",new ut(r,3)),this.setAttribute("uv",new ut(s,2)),this.computeVertexNormals();function o(a){const l=[],c=t.curveSegments!==void 0?t.curveSegments:12,u=t.steps!==void 0?t.steps:1;let h=t.depth!==void 0?t.depth:100,f=t.bevelEnabled!==void 0?t.bevelEnabled:!0,d=t.bevelThickness!==void 0?t.bevelThickness:6,m=t.bevelSize!==void 0?t.bevelSize:d-2,_=t.bevelOffset!==void 0?t.bevelOffset:0,E=t.bevelSegments!==void 0?t.bevelSegments:3;const p=t.extrudePath,A=t.UVGenerator!==void 0?t.UVGenerator:I1;t.amount!==void 0&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),h=t.amount);let R,M=!1,L,D,C,k;p&&(R=p.getSpacedPoints(u),M=!0,f=!1,L=p.computeFrenetFrames(u,!1),D=new q,C=new q,k=new q),f||(E=0,d=0,m=0,_=0);const U=a.extractPoints(c);let F=U.shape;const S=U.holes;if(!ai.isClockWise(F)){F=F.reverse();for(let I=0,O=S.length;I<O;I++){const Q=S[I];ai.isClockWise(Q)&&(S[I]=Q.reverse())}}const b=ai.triangulateShape(F,S),T=F;for(let I=0,O=S.length;I<O;I++){const Q=S[I];F=F.concat(Q)}function y(I,O,Q){return O||console.error("THREE.ExtrudeGeometry: vec does not exist"),O.clone().multiplyScalar(Q).add(I)}const v=F.length,w=b.length;function g(I,O,Q){let J,X,B;const P=I.x-O.x,K=I.y-O.y,j=Q.x-I.x,$=Q.y-I.y,oe=P*P+K*K,ue=P*$-K*j;if(Math.abs(ue)>Number.EPSILON){const ce=Math.sqrt(oe),Ae=Math.sqrt(j*j+$*$),ge=O.x-K/ce,Y=O.y+P/ce,pe=Q.x-$/Ae,le=Q.y+j/Ae,_e=((pe-ge)*$-(le-Y)*j)/(P*$-K*j);J=ge+P*_e-I.x,X=Y+K*_e-I.y;const be=J*J+X*X;if(be<=2)return new xe(J,X);B=Math.sqrt(be/2)}else{let ce=!1;P>Number.EPSILON?j>Number.EPSILON&&(ce=!0):P<-Number.EPSILON?j<-Number.EPSILON&&(ce=!0):Math.sign(K)===Math.sign($)&&(ce=!0),ce?(J=-K,X=P,B=Math.sqrt(oe)):(J=P,X=K,B=Math.sqrt(oe/2))}return new xe(J/B,X/B)}const N=[];for(let I=0,O=T.length,Q=O-1,J=I+1;I<O;I++,Q++,J++)Q===O&&(Q=0),J===O&&(J=0),N[I]=g(T[I],T[Q],T[J]);const z=[];let Z,ee=N.concat();for(let I=0,O=S.length;I<O;I++){const Q=S[I];Z=[];for(let J=0,X=Q.length,B=X-1,P=J+1;J<X;J++,B++,P++)B===X&&(B=0),P===X&&(P=0),Z[J]=g(Q[J],Q[B],Q[P]);z.push(Z),ee=ee.concat(Z)}for(let I=0;I<E;I++){const O=I/E,Q=d*Math.cos(O*Math.PI/2),J=m*Math.sin(O*Math.PI/2)+_;for(let X=0,B=T.length;X<B;X++){const P=y(T[X],N[X],J);ie(P.x,P.y,-Q)}for(let X=0,B=S.length;X<B;X++){const P=S[X];Z=z[X];for(let K=0,j=P.length;K<j;K++){const $=y(P[K],Z[K],J);ie($.x,$.y,-Q)}}}const te=m+_;for(let I=0;I<v;I++){const O=f?y(F[I],ee[I],te):F[I];M?(C.copy(L.normals[0]).multiplyScalar(O.x),D.copy(L.binormals[0]).multiplyScalar(O.y),k.copy(R[0]).add(C).add(D),ie(k.x,k.y,k.z)):ie(O.x,O.y,0)}for(let I=1;I<=u;I++)for(let O=0;O<v;O++){const Q=f?y(F[O],ee[O],te):F[O];M?(C.copy(L.normals[I]).multiplyScalar(Q.x),D.copy(L.binormals[I]).multiplyScalar(Q.y),k.copy(R[I]).add(C).add(D),ie(k.x,k.y,k.z)):ie(Q.x,Q.y,h/u*I)}for(let I=E-1;I>=0;I--){const O=I/E,Q=d*Math.cos(O*Math.PI/2),J=m*Math.sin(O*Math.PI/2)+_;for(let X=0,B=T.length;X<B;X++){const P=y(T[X],N[X],J);ie(P.x,P.y,h+Q)}for(let X=0,B=S.length;X<B;X++){const P=S[X];Z=z[X];for(let K=0,j=P.length;K<j;K++){const $=y(P[K],Z[K],J);M?ie($.x,$.y+R[u-1].y,R[u-1].x+Q):ie($.x,$.y,h+Q)}}}se(),H();function se(){const I=r.length/3;if(f){let O=0,Q=v*O;for(let J=0;J<w;J++){const X=b[J];fe(X[2]+Q,X[1]+Q,X[0]+Q)}O=u+E*2,Q=v*O;for(let J=0;J<w;J++){const X=b[J];fe(X[0]+Q,X[1]+Q,X[2]+Q)}}else{for(let O=0;O<w;O++){const Q=b[O];fe(Q[2],Q[1],Q[0])}for(let O=0;O<w;O++){const Q=b[O];fe(Q[0]+v*u,Q[1]+v*u,Q[2]+v*u)}}i.addGroup(I,r.length/3-I,0)}function H(){const I=r.length/3;let O=0;W(T,O),O+=T.length;for(let Q=0,J=S.length;Q<J;Q++){const X=S[Q];W(X,O),O+=X.length}i.addGroup(I,r.length/3-I,1)}function W(I,O){let Q=I.length;for(;--Q>=0;){const J=Q;let X=Q-1;X<0&&(X=I.length-1);for(let B=0,P=u+E*2;B<P;B++){const K=v*B,j=v*(B+1),$=O+J+K,oe=O+X+K,ue=O+X+j,ce=O+J+j;de($,oe,ue,ce)}}}function ie(I,O,Q){l.push(I),l.push(O),l.push(Q)}function fe(I,O,Q){me(I),me(O),me(Q);const J=r.length/3,X=A.generateTopUV(i,r,J-3,J-2,J-1);ye(X[0]),ye(X[1]),ye(X[2])}function de(I,O,Q,J){me(I),me(O),me(J),me(O),me(Q),me(J);const X=r.length/3,B=A.generateSideWallUV(i,r,X-6,X-3,X-2,X-1);ye(B[0]),ye(B[1]),ye(B[3]),ye(B[1]),ye(B[2]),ye(B[3])}function me(I){r.push(l[I*3+0]),r.push(l[I*3+1]),r.push(l[I*3+2])}function ye(I){s.push(I.x),s.push(I.y)}}}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,i=this.parameters.options;return L1(t,i,e)}static fromJSON(e,t){const i=[];for(let s=0,o=e.shapes.length;s<o;s++){const a=t[e.shapes[s]];i.push(a)}const r=e.options.extrudePath;return r!==void 0&&(e.options.extrudePath=new dm[r.type]().fromJSON(r)),new Fr(i,e.options)}}const I1={generateTopUV:function(n,e,t,i,r){const s=e[t*3],o=e[t*3+1],a=e[i*3],l=e[i*3+1],c=e[r*3],u=e[r*3+1];return[new xe(s,o),new xe(a,l),new xe(c,u)]},generateSideWallUV:function(n,e,t,i,r,s){const o=e[t*3],a=e[t*3+1],l=e[t*3+2],c=e[i*3],u=e[i*3+1],h=e[i*3+2],f=e[r*3],d=e[r*3+1],m=e[r*3+2],_=e[s*3],E=e[s*3+1],p=e[s*3+2];return Math.abs(a-u)<Math.abs(o-c)?[new xe(o,1-l),new xe(c,1-h),new xe(f,1-m),new xe(_,1-p)]:[new xe(a,1-l),new xe(u,1-h),new xe(d,1-m),new xe(E,1-p)]}};function L1(n,e,t){if(t.shapes=[],Array.isArray(n))for(let i=0,r=n.length;i<r;i++){const s=n[i];t.shapes.push(s.uuid)}else t.shapes.push(n.uuid);return e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}class nu extends Ke{constructor(e,t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const i=[],r=[],s=[],o=[];let a=0,l=0;if(Array.isArray(e)===!1)c(e);else for(let u=0;u<e.length;u++)c(e[u]),this.addGroup(a,l,u),a+=l,l=0;this.setIndex(i),this.setAttribute("position",new ut(r,3)),this.setAttribute("normal",new ut(s,3)),this.setAttribute("uv",new ut(o,2));function c(u){const h=r.length/3,f=u.extractPoints(t);let d=f.shape;const m=f.holes;ai.isClockWise(d)===!1&&(d=d.reverse());for(let E=0,p=m.length;E<p;E++){const A=m[E];ai.isClockWise(A)===!0&&(m[E]=A.reverse())}const _=ai.triangulateShape(d,m);for(let E=0,p=m.length;E<p;E++){const A=m[E];d=d.concat(A)}for(let E=0,p=d.length;E<p;E++){const A=d[E];r.push(A.x,A.y,0),s.push(0,0,1),o.push(A.x,A.y)}for(let E=0,p=_.length;E<p;E++){const A=_[E],R=A[0]+h,M=A[1]+h,L=A[2]+h;i.push(R,M,L),l+=3}}}toJSON(){const e=super.toJSON(),t=this.parameters.shapes;return R1(t,e)}static fromJSON(e,t){const i=[];for(let r=0,s=e.shapes.length;r<s;r++){const o=t[e.shapes[r]];i.push(o)}return new nu(i,e.curveSegments)}}function R1(n,e){if(e.shapes=[],Array.isArray(n))for(let t=0,i=n.length;t<i;t++){const r=n[t];e.shapes.push(r.uuid)}else e.shapes.push(n.uuid);return e}class P1 extends Rt{constructor(e){super(),this.type="ShadowMaterial",this.color=new Te(0),this.transparent=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this}}P1.prototype.isShadowMaterial=!0;class Am extends Rt{constructor(e){super(),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Te(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Te(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ir,this.normalScale=new xe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this}}Am.prototype.isMeshStandardMaterial=!0;class D1 extends Am{constructor(e){super(),this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoat=0,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new xe(1,1),this.clearcoatNormalMap=null,this.reflectivity=.5,Object.defineProperty(this,"ior",{get:function(){return(1+.4*this.reflectivity)/(1-.4*this.reflectivity)},set:function(t){this.reflectivity=Ht(2.5*(t-1)/(t+1),0,1)}}),this.sheen=null,this.transmission=0,this.transmissionMap=null,this.thickness=.01,this.thicknessMap=null,this.attenuationDistance=0,this.attenuationTint=new Te(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularTint=new Te(1,1,1),this.specularTintMap=null,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.reflectivity=e.reflectivity,e.sheen?this.sheen=(this.sheen||new Te).copy(e.sheen):this.sheen=null,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationTint.copy(e.attenuationTint),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularTint.copy(e.specularTint),this.specularTintMap=e.specularTintMap,this}}D1.prototype.isMeshPhysicalMaterial=!0;class B1 extends Rt{constructor(e){super(),this.type="MeshPhongMaterial",this.color=new Te(16777215),this.specular=new Te(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Te(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ir,this.normalScale=new xe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=ma,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this}}B1.prototype.isMeshPhongMaterial=!0;class F1 extends Rt{constructor(e){super(),this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Te(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Te(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ir,this.normalScale=new xe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this}}F1.prototype.isMeshToonMaterial=!0;class N1 extends Rt{constructor(e){super(),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ir,this.normalScale=new xe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}N1.prototype.isMeshNormalMaterial=!0;class O1 extends Rt{constructor(e){super(),this.type="MeshLambertMaterial",this.color=new Te(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Te(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=ma,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this}}O1.prototype.isMeshLambertMaterial=!0;class U1 extends Rt{constructor(e){super(),this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Te(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ir,this.normalScale=new xe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this}}U1.prototype.isMeshMatcapMaterial=!0;class V1 extends ui{constructor(e){super(),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}V1.prototype.isLineDashedMaterial=!0;const et={arraySlice:function(n,e,t){return et.isTypedArray(n)?new n.constructor(n.subarray(e,t!==void 0?t:n.length)):n.slice(e,t)},convertArray:function(n,e,t){return!n||!t&&n.constructor===e?n:typeof e.BYTES_PER_ELEMENT=="number"?new e(n):Array.prototype.slice.call(n)},isTypedArray:function(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)},getKeyframeOrder:function(n){function e(r,s){return n[r]-n[s]}const t=n.length,i=new Array(t);for(let r=0;r!==t;++r)i[r]=r;return i.sort(e),i},sortedArray:function(n,e,t){const i=n.length,r=new n.constructor(i);for(let s=0,o=0;o!==i;++s){const a=t[s]*e;for(let l=0;l!==e;++l)r[o++]=n[a+l]}return r},flattenJSON:function(n,e,t,i){let r=1,s=n[0];for(;s!==void 0&&s[i]===void 0;)s=n[r++];if(s===void 0)return;let o=s[i];if(o!==void 0)if(Array.isArray(o))do o=s[i],o!==void 0&&(e.push(s.time),t.push.apply(t,o)),s=n[r++];while(s!==void 0);else if(o.toArray!==void 0)do o=s[i],o!==void 0&&(e.push(s.time),o.toArray(t,t.length)),s=n[r++];while(s!==void 0);else do o=s[i],o!==void 0&&(e.push(s.time),t.push(o)),s=n[r++];while(s!==void 0)},subclip:function(n,e,t,i,r=30){const s=n.clone();s.name=e;const o=[];for(let l=0;l<s.tracks.length;++l){const c=s.tracks[l],u=c.getValueSize(),h=[],f=[];for(let d=0;d<c.times.length;++d){const m=c.times[d]*r;if(!(m<t||m>=i)){h.push(c.times[d]);for(let _=0;_<u;++_)f.push(c.values[d*u+_])}}h.length!==0&&(c.times=et.convertArray(h,c.times.constructor),c.values=et.convertArray(f,c.values.constructor),o.push(c))}s.tracks=o;let a=1/0;for(let l=0;l<s.tracks.length;++l)a>s.tracks[l].times[0]&&(a=s.tracks[l].times[0]);for(let l=0;l<s.tracks.length;++l)s.tracks[l].shift(-1*a);return s.resetDuration(),s},makeClipAdditive:function(n,e=0,t=n,i=30){i<=0&&(i=30);const r=t.tracks.length,s=e/i;for(let o=0;o<r;++o){const a=t.tracks[o],l=a.ValueTypeName;if(l==="bool"||l==="string")continue;const c=n.tracks.find(function(p){return p.name===a.name&&p.ValueTypeName===l});if(c===void 0)continue;let u=0;const h=a.getValueSize();a.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(u=h/3);let f=0;const d=c.getValueSize();c.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(f=d/3);const m=a.times.length-1;let _;if(s<=a.times[0]){const p=u,A=h-u;_=et.arraySlice(a.values,p,A)}else if(s>=a.times[m]){const p=m*h+u,A=p+h-u;_=et.arraySlice(a.values,p,A)}else{const p=a.createInterpolant(),A=u,R=h-u;p.evaluate(s),_=et.arraySlice(p.resultBuffer,A,R)}l==="quaternion"&&new Ot().fromArray(_).normalize().conjugate().toArray(_);const E=c.times.length;for(let p=0;p<E;++p){const A=p*d+f;if(l==="quaternion")Ot.multiplyQuaternionsFlat(c.values,A,_,0,c.values,A);else{const R=d-f*2;for(let M=0;M<R;++M)c.values[A+M]-=_[M]}}}return n.blendMode=Dp,n}};class fi{constructor(e,t,i,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=r!==void 0?r:new t.constructor(i),this.sampleValues=t,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let i=this._cachedIndex,r=t[i],s=t[i-1];e:{t:{let o;n:{i:if(!(e<r)){for(let a=i+2;;){if(r===void 0){if(e<s)break i;return i=t.length,this._cachedIndex=i,this.afterEnd_(i-1,e,s)}if(i===a)break;if(s=r,r=t[++i],e<r)break t}o=t.length;break n}if(!(e>=s)){const a=t[1];e<a&&(i=2,s=a);for(let l=i-2;;){if(s===void 0)return this._cachedIndex=0,this.beforeStart_(0,e,r);if(i===l)break;if(r=s,s=t[--i-1],e>=s)break t}o=i,i=0;break n}break e}for(;i<o;){const a=i+o>>>1;e<t[a]?o=a:i=a+1}if(r=t[i],s=t[i-1],s===void 0)return this._cachedIndex=0,this.beforeStart_(0,e,r);if(r===void 0)return i=t.length,this._cachedIndex=i,this.afterEnd_(i-1,s,e)}this._cachedIndex=i,this.intervalChanged_(i,s,r)}return this.interpolate_(i,s,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,r=this.valueSize,s=e*r;for(let o=0;o!==r;++o)t[o]=i[s+o];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}fi.prototype.beforeStart_=fi.prototype.copySampleValue_;fi.prototype.afterEnd_=fi.prototype.copySampleValue_;class k1 extends fi{constructor(e,t,i,r){super(e,t,i,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:rr,endingEnd:rr}}intervalChanged_(e,t,i){const r=this.parameterPositions;let s=e-2,o=e+1,a=r[s],l=r[o];if(a===void 0)switch(this.getSettings_().endingStart){case sr:s=e,a=2*t-i;break;case Zo:s=r.length-2,a=t+r[s]-r[s+1];break;default:s=e,a=i}if(l===void 0)switch(this.getSettings_().endingEnd){case sr:o=e,l=2*i-t;break;case Zo:o=1,l=i+r[1]-r[0];break;default:o=e-1,l=t}const c=(i-t)*.5,u=this.valueSize;this._weightPrev=c/(t-a),this._weightNext=c/(l-i),this._offsetPrev=s*u,this._offsetNext=o*u}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,c=l-a,u=this._offsetPrev,h=this._offsetNext,f=this._weightPrev,d=this._weightNext,m=(i-t)/(r-t),_=m*m,E=_*m,p=-f*E+2*f*_-f*m,A=(1+f)*E+(-1.5-2*f)*_+(-.5+f)*m+1,R=(-1-d)*E+(1.5+d)*_+.5*m,M=d*E-d*_;for(let L=0;L!==a;++L)s[L]=p*o[u+L]+A*o[c+L]+R*o[l+L]+M*o[h+L];return s}}class vm extends fi{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,c=l-a,u=(i-t)/(r-t),h=1-u;for(let f=0;f!==a;++f)s[f]=o[c+f]*h+o[l+f]*u;return s}}class z1 extends fi{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e){return this.copySampleValue_(e-1)}}class wn{constructor(e,t,i,r){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=et.convertArray(t,this.TimeBufferType),this.values=et.convertArray(i,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let i;if(t.toJSON!==this.toJSON)i=t.toJSON(e);else{i={name:e.name,times:et.convertArray(e.times,Array),values:et.convertArray(e.values,Array)};const r=e.getInterpolation();r!==e.DefaultInterpolation&&(i.interpolation=r)}return i.type=e.ValueTypeName,i}InterpolantFactoryMethodDiscrete(e){return new z1(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new vm(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new k1(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case Ko:t=this.InterpolantFactoryMethodDiscrete;break;case Yo:t=this.InterpolantFactoryMethodLinear;break;case Qa:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(i);return console.warn("THREE.KeyframeTrack:",i),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Ko;case this.InterpolantFactoryMethodLinear:return Yo;case this.InterpolantFactoryMethodSmooth:return Qa}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]*=e}return this}trim(e,t){const i=this.times,r=i.length;let s=0,o=r-1;for(;s!==r&&i[s]<e;)++s;for(;o!==-1&&i[o]>t;)--o;if(++o,s!==0||o!==r){s>=o&&(o=Math.max(o,1),s=o-1);const a=this.getValueSize();this.times=et.arraySlice(i,s,o),this.values=et.arraySlice(this.values,s*a,o*a)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const i=this.times,r=this.values,s=i.length;s===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let a=0;a!==s;a++){const l=i[a];if(typeof l=="number"&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,l),e=!1;break}if(o!==null&&o>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,l,o),e=!1;break}o=l}if(r!==void 0&&et.isTypedArray(r))for(let a=0,l=r.length;a!==l;++a){const c=r[a];if(isNaN(c)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,c),e=!1;break}}return e}optimize(){const e=et.arraySlice(this.times),t=et.arraySlice(this.values),i=this.getValueSize(),r=this.getInterpolation()===Qa,s=e.length-1;let o=1;for(let a=1;a<s;++a){let l=!1;const c=e[a],u=e[a+1];if(c!==u&&(a!==1||c!==e[0]))if(r)l=!0;else{const h=a*i,f=h-i,d=h+i;for(let m=0;m!==i;++m){const _=t[h+m];if(_!==t[f+m]||_!==t[d+m]){l=!0;break}}}if(l){if(a!==o){e[o]=e[a];const h=a*i,f=o*i;for(let d=0;d!==i;++d)t[f+d]=t[h+d]}++o}}if(s>0){e[o]=e[s];for(let a=s*i,l=o*i,c=0;c!==i;++c)t[l+c]=t[a+c];++o}return o!==e.length?(this.times=et.arraySlice(e,0,o),this.values=et.arraySlice(t,0,o*i)):(this.times=e,this.values=t),this}clone(){const e=et.arraySlice(this.times,0),t=et.arraySlice(this.values,0),i=this.constructor,r=new i(this.name,e,t);return r.createInterpolant=this.createInterpolant,r}}wn.prototype.TimeBufferType=Float32Array;wn.prototype.ValueBufferType=Float32Array;wn.prototype.DefaultInterpolation=Yo;class Nr extends wn{}Nr.prototype.ValueTypeName="bool";Nr.prototype.ValueBufferType=Array;Nr.prototype.DefaultInterpolation=Ko;Nr.prototype.InterpolantFactoryMethodLinear=void 0;Nr.prototype.InterpolantFactoryMethodSmooth=void 0;class ym extends wn{}ym.prototype.ValueTypeName="color";class Xo extends wn{}Xo.prototype.ValueTypeName="number";class H1 extends fi{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=(i-t)/(r-t);let c=e*a;for(let u=c+a;c!==u;c+=4)Ot.slerpFlat(s,0,o,c-a,o,c,l);return s}}class Fs extends wn{InterpolantFactoryMethodLinear(e){return new H1(this.times,this.values,this.getValueSize(),e)}}Fs.prototype.ValueTypeName="quaternion";Fs.prototype.DefaultInterpolation=Yo;Fs.prototype.InterpolantFactoryMethodSmooth=void 0;class Or extends wn{}Or.prototype.ValueTypeName="string";Or.prototype.ValueBufferType=Array;Or.prototype.DefaultInterpolation=Ko;Or.prototype.InterpolantFactoryMethodLinear=void 0;Or.prototype.InterpolantFactoryMethodSmooth=void 0;class jo extends wn{}jo.prototype.ValueTypeName="vector";class Uf{constructor(e,t=-1,i,r=kc){this.name=e,this.tracks=i,this.duration=t,this.blendMode=r,this.uuid=vn(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],i=e.tracks,r=1/(e.fps||1);for(let o=0,a=i.length;o!==a;++o)t.push(W1(i[o]).scale(r));const s=new this(e.name,e.duration,t,e.blendMode);return s.uuid=e.uuid,s}static toJSON(e){const t=[],i=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let s=0,o=i.length;s!==o;++s)t.push(wn.toJSON(i[s]));return r}static CreateFromMorphTargetSequence(e,t,i,r){const s=t.length,o=[];for(let a=0;a<s;a++){let l=[],c=[];l.push((a+s-1)%s,a,(a+1)%s),c.push(0,1,0);const u=et.getKeyframeOrder(l);l=et.sortedArray(l,1,u),c=et.sortedArray(c,1,u),!r&&l[0]===0&&(l.push(s),c.push(c[0])),o.push(new Xo(".morphTargetInfluences["+t[a].name+"]",l,c).scale(1/i))}return new this(e,-1,o)}static findByName(e,t){let i=e;if(!Array.isArray(e)){const r=e;i=r.geometry&&r.geometry.animations||r.animations}for(let r=0;r<i.length;r++)if(i[r].name===t)return i[r];return null}static CreateClipsFromMorphTargetSequences(e,t,i){const r={},s=/^([\w-]*?)([\d]+)$/;for(let a=0,l=e.length;a<l;a++){const c=e[a],u=c.name.match(s);if(u&&u.length>1){const h=u[1];let f=r[h];f||(r[h]=f=[]),f.push(c)}}const o=[];for(const a in r)o.push(this.CreateFromMorphTargetSequence(a,r[a],t,i));return o}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const i=function(h,f,d,m,_){if(d.length!==0){const E=[],p=[];et.flattenJSON(d,E,p,m),E.length!==0&&_.push(new h(f,E,p))}},r=[],s=e.name||"default",o=e.fps||30,a=e.blendMode;let l=e.length||-1;const c=e.hierarchy||[];for(let h=0;h<c.length;h++){const f=c[h].keys;if(!(!f||f.length===0))if(f[0].morphTargets){const d={};let m;for(m=0;m<f.length;m++)if(f[m].morphTargets)for(let _=0;_<f[m].morphTargets.length;_++)d[f[m].morphTargets[_]]=-1;for(const _ in d){const E=[],p=[];for(let A=0;A!==f[m].morphTargets.length;++A){const R=f[m];E.push(R.time),p.push(R.morphTarget===_?1:0)}r.push(new Xo(".morphTargetInfluence["+_+"]",E,p))}l=d.length*(o||1)}else{const d=".bones["+t[h].name+"]";i(jo,d+".position",f,"pos",r),i(Fs,d+".quaternion",f,"rot",r),i(jo,d+".scale",f,"scl",r)}}return r.length===0?null:new this(s,l,r,a)}resetDuration(){const e=this.tracks;let t=0;for(let i=0,r=e.length;i!==r;++i){const s=this.tracks[i];t=Math.max(t,s.times[s.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function G1(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Xo;case"vector":case"vector2":case"vector3":case"vector4":return jo;case"color":return ym;case"quaternion":return Fs;case"bool":case"boolean":return Nr;case"string":return Or}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}function W1(n){if(n.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=G1(n.type);if(n.times===void 0){const t=[],i=[];et.flattenJSON(n.keys,t,i,"value"),n.times=t,n.values=i}return e.parse!==void 0?e.parse(n):new e(n.name,n.times,n.values,n.interpolation)}const Sr={enabled:!1,files:{},add:function(n,e){this.enabled!==!1&&(this.files[n]=e)},get:function(n){if(this.enabled!==!1)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}};class q1{constructor(e,t,i){const r=this;let s=!1,o=0,a=0,l;const c=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=i,this.itemStart=function(u){a++,s===!1&&r.onStart!==void 0&&r.onStart(u,o,a),s=!0},this.itemEnd=function(u){o++,r.onProgress!==void 0&&r.onProgress(u,o,a),o===a&&(s=!1,r.onLoad!==void 0&&r.onLoad())},this.itemError=function(u){r.onError!==void 0&&r.onError(u)},this.resolveURL=function(u){return l?l(u):u},this.setURLModifier=function(u){return l=u,this},this.addHandler=function(u,h){return c.push(u,h),this},this.removeHandler=function(u){const h=c.indexOf(u);return h!==-1&&c.splice(h,2),this},this.getHandler=function(u){for(let h=0,f=c.length;h<f;h+=2){const d=c[h],m=c[h+1];if(d.global&&(d.lastIndex=0),d.test(u))return m}return null}}}const Q1=new q1;class di{constructor(e){this.manager=e!==void 0?e:Q1,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const i=this;return new Promise(function(r,s){i.load(e,r,t,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}const nn={};class K1 extends di{constructor(e){super(e)}load(e,t,i,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=Sr.get(e);if(o!==void 0)return s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o;if(nn[e]!==void 0){nn[e].push({onLoad:t,onProgress:i,onError:r});return}const a=/^data:(.*?)(;base64)?,(.*)$/,l=e.match(a);let c;if(l){const u=l[1],h=!!l[2];let f=l[3];f=decodeURIComponent(f),h&&(f=atob(f));try{let d;const m=(this.responseType||"").toLowerCase();switch(m){case"arraybuffer":case"blob":const _=new Uint8Array(f.length);for(let p=0;p<f.length;p++)_[p]=f.charCodeAt(p);m==="blob"?d=new Blob([_.buffer],{type:u}):d=_.buffer;break;case"document":d=new DOMParser().parseFromString(f,u);break;case"json":d=JSON.parse(f);break;default:d=f;break}setTimeout(function(){t&&t(d),s.manager.itemEnd(e)},0)}catch(d){setTimeout(function(){r&&r(d),s.manager.itemError(e),s.manager.itemEnd(e)},0)}}else{nn[e]=[],nn[e].push({onLoad:t,onProgress:i,onError:r}),c=new XMLHttpRequest,c.open("GET",e,!0),c.addEventListener("load",function(u){const h=this.response,f=nn[e];if(delete nn[e],this.status===200||this.status===0){this.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),Sr.add(e,h);for(let d=0,m=f.length;d<m;d++){const _=f[d];_.onLoad&&_.onLoad(h)}s.manager.itemEnd(e)}else{for(let d=0,m=f.length;d<m;d++){const _=f[d];_.onError&&_.onError(u)}s.manager.itemError(e),s.manager.itemEnd(e)}},!1),c.addEventListener("progress",function(u){const h=nn[e];for(let f=0,d=h.length;f<d;f++){const m=h[f];m.onProgress&&m.onProgress(u)}},!1),c.addEventListener("error",function(u){const h=nn[e];delete nn[e];for(let f=0,d=h.length;f<d;f++){const m=h[f];m.onError&&m.onError(u)}s.manager.itemError(e),s.manager.itemEnd(e)},!1),c.addEventListener("abort",function(u){const h=nn[e];delete nn[e];for(let f=0,d=h.length;f<d;f++){const m=h[f];m.onError&&m.onError(u)}s.manager.itemError(e),s.manager.itemEnd(e)},!1),this.responseType!==void 0&&(c.responseType=this.responseType),this.withCredentials!==void 0&&(c.withCredentials=this.withCredentials),c.overrideMimeType&&c.overrideMimeType(this.mimeType!==void 0?this.mimeType:"text/plain");for(const u in this.requestHeader)c.setRequestHeader(u,this.requestHeader[u]);c.send(null)}return s.manager.itemStart(e),c}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class xm extends di{constructor(e){super(e)}load(e,t,i,r){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=Sr.get(e);if(o!==void 0)return s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o;const a=document.createElementNS("http://www.w3.org/1999/xhtml","img");function l(){a.removeEventListener("load",l,!1),a.removeEventListener("error",c,!1),Sr.add(e,this),t&&t(this),s.manager.itemEnd(e)}function c(u){a.removeEventListener("load",l,!1),a.removeEventListener("error",c,!1),r&&r(u),s.manager.itemError(e),s.manager.itemEnd(e)}return a.addEventListener("load",l,!1),a.addEventListener("error",c,!1),e.substr(0,5)!=="data:"&&this.crossOrigin!==void 0&&(a.crossOrigin=this.crossOrigin),s.manager.itemStart(e),a.src=e,a}}class Y1 extends di{constructor(e){super(e)}load(e,t,i,r){const s=new wa,o=new xm(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);let a=0;function l(c){o.load(e[c],function(u){s.images[c]=u,a++,a===6&&(s.needsUpdate=!0,t&&t(s))},void 0,r)}for(let c=0;c<e.length;++c)l(c);return s}}class Z1 extends di{constructor(e){super(e)}load(e,t,i,r){const s=new Et,o=new xm(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(a){s.image=a;const l=e.search(/\.jpe?g($|\?)/i)>0||e.search(/^data\:image\/jpeg/)===0;s.format=l?Pi:ln,s.needsUpdate=!0,t!==void 0&&t(s)},i,r),s}}class J1 extends Xt{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new Ea(t,e))}getPoint(e){const t=e*this.getLength(),i=this.getCurveLengths();let r=0;for(;r<i.length;){if(i[r]>=t){const s=i[r]-t,o=this.curves[r],a=o.getLength(),l=a===0?0:1-s/a;return o.getPointAt(l)}r++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let i=0,r=this.curves.length;i<r;i++)t+=this.curves[i].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let i;for(let r=0,s=this.curves;r<s.length;r++){const o=s[r],a=o&&o.isEllipseCurve?e*2:o&&(o.isLineCurve||o.isLineCurve3)?1:o&&o.isSplineCurve?e*o.points.length:e,l=o.getPoints(a);for(let c=0;c<l.length;c++){const u=l[c];i&&i.equals(u)||(t.push(u),i=u)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){const r=e.curves[t];this.curves.push(r.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,i=this.curves.length;t<i;t++){const r=this.curves[t];e.curves.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){const r=e.curves[t];this.curves.push(new dm[r.type]().fromJSON(r))}return this}}class ac extends J1{constructor(e){super(),this.type="Path",this.currentPoint=new xe,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,i=e.length;t<i;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const i=new Ea(this.currentPoint.clone(),new xe(e,t));return this.curves.push(i),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,i,r){const s=new eu(this.currentPoint.clone(),new xe(e,t),new xe(i,r));return this.curves.push(s),this.currentPoint.set(i,r),this}bezierCurveTo(e,t,i,r,s,o){const a=new $c(this.currentPoint.clone(),new xe(e,t),new xe(i,r),new xe(s,o));return this.curves.push(a),this.currentPoint.set(s,o),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),i=new tu(t);return this.curves.push(i),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,i,r,s,o){const a=this.currentPoint.x,l=this.currentPoint.y;return this.absarc(e+a,t+l,i,r,s,o),this}absarc(e,t,i,r,s,o){return this.absellipse(e,t,i,i,r,s,o),this}ellipse(e,t,i,r,s,o,a,l){const c=this.currentPoint.x,u=this.currentPoint.y;return this.absellipse(e+c,t+u,i,r,s,o,a,l),this}absellipse(e,t,i,r,s,o,a,l){const c=new Sa(e,t,i,r,s,o,a,l);if(this.curves.length>0){const h=c.getPoint(0);h.equals(this.currentPoint)||this.lineTo(h.x,h.y)}this.curves.push(c);const u=c.getPoint(1);return this.currentPoint.copy(u),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class iu extends ac{constructor(e){super(e),this.uuid=vn(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let i=0,r=this.holes.length;i<r;i++)t[i]=this.holes[i].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){const r=e.holes[t];this.holes.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,i=this.holes.length;t<i;t++){const r=this.holes[t];e.holes.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){const r=e.holes[t];this.holes.push(new ac().fromJSON(r))}return this}}class _n extends We{constructor(e,t=1){super(),this.type="Light",this.color=new Te(e),this.intensity=t}dispose(){}copy(e){return super.copy(e),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),t}}_n.prototype.isLight=!0;class X1 extends _n{constructor(e,t,i){super(e,i),this.type="HemisphereLight",this.position.copy(We.DefaultUp),this.updateMatrix(),this.groundColor=new Te(t)}copy(e){return _n.prototype.copy.call(this,e),this.groundColor.copy(e.groundColor),this}}X1.prototype.isHemisphereLight=!0;const Vf=new Ie,kf=new q,zf=new q;class ru{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.mapSize=new xe(512,512),this.map=null,this.mapPass=null,this.matrix=new Ie,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new ba,this._frameExtents=new xe(1,1),this._viewportCount=1,this._viewports=[new Ze(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,i=this.matrix;kf.setFromMatrixPosition(e.matrixWorld),t.position.copy(kf),zf.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(zf),t.updateMatrixWorld(),Vf.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Vf),i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(t.projectionMatrix),i.multiply(t.matrixWorldInverse)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class _m extends ru{constructor(){super(new Dt(50,1,.5,500)),this.focus=1}updateMatrices(e){const t=this.camera,i=nc*2*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height,s=e.distance||t.far;(i!==t.fov||r!==t.aspect||s!==t.far)&&(t.fov=i,t.aspect=r,t.far=s,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}_m.prototype.isSpotLightShadow=!0;class j1 extends _n{constructor(e,t,i=0,r=Math.PI/3,s=0,o=1){super(e,t),this.type="SpotLight",this.position.copy(We.DefaultUp),this.updateMatrix(),this.target=new We,this.distance=i,this.angle=r,this.penumbra=s,this.decay=o,this.shadow=new _m}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}j1.prototype.isSpotLight=!0;const Hf=new Ie,Zr=new q,Cl=new q;class wm extends ru{constructor(){super(new Dt(90,1,.5,500)),this._frameExtents=new xe(4,2),this._viewportCount=6,this._viewports=[new Ze(2,1,1,1),new Ze(0,1,1,1),new Ze(3,1,1,1),new Ze(1,1,1,1),new Ze(3,0,1,1),new Ze(1,0,1,1)],this._cubeDirections=[new q(1,0,0),new q(-1,0,0),new q(0,0,1),new q(0,0,-1),new q(0,1,0),new q(0,-1,0)],this._cubeUps=[new q(0,1,0),new q(0,1,0),new q(0,1,0),new q(0,1,0),new q(0,0,1),new q(0,0,-1)]}updateMatrices(e,t=0){const i=this.camera,r=this.matrix,s=e.distance||i.far;s!==i.far&&(i.far=s,i.updateProjectionMatrix()),Zr.setFromMatrixPosition(e.matrixWorld),i.position.copy(Zr),Cl.copy(i.position),Cl.add(this._cubeDirections[t]),i.up.copy(this._cubeUps[t]),i.lookAt(Cl),i.updateMatrixWorld(),r.makeTranslation(-Zr.x,-Zr.y,-Zr.z),Hf.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Hf)}}wm.prototype.isPointLightShadow=!0;class $1 extends _n{constructor(e,t,i=0,r=1){super(e,t),this.type="PointLight",this.distance=i,this.decay=r,this.shadow=new wm}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}$1.prototype.isPointLight=!0;class bm extends ru{constructor(){super(new Qc(-5,5,5,-5,.5,500))}}bm.prototype.isDirectionalLightShadow=!0;class Mm extends _n{constructor(e,t){super(e,t),this.type="DirectionalLight",this.position.copy(We.DefaultUp),this.updateMatrix(),this.target=new We,this.shadow=new bm}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}Mm.prototype.isDirectionalLight=!0;class eE extends _n{constructor(e,t){super(e,t),this.type="AmbientLight"}}eE.prototype.isAmbientLight=!0;class tE extends _n{constructor(e,t,i=10,r=10){super(e,t),this.type="RectAreaLight",this.width=i,this.height=r}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}tE.prototype.isRectAreaLight=!0;class Sm{constructor(){this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new q)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const i=e.x,r=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.282095),t.addScaledVector(o[1],.488603*r),t.addScaledVector(o[2],.488603*s),t.addScaledVector(o[3],.488603*i),t.addScaledVector(o[4],1.092548*(i*r)),t.addScaledVector(o[5],1.092548*(r*s)),t.addScaledVector(o[6],.315392*(3*s*s-1)),t.addScaledVector(o[7],1.092548*(i*s)),t.addScaledVector(o[8],.546274*(i*i-r*r)),t}getIrradianceAt(e,t){const i=e.x,r=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.886227),t.addScaledVector(o[1],2*.511664*r),t.addScaledVector(o[2],2*.511664*s),t.addScaledVector(o[3],2*.511664*i),t.addScaledVector(o[4],2*.429043*i*r),t.addScaledVector(o[5],2*.429043*r*s),t.addScaledVector(o[6],.743125*s*s-.247708),t.addScaledVector(o[7],2*.429043*i*s),t.addScaledVector(o[8],.429043*(i*i-r*r)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let i=0;i<9;i++)this.coefficients[i].addScaledVector(e.coefficients[i],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let i=0;i<9;i++)this.coefficients[i].lerp(e.coefficients[i],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const i=this.coefficients;for(let r=0;r<9;r++)i[r].fromArray(e,t+r*3);return this}toArray(e=[],t=0){const i=this.coefficients;for(let r=0;r<9;r++)i[r].toArray(e,t+r*3);return e}static getBasisAt(e,t){const i=e.x,r=e.y,s=e.z;t[0]=.282095,t[1]=.488603*r,t[2]=.488603*s,t[3]=.488603*i,t[4]=1.092548*i*r,t[5]=1.092548*r*s,t[6]=.315392*(3*s*s-1),t[7]=1.092548*i*s,t[8]=.546274*(i*i-r*r)}}Sm.prototype.isSphericalHarmonics3=!0;class su extends _n{constructor(e=new Sm,t=1){super(void 0,t),this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}su.prototype.isLightProbe=!0;class nE{static decodeText(e){if(typeof TextDecoder<"u")return new TextDecoder().decode(e);let t="";for(let i=0,r=e.length;i<r;i++)t+=String.fromCharCode(e[i]);try{return decodeURIComponent(escape(t))}catch{return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.substr(0,t+1)}}class iE extends Ke{constructor(){super(),this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}clone(){return new this.constructor().copy(this)}toJSON(){const e=super.toJSON(this);return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}iE.prototype.isInstancedBufferGeometry=!0;class rE extends it{constructor(e,t,i,r=1){typeof i=="number"&&(r=i,i=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),super(e,t,i),this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}rE.prototype.isInstancedBufferAttribute=!0;class sE extends di{constructor(e){super(e),typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,i,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=Sr.get(e);if(o!==void 0)return s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o;const a={};a.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",a.headers=this.requestHeader,fetch(e,a).then(function(l){return l.blob()}).then(function(l){return createImageBitmap(l,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(l){Sr.add(e,l),t&&t(l),s.manager.itemEnd(e)}).catch(function(l){r&&r(l),s.manager.itemError(e),s.manager.itemEnd(e)}),s.manager.itemStart(e)}}sE.prototype.isImageBitmapLoader=!0;let _o;const oE={getContext:function(){return _o===void 0&&(_o=new(window.AudioContext||window.webkitAudioContext)),_o},setContext:function(n){_o=n}};class aE extends di{constructor(e){super(e)}load(e,t,i,r){const s=this,o=new K1(this.manager);o.setResponseType("arraybuffer"),o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(a){try{const l=a.slice(0);oE.getContext().decodeAudioData(l,function(u){t(u)})}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},i,r)}}class lE extends su{constructor(e,t,i=1){super(void 0,i);const r=new Te().set(e),s=new Te().set(t),o=new q(r.r,r.g,r.b),a=new q(s.r,s.g,s.b),l=Math.sqrt(Math.PI),c=l*Math.sqrt(.75);this.sh.coefficients[0].copy(o).add(a).multiplyScalar(l),this.sh.coefficients[1].copy(o).sub(a).multiplyScalar(c)}}lE.prototype.isHemisphereLightProbe=!0;class cE extends su{constructor(e,t=1){super(void 0,t);const i=new Te().set(e);this.sh.coefficients[0].set(i.r,i.g,i.b).multiplyScalar(2*Math.sqrt(Math.PI))}}cE.prototype.isAmbientLightProbe=!0;class uE extends We{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){if(this.detune=e,this.source.detune!==void 0)return this.isPlaying===!0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}class hE{constructor(e,t,i){this.binding=e,this.valueSize=i;let r,s,o;switch(t){case"quaternion":r=this._slerp,s=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(i*6),this._workIndex=5;break;case"string":case"bool":r=this._select,s=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(i*5);break;default:r=this._lerp,s=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(i*5)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=s,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const i=this.buffer,r=this.valueSize,s=e*r+r;let o=this.cumulativeWeight;if(o===0){for(let a=0;a!==r;++a)i[s+a]=i[a];o=t}else{o+=t;const a=t/o;this._mixBufferRegion(i,s,0,a,r)}this.cumulativeWeight=o}accumulateAdditive(e){const t=this.buffer,i=this.valueSize,r=i*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,r,0,e,i),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,i=this.buffer,r=e*t+t,s=this.cumulativeWeight,o=this.cumulativeWeightAdditive,a=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,s<1){const l=t*this._origIndex;this._mixBufferRegion(i,r,l,1-s,t)}o>0&&this._mixBufferRegionAdditive(i,r,this._addIndex*t,1,t);for(let l=t,c=t+t;l!==c;++l)if(i[l]!==i[l+t]){a.setValue(i,r);break}}saveOriginalState(){const e=this.binding,t=this.buffer,i=this.valueSize,r=i*this._origIndex;e.getValue(t,r);for(let s=i,o=r;s!==o;++s)t[s]=t[r+s%i];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let i=e;i<t;i++)this.buffer[i]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let i=0;i<this.valueSize;i++)this.buffer[t+i]=this.buffer[e+i]}_select(e,t,i,r,s){if(r>=.5)for(let o=0;o!==s;++o)e[t+o]=e[i+o]}_slerp(e,t,i,r){Ot.slerpFlat(e,t,e,t,e,i,r)}_slerpAdditive(e,t,i,r,s){const o=this._workIndex*s;Ot.multiplyQuaternionsFlat(e,o,e,t,e,i),Ot.slerpFlat(e,t,e,t,e,o,r)}_lerp(e,t,i,r,s){const o=1-r;for(let a=0;a!==s;++a){const l=t+a;e[l]=e[l]*o+e[i+a]*r}}_lerpAdditive(e,t,i,r,s){for(let o=0;o!==s;++o){const a=t+o;e[a]=e[a]+e[i+o]*r}}}const ou="\\[\\]\\.:\\/",fE=new RegExp("["+ou+"]","g"),au="[^"+ou+"]",dE="[^"+ou.replace("\\.","")+"]",pE=/((?:WC+[\/:])*)/.source.replace("WC",au),mE=/(WCOD+)?/.source.replace("WCOD",dE),gE=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",au),AE=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",au),vE=new RegExp("^"+pE+mE+gE+AE+"$"),yE=["material","materials","bones"];class xE{constructor(e,t,i){const r=i||Qe.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}getValue(e,t){this.bind();const i=this._targetGroup.nCachedObjects_,r=this._bindings[i];r!==void 0&&r.getValue(e,t)}setValue(e,t){const i=this._bindings;for(let r=this._targetGroup.nCachedObjects_,s=i.length;r!==s;++r)i[r].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].unbind()}}class Qe{constructor(e,t,i){this.path=t,this.parsedPath=i||Qe.parseTrackName(t),this.node=Qe.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,i){return e&&e.isAnimationObjectGroup?new Qe.Composite(e,t,i):new Qe(e,t,i)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(fE,"")}static parseTrackName(e){const t=vE.exec(e);if(!t)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const i={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},r=i.nodeName&&i.nodeName.lastIndexOf(".");if(r!==void 0&&r!==-1){const s=i.nodeName.substring(r+1);yE.indexOf(s)!==-1&&(i.nodeName=i.nodeName.substring(0,r),i.objectName=s)}if(i.propertyName===null||i.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return i}static findNode(e,t){if(!t||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const i=e.skeleton.getBoneByName(t);if(i!==void 0)return i}if(e.children){const i=function(s){for(let o=0;o<s.length;o++){const a=s[o];if(a.name===t||a.uuid===t)return a;const l=i(a.children);if(l)return l}return null},r=i(e.children);if(r)return r}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.node[this.propertyName]}_getValue_array(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)e[t++]=i[r]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,i=t.objectName,r=t.propertyName;let s=t.propertyIndex;if(e||(e=Qe.findNode(this.rootNode,t.nodeName)||this.rootNode,this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");return}if(i){let c=t.objectIndex;switch(i){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let u=0;u<e.length;u++)if(e[u].name===c){c=u;break}break;default:if(e[i]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[i]}if(c!==void 0){if(e[c]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[c]}}const o=e[r];if(o===void 0){const c=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+c+"."+r+" but it wasn't found.",e);return}let a=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?a=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(a=this.Versioning.MatrixWorldNeedsUpdate);let l=this.BindingType.Direct;if(s!==void 0){if(r==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(e.geometry.isBufferGeometry){if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[s]!==void 0&&(s=e.morphTargetDictionary[s])}else{console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences on THREE.Geometry. Use THREE.BufferGeometry instead.",this);return}}l=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=s}else o.fromArray!==void 0&&o.toArray!==void 0?(l=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(l=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=r;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][a]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}Qe.Composite=xE;Qe.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};Qe.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};Qe.prototype.GetterByBindingType=[Qe.prototype._getValue_direct,Qe.prototype._getValue_array,Qe.prototype._getValue_arrayElement,Qe.prototype._getValue_toArray];Qe.prototype.SetterByBindingTypeAndVersioning=[[Qe.prototype._setValue_direct,Qe.prototype._setValue_direct_setNeedsUpdate,Qe.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Qe.prototype._setValue_array,Qe.prototype._setValue_array_setNeedsUpdate,Qe.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Qe.prototype._setValue_arrayElement,Qe.prototype._setValue_arrayElement_setNeedsUpdate,Qe.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Qe.prototype._setValue_fromArray,Qe.prototype._setValue_fromArray_setNeedsUpdate,Qe.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class _E{constructor(e,t,i=null,r=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=i,this.blendMode=r;const s=t.tracks,o=s.length,a=new Array(o),l={endingStart:rr,endingEnd:rr};for(let c=0;c!==o;++c){const u=s[c].createInterpolant(null);a[c]=u,u.settings=l}this._interpolantSettings=l,this._interpolants=a,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=s_,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,i){if(e.fadeOut(t),this.fadeIn(t),i){const r=this._clip.duration,s=e._clip.duration,o=s/r,a=r/s;e.warp(1,o,t),this.warp(a,1,t)}return this}crossFadeTo(e,t,i){return e.crossFadeFrom(this,t,i)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,i){const r=this._mixer,s=r.time,o=this.timeScale;let a=this._timeScaleInterpolant;a===null&&(a=r._lendControlInterpolant(),this._timeScaleInterpolant=a);const l=a.parameterPositions,c=a.sampleValues;return l[0]=s,l[1]=s+i,c[0]=e/o,c[1]=t/o,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,i,r){if(!this.enabled){this._updateWeight(e);return}const s=this._startTime;if(s!==null){const l=(e-s)*i;if(l<0||i===0)return;this._startTime=null,t=i*l}t*=this._updateTimeScale(e);const o=this._updateTime(t),a=this._updateWeight(e);if(a>0){const l=this._interpolants,c=this._propertyBindings;switch(this.blendMode){case Dp:for(let u=0,h=l.length;u!==h;++u)l[u].evaluate(o),c[u].accumulateAdditive(a);break;case kc:default:for(let u=0,h=l.length;u!==h;++u)l[u].evaluate(o),c[u].accumulate(r,a)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const i=this._weightInterpolant;if(i!==null){const r=i.evaluate(e)[0];t*=r,e>i.parameterPositions[1]&&(this.stopFading(),r===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const i=this._timeScaleInterpolant;if(i!==null){const r=i.evaluate(e)[0];t*=r,e>i.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,i=this.loop;let r=this.time+e,s=this._loopCount;const o=i===o_;if(e===0)return s===-1?r:o&&(s&1)===1?t-r:r;if(i===r_){s===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(r>=t)r=t;else if(r<0)r=0;else{this.time=r;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(s===-1&&(e>=0?(s=0,this._setEndings(!0,this.repetitions===0,o)):this._setEndings(this.repetitions===0,!0,o)),r>=t||r<0){const a=Math.floor(r/t);r-=t*a,s+=Math.abs(a);const l=this.repetitions-s;if(l<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=e>0?t:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(l===1){const c=e<0;this._setEndings(c,!c,o)}else this._setEndings(!1,!1,o);this._loopCount=s,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}else this.time=r;if(o&&(s&1)===1)return t-r}return r}_setEndings(e,t,i){const r=this._interpolantSettings;i?(r.endingStart=sr,r.endingEnd=sr):(e?r.endingStart=this.zeroSlopeAtStart?sr:rr:r.endingStart=Zo,t?r.endingEnd=this.zeroSlopeAtEnd?sr:rr:r.endingEnd=Zo)}_scheduleFading(e,t,i){const r=this._mixer,s=r.time;let o=this._weightInterpolant;o===null&&(o=r._lendControlInterpolant(),this._weightInterpolant=o);const a=o.parameterPositions,l=o.sampleValues;return a[0]=s,l[0]=t,a[1]=s+e,l[1]=i,this}}class wE extends Bi{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const i=e._localRoot||this._root,r=e._clip.tracks,s=r.length,o=e._propertyBindings,a=e._interpolants,l=i.uuid,c=this._bindingsByRootAndName;let u=c[l];u===void 0&&(u={},c[l]=u);for(let h=0;h!==s;++h){const f=r[h],d=f.name;let m=u[d];if(m!==void 0)o[h]=m;else{if(m=o[h],m!==void 0){m._cacheIndex===null&&(++m.referenceCount,this._addInactiveBinding(m,l,d));continue}const _=t&&t._propertyBindings[h].binding.parsedPath;m=new hE(Qe.create(i,d,_),f.ValueTypeName,f.getValueSize()),++m.referenceCount,this._addInactiveBinding(m,l,d),o[h]=m}a[h].resultBuffer=m.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const i=(e._localRoot||this._root).uuid,r=e._clip.uuid,s=this._actionsByClip[r];this._bindAction(e,s&&s.knownActions[0]),this._addInactiveAction(e,r,i)}const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];s.useCount++===0&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];--s.useCount===0&&(s.restoreOriginalState(),this._takeBackBinding(s))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,i){const r=this._actions,s=this._actionsByClip;let o=s[t];if(o===void 0)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,s[t]=o;else{const a=o.knownActions;e._byClipCacheIndex=a.length,a.push(e)}e._cacheIndex=r.length,r.push(e),o.actionByRoot[i]=e}_removeInactiveAction(e){const t=this._actions,i=t[t.length-1],r=e._cacheIndex;i._cacheIndex=r,t[r]=i,t.pop(),e._cacheIndex=null;const s=e._clip.uuid,o=this._actionsByClip,a=o[s],l=a.knownActions,c=l[l.length-1],u=e._byClipCacheIndex;c._byClipCacheIndex=u,l[u]=c,l.pop(),e._byClipCacheIndex=null;const h=a.actionByRoot,f=(e._localRoot||this._root).uuid;delete h[f],l.length===0&&delete o[s],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];--s.referenceCount===0&&this._removeInactiveBinding(s)}}_lendAction(e){const t=this._actions,i=e._cacheIndex,r=this._nActiveActions++,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_takeBackAction(e){const t=this._actions,i=e._cacheIndex,r=--this._nActiveActions,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_addInactiveBinding(e,t,i){const r=this._bindingsByRootAndName,s=this._bindings;let o=r[t];o===void 0&&(o={},r[t]=o),o[i]=e,e._cacheIndex=s.length,s.push(e)}_removeInactiveBinding(e){const t=this._bindings,i=e.binding,r=i.rootNode.uuid,s=i.path,o=this._bindingsByRootAndName,a=o[r],l=t[t.length-1],c=e._cacheIndex;l._cacheIndex=c,t[c]=l,t.pop(),delete a[s],Object.keys(a).length===0&&delete o[r]}_lendBinding(e){const t=this._bindings,i=e._cacheIndex,r=this._nActiveBindings++,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_takeBackBinding(e){const t=this._bindings,i=e._cacheIndex,r=--this._nActiveBindings,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let i=e[t];return i===void 0&&(i=new vm(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer),i.__cacheIndex=t,e[t]=i),i}_takeBackControlInterpolant(e){const t=this._controlInterpolants,i=e.__cacheIndex,r=--this._nActiveControlInterpolants,s=t[r];e.__cacheIndex=r,t[r]=e,s.__cacheIndex=i,t[i]=s}clipAction(e,t,i){const r=t||this._root,s=r.uuid;let o=typeof e=="string"?Uf.findByName(r,e):e;const a=o!==null?o.uuid:e,l=this._actionsByClip[a];let c=null;if(i===void 0&&(o!==null?i=o.blendMode:i=kc),l!==void 0){const h=l.actionByRoot[s];if(h!==void 0&&h.blendMode===i)return h;c=l.knownActions[0],o===null&&(o=c._clip)}if(o===null)return null;const u=new _E(this,o,t,i);return this._bindAction(u,c),this._addInactiveAction(u,a,s),u}existingAction(e,t){const i=t||this._root,r=i.uuid,s=typeof e=="string"?Uf.findByName(i,e):e,o=s?s.uuid:e,a=this._actionsByClip[o];return a!==void 0&&a.actionByRoot[r]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let i=t-1;i>=0;--i)e[i].stop();return this}update(e){e*=this.timeScale;const t=this._actions,i=this._nActiveActions,r=this.time+=e,s=Math.sign(e),o=this._accuIndex^=1;for(let c=0;c!==i;++c)t[c]._update(r,e,s,o);const a=this._bindings,l=this._nActiveBindings;for(let c=0;c!==l;++c)a[c].apply(o);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,i=e.uuid,r=this._actionsByClip,s=r[i];if(s!==void 0){const o=s.knownActions;for(let a=0,l=o.length;a!==l;++a){const c=o[a];this._deactivateAction(c);const u=c._cacheIndex,h=t[t.length-1];c._cacheIndex=null,c._byClipCacheIndex=null,h._cacheIndex=u,t[u]=h,t.pop(),this._removeInactiveBindingsForAction(c)}delete r[i]}}uncacheRoot(e){const t=e.uuid,i=this._actionsByClip;for(const o in i){const a=i[o].actionByRoot,l=a[t];l!==void 0&&(this._deactivateAction(l),this._removeInactiveAction(l))}const r=this._bindingsByRootAndName,s=r[t];if(s!==void 0)for(const o in s){const a=s[o];a.restoreOriginalState(),this._removeInactiveBinding(a)}}uncacheAction(e,t){const i=this.existingAction(e,t);i!==null&&(this._deactivateAction(i),this._removeInactiveAction(i))}}wE.prototype._controlInterpolantsResultBuffer=new Float32Array(1);class bE extends Bs{constructor(e,t,i=1){super(e,t),this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}bE.prototype.isInstancedInterleavedBuffer=!0;class ME extends We{constructor(e){super(),this.material=e,this.render=function(){},this.hasPositions=!1,this.hasNormals=!1,this.hasColors=!1,this.hasUvs=!1,this.positionArray=null,this.normalArray=null,this.colorArray=null,this.uvArray=null,this.count=0}}ME.prototype.isImmediateRenderObject=!0;const jn=new q,wo=new Ie,Il=new Ie;class SE extends Jc{constructor(e){const t=Em(e),i=new Ke,r=[],s=[],o=new Te(0,0,1),a=new Te(0,1,0);for(let c=0;c<t.length;c++){const u=t[c];u.parent&&u.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),s.push(o.r,o.g,o.b),s.push(a.r,a.g,a.b))}i.setAttribute("position",new ut(r,3)),i.setAttribute("color",new ut(s,3));const l=new ui({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(i,l),this.type="SkeletonHelper",this.isSkeletonHelper=!0,this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,i=this.geometry,r=i.getAttribute("position");Il.copy(this.root.matrixWorld).invert();for(let s=0,o=0;s<t.length;s++){const a=t[s];a.parent&&a.parent.isBone&&(wo.multiplyMatrices(Il,a.matrixWorld),jn.setFromMatrixPosition(wo),r.setXYZ(o,jn.x,jn.y,jn.z),wo.multiplyMatrices(Il,a.parent.matrixWorld),jn.setFromMatrixPosition(wo),r.setXYZ(o+1,jn.x,jn.y,jn.z),o+=2)}i.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}}function Em(n){const e=[];n&&n.isBone&&e.push(n);for(let t=0;t<n.children.length;t++)e.push.apply(e,Em(n.children[t]));return e}class EE extends Jc{constructor(e=10,t=10,i=4473924,r=8947848){i=new Te(i),r=new Te(r);const s=t/2,o=e/t,a=e/2,l=[],c=[];for(let f=0,d=0,m=-a;f<=t;f++,m+=o){l.push(-a,0,m,a,0,m),l.push(m,0,-a,m,0,a);const _=f===s?i:r;_.toArray(c,d),d+=3,_.toArray(c,d),d+=3,_.toArray(c,d),d+=3,_.toArray(c,d),d+=3}const u=new Ke;u.setAttribute("position",new ut(l,3)),u.setAttribute("color",new ut(c,3));const h=new ui({vertexColors:!0,toneMapped:!1});super(u,h),this.type="GridHelper"}}const Gf=new q;let bo,Ll;class Rl extends We{constructor(e=new q(0,0,1),t=new q(0,0,0),i=1,r=16776960,s=i*.2,o=s*.2){super(),this.type="ArrowHelper",bo===void 0&&(bo=new Ke,bo.setAttribute("position",new ut([0,0,0,0,1,0],3)),Ll=new Xc(0,.5,1,5,1),Ll.translate(0,-.5,0)),this.position.copy(t),this.line=new Mr(bo,new ui({color:r,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Bt(Ll,new _a({color:r,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(i,s,o)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{Gf.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(Gf,t)}}setLength(e,t=e*.2,i=t*.2){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(i,t,i),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}}const TE=new Float32Array(1);new Int32Array(TE.buffer);Xt.create=function(n,e){return console.log("THREE.Curve.create() has been deprecated"),n.prototype=Object.create(Xt.prototype),n.prototype.constructor=n,n.prototype.getPoint=e,n};ac.prototype.fromPoints=function(n){return console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(n)};EE.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")};SE.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")};di.prototype.extractUrlBase=function(n){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),nE.extractUrlBase(n)};di.Handlers={add:function(){console.error("THREE.Loader: Handlers.add() has been removed. Use LoadingManager.addHandler() instead.")},get:function(){console.error("THREE.Loader: Handlers.get() has been removed. Use LoadingManager.getHandler() instead.")}};un.prototype.center=function(n){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(n)};un.prototype.empty=function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()};un.prototype.isIntersectionBox=function(n){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(n)};un.prototype.isIntersectionSphere=function(n){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(n)};un.prototype.size=function(n){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(n)};Rr.prototype.empty=function(){return console.warn("THREE.Sphere: .empty() has been renamed to .isEmpty()."),this.isEmpty()};ba.prototype.setFromMatrix=function(n){return console.warn("THREE.Frustum: .setFromMatrix() has been renamed to .setFromProjectionMatrix()."),this.setFromProjectionMatrix(n)};St.prototype.flattenToArrayOffset=function(n,e){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(n,e)};St.prototype.multiplyVector3=function(n){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),n.applyMatrix3(this)};St.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")};St.prototype.applyToBufferAttribute=function(n){return console.warn("THREE.Matrix3: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix3( matrix ) instead."),n.applyMatrix3(this)};St.prototype.applyToVector3Array=function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")};St.prototype.getInverse=function(n){return console.warn("THREE.Matrix3: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(n).invert()};Ie.prototype.extractPosition=function(n){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(n)};Ie.prototype.flattenToArrayOffset=function(n,e){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(n,e)};Ie.prototype.getPosition=function(){return console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),new q().setFromMatrixColumn(this,3)};Ie.prototype.setRotationFromQuaternion=function(n){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(n)};Ie.prototype.multiplyToArray=function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")};Ie.prototype.multiplyVector3=function(n){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),n.applyMatrix4(this)};Ie.prototype.multiplyVector4=function(n){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),n.applyMatrix4(this)};Ie.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")};Ie.prototype.rotateAxis=function(n){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),n.transformDirection(this)};Ie.prototype.crossVector=function(n){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),n.applyMatrix4(this)};Ie.prototype.translate=function(){console.error("THREE.Matrix4: .translate() has been removed.")};Ie.prototype.rotateX=function(){console.error("THREE.Matrix4: .rotateX() has been removed.")};Ie.prototype.rotateY=function(){console.error("THREE.Matrix4: .rotateY() has been removed.")};Ie.prototype.rotateZ=function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")};Ie.prototype.rotateByAxis=function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")};Ie.prototype.applyToBufferAttribute=function(n){return console.warn("THREE.Matrix4: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix4( matrix ) instead."),n.applyMatrix4(this)};Ie.prototype.applyToVector3Array=function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")};Ie.prototype.makeFrustum=function(n,e,t,i,r,s){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(n,e,i,t,r,s)};Ie.prototype.getInverse=function(n){return console.warn("THREE.Matrix4: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(n).invert()};Nn.prototype.isIntersectionLine=function(n){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(n)};Ot.prototype.multiplyVector3=function(n){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),n.applyQuaternion(this)};Ot.prototype.inverse=function(){return console.warn("THREE.Quaternion: .inverse() has been renamed to invert()."),this.invert()};Pr.prototype.isIntersectionBox=function(n){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(n)};Pr.prototype.isIntersectionPlane=function(n){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(n)};Pr.prototype.isIntersectionSphere=function(n){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(n)};pt.prototype.area=function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()};pt.prototype.barycoordFromPoint=function(n,e){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(n,e)};pt.prototype.midpoint=function(n){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(n)};pt.prototypenormal=function(n){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(n)};pt.prototype.plane=function(n){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(n)};pt.barycoordFromPoint=function(n,e,t,i,r){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),pt.getBarycoord(n,e,t,i,r)};pt.normal=function(n,e,t,i){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),pt.getNormal(n,e,t,i)};iu.prototype.extractAllPoints=function(n){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(n)};iu.prototype.extrude=function(n){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new Fr(this,n)};iu.prototype.makeGeometry=function(n){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new nu(this,n)};xe.prototype.fromAttribute=function(n,e,t){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(n,e,t)};xe.prototype.distanceToManhattan=function(n){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(n)};xe.prototype.lengthManhattan=function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()};q.prototype.setEulerFromRotationMatrix=function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")};q.prototype.setEulerFromQuaternion=function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")};q.prototype.getPositionFromMatrix=function(n){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(n)};q.prototype.getScaleFromMatrix=function(n){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(n)};q.prototype.getColumnFromMatrix=function(n,e){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(e,n)};q.prototype.applyProjection=function(n){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(n)};q.prototype.fromAttribute=function(n,e,t){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(n,e,t)};q.prototype.distanceToManhattan=function(n){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(n)};q.prototype.lengthManhattan=function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()};Ze.prototype.fromAttribute=function(n,e,t){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(n,e,t)};Ze.prototype.lengthManhattan=function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()};We.prototype.getChildByName=function(n){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(n)};We.prototype.renderDepth=function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")};We.prototype.translate=function(n,e){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(e,n)};We.prototype.getWorldRotation=function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")};We.prototype.applyMatrix=function(n){return console.warn("THREE.Object3D: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(n)};Object.defineProperties(We.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(n){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=n}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}});Bt.prototype.setDrawMode=function(){console.error("THREE.Mesh: .setDrawMode() has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")};Object.defineProperties(Bt.prototype,{drawMode:{get:function(){return console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode."),a_},set:function(){console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}});am.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.")};Dt.prototype.setLens=function(n,e){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),e!==void 0&&(this.filmGauge=e),this.setFocalLength(n)};Object.defineProperties(_n.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(n){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=n}},shadowCameraLeft:{set:function(n){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=n}},shadowCameraRight:{set:function(n){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=n}},shadowCameraTop:{set:function(n){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=n}},shadowCameraBottom:{set:function(n){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=n}},shadowCameraNear:{set:function(n){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=n}},shadowCameraFar:{set:function(n){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=n}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(n){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=n}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(n){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=n}},shadowMapHeight:{set:function(n){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=n}}});Object.defineProperties(it.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},dynamic:{get:function(){return console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.usage===Jo},set:function(){console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.setUsage(Jo)}}});it.prototype.setDynamic=function(n){return console.warn("THREE.BufferAttribute: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(n===!0?Jo:bs),this};it.prototype.copyIndicesArray=function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")},it.prototype.setArray=function(){console.error("THREE.BufferAttribute: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")};Ke.prototype.addIndex=function(n){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(n)};Ke.prototype.addAttribute=function(n,e){return console.warn("THREE.BufferGeometry: .addAttribute() has been renamed to .setAttribute()."),!(e&&e.isBufferAttribute)&&!(e&&e.isInterleavedBufferAttribute)?(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.setAttribute(n,new it(arguments[1],arguments[2]))):n==="index"?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(e),this):this.setAttribute(n,e)};Ke.prototype.addDrawCall=function(n,e,t){t!==void 0&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(n,e)};Ke.prototype.clearDrawCalls=function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()};Ke.prototype.computeOffsets=function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")};Ke.prototype.removeAttribute=function(n){return console.warn("THREE.BufferGeometry: .removeAttribute() has been renamed to .deleteAttribute()."),this.deleteAttribute(n)};Ke.prototype.applyMatrix=function(n){return console.warn("THREE.BufferGeometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(n)};Object.defineProperties(Ke.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}});Bs.prototype.setDynamic=function(n){return console.warn("THREE.InterleavedBuffer: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(n===!0?Jo:bs),this};Bs.prototype.setArray=function(){console.error("THREE.InterleavedBuffer: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")};Fr.prototype.getArrays=function(){console.error("THREE.ExtrudeGeometry: .getArrays() has been removed.")};Fr.prototype.addShapeList=function(){console.error("THREE.ExtrudeGeometry: .addShapeList() has been removed.")};Fr.prototype.addShape=function(){console.error("THREE.ExtrudeGeometry: .addShape() has been removed.")};Zc.prototype.dispose=function(){console.error("THREE.Scene: .dispose() has been removed.")};Object.defineProperties(Rt.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){console.warn("THREE.Material: .overdraw has been removed.")},set:function(){console.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new Te}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(n){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=n===Ip}},stencilMask:{get:function(){return console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask},set:function(n){console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask=n}},vertexTangents:{get:function(){console.warn("THREE."+this.type+": .vertexTangents has been removed.")},set:function(){console.warn("THREE."+this.type+": .vertexTangents has been removed.")}}});Object.defineProperties(Di.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(n){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=n}}});Ye.prototype.clearTarget=function(n,e,t,i){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."),this.setRenderTarget(n),this.clear(e,t,i)};Ye.prototype.animate=function(n){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(n)};Ye.prototype.getCurrentRenderTarget=function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()};Ye.prototype.getMaxAnisotropy=function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()};Ye.prototype.getPrecision=function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision};Ye.prototype.resetGLState=function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()};Ye.prototype.supportsFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")};Ye.prototype.supportsHalfFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")};Ye.prototype.supportsStandardDerivatives=function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")};Ye.prototype.supportsCompressedTextureS3TC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")};Ye.prototype.supportsCompressedTexturePVRTC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")};Ye.prototype.supportsBlendMinMax=function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")};Ye.prototype.supportsVertexTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures};Ye.prototype.supportsInstancedArrays=function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")};Ye.prototype.enableScissorTest=function(n){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(n)};Ye.prototype.initMaterial=function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")};Ye.prototype.addPrePlugin=function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")};Ye.prototype.addPostPlugin=function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")};Ye.prototype.updateShadowMap=function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")};Ye.prototype.setFaceCulling=function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")};Ye.prototype.allocTextureUnit=function(){console.warn("THREE.WebGLRenderer: .allocTextureUnit() has been removed.")};Ye.prototype.setTexture=function(){console.warn("THREE.WebGLRenderer: .setTexture() has been removed.")};Ye.prototype.setTexture2D=function(){console.warn("THREE.WebGLRenderer: .setTexture2D() has been removed.")};Ye.prototype.setTextureCube=function(){console.warn("THREE.WebGLRenderer: .setTextureCube() has been removed.")};Ye.prototype.getActiveMipMapLevel=function(){return console.warn("THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel()."),this.getActiveMipmapLevel()};Object.defineProperties(Ye.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(n){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=n}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(n){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=n}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}},context:{get:function(){return console.warn("THREE.WebGLRenderer: .context has been removed. Use .getContext() instead."),this.getContext()}},vr:{get:function(){return console.warn("THREE.WebGLRenderer: .vr has been renamed to .xr"),this.xr}},gammaInput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead."),!1},set:function(){console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.")}},gammaOutput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),!1},set:function(n){console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),this.outputEncoding=n===!0?xa:Vt}},toneMappingWhitePoint:{get:function(){return console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed."),1},set:function(){console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed.")}}});Object.defineProperties(im.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}});Object.defineProperties(yn.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(n){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=n}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(n){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=n}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(n){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=n}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(n){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=n}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(n){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=n}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(n){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=n}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(n){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=n}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(n){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=n}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(n){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=n}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(n){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=n}}});uE.prototype.load=function(n){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");const e=this;return new aE().load(n,function(i){e.setBuffer(i)}),this};Wc.prototype.updateCubeMap=function(n,e){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(n,e)};Wc.prototype.clear=function(n,e,t,i){return console.warn("THREE.CubeCamera: .clear() is now .renderTarget.clear()."),this.renderTarget.clear(n,e,t,i)};Lr.crossOrigin=void 0;Lr.loadTexture=function(n,e,t,i){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");const r=new Z1;r.setCrossOrigin(this.crossOrigin);const s=r.load(n,t,void 0,i);return e&&(s.mapping=e),s};Lr.loadTextureCube=function(n,e,t,i){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");const r=new Y1;r.setCrossOrigin(this.crossOrigin);const s=r.load(n,t,void 0,i);return e&&(s.mapping=e),s};Lr.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")};Lr.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")};typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:Tp}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=Tp);const CE={name:"stft.vue",mounted(){this.bindEvent()},methods:{freestyle(){let n={instrument:"freestyle"};oscPort.send({address:"/message",args:[{type:"s",value:JSON.stringify(n)}]})},mario(){let n={instrument:"mario"};console.log("send mario"),oscPort.send({address:"/message",args:[{type:"s",value:JSON.stringify(n)}]})},bindEvent(){let n=this,e=document.getElementById("start");e.onclick=()=>{n.init()}},async init(){var n=["C","C#","D","Eb","E","F","F#","G","G#","A","Bb","B"];await Dy(1024);var t=16/10,i=new Zc,r=new Dt(40,t,.1,1e3),s=function(F,S){for(var G=[],b=0;b<F;b++)G.push(Array(S).fill(0));return G},o=new ui({color:65280});new ui({color:65535});var a=s(20,1024),l=new Ye({canvas:document.querySelector("canvas")});function c(){l.domElement.style.width="100%",l.domElement.style.height="auto";var F=l.domElement.clientWidth/16*10;l.setPixelRatio(window.devicePixelRatio?window.devicePixelRatio:1),l.setSize(F*t,F),l.domElement.style.width="100%",l.domElement.style.height="auto",r.aspect=F*t/F,r.updateProjectionMatrix()}c(),window.addEventListener("resize",c);var u=new Mm(16777215,.5);u.position.set(0,1,1),i.add(u),r.position.z=5;const h=1,f=16776960,d=new q(0,1,0),m=new q(1,0,0),_=new q(1,-6,-15);let E=new Rl(d,_,h,f),p=new Rl(d,_,h,255),A=new Rl(m,_,h,16711935),R=new or;i.add(E),i.add(p),i.add(A);for(let F=0;F<a.length;F++)if(a[F]){let S=new Ke,G=new Float32Array(a[F].length*3);S.addAttribute("position",new it(G,3)),S.setDrawRange(0,a[F].length);let b=new Mr(S,o);R.add(b),G=b.geometry.attributes.position.array}let M=new Ke,L=new Mr(M,o);{let F=new Float32Array(3072);M.addAttribute("position",new it(F,3)),M.setDrawRange(0,1024),F=L.geometry.attributes.position.array}i.add(L),i.add(R);let D,C=document.querySelector("#chroma"),k=document.querySelector("#mfcc");function U(){if(D=By(["amplitudeSpectrum","spectralCentroid","spectralRolloff","loudness","rms","chroma","mfcc"]),D){C&&D.chroma&&(C.innerHTML=D.chroma.reduce((v,w,g)=>`${v}
          <div class="chroma-band" style="background-color: rgba(0,${Math.round(255*w)},0,1)">${n[g]}</div>`,"")),k&&D.mfcc&&(k.innerHTML=D.mfcc.reduce((v,w,g)=>`${v}
          <div class="mfcc-band" style="background-color: rgba(0,${Math.round(w+25)*5},0,1)">${g}</div>`,"")),a.pop(),a.unshift(D.amplitudeSpectrum);const y=Fy()._m.signal;for(let v=0;v<a.length;v++){for(var F=R.children[v].geometry.attributes.position.array,S=0,G=0;G<a[v].length*3;G++)F[S++]=10.7+8*Math.log10(G/a[v].length),F[S++]=-5+.1*a[v][G],F[S++]=-15-v;R.children[v].geometry.attributes.position.needsUpdate=!0}if(D.spectralCentroid&&E.position.set(10.7+8*Math.log10(D.spectralCentroid/(1024/2)),-6,-15),D.spectralRolloff){var b=D.spectralRolloff/22050;p.position.set(10.7+8*Math.log10(b),-6,-15)}if(D.rms&&A.position.set(-11,-5+10*D.rms,-15),y){let v=L.geometry.attributes.position.array,w=0;for(var T=0;T<1024;T++)v[w++]=-11+22*T/1024,v[w++]=4+y[T]*5,v[w++]=-25;L.geometry.attributes.position.needsUpdate=!0}}requestAnimationFrame(U),l.render(i,r)}U()}}},Ca=n=>(wc("data-v-1c19c776"),n=n(),bc(),n),IE={class:"container"},LE={class:"controller instruction use-instruction"},RE=Ca(()=>he("summary",null,"Use Instruction",-1)),PE={class:"detail"},DE=Ca(()=>he("li",null,[he("button",{id:"start",class:"glow-on-hover",type:"button"},"CLICK ME")],-1)),BE=Ca(()=>he("li",null,"Select the entire screen and share the system audio",-1)),FE=Ca(()=>he("li",null,"No idea how to play? just play the demo below ",-1)),NE=Ic('<div id="showcase" class="col" data-v-1c19c776><canvas data-v-1c19c776></canvas><div id="legend" data-v-1c19c776><div class="key-item" data-v-1c19c776><div class="key-color pink" data-v-1c19c776></div><div class="key-text" data-v-1c19c776>Root Mean Squared (RMS)</div></div><div class="key-item" data-v-1c19c776><div class="key-color yellow" data-v-1c19c776></div><div class="key-text" data-v-1c19c776>Spectral Centroid</div></div><div class="key-item" data-v-1c19c776><div class="key-color blue" data-v-1c19c776></div><div class="key-text" data-v-1c19c776>Spectral Rolloff</div></div></div><div id="chroma" data-v-1c19c776></div><div id="mfcc" data-v-1c19c776></div></div><hr data-v-1c19c776>',2);function OE(n,e,t,i,r,s){return Me(),Ee("div",IE,[he("details",LE,[RE,he("ol",PE,[DE,BE,FE,he("li",null,[he("button",{class:"pure-button submit",onClick:e[0]||(e[0]=(...o)=>s.mario&&s.mario(...o))},"Mario play")]),he("li",null,[he("button",{class:"pure-button submit",onClick:e[1]||(e[1]=(...o)=>s.freestyle&&s.freestyle(...o))},"Freestyle mode")])])]),NE])}const UE=Ps(CE,[["render",OE],["__scopeId","data-v-1c19c776"]]);let VE=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],Wf=["*","*","*","*"];function kE(n){let e="";n.forEach(t=>{e+=t}),document.getElementById("title").innerHTML=e}let Mo=function(n,e){let t=0,i=0;for(;t<n;)(function(r){setTimeout(function(){i=VE[r],Wf[e]=i,kE(Wf)},100*r)})(t++);return!0},So=0;const zE={name:"start_page.vue",mounted(){this.intro()},inject:["connect"],methods:{async bind(){this.connect()},go(n){let e=this;So===3&&(document.getElementById("align").style.top="40%",document.getElementById("align").style.opacity="0%",setTimeout(function(){e.$router.push({path:`/game/${n}`})},1200))},intro(){So=1,setTimeout(function(){So=2,Mo(25,0),Mo(1,1),Mo(19,2),Mo(3,3)},1e3),setTimeout(function(){So=3,document.getElementById("title").style.border="solid 5px white",document.getElementById("start").style.top="10%",setTimeout(()=>{document.getElementById("start").style.opacity="1"},300)},3400)}}},HE={class:"container"},GE={class:"align",id:"align"},WE={id:"start"};function qE(n,e,t,i,r,s){return Me(),Ee("div",HE,[he("div",GE,[he("h1",{id:"title",onClick:e[0]||(e[0]=(...o)=>s.bind&&s.bind(...o))},"****"),he("div",WE,[he("p",{onClick:e[1]||(e[1]=o=>s.go("hotkeys"))},"Custom Hotkeys"),he("p",{onClick:e[2]||(e[2]=o=>s.go("dino"))},"Game Training"),he("p",{onClick:e[3]||(e[3]=o=>s.go("stft"))},"Play your own style")])])])}const QE=Ps(zE,[["render",qE],["__scopeId","data-v-217f3038"]]);const KE={name:"start.vue",inject:["clearAllRegisterEvents","addInputCBK","refreshRootConfig"],data(){return{noteOptions:Fv,leftOperations:Nv,form:{..._p}}},unmounted(){this.clearAllRegisterEvents()},mounted(){let n=this;n.refreshConfig();const e=document.querySelector(".sub-container").style,t=(i,r)=>{if(!r||!r.actualOrientation)return;const{actualAccelerometer:s,buttonStatus:o,actualGyroscope:a,actualOrientation:l,actualOrientationQuaternion:c}=r;if(i instanceof Wo?(e.setProperty("--left-alpha",`${l.alpha}deg`),e.setProperty("--left-beta",`${l.beta}deg`),e.setProperty("--left-gamma",`${l.gamma}deg`)):(e.setProperty("--right-alpha",`${l.alpha}deg`),e.setProperty("--right-beta",`${l.beta}deg`),e.setProperty("--right-gamma",`${l.gamma}deg`)),i instanceof Wo){const u=r.analogStickLeft,h=10;document.querySelector("#joystick-left").style.transform=`translateX(${u.horizontal*h}px) translateY(${u.vertical*h}px)`,document.querySelector("#up").classList.toggle("highlight",o.up),document.querySelector("#down").classList.toggle("highlight",o.down),document.querySelector("#left").classList.toggle("highlight",o.left),document.querySelector("#right").classList.toggle("highlight",o.right),document.querySelector("#capture").classList.toggle("highlight",o.capture),document.querySelector("#l").classList.toggle("highlight",o.l||o.zl),document.querySelector("#l").classList.toggle("highlight",o.l||o.zl),document.querySelector("#minus").classList.toggle("highlight",o.minus),document.querySelector("#joystick-left").classList.toggle("highlight",o.leftStick)}else{const u=r.analogStickRight,h=10;document.querySelector("#joystick-right").style.transform=`translateX(${u.horizontal*h}px) translateY(${u.vertical*h}px)`,document.querySelector("#a").classList.toggle("highlight",o.a),document.querySelector("#b").classList.toggle("highlight",o.b),document.querySelector("#x").classList.toggle("highlight",o.x),document.querySelector("#y").classList.toggle("highlight",o.y),document.querySelector("#home").classList.toggle("highlight",o.home),document.querySelector("#r").classList.toggle("highlight",o.r||o.zr),document.querySelector("#r").classList.toggle("highlight",o.r||o.zr),document.querySelector("#plus").classList.toggle("highlight",o.plus),document.querySelector("#joystick-right").classList.toggle("highlight",o.rightStick)}};n.addInputCBK(function(i,r){t(i,r)})},methods:{refreshConfig(){let n=this;n.form=n.$utils.readConfig()},submit(){let n=this;n.$utils.save2Storage(n.form),n.$notify("Save Succeed"),n.refreshRootConfig()}}},$e=n=>(wc("data-v-a5b61dc6"),n=n(),bc(),n),YE={class:"container"},ZE={class:"sub-container clearfix"},JE=$e(()=>he("h1",{class:"container-title"},"Custom Hotkeys",-1)),XE={class:"left-container"},jE=$e(()=>he("h2",{class:"form-title center"},"Left Controller",-1)),$E={class:"pure-form pure-form-aligned center"},eT={class:"pure-control-group"},tT=$e(()=>he("label",{for:"aligned-name"},"Up",-1)),nT={class:"pure-control-group"},iT=$e(()=>he("label",{for:"aligned-name"},"Down",-1)),rT={class:"pure-control-group"},sT=$e(()=>he("label",{for:"aligned-name"},"Left",-1)),oT={class:"pure-control-group"},aT=$e(()=>he("label",{for:"aligned-name"},"Right",-1)),lT={class:"pure-control-group"},cT=$e(()=>he("label",{for:"aligned-name"},"L",-1)),uT={class:"pure-control-group"},hT=$e(()=>he("label",{for:"aligned-name"},"ZL",-1)),fT={class:"pure-control-group"},dT=$e(()=>he("label",{for:"aligned-name"},"Vertical Move",-1)),pT=Ic('<figure class="joycon-view" data-v-a5b61dc6><div id="joycon-l" class="joycon productId8198" data-v-a5b61dc6><div id="joystick-left" class="joystick" data-v-a5b61dc6></div><div class="buttons" data-v-a5b61dc6><button id="up" data-v-a5b61dc6></button><button id="left" data-v-a5b61dc6></button><button id="down" data-v-a5b61dc6></button><button id="right" data-v-a5b61dc6></button></div><span id="minus" data-v-a5b61dc6></span><i id="capture" data-v-a5b61dc6></i><strong class="back-buttons" id="l" data-v-a5b61dc6></strong></div><div id="joycon-r" class="joycon productId8199" data-v-a5b61dc6><div id="joystick-right" class="joystick" data-v-a5b61dc6></div><div class="buttons" data-v-a5b61dc6><button id="x" data-v-a5b61dc6></button><button id="y" data-v-a5b61dc6></button><button id="b" data-v-a5b61dc6></button><button id="a" data-v-a5b61dc6></button></div><span id="plus" data-v-a5b61dc6></span><i id="home" data-v-a5b61dc6></i><strong class="back-buttons" id="r" data-v-a5b61dc6></strong></div></figure>',1),mT={class:"right-container"},gT=$e(()=>he("h2",{class:"form-title center"},"Right Controller",-1)),AT={class:"pure-form pure-form-aligned center"},vT={class:"pure-control-group"},yT=$e(()=>he("label",{for:"aligned-name"},"A",-1)),xT={class:"pure-control-group"},_T=$e(()=>he("label",{for:"aligned-name"},"B",-1)),wT={class:"pure-control-group"},bT=$e(()=>he("label",{for:"aligned-name"},"X",-1)),MT={class:"pure-control-group"},ST=$e(()=>he("label",{for:"aligned-name"},"Y",-1)),ET={class:"pure-control-group"},TT=$e(()=>he("label",{for:"aligned-name"},"R",-1)),CT={class:"pure-control-group"},IT=$e(()=>he("label",{for:"aligned-name"},"ZR",-1)),LT={class:"pure-control-group"},RT=$e(()=>he("label",{for:"aligned-name"},"Home",-1)),PT={class:"pure-control-group"},DT=$e(()=>he("label",{for:"aligned-name"},"Plus",-1)),BT={class:"pure-control-group"},FT=$e(()=>he("label",{for:"aligned-name"},"SR",-1)),NT={class:"pure-control-group"},OT=$e(()=>he("label",{for:"aligned-name"},"SL",-1)),UT={class:"pure-control-group"},VT=$e(()=>he("label",{for:"aligned-name"},"Stick Top",-1)),kT={class:"pure-control-group"},zT=$e(()=>he("label",{for:"aligned-name"},"Stick Down",-1)),HT={class:"pure-control-group"},GT=$e(()=>he("label",{for:"aligned-name"},"Stick Left",-1)),WT={class:"pure-control-group"},qT=$e(()=>he("label",{for:"aligned-name"},"Stick Right",-1)),QT={class:"pure-control-group"},KT=$e(()=>he("label",{for:"aligned-name"},"3D Move",-1)),YT=Ic('<div id="debug" data-v-a5b61dc6><div id="debug-left" data-v-a5b61dc6><pre data-v-a5b61dc6></pre><p data-v-a5b61dc6>Acceleration</p><meter id="acc-x" min="-1" max="1" data-v-a5b61dc6></meter><meter id="acc-y" min="-1" max="1" data-v-a5b61dc6></meter><meter id="acc-z" min="-1" max="1" data-v-a5b61dc6></meter><br data-v-a5b61dc6><p data-v-a5b61dc6>Gyroscope</p><meter id="gyr-x" min="-1" max="1" data-v-a5b61dc6></meter><meter id="gyr-y" min="-1" max="1" data-v-a5b61dc6></meter><meter id="gyr-z" min="-1" max="1" data-v-a5b61dc6></meter></div><div id="debug-right" data-v-a5b61dc6><pre data-v-a5b61dc6></pre><p data-v-a5b61dc6>Acceleration</p><meter id="acc-x" min="-1" max="1" data-v-a5b61dc6></meter><meter id="acc-y" min="-1" max="1" data-v-a5b61dc6></meter><meter id="acc-z" min="-1" max="1" data-v-a5b61dc6></meter><br data-v-a5b61dc6><p data-v-a5b61dc6>Gyroscope</p><meter id="gyr-x" min="-1" max="1" data-v-a5b61dc6></meter><meter id="gyr-y" min="-1" max="1" data-v-a5b61dc6></meter><meter id="gyr-z" min="-1" max="1" data-v-a5b61dc6></meter></div></div>',1);function ZT(n,e,t,i,r,s){return Me(),Ee("div",YE,[he("div",ZE,[JE,he("div",XE,[jE,he("form",$E,[he("fieldset",null,[he("div",eT,[tT,lt(he("select",{class:"custom-select select","onUpdate:modelValue":e[0]||(e[0]=o=>r.form.Up=o)},[(Me(!0),Ee(Ue,null,tt(r.leftOperations,o=>(Me(),Ee("option",null,at(o),1))),256))],512),[[ct,r.form.Up]])]),he("div",nT,[iT,lt(he("select",{class:"custom-select select","onUpdate:modelValue":e[1]||(e[1]=o=>r.form.Down=o)},[(Me(!0),Ee(Ue,null,tt(r.leftOperations,o=>(Me(),Ee("option",null,at(o),1))),256))],512),[[ct,r.form.Down]])]),he("div",rT,[sT,lt(he("select",{class:"custom-select select","onUpdate:modelValue":e[2]||(e[2]=o=>r.form.Left=o)},[(Me(!0),Ee(Ue,null,tt(r.leftOperations,o=>(Me(),Ee("option",null,at(o),1))),256))],512),[[ct,r.form.Left]])]),he("div",oT,[aT,lt(he("select",{class:"custom-select select","onUpdate:modelValue":e[3]||(e[3]=o=>r.form.Right=o)},[(Me(!0),Ee(Ue,null,tt(r.leftOperations,o=>(Me(),Ee("option",null,at(o),1))),256))],512),[[ct,r.form.Right]])]),he("div",lT,[cT,lt(he("select",{class:"custom-select select","onUpdate:modelValue":e[4]||(e[4]=o=>r.form.L=o)},[(Me(!0),Ee(Ue,null,tt(r.leftOperations,o=>(Me(),Ee("option",null,at(o),1))),256))],512),[[ct,r.form.L]])]),he("div",uT,[hT,lt(he("select",{class:"custom-select select","onUpdate:modelValue":e[5]||(e[5]=o=>r.form.ZL=o)},[(Me(!0),Ee(Ue,null,tt(r.leftOperations,o=>(Me(),Ee("option",null,at(o),1))),256))],512),[[ct,r.form.ZL]])]),he("div",fT,[dT,lt(he("select",{disabled:"",class:"custom-select select","onUpdate:modelValue":e[6]||(e[6]=o=>r.form.LVerticalMove=o)},[(Me(!0),Ee(Ue,null,tt(r.leftOperations,o=>(Me(),Ee("option",null,at(o),1))),256))],512),[[ct,r.form.LVerticalMove]])])])])]),pT,he("div",mT,[gT,he("form",AT,[he("fieldset",null,[he("div",vT,[yT,lt(he("select",{class:"custom-select select","onUpdate:modelValue":e[7]||(e[7]=o=>r.form.A=o)},[(Me(!0),Ee(Ue,null,tt(r.noteOptions,o=>(Me(),Ee("option",null,at(o),1))),256))],512),[[ct,r.form.A]])]),he("div",xT,[_T,lt(he("select",{class:"custom-select select","onUpdate:modelValue":e[8]||(e[8]=o=>r.form.B=o)},[(Me(!0),Ee(Ue,null,tt(r.noteOptions,o=>(Me(),Ee("option",null,at(o),1))),256))],512),[[ct,r.form.B]])]),he("div",wT,[bT,lt(he("select",{class:"custom-select select","onUpdate:modelValue":e[9]||(e[9]=o=>r.form.X=o)},[(Me(!0),Ee(Ue,null,tt(r.noteOptions,o=>(Me(),Ee("option",null,at(o),1))),256))],512),[[ct,r.form.X]])]),he("div",MT,[ST,lt(he("select",{class:"custom-select select","onUpdate:modelValue":e[10]||(e[10]=o=>r.form.Y=o)},[(Me(!0),Ee(Ue,null,tt(r.noteOptions,o=>(Me(),Ee("option",null,at(o),1))),256))],512),[[ct,r.form.Y]])]),he("div",ET,[TT,lt(he("select",{class:"custom-select select","onUpdate:modelValue":e[11]||(e[11]=o=>r.form.R=o)},[(Me(!0),Ee(Ue,null,tt(r.noteOptions,o=>(Me(),Ee("option",null,at(o),1))),256))],512),[[ct,r.form.R]])]),he("div",CT,[IT,lt(he("select",{class:"custom-select select","onUpdate:modelValue":e[12]||(e[12]=o=>r.form.ZR=o)},[(Me(!0),Ee(Ue,null,tt(r.noteOptions,o=>(Me(),Ee("option",null,at(o),1))),256))],512),[[ct,r.form.ZR]])]),he("div",LT,[RT,lt(he("select",{class:"custom-select select","onUpdate:modelValue":e[13]||(e[13]=o=>r.form.HomeButton=o)},[(Me(!0),Ee(Ue,null,tt(r.noteOptions,o=>(Me(),Ee("option",null,at(o),1))),256))],512),[[ct,r.form.HomeButton]])]),he("div",PT,[DT,lt(he("select",{class:"custom-select select","onUpdate:modelValue":e[14]||(e[14]=o=>r.form.PlusButton=o)},[(Me(!0),Ee(Ue,null,tt(r.noteOptions,o=>(Me(),Ee("option",null,at(o),1))),256))],512),[[ct,r.form.PlusButton]])]),he("div",BT,[FT,lt(he("select",{class:"custom-select select","onUpdate:modelValue":e[15]||(e[15]=o=>r.form.SRButton=o)},[(Me(!0),Ee(Ue,null,tt(r.noteOptions,o=>(Me(),Ee("option",null,at(o),1))),256))],512),[[ct,r.form.SRButton]])]),he("div",NT,[OT,lt(he("select",{class:"custom-select select","onUpdate:modelValue":e[16]||(e[16]=o=>r.form.slButton=o)},[(Me(!0),Ee(Ue,null,tt(r.noteOptions,o=>(Me(),Ee("option",null,at(o),1))),256))],512),[[ct,r.form.slButton]])]),he("div",UT,[VT,lt(he("select",{class:"custom-select select","onUpdate:modelValue":e[17]||(e[17]=o=>r.form.LStickTop=o)},[(Me(!0),Ee(Ue,null,tt(r.noteOptions,o=>(Me(),Ee("option",null,at(o),1))),256))],512),[[ct,r.form.LStickTop]])]),he("div",kT,[zT,lt(he("select",{class:"custom-select select","onUpdate:modelValue":e[18]||(e[18]=o=>r.form.LStickDown=o)},[(Me(!0),Ee(Ue,null,tt(r.noteOptions,o=>(Me(),Ee("option",null,at(o),1))),256))],512),[[ct,r.form.LStickDown]])]),he("div",HT,[GT,lt(he("select",{class:"custom-select select","onUpdate:modelValue":e[19]||(e[19]=o=>r.form.LStickLeft=o)},[(Me(!0),Ee(Ue,null,tt(r.noteOptions,o=>(Me(),Ee("option",null,at(o),1))),256))],512),[[ct,r.form.LStickLeft]])]),he("div",WT,[qT,lt(he("select",{class:"custom-select select","onUpdate:modelValue":e[20]||(e[20]=o=>r.form.LStickRight=o)},[(Me(!0),Ee(Ue,null,tt(r.noteOptions,o=>(Me(),Ee("option",null,at(o),1))),256))],512),[[ct,r.form.LStickRight]])]),he("div",QT,[KT,lt(he("select",{disabled:"",class:"custom-select select","onUpdate:modelValue":e[21]||(e[21]=o=>r.form.RVerticalMove=o)},[(Me(!0),Ee(Ue,null,tt(r.noteOptions,o=>(Me(),Ee("option",null,at(o),1))),256))],512),[[ct,r.form.RVerticalMove]])])])])]),he("button",{class:"pure-button submit",onClick:e[22]||(e[22]=(...o)=>s.submit&&s.submit(...o))},"Submit"),YT])])}const JT=Ps(KE,[["render",ZT],["__scopeId","data-v-a5b61dc6"]]);var lc={exports:{}},Pl,qf;function Tm(){if(qf)return Pl;qf=1,Pl=e;var n=null;try{n=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function e(F,S,G){this.low=F|0,this.high=S|0,this.unsigned=!!G}e.prototype.__isLong__,Object.defineProperty(e.prototype,"__isLong__",{value:!0});function t(F){return(F&&F.__isLong__)===!0}e.isLong=t;var i={},r={};function s(F,S){var G,b,T;return S?(F>>>=0,(T=0<=F&&F<256)&&(b=r[F],b)?b:(G=a(F,(F|0)<0?-1:0,!0),T&&(r[F]=G),G)):(F|=0,(T=-128<=F&&F<128)&&(b=i[F],b)?b:(G=a(F,F<0?-1:0,!1),T&&(i[F]=G),G))}e.fromInt=s;function o(F,S){if(isNaN(F))return S?A:p;if(S){if(F<0)return A;if(F>=m)return C}else{if(F<=-_)return k;if(F+1>=_)return D}return F<0?o(-F,S).neg():a(F%d|0,F/d|0,S)}e.fromNumber=o;function a(F,S,G){return new e(F,S,G)}e.fromBits=a;var l=Math.pow;function c(F,S,G){if(F.length===0)throw Error("empty string");if(F==="NaN"||F==="Infinity"||F==="+Infinity"||F==="-Infinity")return p;if(typeof S=="number"?(G=S,S=!1):S=!!S,G=G||10,G<2||36<G)throw RangeError("radix");var b;if((b=F.indexOf("-"))>0)throw Error("interior hyphen");if(b===0)return c(F.substring(1),S,G).neg();for(var T=o(l(G,8)),y=p,v=0;v<F.length;v+=8){var w=Math.min(8,F.length-v),g=parseInt(F.substring(v,v+w),G);if(w<8){var N=o(l(G,w));y=y.mul(N).add(o(g))}else y=y.mul(T),y=y.add(o(g))}return y.unsigned=S,y}e.fromString=c;function u(F,S){return typeof F=="number"?o(F,S):typeof F=="string"?c(F,S):a(F.low,F.high,typeof S=="boolean"?S:F.unsigned)}e.fromValue=u;var h=1<<16,f=1<<24,d=h*h,m=d*d,_=m/2,E=s(f),p=s(0);e.ZERO=p;var A=s(0,!0);e.UZERO=A;var R=s(1);e.ONE=R;var M=s(1,!0);e.UONE=M;var L=s(-1);e.NEG_ONE=L;var D=a(-1,2147483647,!1);e.MAX_VALUE=D;var C=a(-1,-1,!0);e.MAX_UNSIGNED_VALUE=C;var k=a(0,-2147483648,!1);e.MIN_VALUE=k;var U=e.prototype;return U.toInt=function(){return this.unsigned?this.low>>>0:this.low},U.toNumber=function(){return this.unsigned?(this.high>>>0)*d+(this.low>>>0):this.high*d+(this.low>>>0)},U.toString=function(S){if(S=S||10,S<2||36<S)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(k)){var G=o(S),b=this.div(G),T=b.mul(G).sub(this);return b.toString(S)+T.toInt().toString(S)}else return"-"+this.neg().toString(S);for(var y=o(l(S,6),this.unsigned),v=this,w="";;){var g=v.div(y),N=v.sub(g.mul(y)).toInt()>>>0,z=N.toString(S);if(v=g,v.isZero())return z+w;for(;z.length<6;)z="0"+z;w=""+z+w}},U.getHighBits=function(){return this.high},U.getHighBitsUnsigned=function(){return this.high>>>0},U.getLowBits=function(){return this.low},U.getLowBitsUnsigned=function(){return this.low>>>0},U.getNumBitsAbs=function(){if(this.isNegative())return this.eq(k)?64:this.neg().getNumBitsAbs();for(var S=this.high!=0?this.high:this.low,G=31;G>0&&(S&1<<G)==0;G--);return this.high!=0?G+33:G+1},U.isZero=function(){return this.high===0&&this.low===0},U.eqz=U.isZero,U.isNegative=function(){return!this.unsigned&&this.high<0},U.isPositive=function(){return this.unsigned||this.high>=0},U.isOdd=function(){return(this.low&1)===1},U.isEven=function(){return(this.low&1)===0},U.equals=function(S){return t(S)||(S=u(S)),this.unsigned!==S.unsigned&&this.high>>>31===1&&S.high>>>31===1?!1:this.high===S.high&&this.low===S.low},U.eq=U.equals,U.notEquals=function(S){return!this.eq(S)},U.neq=U.notEquals,U.ne=U.notEquals,U.lessThan=function(S){return this.comp(S)<0},U.lt=U.lessThan,U.lessThanOrEqual=function(S){return this.comp(S)<=0},U.lte=U.lessThanOrEqual,U.le=U.lessThanOrEqual,U.greaterThan=function(S){return this.comp(S)>0},U.gt=U.greaterThan,U.greaterThanOrEqual=function(S){return this.comp(S)>=0},U.gte=U.greaterThanOrEqual,U.ge=U.greaterThanOrEqual,U.compare=function(S){if(t(S)||(S=u(S)),this.eq(S))return 0;var G=this.isNegative(),b=S.isNegative();return G&&!b?-1:!G&&b?1:this.unsigned?S.high>>>0>this.high>>>0||S.high===this.high&&S.low>>>0>this.low>>>0?-1:1:this.sub(S).isNegative()?-1:1},U.comp=U.compare,U.negate=function(){return!this.unsigned&&this.eq(k)?k:this.not().add(R)},U.neg=U.negate,U.add=function(S){t(S)||(S=u(S));var G=this.high>>>16,b=this.high&65535,T=this.low>>>16,y=this.low&65535,v=S.high>>>16,w=S.high&65535,g=S.low>>>16,N=S.low&65535,z=0,Z=0,ee=0,te=0;return te+=y+N,ee+=te>>>16,te&=65535,ee+=T+g,Z+=ee>>>16,ee&=65535,Z+=b+w,z+=Z>>>16,Z&=65535,z+=G+v,z&=65535,a(ee<<16|te,z<<16|Z,this.unsigned)},U.subtract=function(S){return t(S)||(S=u(S)),this.add(S.neg())},U.sub=U.subtract,U.multiply=function(S){if(this.isZero())return p;if(t(S)||(S=u(S)),n){var G=n.mul(this.low,this.high,S.low,S.high);return a(G,n.get_high(),this.unsigned)}if(S.isZero())return p;if(this.eq(k))return S.isOdd()?k:p;if(S.eq(k))return this.isOdd()?k:p;if(this.isNegative())return S.isNegative()?this.neg().mul(S.neg()):this.neg().mul(S).neg();if(S.isNegative())return this.mul(S.neg()).neg();if(this.lt(E)&&S.lt(E))return o(this.toNumber()*S.toNumber(),this.unsigned);var b=this.high>>>16,T=this.high&65535,y=this.low>>>16,v=this.low&65535,w=S.high>>>16,g=S.high&65535,N=S.low>>>16,z=S.low&65535,Z=0,ee=0,te=0,se=0;return se+=v*z,te+=se>>>16,se&=65535,te+=y*z,ee+=te>>>16,te&=65535,te+=v*N,ee+=te>>>16,te&=65535,ee+=T*z,Z+=ee>>>16,ee&=65535,ee+=y*N,Z+=ee>>>16,ee&=65535,ee+=v*g,Z+=ee>>>16,ee&=65535,Z+=b*z+T*N+y*g+v*w,Z&=65535,a(te<<16|se,Z<<16|ee,this.unsigned)},U.mul=U.multiply,U.divide=function(S){if(t(S)||(S=u(S)),S.isZero())throw Error("division by zero");if(n){if(!this.unsigned&&this.high===-2147483648&&S.low===-1&&S.high===-1)return this;var G=(this.unsigned?n.div_u:n.div_s)(this.low,this.high,S.low,S.high);return a(G,n.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?A:p;var b,T,y;if(this.unsigned){if(S.unsigned||(S=S.toUnsigned()),S.gt(this))return A;if(S.gt(this.shru(1)))return M;y=A}else{if(this.eq(k)){if(S.eq(R)||S.eq(L))return k;if(S.eq(k))return R;var v=this.shr(1);return b=v.div(S).shl(1),b.eq(p)?S.isNegative()?R:L:(T=this.sub(S.mul(b)),y=b.add(T.div(S)),y)}else if(S.eq(k))return this.unsigned?A:p;if(this.isNegative())return S.isNegative()?this.neg().div(S.neg()):this.neg().div(S).neg();if(S.isNegative())return this.div(S.neg()).neg();y=p}for(T=this;T.gte(S);){b=Math.max(1,Math.floor(T.toNumber()/S.toNumber()));for(var w=Math.ceil(Math.log(b)/Math.LN2),g=w<=48?1:l(2,w-48),N=o(b),z=N.mul(S);z.isNegative()||z.gt(T);)b-=g,N=o(b,this.unsigned),z=N.mul(S);N.isZero()&&(N=R),y=y.add(N),T=T.sub(z)}return y},U.div=U.divide,U.modulo=function(S){if(t(S)||(S=u(S)),n){var G=(this.unsigned?n.rem_u:n.rem_s)(this.low,this.high,S.low,S.high);return a(G,n.get_high(),this.unsigned)}return this.sub(this.div(S).mul(S))},U.mod=U.modulo,U.rem=U.modulo,U.not=function(){return a(~this.low,~this.high,this.unsigned)},U.and=function(S){return t(S)||(S=u(S)),a(this.low&S.low,this.high&S.high,this.unsigned)},U.or=function(S){return t(S)||(S=u(S)),a(this.low|S.low,this.high|S.high,this.unsigned)},U.xor=function(S){return t(S)||(S=u(S)),a(this.low^S.low,this.high^S.high,this.unsigned)},U.shiftLeft=function(S){return t(S)&&(S=S.toInt()),(S&=63)===0?this:S<32?a(this.low<<S,this.high<<S|this.low>>>32-S,this.unsigned):a(0,this.low<<S-32,this.unsigned)},U.shl=U.shiftLeft,U.shiftRight=function(S){return t(S)&&(S=S.toInt()),(S&=63)===0?this:S<32?a(this.low>>>S|this.high<<32-S,this.high>>S,this.unsigned):a(this.high>>S-32,this.high>=0?0:-1,this.unsigned)},U.shr=U.shiftRight,U.shiftRightUnsigned=function(S){if(t(S)&&(S=S.toInt()),S&=63,S===0)return this;var G=this.high;if(S<32){var b=this.low;return a(b>>>S|G<<32-S,G>>>S,this.unsigned)}else return S===32?a(G,0,this.unsigned):a(G>>>S-32,0,this.unsigned)},U.shru=U.shiftRightUnsigned,U.shr_u=U.shiftRightUnsigned,U.toSigned=function(){return this.unsigned?a(this.low,this.high,!1):this},U.toUnsigned=function(){return this.unsigned?this:a(this.low,this.high,!0)},U.toBytes=function(S){return S?this.toBytesLE():this.toBytesBE()},U.toBytesLE=function(){var S=this.high,G=this.low;return[G&255,G>>>8&255,G>>>16&255,G>>>24,S&255,S>>>8&255,S>>>16&255,S>>>24]},U.toBytesBE=function(){var S=this.high,G=this.low;return[S>>>24,S>>>16&255,S>>>8&255,S&255,G>>>24,G>>>16&255,G>>>8&255,G&255]},e.fromBytes=function(S,G,b){return b?e.fromBytesLE(S,G):e.fromBytesBE(S,G)},e.fromBytesLE=function(S,G){return new e(S[0]|S[1]<<8|S[2]<<16|S[3]<<24,S[4]|S[5]<<8|S[6]<<16|S[7]<<24,G)},e.fromBytesBE=function(S,G){return new e(S[4]<<24|S[5]<<16|S[6]<<8|S[7],S[0]<<24|S[1]<<16|S[2]<<8|S[3],G)},Pl}var Dl={exports:{}};/*! osc.js 2.4.4, Copyright 2023 Colin Clark | github.com/colinbdclark/osc.js */var Qf;function Kf(){return Qf||(Qf=1,function(n){var e=e||{};(function(){e.SECS_70YRS=2208988800,e.TWO_32=4294967296,e.defaults={metadata:!1,unpackSingleArgs:!0},e.isCommonJS=!!n.exports,e.isNode=e.isCommonJS&&typeof window>"u",e.isElectron=!!(typeof process<"u"&&process.versions&&process.versions.electron),e.isBufferEnv=e.isNode||e.isElectron,e.isArray=function(t){return t&&Object.prototype.toString.call(t)==="[object Array]"},e.isTypedArrayView=function(t){return t.buffer&&t.buffer instanceof ArrayBuffer},e.isBuffer=function(t){return e.isBufferEnv&&t instanceof Buffer},e.Long=typeof Long<"u"?Long:e.isNode?Tm():void 0,e.TextDecoder=typeof TextDecoder<"u"?new TextDecoder("utf-8"):typeof util<"u"&&typeof(util.TextDecoder!=="undefined")?new util.TextDecoder("utf-8"):void 0,e.TextEncoder=typeof TextEncoder<"u"?new TextEncoder("utf-8"):typeof util<"u"&&typeof(util.TextEncoder!=="undefined")?new util.TextEncoder("utf-8"):void 0,e.dataView=function(t,i,r){return t.buffer?new DataView(t.buffer,i,r):t instanceof ArrayBuffer?new DataView(t,i,r):new DataView(new Uint8Array(t),i,r)},e.byteArray=function(t){if(t instanceof Uint8Array)return t;var i=t.buffer?t.buffer:t;if(!(i instanceof ArrayBuffer)&&(typeof i.length>"u"||typeof i=="string"))throw new Error("Can't wrap a non-array-like object as Uint8Array. Object was: "+JSON.stringify(t,null,2));return new Uint8Array(i)},e.nativeBuffer=function(t){return e.isBufferEnv?e.isBuffer(t)?t:Buffer.from(t.buffer?t:new Uint8Array(t)):e.isTypedArrayView(t)?t:new Uint8Array(t)},e.copyByteArray=function(t,i,r){if(e.isTypedArrayView(t)&&e.isTypedArrayView(i))i.set(t,r);else for(var s=r===void 0?0:r,o=Math.min(i.length-r,t.length),a=0,l=s;a<o;a++,l++)i[l]=t[a];return i},e.readString=function(t,i){for(var r=[],s=i.idx;s<t.byteLength;s++){var o=t.getUint8(s);if(o!==0)r.push(o);else{s++;break}}s=s+3&-4,i.idx=s;var a=e.isBufferEnv?e.readString.withBuffer:e.TextDecoder?e.readString.withTextDecoder:e.readString.raw;return a(r)},e.readString.raw=function(t){for(var i="",r=1e4,s=0;s<t.length;s+=r)i+=String.fromCharCode.apply(null,t.slice(s,s+r));return i},e.readString.withTextDecoder=function(t){var i=new Int8Array(t);return e.TextDecoder.decode(i)},e.readString.withBuffer=function(t){return Buffer.from(t).toString("utf-8")},e.writeString=function(t){var i=e.isBufferEnv?e.writeString.withBuffer:e.TextEncoder?e.writeString.withTextEncoder:null,r=t+"\0",s;i&&(s=i(r));for(var o=i?s.length:r.length,a=o+3&-4,l=new Uint8Array(a),c=0;c<o-1;c++){var u=i?s[c]:r.charCodeAt(c);l[c]=u}return l},e.writeString.withTextEncoder=function(t){return e.TextEncoder.encode(t)},e.writeString.withBuffer=function(t){return Buffer.from(t)},e.readPrimitive=function(t,i,r,s){var o=t[i](s.idx,!1);return s.idx+=r,o},e.writePrimitive=function(t,i,r,s,o){o=o===void 0?0:o;var a;return i?a=new Uint8Array(i.buffer):(a=new Uint8Array(s),i=new DataView(a.buffer)),i[r](o,t,!1),a},e.readInt32=function(t,i){return e.readPrimitive(t,"getInt32",4,i)},e.writeInt32=function(t,i,r){return e.writePrimitive(t,i,"setInt32",4,r)},e.readInt64=function(t,i){var r=e.readPrimitive(t,"getInt32",4,i),s=e.readPrimitive(t,"getInt32",4,i);return e.Long?new e.Long(s,r):{high:r,low:s,unsigned:!1}},e.writeInt64=function(t,i,r){var s=new Uint8Array(8);return s.set(e.writePrimitive(t.high,i,"setInt32",4,r),0),s.set(e.writePrimitive(t.low,i,"setInt32",4,r+4),4),s},e.readFloat32=function(t,i){return e.readPrimitive(t,"getFloat32",4,i)},e.writeFloat32=function(t,i,r){return e.writePrimitive(t,i,"setFloat32",4,r)},e.readFloat64=function(t,i){return e.readPrimitive(t,"getFloat64",8,i)},e.writeFloat64=function(t,i,r){return e.writePrimitive(t,i,"setFloat64",8,r)},e.readChar32=function(t,i){var r=e.readPrimitive(t,"getUint32",4,i);return String.fromCharCode(r)},e.writeChar32=function(t,i,r){var s=t.charCodeAt(0);if(!(s===void 0||s<-1))return e.writePrimitive(s,i,"setUint32",4,r)},e.readBlob=function(t,i){var r=e.readInt32(t,i),s=r+3&-4,o=new Uint8Array(t.buffer,i.idx,r);return i.idx+=s,o},e.writeBlob=function(t){t=e.byteArray(t);var i=t.byteLength,r=i+3&-4,s=4,o=r+s,a=new Uint8Array(o),l=new DataView(a.buffer);return e.writeInt32(i,l),a.set(t,s),a},e.readMIDIBytes=function(t,i){var r=new Uint8Array(t.buffer,i.idx,4);return i.idx+=4,r},e.writeMIDIBytes=function(t){t=e.byteArray(t);var i=new Uint8Array(4);return i.set(t),i},e.readColor=function(t,i){var r=new Uint8Array(t.buffer,i.idx,4),s=r[3]/255;return i.idx+=4,{r:r[0],g:r[1],b:r[2],a:s}},e.writeColor=function(t){var i=Math.round(t.a*255),r=new Uint8Array([t.r,t.g,t.b,i]);return r},e.readTrue=function(){return!0},e.readFalse=function(){return!1},e.readNull=function(){return null},e.readImpulse=function(){return 1},e.readTimeTag=function(t,i){var r=e.readPrimitive(t,"getUint32",4,i),s=e.readPrimitive(t,"getUint32",4,i),o=r===0&&s===1?Date.now():e.ntpToJSTime(r,s);return{raw:[r,s],native:o}},e.writeTimeTag=function(t){var i=t.raw?t.raw:e.jsToNTPTime(t.native),r=new Uint8Array(8),s=new DataView(r.buffer);return e.writeInt32(i[0],s,0),e.writeInt32(i[1],s,4),r},e.timeTag=function(t,i){t=t||0,i=i||Date.now();var r=i/1e3,s=Math.floor(r),o=r-s,a=Math.floor(t),l=t-a,c=o+l;if(c>1){var u=Math.floor(c),h=c-u;a+=u,c=h}var f=s+a+e.SECS_70YRS,d=Math.round(e.TWO_32*c);return{raw:[f,d]}},e.ntpToJSTime=function(t,i){var r=t-e.SECS_70YRS,s=i/e.TWO_32,o=(r+s)*1e3;return o},e.jsToNTPTime=function(t){var i=t/1e3,r=Math.floor(i),s=i-r,o=r+e.SECS_70YRS,a=Math.round(e.TWO_32*s);return[o,a]},e.readArguments=function(t,i,r){var s=e.readString(t,r);if(s.indexOf(",")!==0)throw new Error("A malformed type tag string was found while reading the arguments of an OSC message. String was: "+s," at offset: "+r.idx);var o=s.substring(1).split(""),a=[];return e.readArgumentsIntoArray(a,o,s,t,i,r),a},e.readArgument=function(t,i,r,s,o){var a=e.argumentTypes[t];if(!a)throw new Error("'"+t+"' is not a valid OSC type tag. Type tag string was: "+i);var l=a.reader,c=e[l](r,o);return s.metadata&&(c={type:t,value:c}),c},e.readArgumentsIntoArray=function(t,i,r,s,o,a){for(var l=0;l<i.length;){var c=i[l],u;if(c==="["){var h=i.slice(l+1),f=h.indexOf("]");if(f<0)throw new Error("Invalid argument type tag: an open array type tag ('[') was found without a matching close array tag ('[]'). Type tag was: "+r);var d=h.slice(0,f);u=e.readArgumentsIntoArray([],d,r,s,o,a),l+=f+2}else u=e.readArgument(c,r,s,o,a),l++;t.push(u)}return t},e.writeArguments=function(t,i){var r=e.collectArguments(t,i);return e.joinParts(r)},e.joinParts=function(t){for(var i=new Uint8Array(t.byteLength),r=t.parts,s=0,o=0;o<r.length;o++){var a=r[o];e.copyByteArray(a,i,s),s+=a.length}return i},e.addDataPart=function(t,i){i.parts.push(t),i.byteLength+=t.length},e.writeArrayArguments=function(t,i){for(var r="[",s=0;s<t.length;s++){var o=t[s];r+=e.writeArgument(o,i)}return r+="]",r},e.writeArgument=function(t,i){if(e.isArray(t))return e.writeArrayArguments(t,i);var r=t.type,s=e.argumentTypes[r].writer;if(s){var o=e[s](t.value);e.addDataPart(o,i)}return t.type},e.collectArguments=function(t,i,r){e.isArray(t)||(t=typeof t>"u"?[]:[t]),r=r||{byteLength:0,parts:[]},i.metadata||(t=e.annotateArguments(t));for(var s=",",o=r.parts.length,a=0;a<t.length;a++){var l=t[a];s+=e.writeArgument(l,r)}var c=e.writeString(s);return r.byteLength+=c.byteLength,r.parts.splice(o,0,c),r},e.readMessage=function(t,i,r){i=i||e.defaults;var s=e.dataView(t,t.byteOffset,t.byteLength);r=r||{idx:0};var o=e.readString(s,r);return e.readMessageContents(o,s,i,r)},e.readMessageContents=function(t,i,r,s){if(t.indexOf("/")!==0)throw new Error("A malformed OSC address was found while reading an OSC message. String was: "+t);var o=e.readArguments(i,r,s);return{address:t,args:o.length===1&&r.unpackSingleArgs?o[0]:o}},e.collectMessageParts=function(t,i,r){return r=r||{byteLength:0,parts:[]},e.addDataPart(e.writeString(t.address),r),e.collectArguments(t.args,i,r)},e.writeMessage=function(t,i){if(i=i||e.defaults,!e.isValidMessage(t))throw new Error("An OSC message must contain a valid address. Message was: "+JSON.stringify(t,null,2));var r=e.collectMessageParts(t,i);return e.joinParts(r)},e.isValidMessage=function(t){return t.address&&t.address.indexOf("/")===0},e.readBundle=function(t,i,r){return e.readPacket(t,i,r)},e.collectBundlePackets=function(t,i,r){r=r||{byteLength:0,parts:[]},e.addDataPart(e.writeString("#bundle"),r),e.addDataPart(e.writeTimeTag(t.timeTag),r);for(var s=0;s<t.packets.length;s++){var o=t.packets[s],a=o.address?e.collectMessageParts:e.collectBundlePackets,l=a(o,i);r.byteLength+=l.byteLength,e.addDataPart(e.writeInt32(l.byteLength),r),r.parts=r.parts.concat(l.parts)}return r},e.writeBundle=function(t,i){if(!e.isValidBundle(t))throw new Error("An OSC bundle must contain 'timeTag' and 'packets' properties. Bundle was: "+JSON.stringify(t,null,2));i=i||e.defaults;var r=e.collectBundlePackets(t,i);return e.joinParts(r)},e.isValidBundle=function(t){return t.timeTag!==void 0&&t.packets!==void 0},e.readBundleContents=function(t,i,r,s){for(var o=e.readTimeTag(t,r),a=[];r.idx<s;){var l=e.readInt32(t,r),c=r.idx+l,u=e.readPacket(t,i,r,c);a.push(u)}return{timeTag:o,packets:a}},e.readPacket=function(t,i,r,s){var o=e.dataView(t,t.byteOffset,t.byteLength);s=s===void 0?o.byteLength:s,r=r||{idx:0};var a=e.readString(o,r),l=a[0];if(l==="#")return e.readBundleContents(o,i,r,s);if(l==="/")return e.readMessageContents(a,o,i,r);throw new Error("The header of an OSC packet didn't contain an OSC address or a #bundle string. Header was: "+a)},e.writePacket=function(t,i){if(e.isValidMessage(t))return e.writeMessage(t,i);if(e.isValidBundle(t))return e.writeBundle(t,i);throw new Error("The specified packet was not recognized as a valid OSC message or bundle. Packet was: "+JSON.stringify(t,null,2))},e.argumentTypes={i:{reader:"readInt32",writer:"writeInt32"},h:{reader:"readInt64",writer:"writeInt64"},f:{reader:"readFloat32",writer:"writeFloat32"},s:{reader:"readString",writer:"writeString"},S:{reader:"readString",writer:"writeString"},b:{reader:"readBlob",writer:"writeBlob"},t:{reader:"readTimeTag",writer:"writeTimeTag"},T:{reader:"readTrue"},F:{reader:"readFalse"},N:{reader:"readNull"},I:{reader:"readImpulse"},d:{reader:"readFloat64",writer:"writeFloat64"},c:{reader:"readChar32",writer:"writeChar32"},r:{reader:"readColor",writer:"writeColor"},m:{reader:"readMIDIBytes",writer:"writeMIDIBytes"}},e.inferTypeForArgument=function(t){var i=typeof t;switch(i){case"boolean":return t?"T":"F";case"string":return"s";case"number":return"f";case"undefined":return"N";case"object":if(t===null)return"N";if(t instanceof Uint8Array||t instanceof ArrayBuffer)return"b";if(typeof t.high=="number"&&typeof t.low=="number")return"h";break}throw new Error("Can't infer OSC argument type for value: "+JSON.stringify(t,null,2))},e.annotateArguments=function(t){for(var i=[],r=0;r<t.length;r++){var s=t[r],o;if(typeof s=="object"&&s.type&&s.value!==void 0)o=s;else if(e.isArray(s))o=e.annotateArguments(s);else{var a=e.inferTypeForArgument(s);o={type:a,value:s}}i.push(o)}return i},e.isCommonJS&&(n.exports=e)})()}(Dl)),Dl.exports}var Bl={},Yf;function XT(){return Yf||(Yf=1,function(n){(function(e,t){e.slip=n,t(n)})(rs,function(e){var t=e;t.END=192,t.ESC=219,t.ESC_END=220,t.ESC_ESC=221,t.byteArray=function(r,s,o){return r instanceof ArrayBuffer?new Uint8Array(r,s,o):r},t.expandByteArray=function(r){var s=new Uint8Array(r.length*2);return s.set(r),s},t.sliceByteArray=function(r,s,o){var a=r.buffer.slice?r.buffer.slice(s,o):r.subarray(s,o);return new Uint8Array(a)},t.encode=function(r,s){s=s||{},s.bufferPadding=s.bufferPadding||4,r=t.byteArray(r,s.offset,s.byteLength);var o=r.length+s.bufferPadding+3&-4,a=new Uint8Array(o),l=1;a[0]=t.END;for(var c=0;c<r.length;c++){l>a.length-3&&(a=t.expandByteArray(a));var u=r[c];u===t.END?(a[l++]=t.ESC,u=t.ESC_END):u===t.ESC&&(a[l++]=t.ESC,u=t.ESC_ESC),a[l++]=u}return a[l]=t.END,t.sliceByteArray(a,0,l+1)},t.Decoder=function(r){r=typeof r!="function"?r||{}:{onMessage:r},this.maxMessageSize=r.maxMessageSize||10485760,this.bufferSize=r.bufferSize||1024,this.msgBuffer=new Uint8Array(this.bufferSize),this.msgBufferIdx=0,this.onMessage=r.onMessage,this.onError=r.onError,this.escape=!1};var i=t.Decoder.prototype;return i.decode=function(r){r=t.byteArray(r);for(var s,o=0;o<r.length;o++){var a=r[o];if(this.escape)a===t.ESC_ESC?a=t.ESC:a===t.ESC_END&&(a=t.END);else{if(a===t.ESC){this.escape=!0;continue}if(a===t.END){s=this.handleEnd();continue}}var l=this.addByte(a);l||this.handleMessageMaxError()}return s},i.handleMessageMaxError=function(){this.onError&&this.onError(this.msgBuffer.subarray(0),"The message is too large; the maximum message size is "+this.maxMessageSize/1024+"KB. Use a larger maxMessageSize if necessary."),this.msgBufferIdx=0,this.escape=!1},i.addByte=function(r){return this.msgBufferIdx>this.msgBuffer.length-1&&(this.msgBuffer=t.expandByteArray(this.msgBuffer)),this.msgBuffer[this.msgBufferIdx++]=r,this.escape=!1,this.msgBuffer.length<this.maxMessageSize},i.handleEnd=function(){if(this.msgBufferIdx!==0){var r=t.sliceByteArray(this.msgBuffer,0,this.msgBufferIdx);return this.onMessage&&this.onMessage(r),this.msgBufferIdx=0,r}},t})}(Bl)),Bl}var Eo={exports:{}},Zf;function jT(){if(Zf)return Eo.exports;Zf=1;var n=typeof Reflect=="object"?Reflect:null,e=n&&typeof n.apply=="function"?n.apply:function(L,D,C){return Function.prototype.apply.call(L,D,C)},t;n&&typeof n.ownKeys=="function"?t=n.ownKeys:Object.getOwnPropertySymbols?t=function(L){return Object.getOwnPropertyNames(L).concat(Object.getOwnPropertySymbols(L))}:t=function(L){return Object.getOwnPropertyNames(L)};function i(M){console&&console.warn&&console.warn(M)}var r=Number.isNaN||function(L){return L!==L};function s(){s.init.call(this)}Eo.exports=s,Eo.exports.once=p,s.EventEmitter=s,s.prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var o=10;function a(M){if(typeof M!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof M)}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return o},set:function(M){if(typeof M!="number"||M<0||r(M))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+M+".");o=M}}),s.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(L){if(typeof L!="number"||L<0||r(L))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+L+".");return this._maxListeners=L,this};function l(M){return M._maxListeners===void 0?s.defaultMaxListeners:M._maxListeners}s.prototype.getMaxListeners=function(){return l(this)},s.prototype.emit=function(L){for(var D=[],C=1;C<arguments.length;C++)D.push(arguments[C]);var k=L==="error",U=this._events;if(U!==void 0)k=k&&U.error===void 0;else if(!k)return!1;if(k){var F;if(D.length>0&&(F=D[0]),F instanceof Error)throw F;var S=new Error("Unhandled error."+(F?" ("+F.message+")":""));throw S.context=F,S}var G=U[L];if(G===void 0)return!1;if(typeof G=="function")e(G,this,D);else for(var b=G.length,T=m(G,b),C=0;C<b;++C)e(T[C],this,D);return!0};function c(M,L,D,C){var k,U,F;if(a(D),U=M._events,U===void 0?(U=M._events=Object.create(null),M._eventsCount=0):(U.newListener!==void 0&&(M.emit("newListener",L,D.listener?D.listener:D),U=M._events),F=U[L]),F===void 0)F=U[L]=D,++M._eventsCount;else if(typeof F=="function"?F=U[L]=C?[D,F]:[F,D]:C?F.unshift(D):F.push(D),k=l(M),k>0&&F.length>k&&!F.warned){F.warned=!0;var S=new Error("Possible EventEmitter memory leak detected. "+F.length+" "+String(L)+" listeners added. Use emitter.setMaxListeners() to increase limit");S.name="MaxListenersExceededWarning",S.emitter=M,S.type=L,S.count=F.length,i(S)}return M}s.prototype.addListener=function(L,D){return c(this,L,D,!1)},s.prototype.on=s.prototype.addListener,s.prototype.prependListener=function(L,D){return c(this,L,D,!0)};function u(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function h(M,L,D){var C={fired:!1,wrapFn:void 0,target:M,type:L,listener:D},k=u.bind(C);return k.listener=D,C.wrapFn=k,k}s.prototype.once=function(L,D){return a(D),this.on(L,h(this,L,D)),this},s.prototype.prependOnceListener=function(L,D){return a(D),this.prependListener(L,h(this,L,D)),this},s.prototype.removeListener=function(L,D){var C,k,U,F,S;if(a(D),k=this._events,k===void 0)return this;if(C=k[L],C===void 0)return this;if(C===D||C.listener===D)--this._eventsCount===0?this._events=Object.create(null):(delete k[L],k.removeListener&&this.emit("removeListener",L,C.listener||D));else if(typeof C!="function"){for(U=-1,F=C.length-1;F>=0;F--)if(C[F]===D||C[F].listener===D){S=C[F].listener,U=F;break}if(U<0)return this;U===0?C.shift():_(C,U),C.length===1&&(k[L]=C[0]),k.removeListener!==void 0&&this.emit("removeListener",L,S||D)}return this},s.prototype.off=s.prototype.removeListener,s.prototype.removeAllListeners=function(L){var D,C,k;if(C=this._events,C===void 0)return this;if(C.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):C[L]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete C[L]),this;if(arguments.length===0){var U=Object.keys(C),F;for(k=0;k<U.length;++k)F=U[k],F!=="removeListener"&&this.removeAllListeners(F);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(D=C[L],typeof D=="function")this.removeListener(L,D);else if(D!==void 0)for(k=D.length-1;k>=0;k--)this.removeListener(L,D[k]);return this};function f(M,L,D){var C=M._events;if(C===void 0)return[];var k=C[L];return k===void 0?[]:typeof k=="function"?D?[k.listener||k]:[k]:D?E(k):m(k,k.length)}s.prototype.listeners=function(L){return f(this,L,!0)},s.prototype.rawListeners=function(L){return f(this,L,!1)},s.listenerCount=function(M,L){return typeof M.listenerCount=="function"?M.listenerCount(L):d.call(M,L)},s.prototype.listenerCount=d;function d(M){var L=this._events;if(L!==void 0){var D=L[M];if(typeof D=="function")return 1;if(D!==void 0)return D.length}return 0}s.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]};function m(M,L){for(var D=new Array(L),C=0;C<L;++C)D[C]=M[C];return D}function _(M,L){for(;L+1<M.length;L++)M[L]=M[L+1];M.pop()}function E(M){for(var L=new Array(M.length),D=0;D<L.length;++D)L[D]=M[D].listener||M[D];return L}function p(M,L){return new Promise(function(D,C){function k(F){M.removeListener(L,U),C(F)}function U(){typeof M.removeListener=="function"&&M.removeListener("error",k),D([].slice.call(arguments))}R(M,L,U,{once:!0}),L!=="error"&&A(M,k,{once:!0})})}function A(M,L,D){typeof M.on=="function"&&R(M,"error",L,D)}function R(M,L,D,C){if(typeof M.on=="function")C.once?M.once(L,D):M.on(L,D);else if(typeof M.addEventListener=="function")M.addEventListener(L,function k(U){C.once&&M.removeEventListener(L,k),D(U)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof M)}return Eo.exports}var Fl,Jf;function $T(){return Jf||(Jf=1,Fl=function(){throw new Error("ws does not work in the browser. Browser clients must use the native WebSocket object")}),Fl}/*! osc.js 2.4.4, Copyright 2023 Colin Clark | github.com/colinbdclark/osc.js */(function(n,e){var r=r||{},r=(function(){r.SECS_70YRS=2208988800,r.TWO_32=4294967296,r.defaults={metadata:!1,unpackSingleArgs:!0},r.isCommonJS=!!n.exports,r.isNode=r.isCommonJS&&typeof window>"u",r.isElectron=!(typeof process>"u"||!process.versions||!process.versions.electron),r.isBufferEnv=r.isNode||r.isElectron,r.isArray=function(s){return s&&Object.prototype.toString.call(s)==="[object Array]"},r.isTypedArrayView=function(s){return s.buffer&&s.buffer instanceof ArrayBuffer},r.isBuffer=function(s){return r.isBufferEnv&&s instanceof Buffer},r.Long=typeof Long<"u"?Long:r.isNode?Tm():void 0,r.TextDecoder=typeof TextDecoder<"u"?new TextDecoder("utf-8"):typeof util<"u"&&(util.TextDecoder,1)?new util.TextDecoder("utf-8"):void 0,r.TextEncoder=typeof TextEncoder<"u"?new TextEncoder("utf-8"):typeof util<"u"&&(util.TextEncoder,1)?new util.TextEncoder("utf-8"):void 0,r.dataView=function(s,o,a){return s.buffer?new DataView(s.buffer,o,a):s instanceof ArrayBuffer?new DataView(s,o,a):new DataView(new Uint8Array(s),o,a)},r.byteArray=function(s){if(s instanceof Uint8Array)return s;var o=s.buffer||s;if(o instanceof ArrayBuffer||o.length!==void 0&&typeof o!="string")return new Uint8Array(o);throw new Error("Can't wrap a non-array-like object as Uint8Array. Object was: "+JSON.stringify(s,null,2))},r.nativeBuffer=function(s){return r.isBufferEnv?r.isBuffer(s)?s:Buffer.from(s.buffer?s:new Uint8Array(s)):r.isTypedArrayView(s)?s:new Uint8Array(s)},r.copyByteArray=function(s,o,a){if(r.isTypedArrayView(s)&&r.isTypedArrayView(o))o.set(s,a);else for(var l=a===void 0?0:a,c=Math.min(o.length-a,s.length),u=0,h=l;u<c;u++,h++)o[h]=s[u];return o},r.readString=function(s,o){for(var a=[],l=o.idx;l<s.byteLength;l++){var c=s.getUint8(l);if(c===0){l++;break}a.push(c)}return o.idx=l=l+3&-4,(r.isBufferEnv?r.readString.withBuffer:r.TextDecoder?r.readString.withTextDecoder:r.readString.raw)(a)},r.readString.raw=function(s){for(var o="",a=0;a<s.length;a+=1e4)o+=String.fromCharCode.apply(null,s.slice(a,a+1e4));return o},r.readString.withTextDecoder=function(s){return s=new Int8Array(s),r.TextDecoder.decode(s)},r.readString.withBuffer=function(s){return Buffer.from(s).toString("utf-8")},r.writeString=function(s){for(var o,a=r.isBufferEnv?r.writeString.withBuffer:r.TextEncoder?r.writeString.withTextEncoder:null,l=s+"\0",c=(a&&(o=a(l)),(a?o:l).length),u=new Uint8Array(c+3&-4),h=0;h<c-1;h++){var f=a?o[h]:l.charCodeAt(h);u[h]=f}return u},r.writeString.withTextEncoder=function(s){return r.TextEncoder.encode(s)},r.writeString.withBuffer=function(s){return Buffer.from(s)},r.readPrimitive=function(s,o,a,l){return s=s[o](l.idx,!1),l.idx+=a,s},r.writePrimitive=function(s,o,a,l,c){var u;return c=c===void 0?0:c,o?u=new Uint8Array(o.buffer):(u=new Uint8Array(l),o=new DataView(u.buffer)),o[a](c,s,!1),u},r.readInt32=function(s,o){return r.readPrimitive(s,"getInt32",4,o)},r.writeInt32=function(s,o,a){return r.writePrimitive(s,o,"setInt32",4,a)},r.readInt64=function(l,o){var a=r.readPrimitive(l,"getInt32",4,o),l=r.readPrimitive(l,"getInt32",4,o);return r.Long?new r.Long(l,a):{high:a,low:l,unsigned:!1}},r.writeInt64=function(s,o,a){var l=new Uint8Array(8);return l.set(r.writePrimitive(s.high,o,"setInt32",4,a),0),l.set(r.writePrimitive(s.low,o,"setInt32",4,a+4),4),l},r.readFloat32=function(s,o){return r.readPrimitive(s,"getFloat32",4,o)},r.writeFloat32=function(s,o,a){return r.writePrimitive(s,o,"setFloat32",4,a)},r.readFloat64=function(s,o){return r.readPrimitive(s,"getFloat64",8,o)},r.writeFloat64=function(s,o,a){return r.writePrimitive(s,o,"setFloat64",8,a)},r.readChar32=function(s,o){return s=r.readPrimitive(s,"getUint32",4,o),String.fromCharCode(s)},r.writeChar32=function(s,o,a){if(s=s.charCodeAt(0),!(s===void 0||s<-1))return r.writePrimitive(s,o,"setUint32",4,a)},r.readBlob=function(c,o){var a=r.readInt32(c,o),l=a+3&-4,c=new Uint8Array(c.buffer,o.idx,a);return o.idx+=l,c},r.writeBlob=function(s){var o=(s=r.byteArray(s)).byteLength,a=new Uint8Array(4+(o+3&-4)),l=new DataView(a.buffer);return r.writeInt32(o,l),a.set(s,4),a},r.readMIDIBytes=function(s,o){return s=new Uint8Array(s.buffer,o.idx,4),o.idx+=4,s},r.writeMIDIBytes=function(s){s=r.byteArray(s);var o=new Uint8Array(4);return o.set(s),o},r.readColor=function(a,o){var a=new Uint8Array(a.buffer,o.idx,4),l=a[3]/255;return o.idx+=4,{r:a[0],g:a[1],b:a[2],a:l}},r.writeColor=function(s){var o=Math.round(255*s.a);return new Uint8Array([s.r,s.g,s.b,o])},r.readTrue=function(){return!0},r.readFalse=function(){return!1},r.readNull=function(){return null},r.readImpulse=function(){return 1},r.readTimeTag=function(l,o){var a=r.readPrimitive(l,"getUint32",4,o),l=r.readPrimitive(l,"getUint32",4,o);return{raw:[a,l],native:a===0&&l===1?Date.now():r.ntpToJSTime(a,l)}},r.writeTimeTag=function(o){var o=o.raw||r.jsToNTPTime(o.native),a=new Uint8Array(8),l=new DataView(a.buffer);return r.writeInt32(o[0],l,0),r.writeInt32(o[1],l,4),a},r.timeTag=function(s,c){s=s||0;var c=(c=c||Date.now())/1e3,a=Math.floor(c),c=c-a,l=Math.floor(s),c=c+(s-l);return 1<c&&(l+=s=Math.floor(c),c=c-s),{raw:[a+l+r.SECS_70YRS,Math.round(r.TWO_32*c)]}},r.ntpToJSTime=function(s,o){return 1e3*(s-r.SECS_70YRS+o/r.TWO_32)},r.jsToNTPTime=function(o){var o=o/1e3,a=Math.floor(o);return[a+r.SECS_70YRS,Math.round(r.TWO_32*(o-a))]},r.readArguments=function(s,o,a){var l=r.readString(s,a);if(l.indexOf(",")!==0)throw new Error("A malformed type tag string was found while reading the arguments of an OSC message. String was: "+l," at offset: "+a.idx);var c=l.substring(1).split(""),u=[];return r.readArgumentsIntoArray(u,c,l,s,o,a),u},r.readArgument=function(s,o,a,l,c){var u=r.argumentTypes[s];if(u)return u=u.reader,u=r[u](a,c),l.metadata?{type:s,value:u}:u;throw new Error("'"+s+"' is not a valid OSC type tag. Type tag string was: "+o)},r.readArgumentsIntoArray=function(s,o,a,l,c,u){for(var h=0;h<o.length;){var f=o[h];if(f==="["){var d=o.slice(h+1),m=d.indexOf("]");if(m<0)throw new Error("Invalid argument type tag: an open array type tag ('[') was found without a matching close array tag ('[]'). Type tag was: "+a);d=d.slice(0,m),d=r.readArgumentsIntoArray([],d,a,l,c,u),h+=m+2}else d=r.readArgument(f,a,l,c,u),h++;s.push(d)}return s},r.writeArguments=function(s,o){return s=r.collectArguments(s,o),r.joinParts(s)},r.joinParts=function(s){for(var o=new Uint8Array(s.byteLength),a=s.parts,l=0,c=0;c<a.length;c++){var u=a[c];r.copyByteArray(u,o,l),l+=u.length}return o},r.addDataPart=function(s,o){o.parts.push(s),o.byteLength+=s.length},r.writeArrayArguments=function(s,o){for(var a="[",l=0;l<s.length;l++){var c=s[l];a+=r.writeArgument(c,o)}return a+="]"},r.writeArgument=function(s,o){var a;return r.isArray(s)?r.writeArrayArguments(s,o):(a=s.type,(a=r.argumentTypes[a].writer)&&(a=r[a](s.value),r.addDataPart(a,o)),s.type)},r.collectArguments=function(s,o,a){r.isArray(s)||(s=s===void 0?[]:[s]),a=a||{byteLength:0,parts:[]},o.metadata||(s=r.annotateArguments(s));for(var l=",",o=a.parts.length,c=0;c<s.length;c++){var u=s[c];l+=r.writeArgument(u,a)}var h=r.writeString(l);return a.byteLength+=h.byteLength,a.parts.splice(o,0,h),a},r.readMessage=function(l,o,a){o=o||r.defaults;var l=r.dataView(l,l.byteOffset,l.byteLength),c=r.readString(l,a=a||{idx:0});return r.readMessageContents(c,l,o,a)},r.readMessageContents=function(s,o,a,l){if(s.indexOf("/")!==0)throw new Error("A malformed OSC address was found while reading an OSC message. String was: "+s);return o=r.readArguments(o,a,l),{address:s,args:o.length===1&&a.unpackSingleArgs?o[0]:o}},r.collectMessageParts=function(s,o,a){return a=a||{byteLength:0,parts:[]},r.addDataPart(r.writeString(s.address),a),r.collectArguments(s.args,o,a)},r.writeMessage=function(s,o){if(o=o||r.defaults,r.isValidMessage(s))return o=r.collectMessageParts(s,o),r.joinParts(o);throw new Error("An OSC message must contain a valid address. Message was: "+JSON.stringify(s,null,2))},r.isValidMessage=function(s){return s.address&&s.address.indexOf("/")===0},r.readBundle=function(s,o,a){return r.readPacket(s,o,a)},r.collectBundlePackets=function(s,o,a){a=a||{byteLength:0,parts:[]},r.addDataPart(r.writeString("#bundle"),a),r.addDataPart(r.writeTimeTag(s.timeTag),a);for(var l=0;l<s.packets.length;l++){var c=s.packets[l],c=(c.address?r.collectMessageParts:r.collectBundlePackets)(c,o);a.byteLength+=c.byteLength,r.addDataPart(r.writeInt32(c.byteLength),a),a.parts=a.parts.concat(c.parts)}return a},r.writeBundle=function(s,o){if(!r.isValidBundle(s))throw new Error("An OSC bundle must contain 'timeTag' and 'packets' properties. Bundle was: "+JSON.stringify(s,null,2));return o=o||r.defaults,s=r.collectBundlePackets(s,o),r.joinParts(s)},r.isValidBundle=function(s){return s.timeTag!==void 0&&s.packets!==void 0},r.readBundleContents=function(s,o,a,l){for(var c=r.readTimeTag(s,a),u=[];a.idx<l;){var h=r.readInt32(s,a),h=a.idx+h,h=r.readPacket(s,o,a,h);u.push(h)}return{timeTag:c,packets:u}},r.readPacket=function(c,o,a,l){var c=r.dataView(c,c.byteOffset,c.byteLength),u=(l=l===void 0?c.byteLength:l,r.readString(c,a=a||{idx:0})),h=u[0];if(h==="#")return r.readBundleContents(c,o,a,l);if(h==="/")return r.readMessageContents(u,c,o,a);throw new Error("The header of an OSC packet didn't contain an OSC address or a #bundle string. Header was: "+u)},r.writePacket=function(s,o){if(r.isValidMessage(s))return r.writeMessage(s,o);if(r.isValidBundle(s))return r.writeBundle(s,o);throw new Error("The specified packet was not recognized as a valid OSC message or bundle. Packet was: "+JSON.stringify(s,null,2))},r.argumentTypes={i:{reader:"readInt32",writer:"writeInt32"},h:{reader:"readInt64",writer:"writeInt64"},f:{reader:"readFloat32",writer:"writeFloat32"},s:{reader:"readString",writer:"writeString"},S:{reader:"readString",writer:"writeString"},b:{reader:"readBlob",writer:"writeBlob"},t:{reader:"readTimeTag",writer:"writeTimeTag"},T:{reader:"readTrue"},F:{reader:"readFalse"},N:{reader:"readNull"},I:{reader:"readImpulse"},d:{reader:"readFloat64",writer:"writeFloat64"},c:{reader:"readChar32",writer:"writeChar32"},r:{reader:"readColor",writer:"writeColor"},m:{reader:"readMIDIBytes",writer:"writeMIDIBytes"}},r.inferTypeForArgument=function(s){switch(typeof s){case"boolean":return s?"T":"F";case"string":return"s";case"number":return"f";case"undefined":return"N";case"object":if(s===null)return"N";if(s instanceof Uint8Array||s instanceof ArrayBuffer)return"b";if(typeof s.high=="number"&&typeof s.low=="number")return"h"}throw new Error("Can't infer OSC argument type for value: "+JSON.stringify(s,null,2))},r.annotateArguments=function(s){for(var o=[],a=0;a<s.length;a++){var l=s[a];l=typeof l=="object"&&l.type&&l.value!==void 0?l:r.isArray(l)?r.annotateArguments(l):{type:r.inferTypeForArgument(l),value:l},o.push(l)}return o},r.isCommonJS&&(n.exports=r)}(),function(s,o){n.exports=o()}(typeof self<"u"?self:rs,function(){return o=[function(l,c){function u(g,N,z){this.low=0|g,this.high=0|N,this.unsigned=!!z}function h(g){return(g&&g.__isLong__)===!0}function f(g,N){var z,Z,ee;return N?(ee=0<=(g>>>=0)&&g<256)&&(Z=R[g])?Z:(z=m(g,(0|g)<0?-1:0,!0),ee&&(R[g]=z),z):(ee=-128<=(g|=0)&&g<128)&&(Z=A[g])?Z:(z=m(g,g<0?-1:0,!1),ee&&(A[g]=z),z)}function d(g,N){if(isNaN(g))return N?F:U;if(N){if(g<0)return F;if(D<=g)return y}else{if(g<=-C)return v;if(C<=g+1)return T}return g<0?d(-g,N).neg():m(g%L|0,g/L|0,N)}function m(g,N,z){return new u(g,N,z)}function _(g,N,z){if(g.length===0)throw Error("empty string");if(g==="NaN"||g==="Infinity"||g==="+Infinity"||g==="-Infinity")return U;if(N=typeof N=="number"?(z=N,!1):!!N,(z=z||10)<2||36<z)throw RangeError("radix");var Z;if(0<(Z=g.indexOf("-")))throw Error("interior hyphen");if(Z===0)return _(g.substring(1),N,z).neg();for(var ee=d(M(z,8)),te=U,se=0;se<g.length;se+=8){var H=Math.min(8,g.length-se),W=parseInt(g.substring(se,se+H),z);te=(H<8?(H=d(M(z,H)),te.mul(H)):te=te.mul(ee)).add(d(W))}return te.unsigned=N,te}function E(g,N){return typeof g=="number"?d(g,N):typeof g=="string"?_(g,N):m(g.low,g.high,typeof N=="boolean"?N:g.unsigned)}l.exports=u;var p=null;try{p=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}Object.defineProperty(u.prototype,"__isLong__",{value:!0}),u.isLong=h;var A={},R={},M=(u.fromInt=f,u.fromNumber=d,u.fromBits=m,Math.pow),L=(u.fromString=_,u.fromValue=E,4294967296),D=L*L,C=D/2,k=f(1<<24),U=f(0),F=(u.ZERO=U,f(0,!0)),S=(u.UZERO=F,f(1)),G=(u.ONE=S,f(1,!0)),b=(u.UONE=G,f(-1)),T=(u.NEG_ONE=b,m(-1,2147483647,!1)),y=(u.MAX_VALUE=T,m(-1,-1,!0)),v=(u.MAX_UNSIGNED_VALUE=y,m(0,-2147483648,!1)),w=(u.MIN_VALUE=v,u.prototype);w.toInt=function(){return this.unsigned?this.low>>>0:this.low},w.toNumber=function(){return this.unsigned?(this.high>>>0)*L+(this.low>>>0):this.high*L+(this.low>>>0)},w.toString=function(g){if((g=g||10)<2||36<g)throw RangeError("radix");if(this.isZero())return"0";var N,z;if(this.isNegative())return this.eq(v)?(z=d(g),z=(N=this.div(z)).mul(z).sub(this),N.toString(g)+z.toInt().toString(g)):"-"+this.neg().toString(g);for(var Z=d(M(g,6),this.unsigned),ee=this,te="";;){var se=ee.div(Z),H=(ee.sub(se.mul(Z)).toInt()>>>0).toString(g);if((ee=se).isZero())return H+te;for(;H.length<6;)H="0"+H;te=""+H+te}},w.getHighBits=function(){return this.high},w.getHighBitsUnsigned=function(){return this.high>>>0},w.getLowBits=function(){return this.low},w.getLowBitsUnsigned=function(){return this.low>>>0},w.getNumBitsAbs=function(){if(this.isNegative())return this.eq(v)?64:this.neg().getNumBitsAbs();for(var g=this.high!=0?this.high:this.low,N=31;0<N&&(g&1<<N)==0;N--);return this.high!=0?N+33:N+1},w.isZero=function(){return this.high===0&&this.low===0},w.eqz=w.isZero,w.isNegative=function(){return!this.unsigned&&this.high<0},w.isPositive=function(){return this.unsigned||0<=this.high},w.isOdd=function(){return(1&this.low)==1},w.isEven=function(){return(1&this.low)==0},w.equals=function(g){return h(g)||(g=E(g)),(this.unsigned===g.unsigned||this.high>>>31!=1||g.high>>>31!=1)&&this.high===g.high&&this.low===g.low},w.eq=w.equals,w.notEquals=function(g){return!this.eq(g)},w.neq=w.notEquals,w.ne=w.notEquals,w.lessThan=function(g){return this.comp(g)<0},w.lt=w.lessThan,w.lessThanOrEqual=function(g){return this.comp(g)<=0},w.lte=w.lessThanOrEqual,w.le=w.lessThanOrEqual,w.greaterThan=function(g){return 0<this.comp(g)},w.gt=w.greaterThan,w.greaterThanOrEqual=function(g){return 0<=this.comp(g)},w.gte=w.greaterThanOrEqual,w.ge=w.greaterThanOrEqual,w.compare=function(g){var N,z;return h(g)||(g=E(g)),this.eq(g)?0:(N=this.isNegative(),z=g.isNegative(),N&&!z?-1:!N&&z?1:this.unsigned?g.high>>>0>this.high>>>0||g.high===this.high&&g.low>>>0>this.low>>>0?-1:1:this.sub(g).isNegative()?-1:1)},w.comp=w.compare,w.negate=function(){return!this.unsigned&&this.eq(v)?v:this.not().add(S)},w.neg=w.negate,w.add=function(g){h(g)||(g=E(g));var N=this.high>>>16,z=65535&this.high,Z=this.low>>>16,ee=65535&this.low,te=g.high>>>16,se=65535&g.high,H=g.low>>>16,W=0,ie=0,fe=0,de=0;return ie+=(fe=fe+((de+=ee+(65535&g.low))>>>16)+(Z+H))>>>16,m((fe&=65535)<<16|(de&=65535),((W+=(ie+=z+se)>>>16)+(N+te)&65535)<<16|(ie&=65535),this.unsigned)},w.subtract=function(g){return h(g)||(g=E(g)),this.add(g.neg())},w.sub=w.subtract,w.multiply=function(g){var N,z,Z,ee,te,se,H,W,ie,fe,de;return this.isZero()?U:(h(g)||(g=E(g)),p?m(p.mul(this.low,this.high,g.low,g.high),p.get_high(),this.unsigned):g.isZero()?U:this.eq(v)?g.isOdd()?v:U:g.eq(v)?this.isOdd()?v:U:this.isNegative()?g.isNegative()?this.neg().mul(g.neg()):this.neg().mul(g).neg():g.isNegative()?this.mul(g.neg()).neg():this.lt(k)&&g.lt(k)?d(this.toNumber()*g.toNumber(),this.unsigned):(N=this.high>>>16,z=65535&this.high,Z=this.low>>>16,ee=65535&this.low,te=g.high>>>16,se=65535&g.high,H=g.low>>>16,de=(de=fe=ie=W=0)+((ie=ie+((fe+=ee*(g=65535&g.low))>>>16)+Z*g)>>>16)+((ie=(ie&65535)+ee*H)>>>16),m((ie&=65535)<<16|(fe&=65535),(W=(W=(W+=(de+=z*g)>>>16)+((de=(de&65535)+Z*H)>>>16)+((de=(de&65535)+ee*se)>>>16))+(N*g+z*H+Z*se+ee*te)&65535)<<16|(de&=65535),this.unsigned)))},w.mul=w.multiply,w.divide=function(g){if((g=h(g)?g:E(g)).isZero())throw Error("division by zero");if(p)return this.unsigned||this.high!==-2147483648||g.low!==-1||g.high!==-1?m((this.unsigned?p.div_u:p.div_s)(this.low,this.high,g.low,g.high),p.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?F:U;var N,z;if(this.unsigned){if((g=g.unsigned?g:g.toUnsigned()).gt(this))return F;if(g.gt(this.shru(1)))return G;z=F}else{if(this.eq(v))return g.eq(S)||g.eq(b)?v:g.eq(v)?S:(Z=this.shr(1).div(g).shl(1)).eq(U)?g.isNegative()?S:b:(N=this.sub(g.mul(Z)),Z.add(N.div(g)));if(g.eq(v))return this.unsigned?F:U;if(this.isNegative())return g.isNegative()?this.neg().div(g.neg()):this.neg().div(g).neg();if(g.isNegative())return this.div(g.neg()).neg();z=U}for(N=this;N.gte(g);){for(var Z=Math.max(1,Math.floor(N.toNumber()/g.toNumber())),ee=Math.ceil(Math.log(Z)/Math.LN2),te=ee<=48?1:M(2,ee-48),se=d(Z),H=se.mul(g);H.isNegative()||H.gt(N);)H=(se=d(Z-=te,this.unsigned)).mul(g);se.isZero()&&(se=S),z=z.add(se),N=N.sub(H)}return z},w.div=w.divide,w.modulo=function(g){return h(g)||(g=E(g)),p?m((this.unsigned?p.rem_u:p.rem_s)(this.low,this.high,g.low,g.high),p.get_high(),this.unsigned):this.sub(this.div(g).mul(g))},w.mod=w.modulo,w.rem=w.modulo,w.not=function(){return m(~this.low,~this.high,this.unsigned)},w.and=function(g){return h(g)||(g=E(g)),m(this.low&g.low,this.high&g.high,this.unsigned)},w.or=function(g){return h(g)||(g=E(g)),m(this.low|g.low,this.high|g.high,this.unsigned)},w.xor=function(g){return h(g)||(g=E(g)),m(this.low^g.low,this.high^g.high,this.unsigned)},w.shiftLeft=function(g){return h(g)&&(g=g.toInt()),(g&=63)==0?this:g<32?m(this.low<<g,this.high<<g|this.low>>>32-g,this.unsigned):m(0,this.low<<g-32,this.unsigned)},w.shl=w.shiftLeft,w.shiftRight=function(g){return h(g)&&(g=g.toInt()),(g&=63)==0?this:g<32?m(this.low>>>g|this.high<<32-g,this.high>>g,this.unsigned):m(this.high>>g-32,0<=this.high?0:-1,this.unsigned)},w.shr=w.shiftRight,w.shiftRightUnsigned=function(g){var N;return h(g)&&(g=g.toInt()),(g&=63)==0?this:(N=this.high,g<32?m(this.low>>>g|N<<32-g,N>>>g,this.unsigned):m(g===32?N:N>>>g-32,0,this.unsigned))},w.shru=w.shiftRightUnsigned,w.shr_u=w.shiftRightUnsigned,w.toSigned=function(){return this.unsigned?m(this.low,this.high,!1):this},w.toUnsigned=function(){return this.unsigned?this:m(this.low,this.high,!0)},w.toBytes=function(g){return g?this.toBytesLE():this.toBytesBE()},w.toBytesLE=function(){var g=this.high,N=this.low;return[255&N,N>>>8&255,N>>>16&255,N>>>24,255&g,g>>>8&255,g>>>16&255,g>>>24]},w.toBytesBE=function(){var g=this.high,N=this.low;return[g>>>24,g>>>16&255,g>>>8&255,255&g,N>>>24,N>>>16&255,N>>>8&255,255&N]},u.fromBytes=function(g,N,z){return z?u.fromBytesLE(g,N):u.fromBytesBE(g,N)},u.fromBytesLE=function(g,N){return new u(g[0]|g[1]<<8|g[2]<<16|g[3]<<24,g[4]|g[5]<<8|g[6]<<16|g[7]<<24,N)},u.fromBytesBE=function(g,N){return new u(g[4]<<24|g[5]<<16|g[6]<<8|g[7],g[0]<<24|g[1]<<16|g[2]<<8|g[3],N)}}],a={},s.m=o,s.c=a,s.d=function(l,c,u){s.o(l,c)||Object.defineProperty(l,c,{configurable:!1,enumerable:!0,get:u})},s.n=function(l){var c=l&&l.__esModule?function(){return l.default}:function(){return l};return s.d(c,"a",c),c},s.o=function(l,c){return Object.prototype.hasOwnProperty.call(l,c)},s.p="",s(s.s=0);function s(l){var c;return(a[l]||(c=a[l]={i:l,l:!1,exports:{}},o[l].call(c.exports,c,c.exports,s),c.l=!0,c)).exports}var o,a}),function(s,o){s.slip=e,o(e)}(rs,function(a){var o=a,a=(o.END=192,o.ESC=219,o.ESC_END=220,o.ESC_ESC=221,o.byteArray=function(l,c,u){return l instanceof ArrayBuffer?new Uint8Array(l,c,u):l},o.expandByteArray=function(l){var c=new Uint8Array(2*l.length);return c.set(l),c},o.sliceByteArray=function(l,c,u){return l=l.buffer.slice?l.buffer.slice(c,u):l.subarray(c,u),new Uint8Array(l)},o.encode=function(l,u){(u=u||{}).bufferPadding=u.bufferPadding||4;var u=(l=o.byteArray(l,u.offset,u.byteLength)).length+u.bufferPadding+3&-4,h=new Uint8Array(u),f=1;h[0]=o.END;for(var d=0;d<l.length;d++){f>h.length-3&&(h=o.expandByteArray(h));var m=l[d];m===o.END?(h[f++]=o.ESC,m=o.ESC_END):m===o.ESC&&(h[f++]=o.ESC,m=o.ESC_ESC),h[f++]=m}return h[f]=o.END,o.sliceByteArray(h,0,f+1)},o.Decoder=function(l){this.maxMessageSize=(l=typeof l!="function"?l||{}:{onMessage:l}).maxMessageSize||10485760,this.bufferSize=l.bufferSize||1024,this.msgBuffer=new Uint8Array(this.bufferSize),this.msgBufferIdx=0,this.onMessage=l.onMessage,this.onError=l.onError,this.escape=!1},o.Decoder.prototype);return a.decode=function(l){var c;l=o.byteArray(l);for(var u=0;u<l.length;u++){var h=l[u];if(this.escape)h===o.ESC_ESC?h=o.ESC:h===o.ESC_END&&(h=o.END);else{if(h===o.ESC){this.escape=!0;continue}if(h===o.END){c=this.handleEnd();continue}}this.addByte(h)||this.handleMessageMaxError()}return c},a.handleMessageMaxError=function(){this.onError&&this.onError(this.msgBuffer.subarray(0),"The message is too large; the maximum message size is "+this.maxMessageSize/1024+"KB. Use a larger maxMessageSize if necessary."),this.msgBufferIdx=0,this.escape=!1},a.addByte=function(l){return this.msgBufferIdx>this.msgBuffer.length-1&&(this.msgBuffer=o.expandByteArray(this.msgBuffer)),this.msgBuffer[this.msgBufferIdx++]=l,this.escape=!1,this.msgBuffer.length<this.maxMessageSize},a.handleEnd=function(){var l;if(this.msgBufferIdx!==0)return l=o.sliceByteArray(this.msgBuffer,0,this.msgBufferIdx),this.onMessage&&this.onMessage(l),this.msgBufferIdx=0,l},o}),function(s){function o(){}var a=o.prototype,l=s.EventEmitter;function c(h,f){for(var d=h.length;d--;)if(h[d].listener===f)return d;return-1}function u(h){return function(){return this[h].apply(this,arguments)}}a.getListeners=function(h){var f,d,m=this._getEvents();if(h instanceof RegExp)for(d in f={},m)m.hasOwnProperty(d)&&h.test(d)&&(f[d]=m[d]);else f=m[h]||(m[h]=[]);return f},a.flattenListeners=function(h){for(var f=[],d=0;d<h.length;d+=1)f.push(h[d].listener);return f},a.getListenersAsObject=function(h){var f,d=this.getListeners(h);return d instanceof Array&&((f={})[h]=d),f||d},a.addListener=function(h,f){if(!function E(p){return typeof p=="function"||p instanceof RegExp||!(!p||typeof p!="object")&&E(p.listener)}(f))throw new TypeError("listener must be a function");var d,m=this.getListenersAsObject(h),_=typeof f=="object";for(d in m)m.hasOwnProperty(d)&&c(m[d],f)===-1&&m[d].push(_?f:{listener:f,once:!1});return this},a.on=u("addListener"),a.addOnceListener=function(h,f){return this.addListener(h,{listener:f,once:!0})},a.once=u("addOnceListener"),a.defineEvent=function(h){return this.getListeners(h),this},a.defineEvents=function(h){for(var f=0;f<h.length;f+=1)this.defineEvent(h[f]);return this},a.removeListener=function(h,f){var d,m,_=this.getListenersAsObject(h);for(m in _)_.hasOwnProperty(m)&&(d=c(_[m],f))!==-1&&_[m].splice(d,1);return this},a.off=u("removeListener"),a.addListeners=function(h,f){return this.manipulateListeners(!1,h,f)},a.removeListeners=function(h,f){return this.manipulateListeners(!0,h,f)},a.manipulateListeners=function(h,f,d){var m,_,E=h?this.removeListener:this.addListener,p=h?this.removeListeners:this.addListeners;if(typeof f!="object"||f instanceof RegExp)for(m=d.length;m--;)E.call(this,f,d[m]);else for(m in f)f.hasOwnProperty(m)&&(_=f[m])&&(typeof _=="function"?E:p).call(this,m,_);return this},a.removeEvent=function(h){var f,d=typeof h,m=this._getEvents();if(d=="string")delete m[h];else if(h instanceof RegExp)for(f in m)m.hasOwnProperty(f)&&h.test(f)&&delete m[f];else delete this._events;return this},a.removeAllListeners=u("removeEvent"),a.emitEvent=function(h,f){var d,m,_,E,p=this.getListenersAsObject(h);for(E in p)if(p.hasOwnProperty(E))for(d=p[E].slice(0),_=0;_<d.length;_++)(m=d[_]).once===!0&&this.removeListener(h,m.listener),m.listener.apply(this,f||[])===this._getOnceReturnValue()&&this.removeListener(h,m.listener);return this},a.trigger=u("emitEvent"),a.emit=function(h){var f=Array.prototype.slice.call(arguments,1);return this.emitEvent(h,f)},a.setOnceReturnValue=function(h){return this._onceReturnValue=h,this},a._getOnceReturnValue=function(){return!this.hasOwnProperty("_onceReturnValue")||this._onceReturnValue},a._getEvents=function(){return this._events||(this._events={})},o.noConflict=function(){return s.EventEmitter=l,o},n.exports?n.exports=o:s.EventEmitter=o}(typeof window<"u"?window:rs||{}),r||Kf()),t=t||XT(),i=i||jT().EventEmitter,r=(function(){r.supportsSerial=!1,r.firePacketEvents=function(o,a,l,c){a.address?o.emit("message",a,l,c):r.fireBundleEvents(o,a,l,c)},r.fireBundleEvents=function(o,a,l,c){o.emit("bundle",a,l,c);for(var u=0;u<a.packets.length;u++){var h=a.packets[u];r.firePacketEvents(o,h,a.timeTag,c)}},r.fireClosedPortSendError=function(o,a){o.emit("error",a=a||"Can't send packets on a closed osc.Port object. Please open (or reopen) this Port by calling open().")},r.Port=function(o){this.options=o||{},this.on("data",this.decodeOSC.bind(this))};var s=r.Port.prototype=Object.create(i.prototype);s.constructor=r.Port,s.send=function(l){var a=Array.prototype.slice.call(arguments),l=this.encodeOSC(l),l=r.nativeBuffer(l);a[0]=l,this.sendRaw.apply(this,a)},s.encodeOSC=function(o){var a;o=o.buffer||o;try{a=r.writePacket(o,this.options)}catch(l){this.emit("error",l)}return a},s.decodeOSC=function(o,a){o=r.byteArray(o),this.emit("raw",o,a);try{var l=r.readPacket(o,this.options);this.emit("osc",l,a),r.firePacketEvents(this,l,void 0,a)}catch(c){this.emit("error",c)}},r.SLIPPort=function(l){var a=this,l=this.options=l||{},l=(l.useSLIP=l.useSLIP===void 0||l.useSLIP,this.decoder=new t.Decoder({onMessage:this.decodeOSC.bind(this),onError:function(c){a.emit("error",c)}}),l.useSLIP?this.decodeSLIPData:this.decodeOSC);this.on("data",l.bind(this))},(s=r.SLIPPort.prototype=Object.create(r.Port.prototype)).constructor=r.SLIPPort,s.encodeOSC=function(o){o=o.buffer||o;try{var a=r.writePacket(o,this.options),l=t.encode(a)}catch(c){this.emit("error",c)}return l},s.decodeSLIPData=function(o,a){this.decoder.decode(o,a)},r.relay=function(o,a,l,c,u,h){l=l||"message",c=c||"send",u=u||function(){},h=h?[null].concat(h):[];function f(d){h[0]=d,d=u(d),a[c].apply(a,h)}return o.on(l,f),{eventName:l,listener:f}},r.relayPorts=function(o,a,l){var c=l.raw?"raw":"osc",u=l.raw?"sendRaw":"send";return r.relay(o,a,c,u,l.transform)},r.stopRelaying=function(o,a){o.removeListener(a.eventName,a.listener)},r.Relay=function(o,a,l){(this.options=l||{}).raw=!1,this.port1=o,this.port2=a,this.listen()},(s=r.Relay.prototype=Object.create(i.prototype)).constructor=r.Relay,s.open=function(){this.port1.open(),this.port2.open()},s.listen=function(){this.port1Spec&&this.port2Spec&&this.close(),this.port1Spec=r.relayPorts(this.port1,this.port2,this.options),this.port2Spec=r.relayPorts(this.port2,this.port1,this.options);var o=this.close.bind(this);this.port1.on("close",o),this.port2.on("close",o)},s.close=function(){r.stopRelaying(this.port1,this.port1Spec),r.stopRelaying(this.port2,this.port2Spec),this.emit("close",this.port1,this.port2)},n.exports&&(n.exports=r)}(),r||Kf());(function(){r.WebSocket=typeof WebSocket<"u"?WebSocket:$T(),r.WebSocketPort=function(o){r.Port.call(this,o),this.on("open",this.listen.bind(this)),this.socket=o.socket,this.socket&&(this.socket.readyState===1?(r.WebSocketPort.setupSocketForBinary(this.socket),this.emit("open",this.socket)):this.open())};var s=r.WebSocketPort.prototype=Object.create(r.Port.prototype);s.constructor=r.WebSocketPort,s.open=function(){(!this.socket||1<this.socket.readyState)&&(this.socket=new r.WebSocket(this.options.url)),r.WebSocketPort.setupSocketForBinary(this.socket);var o=this;this.socket.onopen=function(){o.emit("open",o.socket)},this.socket.onerror=function(a){o.emit("error",a)}},s.listen=function(){var o=this;this.socket.onmessage=function(a){o.emit("data",a.data,a)},this.socket.onclose=function(a){o.emit("close",a)},o.emit("ready")},s.sendRaw=function(o){this.socket&&this.socket.readyState===1?this.socket.send(o):r.fireClosedPortSendError(this)},s.close=function(o,a){this.socket.close(o,a)},r.WebSocketPort.setupSocketForBinary=function(o){o.binaryType=r.isNode?"nodebuffer":"arraybuffer"}})()})(lc,lc.exports);const eC=Ry(lc.exports),tC="/assets/home.e3eb8c86.svg",nC="/assets/gamepad.fdcddc98.svg";window.oscPort=new eC.WebSocketPort({url:"ws://localhost:8081",metadata:!0});oscPort.open();oscPort.on("ready",function(){console.log("A Web Socket connection has been established")});let iC="on",To="off",rC="left",sC="right";const oC={name:"default.vue",data(){return{inputCBKS:[],inputDetailCBKS:[],actionStatus:{RightShake:To,LeftShake:To}}},mounted(){let n=this;n.hotkeys=Go(),n.watchStatus()},computed:{currentRouteName(){return this.$route.name}},provide(){return{connect:this.connect,clearAllRegisterEvents:this.clearAllEventsOfSubComponents,addInputCBK:this.addInputCBK,addInputDetailCBK:this.addInputDetailCBK,refreshRootConfig:this.refreshRootConfig}},methods:{clearAllEventsOfSubComponents(){let n=this;n.inputCBKS=[],n.inputDetailCBKS=[]},refreshRootConfig(){let n=this;n.hotkeys=Go()},getFrequency(n){var e=["A","A#","B","C","C#","D","D#","E","F","F#","G","G#"],t,i;return n.length===3?t=n.charAt(2):t=n.charAt(1),i=e.indexOf(n.slice(0,-1)),i<3?i=i+12+(t-1)*12+1:i=i+(t-1)*12+1,440*Math.pow(2,(i-49)/12)},control(n,e){let t=this;if(!(!e||!e.actualOrientation))if(n instanceof Wo)for(const i of xy)t.updateControl(i,e,"left");else for(const i of yy)t.updateControl(i,e,"right")},updateControl(n,e,t){let i=this;i.lastPacket=e,n.threshold===void 0&&(n.threshold=0),n.last_value===void 0&&(n.init_value===void 0&&(n.init_value=0),n.last_value=n.init_value);const r=n.read_value(e);if(Math.abs(r-n.last_value)>n.threshold){let s=r?iC:To;n.name==="LVerticalMove"&&console.log("n",n.name,n.computePercent(r)),i.sendOSC(n,s,t,r,e),i.inputDetailCBKS.forEach(o=>{o&&o(n,s)}),n.last_value=r}},isFreestyle(n){let t=this.hotkeys[name];if(n.name==="RVerticalMove"&&t!=="")return!0},rightControlOSC(n,e,t,i){let r=this,s=n.name,o=r.hotkeys[s],a;if(r.isFreestyle(n)&&(a=n.computeFrequency(t,i)),!o)return;a||(a=r.getFrequency(o));let l={instrument:"recorder",frequency:a,status:e,name:n.name};oscPort.send({address:"/message",args:[{type:"s",value:JSON.stringify(l)}]}),console.log("send OSC",s,e,a)},leftControlOSC(n,e,t){if(e===To)return;let i={upAmplitude:{name:"upAmplitude",value:.1},downAmplitude:{name:"downAmplitude",value:-.1},closeSound:{name:"closeFreestyle",value:0},upAttack:{name:"upAttack",value:.1},downAttack:{name:"downAttack",value:-.1},upRelease:{name:"upRelease",value:.1},downRelease:{name:"downRelease",value:-.1},upFrequency:{name:"upFrequency",value:1},downFrequency:{name:"downFrequency",value:-1},upDepth:{name:"upDepth",value:1},downDepth:{name:"downDepth",value:-1},upMix:{name:"upMix",value:1},downMix:{name:"downMix",value:-1},upReverbTime:{name:"upMix",value:.1},downReverbTime:{name:"downReverbTime",value:-.1},upPreDelay:{name:"upPreDelay",value:.1},downPreDelay:{name:"downPreDelay",value:-.1},amplitude:{name:"amplitude",value:u=>n.computePercent(u)}},r=this,s=n.name,o=r.hotkeys[s],a="",l="";for(const u in i)if(xp[u]===o){a=i[u].name;let h=i[u].value;typeof h=="function"&&(h=h(t)),l=h}if(!a)return;let c={instrument:"control",operation:a,value:l,name:s};oscPort.send({address:"/message",args:[{type:"s",value:JSON.stringify(c)}]})},sendOSC(n,e,t,i,r){let s=this;t===rC&&s.leftControlOSC(n,e,i),t===sC&&s.rightControlOSC(n,e,i,r)},async connect(){let n=this;await Ay(),qo.size&&n.$notify("Joy-Con connected")},addInputCBK(n){this.inputCBKS.push(n)},addInputDetailCBK(n){this.inputDetailCBKS.push(n)},watchStatus(){let n=this;setInterval(async()=>{for(const e of qo.values())e.eventListenerAttached||(e.eventListenerAttached=!0,await e.disableVibration(),e.addEventListener("hidinput",t=>{n.control(e,t.detail),n.inputCBKS.forEach(i=>{i&&i(e,t.detail)})}))},2e3)},home(){this.$router.push("/")}}},aC={class:"container"};function lC(n,e,t,i,r,s){const o=Eu("notifications"),a=Eu("router-view");return Me(),Ee("div",aC,[s.currentRouteName!=="start"?(Me(),Ee("img",{key:0,onClick:e[0]||(e[0]=(...l)=>s.home&&s.home(...l)),class:"arrow-back",src:tC,alt:"home"})):Ql("",!0),s.currentRouteName!=="start"?(Me(),Ee("img",{key:1,onClick:e[1]||(e[1]=(...l)=>s.connect&&s.connect(...l)),class:"gamepad",src:nC,alt:"gamepad"})):Ql("",!0),xt(o),xt(a,{class:"view"})])}const cC=Ps(oC,[["render",lC],["__scopeId","data-v-c835587b"]]);const uC=[{path:"/",name:"start",component:QE},{path:"/game/",children:[{path:"hotkeys",component:JT},{path:"dino",component:Ly},{path:"stft",component:UE}]}],hC=hv({history:T0(),routes:uC}),Ia=l0(cC);Ia.config.globalProperties.$utils=Uv;Ia.use(hC);Ia.use(Bv);Ia.mount("#app");
